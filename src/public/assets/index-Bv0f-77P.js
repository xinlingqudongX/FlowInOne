(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function r(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=r(a);fetch(a.href,i)}})();function El(t){const e=Object.create(null);for(const r of t.split(","))e[r]=1;return r=>r in e}const Ke={},Qn=[],hr=()=>{},Sd=()=>!1,Ts=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),Cl=t=>t.startsWith("onUpdate:"),xt=Object.assign,Tl=(t,e)=>{const r=t.indexOf(e);r>-1&&t.splice(r,1)},Op=Object.prototype.hasOwnProperty,He=(t,e)=>Op.call(t,e),Be=Array.isArray,Jn=t=>oi(t)==="[object Map]",Ss=t=>oi(t)==="[object Set]",pf=t=>oi(t)==="[object Date]",Me=t=>typeof t=="function",ot=t=>typeof t=="string",pr=t=>typeof t=="symbol",We=t=>t!==null&&typeof t=="object",Pd=t=>(We(t)||Me(t))&&Me(t.then)&&Me(t.catch),Dd=Object.prototype.toString,oi=t=>Dd.call(t),Np=t=>oi(t).slice(8,-1),Ad=t=>oi(t)==="[object Object]",Sl=t=>ot(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Oa=El(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Ps=t=>{const e=Object.create(null);return(r=>e[r]||(e[r]=t(r)))},Fp=/-\w/g,jr=Ps(t=>t.replace(Fp,e=>e.slice(1).toUpperCase())),_p=/\B([A-Z])/g,In=Ps(t=>t.replace(_p,"-$1").toLowerCase()),kd=Ps(t=>t.charAt(0).toUpperCase()+t.slice(1)),ro=Ps(t=>t?`on${kd(t)}`:""),Zr=(t,e)=>!Object.is(t,e),qi=(t,...e)=>{for(let r=0;r<t.length;r++)t[r](...e)},Bd=(t,e,r,n=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:n,value:r})},Ds=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let yf;const As=()=>yf||(yf=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Pl(t){if(Be(t)){const e={};for(let r=0;r<t.length;r++){const n=t[r],a=ot(n)?Hp(n):Pl(n);if(a)for(const i in a)e[i]=a[i]}return e}else if(ot(t)||We(t))return t}const zp=/;(?![^(]*\))/g,Vp=/:([^]+)/,qp=/\/\*[^]*?\*\//g;function Hp(t){const e={};return t.replace(qp,"").split(zp).forEach(r=>{if(r){const n=r.split(Vp);n.length>1&&(e[n[0].trim()]=n[1].trim())}}),e}function ks(t){let e="";if(ot(t))e=t;else if(Be(t))for(let r=0;r<t.length;r++){const n=ks(t[r]);n&&(e+=n+" ")}else if(We(t))for(const r in t)t[r]&&(e+=r+" ");return e.trim()}const $p="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Up=El($p);function Rd(t){return!!t||t===""}function Gp(t,e){if(t.length!==e.length)return!1;let r=!0;for(let n=0;r&&n<t.length;n++)r=ui(t[n],e[n]);return r}function ui(t,e){if(t===e)return!0;let r=pf(t),n=pf(e);if(r||n)return r&&n?t.getTime()===e.getTime():!1;if(r=pr(t),n=pr(e),r||n)return t===e;if(r=Be(t),n=Be(e),r||n)return r&&n?Gp(t,e):!1;if(r=We(t),n=We(e),r||n){if(!r||!n)return!1;const a=Object.keys(t).length,i=Object.keys(e).length;if(a!==i)return!1;for(const s in t){const o=t.hasOwnProperty(s),u=e.hasOwnProperty(s);if(o&&!u||!o&&u||!ui(t[s],e[s]))return!1}}return String(t)===String(e)}function Wp(t,e){return t.findIndex(r=>ui(r,e))}const Md=t=>!!(t&&t.__v_isRef===!0),Ba=t=>ot(t)?t:t==null?"":Be(t)||We(t)&&(t.toString===Dd||!Me(t.toString))?Md(t)?Ba(t.value):JSON.stringify(t,Id,2):String(t),Id=(t,e)=>Md(e)?Id(t,e.value):Jn(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((r,[n,a],i)=>(r[no(n,i)+" =>"]=a,r),{})}:Ss(e)?{[`Set(${e.size})`]:[...e.values()].map(r=>no(r))}:pr(e)?no(e):We(e)&&!Be(e)&&!Ad(e)?String(e):e,no=(t,e="")=>{var r;return pr(t)?`Symbol(${(r=t.description)!=null?r:e})`:t};let Vt;class Kp{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.__v_skip=!0,this.parent=Vt,!e&&Vt&&(this.index=(Vt.scopes||(Vt.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,r;if(this.scopes)for(e=0,r=this.scopes.length;e<r;e++)this.scopes[e].pause();for(e=0,r=this.effects.length;e<r;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,r;if(this.scopes)for(e=0,r=this.scopes.length;e<r;e++)this.scopes[e].resume();for(e=0,r=this.effects.length;e<r;e++)this.effects[e].resume()}}run(e){if(this._active){const r=Vt;try{return Vt=this,e()}finally{Vt=r}}}on(){++this._on===1&&(this.prevScope=Vt,Vt=this)}off(){this._on>0&&--this._on===0&&(Vt=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let r,n;for(r=0,n=this.effects.length;r<n;r++)this.effects[r].stop();for(this.effects.length=0,r=0,n=this.cleanups.length;r<n;r++)this.cleanups[r]();if(this.cleanups.length=0,this.scopes){for(r=0,n=this.scopes.length;r<n;r++)this.scopes[r].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const a=this.parent.scopes.pop();a&&a!==this&&(this.parent.scopes[this.index]=a,a.index=this.index)}this.parent=void 0}}}function Yp(){return Vt}let Ze;const ao=new WeakSet;class Ld{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Vt&&Vt.active&&Vt.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,ao.has(this)&&(ao.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Nd(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,mf(this),Fd(this);const e=Ze,r=tr;Ze=this,tr=!0;try{return this.fn()}finally{_d(this),Ze=e,tr=r,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)kl(e);this.deps=this.depsTail=void 0,mf(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?ao.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Gu(this)&&this.run()}get dirty(){return Gu(this)}}let Od=0,Na,Fa;function Nd(t,e=!1){if(t.flags|=8,e){t.next=Fa,Fa=t;return}t.next=Na,Na=t}function Dl(){Od++}function Al(){if(--Od>0)return;if(Fa){let e=Fa;for(Fa=void 0;e;){const r=e.next;e.next=void 0,e.flags&=-9,e=r}}let t;for(;Na;){let e=Na;for(Na=void 0;e;){const r=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(n){t||(t=n)}e=r}}if(t)throw t}function Fd(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function _d(t){let e,r=t.depsTail,n=r;for(;n;){const a=n.prevDep;n.version===-1?(n===r&&(r=a),kl(n),Xp(n)):e=n,n.dep.activeLink=n.prevActiveLink,n.prevActiveLink=void 0,n=a}t.deps=e,t.depsTail=r}function Gu(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(zd(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function zd(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===Wa)||(t.globalVersion=Wa,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!Gu(t))))return;t.flags|=2;const e=t.dep,r=Ze,n=tr;Ze=t,tr=!0;try{Fd(t);const a=t.fn(t._value);(e.version===0||Zr(a,t._value))&&(t.flags|=128,t._value=a,e.version++)}catch(a){throw e.version++,a}finally{Ze=r,tr=n,_d(t),t.flags&=-3}}function kl(t,e=!1){const{dep:r,prevSub:n,nextSub:a}=t;if(n&&(n.nextSub=a,t.prevSub=void 0),a&&(a.prevSub=n,t.nextSub=void 0),r.subs===t&&(r.subs=n,!n&&r.computed)){r.computed.flags&=-5;for(let i=r.computed.deps;i;i=i.nextDep)kl(i,!0)}!e&&!--r.sc&&r.map&&r.map.delete(r.key)}function Xp(t){const{prevDep:e,nextDep:r}=t;e&&(e.nextDep=r,t.prevDep=void 0),r&&(r.prevDep=e,t.nextDep=void 0)}let tr=!0;const Vd=[];function Mr(){Vd.push(tr),tr=!1}function Ir(){const t=Vd.pop();tr=t===void 0?!0:t}function mf(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const r=Ze;Ze=void 0;try{e()}finally{Ze=r}}}let Wa=0;class Zp{constructor(e,r){this.sub=e,this.dep=r,this.version=r.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Bl{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!Ze||!tr||Ze===this.computed)return;let r=this.activeLink;if(r===void 0||r.sub!==Ze)r=this.activeLink=new Zp(Ze,this),Ze.deps?(r.prevDep=Ze.depsTail,Ze.depsTail.nextDep=r,Ze.depsTail=r):Ze.deps=Ze.depsTail=r,qd(r);else if(r.version===-1&&(r.version=this.version,r.nextDep)){const n=r.nextDep;n.prevDep=r.prevDep,r.prevDep&&(r.prevDep.nextDep=n),r.prevDep=Ze.depsTail,r.nextDep=void 0,Ze.depsTail.nextDep=r,Ze.depsTail=r,Ze.deps===r&&(Ze.deps=n)}return r}trigger(e){this.version++,Wa++,this.notify(e)}notify(e){Dl();try{for(let r=this.subs;r;r=r.prevSub)r.sub.notify()&&r.sub.dep.notify()}finally{Al()}}}function qd(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let n=e.deps;n;n=n.nextDep)qd(n)}const r=t.dep.subs;r!==t&&(t.prevSub=r,r&&(r.nextSub=t)),t.dep.subs=t}}const Wu=new WeakMap,Sn=Symbol(""),Ku=Symbol(""),Ka=Symbol("");function St(t,e,r){if(tr&&Ze){let n=Wu.get(t);n||Wu.set(t,n=new Map);let a=n.get(r);a||(n.set(r,a=new Bl),a.map=n,a.key=r),a.track()}}function Ar(t,e,r,n,a,i){const s=Wu.get(t);if(!s){Wa++;return}const o=u=>{u&&u.trigger()};if(Dl(),e==="clear")s.forEach(o);else{const u=Be(t),l=u&&Sl(r);if(u&&r==="length"){const f=Number(n);s.forEach((c,v)=>{(v==="length"||v===Ka||!pr(v)&&v>=f)&&o(c)})}else switch((r!==void 0||s.has(void 0))&&o(s.get(r)),l&&o(s.get(Ka)),e){case"add":u?l&&o(s.get("length")):(o(s.get(Sn)),Jn(t)&&o(s.get(Ku)));break;case"delete":u||(o(s.get(Sn)),Jn(t)&&o(s.get(Ku)));break;case"set":Jn(t)&&o(s.get(Sn));break}}Al()}function Fn(t){const e=qe(t);return e===t?e:(St(e,"iterate",Ka),Qt(t)?e:e.map(nr))}function Bs(t){return St(t=qe(t),"iterate",Ka),t}function $r(t,e){return Lr(t)?sa(Pn(t)?nr(e):e):nr(e)}const Qp={__proto__:null,[Symbol.iterator](){return io(this,Symbol.iterator,t=>$r(this,t))},concat(...t){return Fn(this).concat(...t.map(e=>Be(e)?Fn(e):e))},entries(){return io(this,"entries",t=>(t[1]=$r(this,t[1]),t))},every(t,e){return Cr(this,"every",t,e,void 0,arguments)},filter(t,e){return Cr(this,"filter",t,e,r=>r.map(n=>$r(this,n)),arguments)},find(t,e){return Cr(this,"find",t,e,r=>$r(this,r),arguments)},findIndex(t,e){return Cr(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return Cr(this,"findLast",t,e,r=>$r(this,r),arguments)},findLastIndex(t,e){return Cr(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return Cr(this,"forEach",t,e,void 0,arguments)},includes(...t){return so(this,"includes",t)},indexOf(...t){return so(this,"indexOf",t)},join(t){return Fn(this).join(t)},lastIndexOf(...t){return so(this,"lastIndexOf",t)},map(t,e){return Cr(this,"map",t,e,void 0,arguments)},pop(){return wa(this,"pop")},push(...t){return wa(this,"push",t)},reduce(t,...e){return bf(this,"reduce",t,e)},reduceRight(t,...e){return bf(this,"reduceRight",t,e)},shift(){return wa(this,"shift")},some(t,e){return Cr(this,"some",t,e,void 0,arguments)},splice(...t){return wa(this,"splice",t)},toReversed(){return Fn(this).toReversed()},toSorted(t){return Fn(this).toSorted(t)},toSpliced(...t){return Fn(this).toSpliced(...t)},unshift(...t){return wa(this,"unshift",t)},values(){return io(this,"values",t=>$r(this,t))}};function io(t,e,r){const n=Bs(t),a=n[e]();return n!==t&&!Qt(t)&&(a._next=a.next,a.next=()=>{const i=a._next();return i.done||(i.value=r(i.value)),i}),a}const Jp=Array.prototype;function Cr(t,e,r,n,a,i){const s=Bs(t),o=s!==t&&!Qt(t),u=s[e];if(u!==Jp[e]){const c=u.apply(t,i);return o?nr(c):c}let l=r;s!==t&&(o?l=function(c,v){return r.call(this,$r(t,c),v,t)}:r.length>2&&(l=function(c,v){return r.call(this,c,v,t)}));const f=u.call(s,l,n);return o&&a?a(f):f}function bf(t,e,r,n){const a=Bs(t);let i=r;return a!==t&&(Qt(t)?r.length>3&&(i=function(s,o,u){return r.call(this,s,o,u,t)}):i=function(s,o,u){return r.call(this,s,$r(t,o),u,t)}),a[e](i,...n)}function so(t,e,r){const n=qe(t);St(n,"iterate",Ka);const a=n[e](...r);return(a===-1||a===!1)&&Ll(r[0])?(r[0]=qe(r[0]),n[e](...r)):a}function wa(t,e,r=[]){Mr(),Dl();const n=qe(t)[e].apply(t,r);return Al(),Ir(),n}const jp=El("__proto__,__v_isRef,__isVue"),Hd=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(pr));function ey(t){pr(t)||(t=String(t));const e=qe(this);return St(e,"has",t),e.hasOwnProperty(t)}class $d{constructor(e=!1,r=!1){this._isReadonly=e,this._isShallow=r}get(e,r,n){if(r==="__v_skip")return e.__v_skip;const a=this._isReadonly,i=this._isShallow;if(r==="__v_isReactive")return!a;if(r==="__v_isReadonly")return a;if(r==="__v_isShallow")return i;if(r==="__v_raw")return n===(a?i?fy:Kd:i?Wd:Gd).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(n)?e:void 0;const s=Be(e);if(!a){let u;if(s&&(u=Qp[r]))return u;if(r==="hasOwnProperty")return ey}const o=Reflect.get(e,r,Pt(e)?e:n);if((pr(r)?Hd.has(r):jp(r))||(a||St(e,"get",r),i))return o;if(Pt(o)){const u=s&&Sl(r)?o:o.value;return a&&We(u)?Xu(u):u}return We(o)?a?Xu(o):Ml(o):o}}class Ud extends $d{constructor(e=!1){super(!1,e)}set(e,r,n,a){let i=e[r];const s=Be(e)&&Sl(r);if(!this._isShallow){const l=Lr(i);if(!Qt(n)&&!Lr(n)&&(i=qe(i),n=qe(n)),!s&&Pt(i)&&!Pt(n))return l||(i.value=n),!0}const o=s?Number(r)<e.length:He(e,r),u=Reflect.set(e,r,n,Pt(e)?e:a);return e===qe(a)&&(o?Zr(n,i)&&Ar(e,"set",r,n):Ar(e,"add",r,n)),u}deleteProperty(e,r){const n=He(e,r);e[r];const a=Reflect.deleteProperty(e,r);return a&&n&&Ar(e,"delete",r,void 0),a}has(e,r){const n=Reflect.has(e,r);return(!pr(r)||!Hd.has(r))&&St(e,"has",r),n}ownKeys(e){return St(e,"iterate",Be(e)?"length":Sn),Reflect.ownKeys(e)}}class ty extends $d{constructor(e=!1){super(!0,e)}set(e,r){return!0}deleteProperty(e,r){return!0}}const ry=new Ud,ny=new ty,ay=new Ud(!0);const Yu=t=>t,Si=t=>Reflect.getPrototypeOf(t);function iy(t,e,r){return function(...n){const a=this.__v_raw,i=qe(a),s=Jn(i),o=t==="entries"||t===Symbol.iterator&&s,u=t==="keys"&&s,l=a[t](...n),f=r?Yu:e?sa:nr;return!e&&St(i,"iterate",u?Ku:Sn),xt(Object.create(l),{next(){const{value:c,done:v}=l.next();return v?{value:c,done:v}:{value:o?[f(c[0]),f(c[1])]:f(c),done:v}}})}}function Pi(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function sy(t,e){const r={get(a){const i=this.__v_raw,s=qe(i),o=qe(a);t||(Zr(a,o)&&St(s,"get",a),St(s,"get",o));const{has:u}=Si(s),l=e?Yu:t?sa:nr;if(u.call(s,a))return l(i.get(a));if(u.call(s,o))return l(i.get(o));i!==s&&i.get(a)},get size(){const a=this.__v_raw;return!t&&St(qe(a),"iterate",Sn),a.size},has(a){const i=this.__v_raw,s=qe(i),o=qe(a);return t||(Zr(a,o)&&St(s,"has",a),St(s,"has",o)),a===o?i.has(a):i.has(a)||i.has(o)},forEach(a,i){const s=this,o=s.__v_raw,u=qe(o),l=e?Yu:t?sa:nr;return!t&&St(u,"iterate",Sn),o.forEach((f,c)=>a.call(i,l(f),l(c),s))}};return xt(r,t?{add:Pi("add"),set:Pi("set"),delete:Pi("delete"),clear:Pi("clear")}:{add(a){!e&&!Qt(a)&&!Lr(a)&&(a=qe(a));const i=qe(this);return Si(i).has.call(i,a)||(i.add(a),Ar(i,"add",a,a)),this},set(a,i){!e&&!Qt(i)&&!Lr(i)&&(i=qe(i));const s=qe(this),{has:o,get:u}=Si(s);let l=o.call(s,a);l||(a=qe(a),l=o.call(s,a));const f=u.call(s,a);return s.set(a,i),l?Zr(i,f)&&Ar(s,"set",a,i):Ar(s,"add",a,i),this},delete(a){const i=qe(this),{has:s,get:o}=Si(i);let u=s.call(i,a);u||(a=qe(a),u=s.call(i,a)),o&&o.call(i,a);const l=i.delete(a);return u&&Ar(i,"delete",a,void 0),l},clear(){const a=qe(this),i=a.size!==0,s=a.clear();return i&&Ar(a,"clear",void 0,void 0),s}}),["keys","values","entries",Symbol.iterator].forEach(a=>{r[a]=iy(a,t,e)}),r}function Rl(t,e){const r=sy(t,e);return(n,a,i)=>a==="__v_isReactive"?!t:a==="__v_isReadonly"?t:a==="__v_raw"?n:Reflect.get(He(r,a)&&a in n?r:n,a,i)}const oy={get:Rl(!1,!1)},uy={get:Rl(!1,!0)},ly={get:Rl(!0,!1)};const Gd=new WeakMap,Wd=new WeakMap,Kd=new WeakMap,fy=new WeakMap;function cy(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function vy(t){return t.__v_skip||!Object.isExtensible(t)?0:cy(Np(t))}function Ml(t){return Lr(t)?t:Il(t,!1,ry,oy,Gd)}function dy(t){return Il(t,!1,ay,uy,Wd)}function Xu(t){return Il(t,!0,ny,ly,Kd)}function Il(t,e,r,n,a){if(!We(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const i=vy(t);if(i===0)return t;const s=a.get(t);if(s)return s;const o=new Proxy(t,i===2?n:r);return a.set(t,o),o}function Pn(t){return Lr(t)?Pn(t.__v_raw):!!(t&&t.__v_isReactive)}function Lr(t){return!!(t&&t.__v_isReadonly)}function Qt(t){return!!(t&&t.__v_isShallow)}function Ll(t){return t?!!t.__v_raw:!1}function qe(t){const e=t&&t.__v_raw;return e?qe(e):t}function hy(t){return!He(t,"__v_skip")&&Object.isExtensible(t)&&Bd(t,"__v_skip",!0),t}const nr=t=>We(t)?Ml(t):t,sa=t=>We(t)?Xu(t):t;function Pt(t){return t?t.__v_isRef===!0:!1}function _a(t){return gy(t,!1)}function gy(t,e){return Pt(t)?t:new py(t,e)}class py{constructor(e,r){this.dep=new Bl,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=r?e:qe(e),this._value=r?e:nr(e),this.__v_isShallow=r}get value(){return this.dep.track(),this._value}set value(e){const r=this._rawValue,n=this.__v_isShallow||Qt(e)||Lr(e);e=n?e:qe(e),Zr(e,r)&&(this._rawValue=e,this._value=n?e:nr(e),this.dep.trigger())}}function yy(t){return Pt(t)?t.value:t}const my={get:(t,e,r)=>e==="__v_raw"?t:yy(Reflect.get(t,e,r)),set:(t,e,r,n)=>{const a=t[e];return Pt(a)&&!Pt(r)?(a.value=r,!0):Reflect.set(t,e,r,n)}};function Yd(t){return Pn(t)?t:new Proxy(t,my)}class by{constructor(e,r,n){this.fn=e,this.setter=r,this._value=void 0,this.dep=new Bl(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Wa-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!r,this.isSSR=n}notify(){if(this.flags|=16,!(this.flags&8)&&Ze!==this)return Nd(this,!0),!0}get value(){const e=this.dep.track();return zd(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function wy(t,e,r=!1){let n,a;return Me(t)?n=t:(n=t.get,a=t.set),new by(n,a,r)}const Di={},rs=new WeakMap;let mn;function xy(t,e=!1,r=mn){if(r){let n=rs.get(r);n||rs.set(r,n=[]),n.push(t)}}function Ey(t,e,r=Ke){const{immediate:n,deep:a,once:i,scheduler:s,augmentJob:o,call:u}=r,l=w=>a?w:Qt(w)||a===!1||a===0?kr(w,1):kr(w);let f,c,v,h,d=!1,p=!1;if(Pt(t)?(c=()=>t.value,d=Qt(t)):Pn(t)?(c=()=>l(t),d=!0):Be(t)?(p=!0,d=t.some(w=>Pn(w)||Qt(w)),c=()=>t.map(w=>{if(Pt(w))return w.value;if(Pn(w))return l(w);if(Me(w))return u?u(w,2):w()})):Me(t)?e?c=u?()=>u(t,2):t:c=()=>{if(v){Mr();try{v()}finally{Ir()}}const w=mn;mn=f;try{return u?u(t,3,[h]):t(h)}finally{mn=w}}:c=hr,e&&a){const w=c,E=a===!0?1/0:a;c=()=>kr(w(),E)}const g=Yp(),y=()=>{f.stop(),g&&g.active&&Tl(g.effects,f)};if(i&&e){const w=e;e=(...E)=>{w(...E),y()}}let m=p?new Array(t.length).fill(Di):Di;const b=w=>{if(!(!(f.flags&1)||!f.dirty&&!w))if(e){const E=f.run();if(a||d||(p?E.some((T,x)=>Zr(T,m[x])):Zr(E,m))){v&&v();const T=mn;mn=f;try{const x=[E,m===Di?void 0:p&&m[0]===Di?[]:m,h];m=E,u?u(e,3,x):e(...x)}finally{mn=T}}}else f.run()};return o&&o(b),f=new Ld(c),f.scheduler=s?()=>s(b,!1):b,h=w=>xy(w,!1,f),v=f.onStop=()=>{const w=rs.get(f);if(w){if(u)u(w,4);else for(const E of w)E();rs.delete(f)}},e?n?b(!0):m=f.run():s?s(b.bind(null,!0),!0):f.run(),y.pause=f.pause.bind(f),y.resume=f.resume.bind(f),y.stop=y,y}function kr(t,e=1/0,r){if(e<=0||!We(t)||t.__v_skip||(r=r||new Map,(r.get(t)||0)>=e))return t;if(r.set(t,e),e--,Pt(t))kr(t.value,e,r);else if(Be(t))for(let n=0;n<t.length;n++)kr(t[n],e,r);else if(Ss(t)||Jn(t))t.forEach(n=>{kr(n,e,r)});else if(Ad(t)){for(const n in t)kr(t[n],e,r);for(const n of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,n)&&kr(t[n],e,r)}return t}function li(t,e,r,n){try{return n?t(...n):t()}catch(a){Rs(a,e,r)}}function yr(t,e,r,n){if(Me(t)){const a=li(t,e,r,n);return a&&Pd(a)&&a.catch(i=>{Rs(i,e,r)}),a}if(Be(t)){const a=[];for(let i=0;i<t.length;i++)a.push(yr(t[i],e,r,n));return a}}function Rs(t,e,r,n=!0){const a=e?e.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:s}=e&&e.appContext.config||Ke;if(e){let o=e.parent;const u=e.proxy,l=`https://vuejs.org/error-reference/#runtime-${r}`;for(;o;){const f=o.ec;if(f){for(let c=0;c<f.length;c++)if(f[c](t,u,l)===!1)return}o=o.parent}if(i){Mr(),li(i,null,10,[t,u,l]),Ir();return}}Cy(t,r,a,n,s)}function Cy(t,e,r,n=!0,a=!1){if(a)throw t;console.error(t)}const It=[];let lr=-1;const jn=[];let Ur=null,Wn=0;const Xd=Promise.resolve();let ns=null;function Zd(t){const e=ns||Xd;return t?e.then(this?t.bind(this):t):e}function Ty(t){let e=lr+1,r=It.length;for(;e<r;){const n=e+r>>>1,a=It[n],i=Ya(a);i<t||i===t&&a.flags&2?e=n+1:r=n}return e}function Ol(t){if(!(t.flags&1)){const e=Ya(t),r=It[It.length-1];!r||!(t.flags&2)&&e>=Ya(r)?It.push(t):It.splice(Ty(e),0,t),t.flags|=1,Qd()}}function Qd(){ns||(ns=Xd.then(jd))}function Sy(t){Be(t)?jn.push(...t):Ur&&t.id===-1?Ur.splice(Wn+1,0,t):t.flags&1||(jn.push(t),t.flags|=1),Qd()}function wf(t,e,r=lr+1){for(;r<It.length;r++){const n=It[r];if(n&&n.flags&2){if(t&&n.id!==t.uid)continue;It.splice(r,1),r--,n.flags&4&&(n.flags&=-2),n(),n.flags&4||(n.flags&=-2)}}}function Jd(t){if(jn.length){const e=[...new Set(jn)].sort((r,n)=>Ya(r)-Ya(n));if(jn.length=0,Ur){Ur.push(...e);return}for(Ur=e,Wn=0;Wn<Ur.length;Wn++){const r=Ur[Wn];r.flags&4&&(r.flags&=-2),r.flags&8||r(),r.flags&=-2}Ur=null,Wn=0}}const Ya=t=>t.id==null?t.flags&2?-1:1/0:t.id;function jd(t){try{for(lr=0;lr<It.length;lr++){const e=It[lr];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),li(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;lr<It.length;lr++){const e=It[lr];e&&(e.flags&=-2)}lr=-1,It.length=0,Jd(),ns=null,(It.length||jn.length)&&jd()}}let Xt=null,eh=null;function as(t){const e=Xt;return Xt=t,eh=t&&t.type.__scopeId||null,e}function Py(t,e=Xt,r){if(!e||t._n)return t;const n=(...a)=>{n._d&&Rf(-1);const i=as(e);let s;try{s=t(...a)}finally{as(i),n._d&&Rf(1)}return s};return n._n=!0,n._c=!0,n._d=!0,n}function xa(t,e){if(Xt===null)return t;const r=Os(Xt),n=t.dirs||(t.dirs=[]);for(let a=0;a<e.length;a++){let[i,s,o,u=Ke]=e[a];i&&(Me(i)&&(i={mounted:i,updated:i}),i.deep&&kr(s),n.push({dir:i,instance:r,value:s,oldValue:void 0,arg:o,modifiers:u}))}return t}function hn(t,e,r,n){const a=t.dirs,i=e&&e.dirs;for(let s=0;s<a.length;s++){const o=a[s];i&&(o.oldValue=i[s].value);let u=o.dir[n];u&&(Mr(),yr(u,r,8,[t.el,o,t,e]),Ir())}}function Dy(t,e){if(Lt){let r=Lt.provides;const n=Lt.parent&&Lt.parent.provides;n===r&&(r=Lt.provides=Object.create(n)),r[t]=e}}function Hi(t,e,r=!1){const n=Pm();if(n||ea){let a=ea?ea._context.provides:n?n.parent==null||n.ce?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:void 0;if(a&&t in a)return a[t];if(arguments.length>1)return r&&Me(e)?e.call(n&&n.proxy):e}}const Ay=Symbol.for("v-scx"),ky=()=>Hi(Ay);function oo(t,e,r){return th(t,e,r)}function th(t,e,r=Ke){const{immediate:n,deep:a,flush:i,once:s}=r,o=xt({},r),u=e&&n||!e&&i!=="post";let l;if(Za){if(i==="sync"){const h=ky();l=h.__watcherHandles||(h.__watcherHandles=[])}else if(!u){const h=()=>{};return h.stop=hr,h.resume=hr,h.pause=hr,h}}const f=Lt;o.call=(h,d,p)=>yr(h,f,d,p);let c=!1;i==="post"?o.scheduler=h=>{zt(h,f&&f.suspense)}:i!=="sync"&&(c=!0,o.scheduler=(h,d)=>{d?h():Ol(h)}),o.augmentJob=h=>{e&&(h.flags|=4),c&&(h.flags|=2,f&&(h.id=f.uid,h.i=f))};const v=Ey(t,e,o);return Za&&(l?l.push(v):u&&v()),v}function By(t,e,r){const n=this.proxy,a=ot(t)?t.includes(".")?rh(n,t):()=>n[t]:t.bind(n,n);let i;Me(e)?i=e:(i=e.handler,r=e);const s=fi(this),o=th(a,i.bind(n),r);return s(),o}function rh(t,e){const r=e.split(".");return()=>{let n=t;for(let a=0;a<r.length&&n;a++)n=n[r[a]];return n}}const Ry=Symbol("_vte"),My=t=>t.__isTeleport,Iy=Symbol("_leaveCb");function Nl(t,e){t.shapeFlag&6&&t.component?(t.transition=e,Nl(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function nh(t,e){return Me(t)?xt({name:t.name},e,{setup:t}):t}function ah(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}function xf(t,e){let r;return!!((r=Object.getOwnPropertyDescriptor(t,e))&&!r.configurable)}const is=new WeakMap;function za(t,e,r,n,a=!1){if(Be(t)){t.forEach((p,g)=>za(p,e&&(Be(e)?e[g]:e),r,n,a));return}if(Va(n)&&!a){n.shapeFlag&512&&n.type.__asyncResolved&&n.component.subTree.component&&za(t,e,r,n.component.subTree);return}const i=n.shapeFlag&4?Os(n.component):n.el,s=a?null:i,{i:o,r:u}=t,l=e&&e.r,f=o.refs===Ke?o.refs={}:o.refs,c=o.setupState,v=qe(c),h=c===Ke?Sd:p=>xf(f,p)?!1:He(v,p),d=(p,g)=>!(g&&xf(f,g));if(l!=null&&l!==u){if(Ef(e),ot(l))f[l]=null,h(l)&&(c[l]=null);else if(Pt(l)){const p=e;d(l,p.k)&&(l.value=null),p.k&&(f[p.k]=null)}}if(Me(u))li(u,o,12,[s,f]);else{const p=ot(u),g=Pt(u);if(p||g){const y=()=>{if(t.f){const m=p?h(u)?c[u]:f[u]:d()||!t.k?u.value:f[t.k];if(a)Be(m)&&Tl(m,i);else if(Be(m))m.includes(i)||m.push(i);else if(p)f[u]=[i],h(u)&&(c[u]=f[u]);else{const b=[i];d(u,t.k)&&(u.value=b),t.k&&(f[t.k]=b)}}else p?(f[u]=s,h(u)&&(c[u]=s)):g&&(d(u,t.k)&&(u.value=s),t.k&&(f[t.k]=s))};if(s){const m=()=>{y(),is.delete(t)};m.id=-1,is.set(t,m),zt(m,r)}else Ef(t),y()}}}function Ef(t){const e=is.get(t);e&&(e.flags|=8,is.delete(t))}As().requestIdleCallback;As().cancelIdleCallback;const Va=t=>!!t.type.__asyncLoader,ih=t=>t.type.__isKeepAlive;function Ly(t,e){sh(t,"a",e)}function Oy(t,e){sh(t,"da",e)}function sh(t,e,r=Lt){const n=t.__wdc||(t.__wdc=()=>{let a=r;for(;a;){if(a.isDeactivated)return;a=a.parent}return t()});if(Ms(e,n,r),r){let a=r.parent;for(;a&&a.parent;)ih(a.parent.vnode)&&Ny(n,e,r,a),a=a.parent}}function Ny(t,e,r,n){const a=Ms(e,t,n,!0);lh(()=>{Tl(n[e],a)},r)}function Ms(t,e,r=Lt,n=!1){if(r){const a=r[t]||(r[t]=[]),i=e.__weh||(e.__weh=(...s)=>{Mr();const o=fi(r),u=yr(e,r,t,s);return o(),Ir(),u});return n?a.unshift(i):a.push(i),i}}const Fr=t=>(e,r=Lt)=>{(!Za||t==="sp")&&Ms(t,(...n)=>e(...n),r)},Fy=Fr("bm"),oh=Fr("m"),_y=Fr("bu"),zy=Fr("u"),uh=Fr("bum"),lh=Fr("um"),Vy=Fr("sp"),qy=Fr("rtg"),Hy=Fr("rtc");function $y(t,e=Lt){Ms("ec",t,e)}const Uy=Symbol.for("v-ndc");function Gy(t,e,r,n){let a;const i=r,s=Be(t);if(s||ot(t)){const o=s&&Pn(t);let u=!1,l=!1;o&&(u=!Qt(t),l=Lr(t),t=Bs(t)),a=new Array(t.length);for(let f=0,c=t.length;f<c;f++)a[f]=e(u?l?sa(nr(t[f])):nr(t[f]):t[f],f,void 0,i)}else if(typeof t=="number"){a=new Array(t);for(let o=0;o<t;o++)a[o]=e(o+1,o,void 0,i)}else if(We(t))if(t[Symbol.iterator])a=Array.from(t,(o,u)=>e(o,u,void 0,i));else{const o=Object.keys(t);a=new Array(o.length);for(let u=0,l=o.length;u<l;u++){const f=o[u];a[u]=e(t[f],f,u,i)}}else a=[];return a}const Zu=t=>t?Bh(t)?Os(t):Zu(t.parent):null,qa=xt(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Zu(t.parent),$root:t=>Zu(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>ch(t),$forceUpdate:t=>t.f||(t.f=()=>{Ol(t.update)}),$nextTick:t=>t.n||(t.n=Zd.bind(t.proxy)),$watch:t=>By.bind(t)}),uo=(t,e)=>t!==Ke&&!t.__isScriptSetup&&He(t,e),Wy={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:r,setupState:n,data:a,props:i,accessCache:s,type:o,appContext:u}=t;if(e[0]!=="$"){const v=s[e];if(v!==void 0)switch(v){case 1:return n[e];case 2:return a[e];case 4:return r[e];case 3:return i[e]}else{if(uo(n,e))return s[e]=1,n[e];if(a!==Ke&&He(a,e))return s[e]=2,a[e];if(He(i,e))return s[e]=3,i[e];if(r!==Ke&&He(r,e))return s[e]=4,r[e];Qu&&(s[e]=0)}}const l=qa[e];let f,c;if(l)return e==="$attrs"&&St(t.attrs,"get",""),l(t);if((f=o.__cssModules)&&(f=f[e]))return f;if(r!==Ke&&He(r,e))return s[e]=4,r[e];if(c=u.config.globalProperties,He(c,e))return c[e]},set({_:t},e,r){const{data:n,setupState:a,ctx:i}=t;return uo(a,e)?(a[e]=r,!0):n!==Ke&&He(n,e)?(n[e]=r,!0):He(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(i[e]=r,!0)},has({_:{data:t,setupState:e,accessCache:r,ctx:n,appContext:a,props:i,type:s}},o){let u;return!!(r[o]||t!==Ke&&o[0]!=="$"&&He(t,o)||uo(e,o)||He(i,o)||He(n,o)||He(qa,o)||He(a.config.globalProperties,o)||(u=s.__cssModules)&&u[o])},defineProperty(t,e,r){return r.get!=null?t._.accessCache[e]=0:He(r,"value")&&this.set(t,e,r.value,null),Reflect.defineProperty(t,e,r)}};function Cf(t){return Be(t)?t.reduce((e,r)=>(e[r]=null,e),{}):t}let Qu=!0;function Ky(t){const e=ch(t),r=t.proxy,n=t.ctx;Qu=!1,e.beforeCreate&&Tf(e.beforeCreate,t,"bc");const{data:a,computed:i,methods:s,watch:o,provide:u,inject:l,created:f,beforeMount:c,mounted:v,beforeUpdate:h,updated:d,activated:p,deactivated:g,beforeDestroy:y,beforeUnmount:m,destroyed:b,unmounted:w,render:E,renderTracked:T,renderTriggered:x,errorCaptured:S,serverPrefetch:D,expose:A,inheritAttrs:k,components:R,directives:M,filters:L}=e;if(l&&Yy(l,n,null),s)for(const I in s){const F=s[I];Me(F)&&(n[I]=F.bind(r))}if(a){const I=a.call(r,r);We(I)&&(t.data=Ml(I))}if(Qu=!0,i)for(const I in i){const F=i[I],H=Me(F)?F.bind(r,r):Me(F.get)?F.get.bind(r,r):hr,G=!Me(F)&&Me(F.set)?F.set.bind(r):hr,z=Mm({get:H,set:G});Object.defineProperty(n,I,{enumerable:!0,configurable:!0,get:()=>z.value,set:V=>z.value=V})}if(o)for(const I in o)fh(o[I],n,r,I);if(u){const I=Me(u)?u.call(r):u;Reflect.ownKeys(I).forEach(F=>{Dy(F,I[F])})}f&&Tf(f,t,"c");function O(I,F){Be(F)?F.forEach(H=>I(H.bind(r))):F&&I(F.bind(r))}if(O(Fy,c),O(oh,v),O(_y,h),O(zy,d),O(Ly,p),O(Oy,g),O($y,S),O(Hy,T),O(qy,x),O(uh,m),O(lh,w),O(Vy,D),Be(A))if(A.length){const I=t.exposed||(t.exposed={});A.forEach(F=>{Object.defineProperty(I,F,{get:()=>r[F],set:H=>r[F]=H,enumerable:!0})})}else t.exposed||(t.exposed={});E&&t.render===hr&&(t.render=E),k!=null&&(t.inheritAttrs=k),R&&(t.components=R),M&&(t.directives=M),D&&ah(t)}function Yy(t,e,r=hr){Be(t)&&(t=Ju(t));for(const n in t){const a=t[n];let i;We(a)?"default"in a?i=Hi(a.from||n,a.default,!0):i=Hi(a.from||n):i=Hi(a),Pt(i)?Object.defineProperty(e,n,{enumerable:!0,configurable:!0,get:()=>i.value,set:s=>i.value=s}):e[n]=i}}function Tf(t,e,r){yr(Be(t)?t.map(n=>n.bind(e.proxy)):t.bind(e.proxy),e,r)}function fh(t,e,r,n){let a=n.includes(".")?rh(r,n):()=>r[n];if(ot(t)){const i=e[t];Me(i)&&oo(a,i)}else if(Me(t))oo(a,t.bind(r));else if(We(t))if(Be(t))t.forEach(i=>fh(i,e,r,n));else{const i=Me(t.handler)?t.handler.bind(r):e[t.handler];Me(i)&&oo(a,i,t)}}function ch(t){const e=t.type,{mixins:r,extends:n}=e,{mixins:a,optionsCache:i,config:{optionMergeStrategies:s}}=t.appContext,o=i.get(e);let u;return o?u=o:!a.length&&!r&&!n?u=e:(u={},a.length&&a.forEach(l=>ss(u,l,s,!0)),ss(u,e,s)),We(e)&&i.set(e,u),u}function ss(t,e,r,n=!1){const{mixins:a,extends:i}=e;i&&ss(t,i,r,!0),a&&a.forEach(s=>ss(t,s,r,!0));for(const s in e)if(!(n&&s==="expose")){const o=Xy[s]||r&&r[s];t[s]=o?o(t[s],e[s]):e[s]}return t}const Xy={data:Sf,props:Pf,emits:Pf,methods:Ra,computed:Ra,beforeCreate:Rt,created:Rt,beforeMount:Rt,mounted:Rt,beforeUpdate:Rt,updated:Rt,beforeDestroy:Rt,beforeUnmount:Rt,destroyed:Rt,unmounted:Rt,activated:Rt,deactivated:Rt,errorCaptured:Rt,serverPrefetch:Rt,components:Ra,directives:Ra,watch:Qy,provide:Sf,inject:Zy};function Sf(t,e){return e?t?function(){return xt(Me(t)?t.call(this,this):t,Me(e)?e.call(this,this):e)}:e:t}function Zy(t,e){return Ra(Ju(t),Ju(e))}function Ju(t){if(Be(t)){const e={};for(let r=0;r<t.length;r++)e[t[r]]=t[r];return e}return t}function Rt(t,e){return t?[...new Set([].concat(t,e))]:e}function Ra(t,e){return t?xt(Object.create(null),t,e):e}function Pf(t,e){return t?Be(t)&&Be(e)?[...new Set([...t,...e])]:xt(Object.create(null),Cf(t),Cf(e??{})):e}function Qy(t,e){if(!t)return e;if(!e)return t;const r=xt(Object.create(null),t);for(const n in e)r[n]=Rt(t[n],e[n]);return r}function vh(){return{app:null,config:{isNativeTag:Sd,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Jy=0;function jy(t,e){return function(n,a=null){Me(n)||(n=xt({},n)),a!=null&&!We(a)&&(a=null);const i=vh(),s=new WeakSet,o=[];let u=!1;const l=i.app={_uid:Jy++,_component:n,_props:a,_container:null,_context:i,_instance:null,version:Im,get config(){return i.config},set config(f){},use(f,...c){return s.has(f)||(f&&Me(f.install)?(s.add(f),f.install(l,...c)):Me(f)&&(s.add(f),f(l,...c))),l},mixin(f){return i.mixins.includes(f)||i.mixins.push(f),l},component(f,c){return c?(i.components[f]=c,l):i.components[f]},directive(f,c){return c?(i.directives[f]=c,l):i.directives[f]},mount(f,c,v){if(!u){const h=l._ceVNode||gr(n,a);return h.appContext=i,v===!0?v="svg":v===!1&&(v=void 0),t(h,f,v),u=!0,l._container=f,f.__vue_app__=l,Os(h.component)}},onUnmount(f){o.push(f)},unmount(){u&&(yr(o,l._instance,16),t(null,l._container),delete l._container.__vue_app__)},provide(f,c){return i.provides[f]=c,l},runWithContext(f){const c=ea;ea=l;try{return f()}finally{ea=c}}};return l}}let ea=null;const em=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${jr(e)}Modifiers`]||t[`${In(e)}Modifiers`];function tm(t,e,...r){if(t.isUnmounted)return;const n=t.vnode.props||Ke;let a=r;const i=e.startsWith("update:"),s=i&&em(n,e.slice(7));s&&(s.trim&&(a=r.map(f=>ot(f)?f.trim():f)),s.number&&(a=r.map(Ds)));let o,u=n[o=ro(e)]||n[o=ro(jr(e))];!u&&i&&(u=n[o=ro(In(e))]),u&&yr(u,t,6,a);const l=n[o+"Once"];if(l){if(!t.emitted)t.emitted={};else if(t.emitted[o])return;t.emitted[o]=!0,yr(l,t,6,a)}}const rm=new WeakMap;function dh(t,e,r=!1){const n=r?rm:e.emitsCache,a=n.get(t);if(a!==void 0)return a;const i=t.emits;let s={},o=!1;if(!Me(t)){const u=l=>{const f=dh(l,e,!0);f&&(o=!0,xt(s,f))};!r&&e.mixins.length&&e.mixins.forEach(u),t.extends&&u(t.extends),t.mixins&&t.mixins.forEach(u)}return!i&&!o?(We(t)&&n.set(t,null),null):(Be(i)?i.forEach(u=>s[u]=null):xt(s,i),We(t)&&n.set(t,s),s)}function Is(t,e){return!t||!Ts(e)?!1:(e=e.slice(2).replace(/Once$/,""),He(t,e[0].toLowerCase()+e.slice(1))||He(t,In(e))||He(t,e))}function Df(t){const{type:e,vnode:r,proxy:n,withProxy:a,propsOptions:[i],slots:s,attrs:o,emit:u,render:l,renderCache:f,props:c,data:v,setupState:h,ctx:d,inheritAttrs:p}=t,g=as(t);let y,m;try{if(r.shapeFlag&4){const w=a||n,E=w;y=vr(l.call(E,w,f,c,h,v,d)),m=o}else{const w=e;y=vr(w.length>1?w(c,{attrs:o,slots:s,emit:u}):w(c,null)),m=e.props?o:nm(o)}}catch(w){Ha.length=0,Rs(w,t,1),y=gr(en)}let b=y;if(m&&p!==!1){const w=Object.keys(m),{shapeFlag:E}=b;w.length&&E&7&&(i&&w.some(Cl)&&(m=am(m,i)),b=oa(b,m,!1,!0))}return r.dirs&&(b=oa(b,null,!1,!0),b.dirs=b.dirs?b.dirs.concat(r.dirs):r.dirs),r.transition&&Nl(b,r.transition),y=b,as(g),y}const nm=t=>{let e;for(const r in t)(r==="class"||r==="style"||Ts(r))&&((e||(e={}))[r]=t[r]);return e},am=(t,e)=>{const r={};for(const n in t)(!Cl(n)||!(n.slice(9)in e))&&(r[n]=t[n]);return r};function im(t,e,r){const{props:n,children:a,component:i}=t,{props:s,children:o,patchFlag:u}=e,l=i.emitsOptions;if(e.dirs||e.transition)return!0;if(r&&u>=0){if(u&1024)return!0;if(u&16)return n?Af(n,s,l):!!s;if(u&8){const f=e.dynamicProps;for(let c=0;c<f.length;c++){const v=f[c];if(hh(s,n,v)&&!Is(l,v))return!0}}}else return(a||o)&&(!o||!o.$stable)?!0:n===s?!1:n?s?Af(n,s,l):!0:!!s;return!1}function Af(t,e,r){const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!0;for(let a=0;a<n.length;a++){const i=n[a];if(hh(e,t,i)&&!Is(r,i))return!0}return!1}function hh(t,e,r){const n=t[r],a=e[r];return r==="style"&&We(n)&&We(a)?!ui(n,a):n!==a}function sm({vnode:t,parent:e},r){for(;e;){const n=e.subTree;if(n.suspense&&n.suspense.activeBranch===t&&(n.el=t.el),n===t)(t=e.vnode).el=r,e=e.parent;else break}}const gh={},ph=()=>Object.create(gh),yh=t=>Object.getPrototypeOf(t)===gh;function om(t,e,r,n=!1){const a={},i=ph();t.propsDefaults=Object.create(null),mh(t,e,a,i);for(const s in t.propsOptions[0])s in a||(a[s]=void 0);r?t.props=n?a:dy(a):t.type.props?t.props=a:t.props=i,t.attrs=i}function um(t,e,r,n){const{props:a,attrs:i,vnode:{patchFlag:s}}=t,o=qe(a),[u]=t.propsOptions;let l=!1;if((n||s>0)&&!(s&16)){if(s&8){const f=t.vnode.dynamicProps;for(let c=0;c<f.length;c++){let v=f[c];if(Is(t.emitsOptions,v))continue;const h=e[v];if(u)if(He(i,v))h!==i[v]&&(i[v]=h,l=!0);else{const d=jr(v);a[d]=ju(u,o,d,h,t,!1)}else h!==i[v]&&(i[v]=h,l=!0)}}}else{mh(t,e,a,i)&&(l=!0);let f;for(const c in o)(!e||!He(e,c)&&((f=In(c))===c||!He(e,f)))&&(u?r&&(r[c]!==void 0||r[f]!==void 0)&&(a[c]=ju(u,o,c,void 0,t,!0)):delete a[c]);if(i!==o)for(const c in i)(!e||!He(e,c))&&(delete i[c],l=!0)}l&&Ar(t.attrs,"set","")}function mh(t,e,r,n){const[a,i]=t.propsOptions;let s=!1,o;if(e)for(let u in e){if(Oa(u))continue;const l=e[u];let f;a&&He(a,f=jr(u))?!i||!i.includes(f)?r[f]=l:(o||(o={}))[f]=l:Is(t.emitsOptions,u)||(!(u in n)||l!==n[u])&&(n[u]=l,s=!0)}if(i){const u=qe(r),l=o||Ke;for(let f=0;f<i.length;f++){const c=i[f];r[c]=ju(a,u,c,l[c],t,!He(l,c))}}return s}function ju(t,e,r,n,a,i){const s=t[r];if(s!=null){const o=He(s,"default");if(o&&n===void 0){const u=s.default;if(s.type!==Function&&!s.skipFactory&&Me(u)){const{propsDefaults:l}=a;if(r in l)n=l[r];else{const f=fi(a);n=l[r]=u.call(null,e),f()}}else n=u;a.ce&&a.ce._setProp(r,n)}s[0]&&(i&&!o?n=!1:s[1]&&(n===""||n===In(r))&&(n=!0))}return n}const lm=new WeakMap;function bh(t,e,r=!1){const n=r?lm:e.propsCache,a=n.get(t);if(a)return a;const i=t.props,s={},o=[];let u=!1;if(!Me(t)){const f=c=>{u=!0;const[v,h]=bh(c,e,!0);xt(s,v),h&&o.push(...h)};!r&&e.mixins.length&&e.mixins.forEach(f),t.extends&&f(t.extends),t.mixins&&t.mixins.forEach(f)}if(!i&&!u)return We(t)&&n.set(t,Qn),Qn;if(Be(i))for(let f=0;f<i.length;f++){const c=jr(i[f]);kf(c)&&(s[c]=Ke)}else if(i)for(const f in i){const c=jr(f);if(kf(c)){const v=i[f],h=s[c]=Be(v)||Me(v)?{type:v}:xt({},v),d=h.type;let p=!1,g=!0;if(Be(d))for(let y=0;y<d.length;++y){const m=d[y],b=Me(m)&&m.name;if(b==="Boolean"){p=!0;break}else b==="String"&&(g=!1)}else p=Me(d)&&d.name==="Boolean";h[0]=p,h[1]=g,(p||He(h,"default"))&&o.push(c)}}const l=[s,o];return We(t)&&n.set(t,l),l}function kf(t){return t[0]!=="$"&&!Oa(t)}const Fl=t=>t==="_"||t==="_ctx"||t==="$stable",_l=t=>Be(t)?t.map(vr):[vr(t)],fm=(t,e,r)=>{if(e._n)return e;const n=Py((...a)=>_l(e(...a)),r);return n._c=!1,n},wh=(t,e,r)=>{const n=t._ctx;for(const a in t){if(Fl(a))continue;const i=t[a];if(Me(i))e[a]=fm(a,i,n);else if(i!=null){const s=_l(i);e[a]=()=>s}}},xh=(t,e)=>{const r=_l(e);t.slots.default=()=>r},Eh=(t,e,r)=>{for(const n in e)(r||!Fl(n))&&(t[n]=e[n])},cm=(t,e,r)=>{const n=t.slots=ph();if(t.vnode.shapeFlag&32){const a=e._;a?(Eh(n,e,r),r&&Bd(n,"_",a,!0)):wh(e,n)}else e&&xh(t,e)},vm=(t,e,r)=>{const{vnode:n,slots:a}=t;let i=!0,s=Ke;if(n.shapeFlag&32){const o=e._;o?r&&o===1?i=!1:Eh(a,e,r):(i=!e.$stable,wh(e,a)),s=e}else e&&(xh(t,e),s={default:1});if(i)for(const o in a)!Fl(o)&&s[o]==null&&delete a[o]},zt=ym;function dm(t){return hm(t)}function hm(t,e){const r=As();r.__VUE__=!0;const{insert:n,remove:a,patchProp:i,createElement:s,createText:o,createComment:u,setText:l,setElementText:f,parentNode:c,nextSibling:v,setScopeId:h=hr,insertStaticContent:d}=t,p=(C,B,_,K=null,J=null,Z=null,te=void 0,j=null,Y=!!B.dynamicChildren)=>{if(C===B)return;C&&!Ea(C,B)&&(K=ve(C),V(C,J,Z,!0),C=null),B.patchFlag===-2&&(Y=!1,B.dynamicChildren=null);const{type:W,ref:fe,shapeFlag:se}=B;switch(W){case Ls:g(C,B,_,K);break;case en:y(C,B,_,K);break;case fo:C==null&&m(B,_,K,te);break;case cr:R(C,B,_,K,J,Z,te,j,Y);break;default:se&1?E(C,B,_,K,J,Z,te,j,Y):se&6?M(C,B,_,K,J,Z,te,j,Y):(se&64||se&128)&&W.process(C,B,_,K,J,Z,te,j,Y,q)}fe!=null&&J?za(fe,C&&C.ref,Z,B||C,!B):fe==null&&C&&C.ref!=null&&za(C.ref,null,Z,C,!0)},g=(C,B,_,K)=>{if(C==null)n(B.el=o(B.children),_,K);else{const J=B.el=C.el;B.children!==C.children&&l(J,B.children)}},y=(C,B,_,K)=>{C==null?n(B.el=u(B.children||""),_,K):B.el=C.el},m=(C,B,_,K)=>{[C.el,C.anchor]=d(C.children,B,_,K,C.el,C.anchor)},b=({el:C,anchor:B},_,K)=>{let J;for(;C&&C!==B;)J=v(C),n(C,_,K),C=J;n(B,_,K)},w=({el:C,anchor:B})=>{let _;for(;C&&C!==B;)_=v(C),a(C),C=_;a(B)},E=(C,B,_,K,J,Z,te,j,Y)=>{if(B.type==="svg"?te="svg":B.type==="math"&&(te="mathml"),C==null)T(B,_,K,J,Z,te,j,Y);else{const W=C.el&&C.el._isVueCE?C.el:null;try{W&&W._beginPatch(),D(C,B,J,Z,te,j,Y)}finally{W&&W._endPatch()}}},T=(C,B,_,K,J,Z,te,j)=>{let Y,W;const{props:fe,shapeFlag:se,transition:le,dirs:de}=C;if(Y=C.el=s(C.type,Z,fe&&fe.is,fe),se&8?f(Y,C.children):se&16&&S(C.children,Y,null,K,J,lo(C,Z),te,j),de&&hn(C,null,K,"created"),x(Y,C,C.scopeId,te,K),fe){for(const Pe in fe)Pe!=="value"&&!Oa(Pe)&&i(Y,Pe,null,fe[Pe],Z,K);"value"in fe&&i(Y,"value",null,fe.value,Z),(W=fe.onVnodeBeforeMount)&&ir(W,K,C)}de&&hn(C,null,K,"beforeMount");const ye=gm(J,le);ye&&le.beforeEnter(Y),n(Y,B,_),((W=fe&&fe.onVnodeMounted)||ye||de)&&zt(()=>{W&&ir(W,K,C),ye&&le.enter(Y),de&&hn(C,null,K,"mounted")},J)},x=(C,B,_,K,J)=>{if(_&&h(C,_),K)for(let Z=0;Z<K.length;Z++)h(C,K[Z]);if(J){let Z=J.subTree;if(B===Z||Ph(Z.type)&&(Z.ssContent===B||Z.ssFallback===B)){const te=J.vnode;x(C,te,te.scopeId,te.slotScopeIds,J.parent)}}},S=(C,B,_,K,J,Z,te,j,Y=0)=>{for(let W=Y;W<C.length;W++){const fe=C[W]=j?Pr(C[W]):vr(C[W]);p(null,fe,B,_,K,J,Z,te,j)}},D=(C,B,_,K,J,Z,te)=>{const j=B.el=C.el;let{patchFlag:Y,dynamicChildren:W,dirs:fe}=B;Y|=C.patchFlag&16;const se=C.props||Ke,le=B.props||Ke;let de;if(_&&gn(_,!1),(de=le.onVnodeBeforeUpdate)&&ir(de,_,B,C),fe&&hn(B,C,_,"beforeUpdate"),_&&gn(_,!0),(se.innerHTML&&le.innerHTML==null||se.textContent&&le.textContent==null)&&f(j,""),W?A(C.dynamicChildren,W,j,_,K,lo(B,J),Z):te||F(C,B,j,null,_,K,lo(B,J),Z,!1),Y>0){if(Y&16)k(j,se,le,_,J);else if(Y&2&&se.class!==le.class&&i(j,"class",null,le.class,J),Y&4&&i(j,"style",se.style,le.style,J),Y&8){const ye=B.dynamicProps;for(let Pe=0;Pe<ye.length;Pe++){const Ce=ye[Pe],Re=se[Ce],Ee=le[Ce];(Ee!==Re||Ce==="value")&&i(j,Ce,Re,Ee,J,_)}}Y&1&&C.children!==B.children&&f(j,B.children)}else!te&&W==null&&k(j,se,le,_,J);((de=le.onVnodeUpdated)||fe)&&zt(()=>{de&&ir(de,_,B,C),fe&&hn(B,C,_,"updated")},K)},A=(C,B,_,K,J,Z,te)=>{for(let j=0;j<B.length;j++){const Y=C[j],W=B[j],fe=Y.el&&(Y.type===cr||!Ea(Y,W)||Y.shapeFlag&198)?c(Y.el):_;p(Y,W,fe,null,K,J,Z,te,!0)}},k=(C,B,_,K,J)=>{if(B!==_){if(B!==Ke)for(const Z in B)!Oa(Z)&&!(Z in _)&&i(C,Z,B[Z],null,J,K);for(const Z in _){if(Oa(Z))continue;const te=_[Z],j=B[Z];te!==j&&Z!=="value"&&i(C,Z,j,te,J,K)}"value"in _&&i(C,"value",B.value,_.value,J)}},R=(C,B,_,K,J,Z,te,j,Y)=>{const W=B.el=C?C.el:o(""),fe=B.anchor=C?C.anchor:o("");let{patchFlag:se,dynamicChildren:le,slotScopeIds:de}=B;de&&(j=j?j.concat(de):de),C==null?(n(W,_,K),n(fe,_,K),S(B.children||[],_,fe,J,Z,te,j,Y)):se>0&&se&64&&le&&C.dynamicChildren&&C.dynamicChildren.length===le.length?(A(C.dynamicChildren,le,_,J,Z,te,j),(B.key!=null||J&&B===J.subTree)&&Ch(C,B,!0)):F(C,B,_,fe,J,Z,te,j,Y)},M=(C,B,_,K,J,Z,te,j,Y)=>{B.slotScopeIds=j,C==null?B.shapeFlag&512?J.ctx.activate(B,_,K,te,Y):L(B,_,K,J,Z,te,Y):N(C,B,Y)},L=(C,B,_,K,J,Z,te)=>{const j=C.component=Sm(C,K,J);if(ih(C)&&(j.ctx.renderer=q),Dm(j,!1,te),j.asyncDep){if(J&&J.registerDep(j,O,te),!C.el){const Y=j.subTree=gr(en);y(null,Y,B,_),C.placeholder=Y.el}}else O(j,C,B,_,J,Z,te)},N=(C,B,_)=>{const K=B.component=C.component;if(im(C,B,_))if(K.asyncDep&&!K.asyncResolved){I(K,B,_);return}else K.next=B,K.update();else B.el=C.el,K.vnode=B},O=(C,B,_,K,J,Z,te)=>{const j=()=>{if(C.isMounted){let{next:se,bu:le,u:de,parent:ye,vnode:Pe}=C;{const ee=Th(C);if(ee){se&&(se.el=Pe.el,I(C,se,te)),ee.asyncDep.then(()=>{zt(()=>{C.isUnmounted||W()},J)});return}}let Ce=se,Re;gn(C,!1),se?(se.el=Pe.el,I(C,se,te)):se=Pe,le&&qi(le),(Re=se.props&&se.props.onVnodeBeforeUpdate)&&ir(Re,ye,se,Pe),gn(C,!0);const Ee=Df(C),pe=C.subTree;C.subTree=Ee,p(pe,Ee,c(pe.el),ve(pe),C,J,Z),se.el=Ee.el,Ce===null&&sm(C,Ee.el),de&&zt(de,J),(Re=se.props&&se.props.onVnodeUpdated)&&zt(()=>ir(Re,ye,se,Pe),J)}else{let se;const{el:le,props:de}=B,{bm:ye,m:Pe,parent:Ce,root:Re,type:Ee}=C,pe=Va(B);gn(C,!1),ye&&qi(ye),!pe&&(se=de&&de.onVnodeBeforeMount)&&ir(se,Ce,B),gn(C,!0);{Re.ce&&Re.ce._hasShadowRoot()&&Re.ce._injectChildStyle(Ee);const ee=C.subTree=Df(C);p(null,ee,_,K,C,J,Z),B.el=ee.el}if(Pe&&zt(Pe,J),!pe&&(se=de&&de.onVnodeMounted)){const ee=B;zt(()=>ir(se,Ce,ee),J)}(B.shapeFlag&256||Ce&&Va(Ce.vnode)&&Ce.vnode.shapeFlag&256)&&C.a&&zt(C.a,J),C.isMounted=!0,B=_=K=null}};C.scope.on();const Y=C.effect=new Ld(j);C.scope.off();const W=C.update=Y.run.bind(Y),fe=C.job=Y.runIfDirty.bind(Y);fe.i=C,fe.id=C.uid,Y.scheduler=()=>Ol(fe),gn(C,!0),W()},I=(C,B,_)=>{B.component=C;const K=C.vnode.props;C.vnode=B,C.next=null,um(C,B.props,K,_),vm(C,B.children,_),Mr(),wf(C),Ir()},F=(C,B,_,K,J,Z,te,j,Y=!1)=>{const W=C&&C.children,fe=C?C.shapeFlag:0,se=B.children,{patchFlag:le,shapeFlag:de}=B;if(le>0){if(le&128){G(W,se,_,K,J,Z,te,j,Y);return}else if(le&256){H(W,se,_,K,J,Z,te,j,Y);return}}de&8?(fe&16&&oe(W,J,Z),se!==W&&f(_,se)):fe&16?de&16?G(W,se,_,K,J,Z,te,j,Y):oe(W,J,Z,!0):(fe&8&&f(_,""),de&16&&S(se,_,K,J,Z,te,j,Y))},H=(C,B,_,K,J,Z,te,j,Y)=>{C=C||Qn,B=B||Qn;const W=C.length,fe=B.length,se=Math.min(W,fe);let le;for(le=0;le<se;le++){const de=B[le]=Y?Pr(B[le]):vr(B[le]);p(C[le],de,_,null,J,Z,te,j,Y)}W>fe?oe(C,J,Z,!0,!1,se):S(B,_,K,J,Z,te,j,Y,se)},G=(C,B,_,K,J,Z,te,j,Y)=>{let W=0;const fe=B.length;let se=C.length-1,le=fe-1;for(;W<=se&&W<=le;){const de=C[W],ye=B[W]=Y?Pr(B[W]):vr(B[W]);if(Ea(de,ye))p(de,ye,_,null,J,Z,te,j,Y);else break;W++}for(;W<=se&&W<=le;){const de=C[se],ye=B[le]=Y?Pr(B[le]):vr(B[le]);if(Ea(de,ye))p(de,ye,_,null,J,Z,te,j,Y);else break;se--,le--}if(W>se){if(W<=le){const de=le+1,ye=de<fe?B[de].el:K;for(;W<=le;)p(null,B[W]=Y?Pr(B[W]):vr(B[W]),_,ye,J,Z,te,j,Y),W++}}else if(W>le)for(;W<=se;)V(C[W],J,Z,!0),W++;else{const de=W,ye=W,Pe=new Map;for(W=ye;W<=le;W++){const X=B[W]=Y?Pr(B[W]):vr(B[W]);X.key!=null&&Pe.set(X.key,W)}let Ce,Re=0;const Ee=le-ye+1;let pe=!1,ee=0;const P=new Array(Ee);for(W=0;W<Ee;W++)P[W]=0;for(W=de;W<=se;W++){const X=C[W];if(Re>=Ee){V(X,J,Z,!0);continue}let Q;if(X.key!=null)Q=Pe.get(X.key);else for(Ce=ye;Ce<=le;Ce++)if(P[Ce-ye]===0&&Ea(X,B[Ce])){Q=Ce;break}Q===void 0?V(X,J,Z,!0):(P[Q-ye]=W+1,Q>=ee?ee=Q:pe=!0,p(X,B[Q],_,null,J,Z,te,j,Y),Re++)}const U=pe?pm(P):Qn;for(Ce=U.length-1,W=Ee-1;W>=0;W--){const X=ye+W,Q=B[X],ae=B[X+1],be=X+1<fe?ae.el||Sh(ae):K;P[W]===0?p(null,Q,_,be,J,Z,te,j,Y):pe&&(Ce<0||W!==U[Ce]?z(Q,_,be,2):Ce--)}}},z=(C,B,_,K,J=null)=>{const{el:Z,type:te,transition:j,children:Y,shapeFlag:W}=C;if(W&6){z(C.component.subTree,B,_,K);return}if(W&128){C.suspense.move(B,_,K);return}if(W&64){te.move(C,B,_,q);return}if(te===cr){n(Z,B,_);for(let se=0;se<Y.length;se++)z(Y[se],B,_,K);n(C.anchor,B,_);return}if(te===fo){b(C,B,_);return}if(K!==2&&W&1&&j)if(K===0)j.beforeEnter(Z),n(Z,B,_),zt(()=>j.enter(Z),J);else{const{leave:se,delayLeave:le,afterLeave:de}=j,ye=()=>{C.ctx.isUnmounted?a(Z):n(Z,B,_)},Pe=()=>{Z._isLeaving&&Z[Iy](!0),se(Z,()=>{ye(),de&&de()})};le?le(Z,ye,Pe):Pe()}else n(Z,B,_)},V=(C,B,_,K=!1,J=!1)=>{const{type:Z,props:te,ref:j,children:Y,dynamicChildren:W,shapeFlag:fe,patchFlag:se,dirs:le,cacheIndex:de}=C;if(se===-2&&(J=!1),j!=null&&(Mr(),za(j,null,_,C,!0),Ir()),de!=null&&(B.renderCache[de]=void 0),fe&256){B.ctx.deactivate(C);return}const ye=fe&1&&le,Pe=!Va(C);let Ce;if(Pe&&(Ce=te&&te.onVnodeBeforeUnmount)&&ir(Ce,B,C),fe&6)ne(C.component,_,K);else{if(fe&128){C.suspense.unmount(_,K);return}ye&&hn(C,null,B,"beforeUnmount"),fe&64?C.type.remove(C,B,_,q,K):W&&!W.hasOnce&&(Z!==cr||se>0&&se&64)?oe(W,B,_,!1,!0):(Z===cr&&se&384||!J&&fe&16)&&oe(Y,B,_),K&&re(C)}(Pe&&(Ce=te&&te.onVnodeUnmounted)||ye)&&zt(()=>{Ce&&ir(Ce,B,C),ye&&hn(C,null,B,"unmounted")},_)},re=C=>{const{type:B,el:_,anchor:K,transition:J}=C;if(B===cr){ie(_,K);return}if(B===fo){w(C);return}const Z=()=>{a(_),J&&!J.persisted&&J.afterLeave&&J.afterLeave()};if(C.shapeFlag&1&&J&&!J.persisted){const{leave:te,delayLeave:j}=J,Y=()=>te(_,Z);j?j(C.el,Z,Y):Y()}else Z()},ie=(C,B)=>{let _;for(;C!==B;)_=v(C),a(C),C=_;a(B)},ne=(C,B,_)=>{const{bum:K,scope:J,job:Z,subTree:te,um:j,m:Y,a:W}=C;Bf(Y),Bf(W),K&&qi(K),J.stop(),Z&&(Z.flags|=8,V(te,C,B,_)),j&&zt(j,B),zt(()=>{C.isUnmounted=!0},B)},oe=(C,B,_,K=!1,J=!1,Z=0)=>{for(let te=Z;te<C.length;te++)V(C[te],B,_,K,J)},ve=C=>{if(C.shapeFlag&6)return ve(C.component.subTree);if(C.shapeFlag&128)return C.suspense.next();const B=v(C.anchor||C.el),_=B&&B[Ry];return _?v(_):B};let ge=!1;const ue=(C,B,_)=>{let K;C==null?B._vnode&&(V(B._vnode,null,null,!0),K=B._vnode.component):p(B._vnode||null,C,B,null,null,null,_),B._vnode=C,ge||(ge=!0,wf(K),Jd(),ge=!1)},q={p,um:V,m:z,r:re,mt:L,mc:S,pc:F,pbc:A,n:ve,o:t};return{render:ue,hydrate:void 0,createApp:jy(ue)}}function lo({type:t,props:e},r){return r==="svg"&&t==="foreignObject"||r==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:r}function gn({effect:t,job:e},r){r?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function gm(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function Ch(t,e,r=!1){const n=t.children,a=e.children;if(Be(n)&&Be(a))for(let i=0;i<n.length;i++){const s=n[i];let o=a[i];o.shapeFlag&1&&!o.dynamicChildren&&((o.patchFlag<=0||o.patchFlag===32)&&(o=a[i]=Pr(a[i]),o.el=s.el),!r&&o.patchFlag!==-2&&Ch(s,o)),o.type===Ls&&(o.patchFlag===-1&&(o=a[i]=Pr(o)),o.el=s.el),o.type===en&&!o.el&&(o.el=s.el)}}function pm(t){const e=t.slice(),r=[0];let n,a,i,s,o;const u=t.length;for(n=0;n<u;n++){const l=t[n];if(l!==0){if(a=r[r.length-1],t[a]<l){e[n]=a,r.push(n);continue}for(i=0,s=r.length-1;i<s;)o=i+s>>1,t[r[o]]<l?i=o+1:s=o;l<t[r[i]]&&(i>0&&(e[n]=r[i-1]),r[i]=n)}}for(i=r.length,s=r[i-1];i-- >0;)r[i]=s,s=e[s];return r}function Th(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:Th(e)}function Bf(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}function Sh(t){if(t.placeholder)return t.placeholder;const e=t.component;return e?Sh(e.subTree):null}const Ph=t=>t.__isSuspense;function ym(t,e){e&&e.pendingBranch?Be(t)?e.effects.push(...t):e.effects.push(t):Sy(t)}const cr=Symbol.for("v-fgt"),Ls=Symbol.for("v-txt"),en=Symbol.for("v-cmt"),fo=Symbol.for("v-stc"),Ha=[];let Ut=null;function Br(t=!1){Ha.push(Ut=t?null:[])}function mm(){Ha.pop(),Ut=Ha[Ha.length-1]||null}let Xa=1;function Rf(t,e=!1){Xa+=t,t<0&&Ut&&e&&(Ut.hasOnce=!0)}function Dh(t){return t.dynamicChildren=Xa>0?Ut||Qn:null,mm(),Xa>0&&Ut&&Ut.push(t),t}function Wr(t,e,r,n,a,i){return Dh(me(t,e,r,n,a,i,!0))}function bm(t,e,r,n,a){return Dh(gr(t,e,r,n,a,!0))}function Ah(t){return t?t.__v_isVNode===!0:!1}function Ea(t,e){return t.type===e.type&&t.key===e.key}const kh=({key:t})=>t??null,$i=({ref:t,ref_key:e,ref_for:r})=>(typeof t=="number"&&(t=""+t),t!=null?ot(t)||Pt(t)||Me(t)?{i:Xt,r:t,k:e,f:!!r}:t:null);function me(t,e=null,r=null,n=0,a=null,i=t===cr?0:1,s=!1,o=!1){const u={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&kh(e),ref:e&&$i(e),scopeId:eh,slotScopeIds:null,children:r,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:n,dynamicProps:a,dynamicChildren:null,appContext:null,ctx:Xt};return o?(zl(u,r),i&128&&t.normalize(u)):r&&(u.shapeFlag|=ot(r)?8:16),Xa>0&&!s&&Ut&&(u.patchFlag>0||i&6)&&u.patchFlag!==32&&Ut.push(u),u}const gr=wm;function wm(t,e=null,r=null,n=0,a=null,i=!1){if((!t||t===Uy)&&(t=en),Ah(t)){const o=oa(t,e,!0);return r&&zl(o,r),Xa>0&&!i&&Ut&&(o.shapeFlag&6?Ut[Ut.indexOf(t)]=o:Ut.push(o)),o.patchFlag=-2,o}if(Rm(t)&&(t=t.__vccOpts),e){e=xm(e);let{class:o,style:u}=e;o&&!ot(o)&&(e.class=ks(o)),We(u)&&(Ll(u)&&!Be(u)&&(u=xt({},u)),e.style=Pl(u))}const s=ot(t)?1:Ph(t)?128:My(t)?64:We(t)?4:Me(t)?2:0;return me(t,e,r,n,a,s,i,!0)}function xm(t){return t?Ll(t)||yh(t)?xt({},t):t:null}function oa(t,e,r=!1,n=!1){const{props:a,ref:i,patchFlag:s,children:o,transition:u}=t,l=e?Em(a||{},e):a,f={__v_isVNode:!0,__v_skip:!0,type:t.type,props:l,key:l&&kh(l),ref:e&&e.ref?r&&i?Be(i)?i.concat($i(e)):[i,$i(e)]:$i(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:o,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==cr?s===-1?16:s|16:s,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:u,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&oa(t.ssContent),ssFallback:t.ssFallback&&oa(t.ssFallback),placeholder:t.placeholder,el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return u&&n&&Nl(f,u.clone(f)),f}function fr(t=" ",e=0){return gr(Ls,null,t,e)}function Mf(t="",e=!1){return e?(Br(),bm(en,null,t)):gr(en,null,t)}function vr(t){return t==null||typeof t=="boolean"?gr(en):Be(t)?gr(cr,null,t.slice()):Ah(t)?Pr(t):gr(Ls,null,String(t))}function Pr(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:oa(t)}function zl(t,e){let r=0;const{shapeFlag:n}=t;if(e==null)e=null;else if(Be(e))r=16;else if(typeof e=="object")if(n&65){const a=e.default;a&&(a._c&&(a._d=!1),zl(t,a()),a._c&&(a._d=!0));return}else{r=32;const a=e._;!a&&!yh(e)?e._ctx=Xt:a===3&&Xt&&(Xt.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else Me(e)?(e={default:e,_ctx:Xt},r=32):(e=String(e),n&64?(r=16,e=[fr(e)]):r=8);t.children=e,t.shapeFlag|=r}function Em(...t){const e={};for(let r=0;r<t.length;r++){const n=t[r];for(const a in n)if(a==="class")e.class!==n.class&&(e.class=ks([e.class,n.class]));else if(a==="style")e.style=Pl([e.style,n.style]);else if(Ts(a)){const i=e[a],s=n[a];s&&i!==s&&!(Be(i)&&i.includes(s))&&(e[a]=i?[].concat(i,s):s)}else a!==""&&(e[a]=n[a])}return e}function ir(t,e,r,n=null){yr(t,e,7,[r,n])}const Cm=vh();let Tm=0;function Sm(t,e,r){const n=t.type,a=(e?e.appContext:t.appContext)||Cm,i={uid:Tm++,vnode:t,type:n,parent:e,appContext:a,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Kp(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(a.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:bh(n,a),emitsOptions:dh(n,a),emit:null,emitted:null,propsDefaults:Ke,inheritAttrs:n.inheritAttrs,ctx:Ke,data:Ke,props:Ke,attrs:Ke,slots:Ke,refs:Ke,setupState:Ke,setupContext:null,suspense:r,suspenseId:r?r.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=tm.bind(null,i),t.ce&&t.ce(i),i}let Lt=null;const Pm=()=>Lt||Xt;let os,el;{const t=As(),e=(r,n)=>{let a;return(a=t[r])||(a=t[r]=[]),a.push(n),i=>{a.length>1?a.forEach(s=>s(i)):a[0](i)}};os=e("__VUE_INSTANCE_SETTERS__",r=>Lt=r),el=e("__VUE_SSR_SETTERS__",r=>Za=r)}const fi=t=>{const e=Lt;return os(t),t.scope.on(),()=>{t.scope.off(),os(e)}},If=()=>{Lt&&Lt.scope.off(),os(null)};function Bh(t){return t.vnode.shapeFlag&4}let Za=!1;function Dm(t,e=!1,r=!1){e&&el(e);const{props:n,children:a}=t.vnode,i=Bh(t);om(t,n,i,e),cm(t,a,r||e);const s=i?Am(t,e):void 0;return e&&el(!1),s}function Am(t,e){const r=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,Wy);const{setup:n}=r;if(n){Mr();const a=t.setupContext=n.length>1?Bm(t):null,i=fi(t),s=li(n,t,0,[t.props,a]),o=Pd(s);if(Ir(),i(),(o||t.sp)&&!Va(t)&&ah(t),o){if(s.then(If,If),e)return s.then(u=>{Lf(t,u)}).catch(u=>{Rs(u,t,0)});t.asyncDep=s}else Lf(t,s)}else Rh(t)}function Lf(t,e,r){Me(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:We(e)&&(t.setupState=Yd(e)),Rh(t)}function Rh(t,e,r){const n=t.type;t.render||(t.render=n.render||hr);{const a=fi(t);Mr();try{Ky(t)}finally{Ir(),a()}}}const km={get(t,e){return St(t,"get",""),t[e]}};function Bm(t){const e=r=>{t.exposed=r||{}};return{attrs:new Proxy(t.attrs,km),slots:t.slots,emit:t.emit,expose:e}}function Os(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(Yd(hy(t.exposed)),{get(e,r){if(r in e)return e[r];if(r in qa)return qa[r](t)},has(e,r){return r in e||r in qa}})):t.proxy}function Rm(t){return Me(t)&&"__vccOpts"in t}const Mm=(t,e)=>wy(t,e,Za),Im="3.5.29";let tl;const Of=typeof window<"u"&&window.trustedTypes;if(Of)try{tl=Of.createPolicy("vue",{createHTML:t=>t})}catch{}const Mh=tl?t=>tl.createHTML(t):t=>t,Lm="http://www.w3.org/2000/svg",Om="http://www.w3.org/1998/Math/MathML",Sr=typeof document<"u"?document:null,Nf=Sr&&Sr.createElement("template"),Nm={insert:(t,e,r)=>{e.insertBefore(t,r||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,r,n)=>{const a=e==="svg"?Sr.createElementNS(Lm,t):e==="mathml"?Sr.createElementNS(Om,t):r?Sr.createElement(t,{is:r}):Sr.createElement(t);return t==="select"&&n&&n.multiple!=null&&a.setAttribute("multiple",n.multiple),a},createText:t=>Sr.createTextNode(t),createComment:t=>Sr.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Sr.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,r,n,a,i){const s=r?r.previousSibling:e.lastChild;if(a&&(a===i||a.nextSibling))for(;e.insertBefore(a.cloneNode(!0),r),!(a===i||!(a=a.nextSibling)););else{Nf.innerHTML=Mh(n==="svg"?`<svg>${t}</svg>`:n==="mathml"?`<math>${t}</math>`:t);const o=Nf.content;if(n==="svg"||n==="mathml"){const u=o.firstChild;for(;u.firstChild;)o.appendChild(u.firstChild);o.removeChild(u)}e.insertBefore(o,r)}return[s?s.nextSibling:e.firstChild,r?r.previousSibling:e.lastChild]}},Fm=Symbol("_vtc");function _m(t,e,r){const n=t[Fm];n&&(e=(e?[e,...n]:[...n]).join(" ")),e==null?t.removeAttribute("class"):r?t.setAttribute("class",e):t.className=e}const Ff=Symbol("_vod"),zm=Symbol("_vsh"),Vm=Symbol(""),qm=/(?:^|;)\s*display\s*:/;function Hm(t,e,r){const n=t.style,a=ot(r);let i=!1;if(r&&!a){if(e)if(ot(e))for(const s of e.split(";")){const o=s.slice(0,s.indexOf(":")).trim();r[o]==null&&Ui(n,o,"")}else for(const s in e)r[s]==null&&Ui(n,s,"");for(const s in r)s==="display"&&(i=!0),Ui(n,s,r[s])}else if(a){if(e!==r){const s=n[Vm];s&&(r+=";"+s),n.cssText=r,i=qm.test(r)}}else e&&t.removeAttribute("style");Ff in t&&(t[Ff]=i?n.display:"",t[zm]&&(n.display="none"))}const _f=/\s*!important$/;function Ui(t,e,r){if(Be(r))r.forEach(n=>Ui(t,e,n));else if(r==null&&(r=""),e.startsWith("--"))t.setProperty(e,r);else{const n=$m(t,e);_f.test(r)?t.setProperty(In(n),r.replace(_f,""),"important"):t[n]=r}}const zf=["Webkit","Moz","ms"],co={};function $m(t,e){const r=co[e];if(r)return r;let n=jr(e);if(n!=="filter"&&n in t)return co[e]=n;n=kd(n);for(let a=0;a<zf.length;a++){const i=zf[a]+n;if(i in t)return co[e]=i}return e}const Vf="http://www.w3.org/1999/xlink";function qf(t,e,r,n,a,i=Up(e)){n&&e.startsWith("xlink:")?r==null?t.removeAttributeNS(Vf,e.slice(6,e.length)):t.setAttributeNS(Vf,e,r):r==null||i&&!Rd(r)?t.removeAttribute(e):t.setAttribute(e,i?"":pr(r)?String(r):r)}function Hf(t,e,r,n,a){if(e==="innerHTML"||e==="textContent"){r!=null&&(t[e]=e==="innerHTML"?Mh(r):r);return}const i=t.tagName;if(e==="value"&&i!=="PROGRESS"&&!i.includes("-")){const o=i==="OPTION"?t.getAttribute("value")||"":t.value,u=r==null?t.type==="checkbox"?"on":"":String(r);(o!==u||!("_value"in t))&&(t.value=u),r==null&&t.removeAttribute(e),t._value=r;return}let s=!1;if(r===""||r==null){const o=typeof t[e];o==="boolean"?r=Rd(r):r==null&&o==="string"?(r="",s=!0):o==="number"&&(r=0,s=!0)}try{t[e]=r}catch{}s&&t.removeAttribute(a||e)}function xn(t,e,r,n){t.addEventListener(e,r,n)}function Um(t,e,r,n){t.removeEventListener(e,r,n)}const $f=Symbol("_vei");function Gm(t,e,r,n,a=null){const i=t[$f]||(t[$f]={}),s=i[e];if(n&&s)s.value=n;else{const[o,u]=Wm(e);if(n){const l=i[e]=Xm(n,a);xn(t,o,l,u)}else s&&(Um(t,o,s,u),i[e]=void 0)}}const Uf=/(?:Once|Passive|Capture)$/;function Wm(t){let e;if(Uf.test(t)){e={};let n;for(;n=t.match(Uf);)t=t.slice(0,t.length-n[0].length),e[n[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):In(t.slice(2)),e]}let vo=0;const Km=Promise.resolve(),Ym=()=>vo||(Km.then(()=>vo=0),vo=Date.now());function Xm(t,e){const r=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=r.attached)return;yr(Zm(n,r.value),e,5,[n])};return r.value=t,r.attached=Ym(),r}function Zm(t,e){if(Be(e)){const r=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{r.call(t),t._stopped=!0},e.map(n=>a=>!a._stopped&&n&&n(a))}else return e}const Gf=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,Qm=(t,e,r,n,a,i)=>{const s=a==="svg";e==="class"?_m(t,n,s):e==="style"?Hm(t,r,n):Ts(e)?Cl(e)||Gm(t,e,r,n,i):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):Jm(t,e,n,s))?(Hf(t,e,n),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&qf(t,e,n,s,i,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!ot(n))?Hf(t,jr(e),n,i,e):(e==="true-value"?t._trueValue=n:e==="false-value"&&(t._falseValue=n),qf(t,e,n,s))};function Jm(t,e,r,n){if(n)return!!(e==="innerHTML"||e==="textContent"||e in t&&Gf(e)&&Me(r));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="sandbox"&&t.tagName==="IFRAME"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const a=t.tagName;if(a==="IMG"||a==="VIDEO"||a==="CANVAS"||a==="SOURCE")return!1}return Gf(e)&&ot(r)?!1:e in t}const us=t=>{const e=t.props["onUpdate:modelValue"]||!1;return Be(e)?r=>qi(e,r):e};function jm(t){t.target.composing=!0}function Wf(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const ta=Symbol("_assign");function Kf(t,e,r){return e&&(t=t.trim()),r&&(t=Ds(t)),t}const ho={created(t,{modifiers:{lazy:e,trim:r,number:n}},a){t[ta]=us(a);const i=n||a.props&&a.props.type==="number";xn(t,e?"change":"input",s=>{s.target.composing||t[ta](Kf(t.value,r,i))}),(r||i)&&xn(t,"change",()=>{t.value=Kf(t.value,r,i)}),e||(xn(t,"compositionstart",jm),xn(t,"compositionend",Wf),xn(t,"change",Wf))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:r,modifiers:{lazy:n,trim:a,number:i}},s){if(t[ta]=us(s),t.composing)return;const o=(i||t.type==="number")&&!/^0\d/.test(t.value)?Ds(t.value):t.value,u=e??"";o!==u&&(document.activeElement===t&&t.type!=="range"&&(n&&e===r||a&&t.value.trim()===u)||(t.value=u))}},Yf={deep:!0,created(t,{value:e,modifiers:{number:r}},n){const a=Ss(e);xn(t,"change",()=>{const i=Array.prototype.filter.call(t.options,s=>s.selected).map(s=>r?Ds(ls(s)):ls(s));t[ta](t.multiple?a?new Set(i):i:i[0]),t._assigning=!0,Zd(()=>{t._assigning=!1})}),t[ta]=us(n)},mounted(t,{value:e}){Xf(t,e)},beforeUpdate(t,e,r){t[ta]=us(r)},updated(t,{value:e}){t._assigning||Xf(t,e)}};function Xf(t,e){const r=t.multiple,n=Be(e);if(!(r&&!n&&!Ss(e))){for(let a=0,i=t.options.length;a<i;a++){const s=t.options[a],o=ls(s);if(r)if(n){const u=typeof o;u==="string"||u==="number"?s.selected=e.some(l=>String(l)===String(o)):s.selected=Wp(e,o)>-1}else s.selected=e.has(o);else if(ui(ls(s),e)){t.selectedIndex!==a&&(t.selectedIndex=a);return}}!r&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function ls(t){return"_value"in t?t._value:t.value}const e0=xt({patchProp:Qm},Nm);let Zf;function t0(){return Zf||(Zf=dm(e0))}const r0=((...t)=>{const e=t0().createApp(...t),{mount:r}=e;return e.mount=n=>{const a=a0(n);if(!a)return;const i=e._component;!Me(i)&&!i.render&&!i.template&&(i.template=a.innerHTML),a.nodeType===1&&(a.textContent="");const s=r(a,!1,n0(a));return a instanceof Element&&(a.removeAttribute("v-cloak"),a.setAttribute("data-v-app","")),s},e});function n0(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function a0(t){return ot(t)?document.querySelector(t):t}function rl(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function i0(t){if(Array.isArray(t))return t}function s0(t){if(Array.isArray(t))return rl(t)}function un(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o0(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Lh(n.key),n)}}function ln(t,e,r){return e&&o0(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function $t(t,e){var r=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=Vl(t))||e){r&&(t=r);var n=0,a=function(){};return{s:a,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(u){throw u},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i,s=!0,o=!1;return{s:function(){r=r.call(t)},n:function(){var u=r.next();return s=u.done,u},e:function(u){o=!0,i=u},f:function(){try{s||r.return==null||r.return()}finally{if(o)throw i}}}}function Ih(t,e,r){return(e=Lh(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function u0(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function l0(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,s,o=[],u=!0,l=!1;try{if(i=(r=r.call(t)).next,e===0){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(o.push(n.value),o.length!==e);u=!0);}catch(f){l=!0,a=f}finally{try{if(!u&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(l)throw a}}return o}}function f0(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function c0(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function st(t,e){return i0(t)||l0(t,e)||Vl(t,e)||f0()}function fs(t){return s0(t)||u0(t)||Vl(t)||c0()}function v0(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function Lh(t){var e=v0(t,"string");return typeof e=="symbol"?e:e+""}function vt(t){"@babel/helpers - typeof";return vt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vt(t)}function Vl(t,e){if(t){if(typeof t=="string")return rl(t,e);var r={}.toString.call(t).slice(8,-1);return r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set"?Array.from(t):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?rl(t,e):void 0}}var ft=typeof window>"u"?null:window,Qf=ft?ft.navigator:null;ft&&ft.document;var d0=vt(""),Oh=vt({}),h0=vt(function(){}),g0=typeof HTMLElement>"u"?"undefined":vt(HTMLElement),ci=function(e){return e&&e.instanceString&&et(e.instanceString)?e.instanceString():null},De=function(e){return e!=null&&vt(e)==d0},et=function(e){return e!=null&&vt(e)===h0},Ye=function(e){return!Gt(e)&&(Array.isArray?Array.isArray(e):e!=null&&e instanceof Array)},ze=function(e){return e!=null&&vt(e)===Oh&&!Ye(e)&&e.constructor===Object},p0=function(e){return e!=null&&vt(e)===Oh},he=function(e){return e!=null&&vt(e)===vt(1)&&!isNaN(e)},y0=function(e){return he(e)&&Math.floor(e)===e},cs=function(e){if(g0!=="undefined")return e!=null&&e instanceof HTMLElement},Gt=function(e){return vi(e)||Nh(e)},vi=function(e){return ci(e)==="collection"&&e._private.single},Nh=function(e){return ci(e)==="collection"&&!e._private.single},ql=function(e){return ci(e)==="core"},Fh=function(e){return ci(e)==="stylesheet"},m0=function(e){return ci(e)==="event"},tn=function(e){return e==null?!0:!!(e===""||e.match(/^\s+$/))},b0=function(e){return typeof HTMLElement>"u"?!1:e instanceof HTMLElement},w0=function(e){return ze(e)&&he(e.x1)&&he(e.x2)&&he(e.y1)&&he(e.y2)},x0=function(e){return p0(e)&&et(e.then)},E0=function(){return Qf&&Qf.userAgent.match(/msie|trident|edge/i)},ua=function(e,r){r||(r=function(){if(arguments.length===1)return arguments[0];if(arguments.length===0)return"undefined";for(var i=[],s=0;s<arguments.length;s++)i.push(arguments[s]);return i.join("$")});var n=function(){var i=this,s=arguments,o,u=r.apply(i,s),l=n.cache;return(o=l[u])||(o=l[u]=e.apply(i,s)),o};return n.cache={},n},Hl=ua(function(t){return t.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()})}),Ns=ua(function(t){return t.replace(/(-\w)/g,function(e){return e[1].toUpperCase()})}),_h=ua(function(t,e){return t+e[0].toUpperCase()+e.substring(1)},function(t,e){return t+"$"+e}),Jf=function(e){return tn(e)?e:e.charAt(0).toUpperCase()+e.substring(1)},Kr=function(e,r){return e.slice(-1*r.length)===r},ct="(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))",C0="rgb[a]?\\(("+ct+"[%]?)\\s*,\\s*("+ct+"[%]?)\\s*,\\s*("+ct+"[%]?)(?:\\s*,\\s*("+ct+"))?\\)",T0="rgb[a]?\\((?:"+ct+"[%]?)\\s*,\\s*(?:"+ct+"[%]?)\\s*,\\s*(?:"+ct+"[%]?)(?:\\s*,\\s*(?:"+ct+"))?\\)",S0="hsl[a]?\\(("+ct+")\\s*,\\s*("+ct+"[%])\\s*,\\s*("+ct+"[%])(?:\\s*,\\s*("+ct+"))?\\)",P0="hsl[a]?\\((?:"+ct+")\\s*,\\s*(?:"+ct+"[%])\\s*,\\s*(?:"+ct+"[%])(?:\\s*,\\s*(?:"+ct+"))?\\)",D0="\\#[0-9a-fA-F]{3}",A0="\\#[0-9a-fA-F]{6}",zh=function(e,r){return e<r?-1:e>r?1:0},k0=function(e,r){return-1*zh(e,r)},ke=Object.assign!=null?Object.assign.bind(Object):function(t){for(var e=arguments,r=1;r<e.length;r++){var n=e[r];if(n!=null)for(var a=Object.keys(n),i=0;i<a.length;i++){var s=a[i];t[s]=n[s]}}return t},B0=function(e){if(!(!(e.length===4||e.length===7)||e[0]!=="#")){var r=e.length===4,n,a,i,s=16;return r?(n=parseInt(e[1]+e[1],s),a=parseInt(e[2]+e[2],s),i=parseInt(e[3]+e[3],s)):(n=parseInt(e[1]+e[2],s),a=parseInt(e[3]+e[4],s),i=parseInt(e[5]+e[6],s)),[n,a,i]}},R0=function(e){var r,n,a,i,s,o,u,l;function f(d,p,g){return g<0&&(g+=1),g>1&&(g-=1),g<1/6?d+(p-d)*6*g:g<1/2?p:g<2/3?d+(p-d)*(2/3-g)*6:d}var c=new RegExp("^"+S0+"$").exec(e);if(c){if(n=parseInt(c[1]),n<0?n=(360- -1*n%360)%360:n>360&&(n=n%360),n/=360,a=parseFloat(c[2]),a<0||a>100||(a=a/100,i=parseFloat(c[3]),i<0||i>100)||(i=i/100,s=c[4],s!==void 0&&(s=parseFloat(s),s<0||s>1)))return;if(a===0)o=u=l=Math.round(i*255);else{var v=i<.5?i*(1+a):i+a-i*a,h=2*i-v;o=Math.round(255*f(h,v,n+1/3)),u=Math.round(255*f(h,v,n)),l=Math.round(255*f(h,v,n-1/3))}r=[o,u,l,s]}return r},M0=function(e){var r,n=new RegExp("^"+C0+"$").exec(e);if(n){r=[];for(var a=[],i=1;i<=3;i++){var s=n[i];if(s[s.length-1]==="%"&&(a[i]=!0),s=parseFloat(s),a[i]&&(s=s/100*255),s<0||s>255)return;r.push(Math.floor(s))}var o=a[1]||a[2]||a[3],u=a[1]&&a[2]&&a[3];if(o&&!u)return;var l=n[4];if(l!==void 0){if(l=parseFloat(l),l<0||l>1)return;r.push(l)}}return r},I0=function(e){return L0[e.toLowerCase()]},Vh=function(e){return(Ye(e)?e:null)||I0(e)||B0(e)||M0(e)||R0(e)},L0={transparent:[0,0,0,0],aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],grey:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},qh=function(e){for(var r=e.map,n=e.keys,a=n.length,i=0;i<a;i++){var s=n[i];if(ze(s))throw Error("Tried to set map with object key");i<n.length-1?(r[s]==null&&(r[s]={}),r=r[s]):r[s]=e.value}},Hh=function(e){for(var r=e.map,n=e.keys,a=n.length,i=0;i<a;i++){var s=n[i];if(ze(s))throw Error("Tried to get map with object key");if(r=r[s],r==null)return r}return r},Ai=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function di(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var go,jf;function hi(){if(jf)return go;jf=1;function t(e){var r=typeof e;return e!=null&&(r=="object"||r=="function")}return go=t,go}var po,ec;function O0(){if(ec)return po;ec=1;var t=typeof Ai=="object"&&Ai&&Ai.Object===Object&&Ai;return po=t,po}var yo,tc;function Fs(){if(tc)return yo;tc=1;var t=O0(),e=typeof self=="object"&&self&&self.Object===Object&&self,r=t||e||Function("return this")();return yo=r,yo}var mo,rc;function N0(){if(rc)return mo;rc=1;var t=Fs(),e=function(){return t.Date.now()};return mo=e,mo}var bo,nc;function F0(){if(nc)return bo;nc=1;var t=/\s/;function e(r){for(var n=r.length;n--&&t.test(r.charAt(n)););return n}return bo=e,bo}var wo,ac;function _0(){if(ac)return wo;ac=1;var t=F0(),e=/^\s+/;function r(n){return n&&n.slice(0,t(n)+1).replace(e,"")}return wo=r,wo}var xo,ic;function $l(){if(ic)return xo;ic=1;var t=Fs(),e=t.Symbol;return xo=e,xo}var Eo,sc;function z0(){if(sc)return Eo;sc=1;var t=$l(),e=Object.prototype,r=e.hasOwnProperty,n=e.toString,a=t?t.toStringTag:void 0;function i(s){var o=r.call(s,a),u=s[a];try{s[a]=void 0;var l=!0}catch{}var f=n.call(s);return l&&(o?s[a]=u:delete s[a]),f}return Eo=i,Eo}var Co,oc;function V0(){if(oc)return Co;oc=1;var t=Object.prototype,e=t.toString;function r(n){return e.call(n)}return Co=r,Co}var To,uc;function $h(){if(uc)return To;uc=1;var t=$l(),e=z0(),r=V0(),n="[object Null]",a="[object Undefined]",i=t?t.toStringTag:void 0;function s(o){return o==null?o===void 0?a:n:i&&i in Object(o)?e(o):r(o)}return To=s,To}var So,lc;function q0(){if(lc)return So;lc=1;function t(e){return e!=null&&typeof e=="object"}return So=t,So}var Po,fc;function gi(){if(fc)return Po;fc=1;var t=$h(),e=q0(),r="[object Symbol]";function n(a){return typeof a=="symbol"||e(a)&&t(a)==r}return Po=n,Po}var Do,cc;function H0(){if(cc)return Do;cc=1;var t=_0(),e=hi(),r=gi(),n=NaN,a=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,s=/^0o[0-7]+$/i,o=parseInt;function u(l){if(typeof l=="number")return l;if(r(l))return n;if(e(l)){var f=typeof l.valueOf=="function"?l.valueOf():l;l=e(f)?f+"":f}if(typeof l!="string")return l===0?l:+l;l=t(l);var c=i.test(l);return c||s.test(l)?o(l.slice(2),c?2:8):a.test(l)?n:+l}return Do=u,Do}var Ao,vc;function $0(){if(vc)return Ao;vc=1;var t=hi(),e=N0(),r=H0(),n="Expected a function",a=Math.max,i=Math.min;function s(o,u,l){var f,c,v,h,d,p,g=0,y=!1,m=!1,b=!0;if(typeof o!="function")throw new TypeError(n);u=r(u)||0,t(l)&&(y=!!l.leading,m="maxWait"in l,v=m?a(r(l.maxWait)||0,u):v,b="trailing"in l?!!l.trailing:b);function w(M){var L=f,N=c;return f=c=void 0,g=M,h=o.apply(N,L),h}function E(M){return g=M,d=setTimeout(S,u),y?w(M):h}function T(M){var L=M-p,N=M-g,O=u-L;return m?i(O,v-N):O}function x(M){var L=M-p,N=M-g;return p===void 0||L>=u||L<0||m&&N>=v}function S(){var M=e();if(x(M))return D(M);d=setTimeout(S,T(M))}function D(M){return d=void 0,b&&f?w(M):(f=c=void 0,h)}function A(){d!==void 0&&clearTimeout(d),g=0,f=p=c=d=void 0}function k(){return d===void 0?h:D(e())}function R(){var M=e(),L=x(M);if(f=arguments,c=this,p=M,L){if(d===void 0)return E(p);if(m)return clearTimeout(d),d=setTimeout(S,u),w(p)}return d===void 0&&(d=setTimeout(S,u)),h}return R.cancel=A,R.flush=k,R}return Ao=s,Ao}var U0=$0(),pi=di(U0),ko=ft?ft.performance:null,Uh=ko&&ko.now?function(){return ko.now()}:function(){return Date.now()},G0=(function(){if(ft){if(ft.requestAnimationFrame)return function(t){ft.requestAnimationFrame(t)};if(ft.mozRequestAnimationFrame)return function(t){ft.mozRequestAnimationFrame(t)};if(ft.webkitRequestAnimationFrame)return function(t){ft.webkitRequestAnimationFrame(t)};if(ft.msRequestAnimationFrame)return function(t){ft.msRequestAnimationFrame(t)}}return function(t){t&&setTimeout(function(){t(Uh())},1e3/60)}})(),vs=function(e){return G0(e)},Or=Uh,En=9261,Gh=65599,Kn=5381,Wh=function(e){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:En,n=r,a;a=e.next(),!a.done;)n=n*Gh+a.value|0;return n},Qa=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:En;return r*Gh+e|0},Ja=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Kn;return(r<<5)+r+e|0},W0=function(e,r){return e*2097152+r},qr=function(e){return e[0]*2097152+e[1]},ki=function(e,r){return[Qa(e[0],r[0]),Ja(e[1],r[1])]},dc=function(e,r){var n={value:0,done:!1},a=0,i=e.length,s={next:function(){return a<i?n.value=e[a++]:n.done=!0,n}};return Wh(s,r)},Dn=function(e,r){var n={value:0,done:!1},a=0,i=e.length,s={next:function(){return a<i?n.value=e.charCodeAt(a++):n.done=!0,n}};return Wh(s,r)},Kh=function(){return K0(arguments)},K0=function(e){for(var r,n=0;n<e.length;n++){var a=e[n];n===0?r=Dn(a):r=Dn(a,r)}return r};function Y0(t,e,r,n,a){var i=a*Math.PI/180,s=Math.cos(i)*(t-r)-Math.sin(i)*(e-n)+r,o=Math.sin(i)*(t-r)+Math.cos(i)*(e-n)+n;return{x:s,y:o}}var X0=function(e,r,n,a,i,s){return{x:(e-n)*i+n,y:(r-a)*s+a}};function Z0(t,e,r){if(r===0)return t;var n=(e.x1+e.x2)/2,a=(e.y1+e.y2)/2,i=e.w/e.h,s=1/i,o=Y0(t.x,t.y,n,a,r),u=X0(o.x,o.y,n,a,i,s);return{x:u.x,y:u.y}}var hc=!0,Q0=console.warn!=null,J0=console.trace!=null,Ul=Number.MAX_SAFE_INTEGER||9007199254740991,Yh=function(){return!0},ds=function(){return!1},gc=function(){return 0},Gl=function(){},je=function(e){throw new Error(e)},Xh=function(e){if(e!==void 0)hc=!!e;else return hc},Ue=function(e){Xh()&&(Q0?console.warn(e):(console.log(e),J0&&console.trace()))},j0=function(e){return ke({},e)},dr=function(e){return e==null?e:Ye(e)?e.slice():ze(e)?j0(e):e},eb=function(e){return e.slice()},Zh=function(e,r){for(r=e="";e++<36;r+=e*51&52?(e^15?8^Math.random()*(e^20?16:4):4).toString(16):"-");return r},tb={},Qh=function(){return tb},Et=function(e){var r=Object.keys(e);return function(n){for(var a={},i=0;i<r.length;i++){var s=r[i],o=n?.[s];a[s]=o===void 0?e[s]:o}return a}},rn=function(e,r,n){for(var a=e.length-1;a>=0;a--)e[a]===r&&e.splice(a,1)},Wl=function(e){e.splice(0,e.length)},rb=function(e,r){for(var n=0;n<r.length;n++){var a=r[n];e.push(a)}},qt=function(e,r,n){return n&&(r=_h(n,r)),e[r]},Dr=function(e,r,n,a){n&&(r=_h(n,r)),e[r]=a},nb=(function(){function t(){un(this,t),this._obj={}}return ln(t,[{key:"set",value:function(r,n){return this._obj[r]=n,this}},{key:"delete",value:function(r){return this._obj[r]=void 0,this}},{key:"clear",value:function(){this._obj={}}},{key:"has",value:function(r){return this._obj[r]!==void 0}},{key:"get",value:function(r){return this._obj[r]}}])})(),Rr=typeof Map<"u"?Map:nb,ab="undefined",ib=(function(){function t(e){if(un(this,t),this._obj=Object.create(null),this.size=0,e!=null){var r;e.instanceString!=null&&e.instanceString()===this.instanceString()?r=e.toArray():r=e;for(var n=0;n<r.length;n++)this.add(r[n])}}return ln(t,[{key:"instanceString",value:function(){return"set"}},{key:"add",value:function(r){var n=this._obj;n[r]!==1&&(n[r]=1,this.size++)}},{key:"delete",value:function(r){var n=this._obj;n[r]===1&&(n[r]=0,this.size--)}},{key:"clear",value:function(){this._obj=Object.create(null)}},{key:"has",value:function(r){return this._obj[r]===1}},{key:"toArray",value:function(){var r=this;return Object.keys(this._obj).filter(function(n){return r.has(n)})}},{key:"forEach",value:function(r,n){return this.toArray().forEach(r,n)}}])})(),ca=(typeof Set>"u"?"undefined":vt(Set))!==ab?Set:ib,_s=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(e===void 0||r===void 0||!ql(e)){je("An element must have a core reference and parameters set");return}var a=r.group;if(a==null&&(r.data&&r.data.source!=null&&r.data.target!=null?a="edges":a="nodes"),a!=="nodes"&&a!=="edges"){je("An element must be of type `nodes` or `edges`; you specified `"+a+"`");return}this.length=1,this[0]=this;var i=this._private={cy:e,single:!0,data:r.data||{},position:r.position||{x:0,y:0},autoWidth:void 0,autoHeight:void 0,autoPadding:void 0,compoundBoundsClean:!1,listeners:[],group:a,style:{},rstyle:{},styleCxts:[],styleKeys:{},removed:!0,selected:!!r.selected,selectable:r.selectable===void 0?!0:!!r.selectable,locked:!!r.locked,grabbed:!1,grabbable:r.grabbable===void 0?!0:!!r.grabbable,pannable:r.pannable===void 0?a==="edges":!!r.pannable,active:!1,classes:new ca,animation:{current:[],queue:[]},rscratch:{},scratch:r.scratch||{},edges:[],children:[],parent:r.parent&&r.parent.isNode()?r.parent:null,traversalCache:{},backgrounding:!1,bbCache:null,bbCacheShift:{x:0,y:0},bodyBounds:null,overlayBounds:null,labelBounds:{all:null,source:null,target:null,main:null},arrowBounds:{source:null,target:null,"mid-source":null,"mid-target":null}};if(i.position.x==null&&(i.position.x=0),i.position.y==null&&(i.position.y=0),r.renderedPosition){var s=r.renderedPosition,o=e.pan(),u=e.zoom();i.position={x:(s.x-o.x)/u,y:(s.y-o.y)/u}}var l=[];Ye(r.classes)?l=r.classes:De(r.classes)&&(l=r.classes.split(/\s+/));for(var f=0,c=l.length;f<c;f++){var v=l[f];!v||v===""||i.classes.add(v)}this.createEmitter(),(n===void 0||n)&&this.restore();var h=r.style||r.css;h&&(Ue("Setting a `style` bypass at element creation should be done only when absolutely necessary.  Try to use the stylesheet instead."),this.style(h))},pc=function(e){return e={bfs:e.bfs||!e.dfs,dfs:e.dfs||!e.bfs},function(n,a,i){var s;ze(n)&&!Gt(n)&&(s=n,n=s.roots||s.root,a=s.visit,i=s.directed),i=arguments.length===2&&!et(a)?a:i,a=et(a)?a:function(){};for(var o=this._private.cy,u=n=De(n)?this.filter(n):n,l=[],f=[],c={},v={},h={},d=0,p,g=this.byGroup(),y=g.nodes,m=g.edges,b=0;b<u.length;b++){var w=u[b],E=w.id();w.isNode()&&(l.unshift(w),e.bfs&&(h[E]=!0,f.push(w)),v[E]=0)}for(var T=function(){var M=e.bfs?l.shift():l.pop(),L=M.id();if(e.dfs){if(h[L])return 0;h[L]=!0,f.push(M)}var N=v[L],O=c[L],I=O!=null?O.source():null,F=O!=null?O.target():null,H=O==null?void 0:M.same(I)?F[0]:I[0],G;if(G=a(M,O,H,d++,N),G===!0)return p=M,1;if(G===!1)return 1;for(var z=M.connectedEdges().filter(function(oe){return(!i||oe.source().same(M))&&m.has(oe)}),V=0;V<z.length;V++){var re=z[V],ie=re.connectedNodes().filter(function(oe){return!oe.same(M)&&y.has(oe)}),ne=ie.id();ie.length!==0&&!h[ne]&&(ie=ie[0],l.push(ie),e.bfs&&(h[ne]=!0,f.push(ie)),c[ne]=re,v[ne]=v[L]+1)}},x;l.length!==0&&(x=T(),!(x!==0&&x===1)););for(var S=o.collection(),D=0;D<f.length;D++){var A=f[D],k=c[A.id()];k!=null&&S.push(k),S.push(A)}return{path:o.collection(S),found:o.collection(p)}}},ja={breadthFirstSearch:pc({bfs:!0}),depthFirstSearch:pc({dfs:!0})};ja.bfs=ja.breadthFirstSearch;ja.dfs=ja.depthFirstSearch;var Gi={exports:{}},sb=Gi.exports,yc;function ob(){return yc||(yc=1,(function(t,e){(function(){var r,n,a,i,s,o,u,l,f,c,v,h,d,p,g;a=Math.floor,c=Math.min,n=function(y,m){return y<m?-1:y>m?1:0},f=function(y,m,b,w,E){var T;if(b==null&&(b=0),E==null&&(E=n),b<0)throw new Error("lo must be non-negative");for(w==null&&(w=y.length);b<w;)T=a((b+w)/2),E(m,y[T])<0?w=T:b=T+1;return[].splice.apply(y,[b,b-b].concat(m)),m},o=function(y,m,b){return b==null&&(b=n),y.push(m),p(y,0,y.length-1,b)},s=function(y,m){var b,w;return m==null&&(m=n),b=y.pop(),y.length?(w=y[0],y[0]=b,g(y,0,m)):w=b,w},l=function(y,m,b){var w;return b==null&&(b=n),w=y[0],y[0]=m,g(y,0,b),w},u=function(y,m,b){var w;return b==null&&(b=n),y.length&&b(y[0],m)<0&&(w=[y[0],m],m=w[0],y[0]=w[1],g(y,0,b)),m},i=function(y,m){var b,w,E,T,x,S;for(m==null&&(m=n),T=(function(){S=[];for(var D=0,A=a(y.length/2);0<=A?D<A:D>A;0<=A?D++:D--)S.push(D);return S}).apply(this).reverse(),x=[],w=0,E=T.length;w<E;w++)b=T[w],x.push(g(y,b,m));return x},d=function(y,m,b){var w;if(b==null&&(b=n),w=y.indexOf(m),w!==-1)return p(y,0,w,b),g(y,w,b)},v=function(y,m,b){var w,E,T,x,S;if(b==null&&(b=n),E=y.slice(0,m),!E.length)return E;for(i(E,b),S=y.slice(m),T=0,x=S.length;T<x;T++)w=S[T],u(E,w,b);return E.sort(b).reverse()},h=function(y,m,b){var w,E,T,x,S,D,A,k,R;if(b==null&&(b=n),m*10<=y.length){if(T=y.slice(0,m).sort(b),!T.length)return T;for(E=T[T.length-1],A=y.slice(m),x=0,D=A.length;x<D;x++)w=A[x],b(w,E)<0&&(f(T,w,0,null,b),T.pop(),E=T[T.length-1]);return T}for(i(y,b),R=[],S=0,k=c(m,y.length);0<=k?S<k:S>k;0<=k?++S:--S)R.push(s(y,b));return R},p=function(y,m,b,w){var E,T,x;for(w==null&&(w=n),E=y[b];b>m;){if(x=b-1>>1,T=y[x],w(E,T)<0){y[b]=T,b=x;continue}break}return y[b]=E},g=function(y,m,b){var w,E,T,x,S;for(b==null&&(b=n),E=y.length,S=m,T=y[m],w=2*m+1;w<E;)x=w+1,x<E&&!(b(y[w],y[x])<0)&&(w=x),y[m]=y[w],m=w,w=2*m+1;return y[m]=T,p(y,S,m,b)},r=(function(){y.push=o,y.pop=s,y.replace=l,y.pushpop=u,y.heapify=i,y.updateItem=d,y.nlargest=v,y.nsmallest=h;function y(m){this.cmp=m??n,this.nodes=[]}return y.prototype.push=function(m){return o(this.nodes,m,this.cmp)},y.prototype.pop=function(){return s(this.nodes,this.cmp)},y.prototype.peek=function(){return this.nodes[0]},y.prototype.contains=function(m){return this.nodes.indexOf(m)!==-1},y.prototype.replace=function(m){return l(this.nodes,m,this.cmp)},y.prototype.pushpop=function(m){return u(this.nodes,m,this.cmp)},y.prototype.heapify=function(){return i(this.nodes,this.cmp)},y.prototype.updateItem=function(m){return d(this.nodes,m,this.cmp)},y.prototype.clear=function(){return this.nodes=[]},y.prototype.empty=function(){return this.nodes.length===0},y.prototype.size=function(){return this.nodes.length},y.prototype.clone=function(){var m;return m=new y,m.nodes=this.nodes.slice(0),m},y.prototype.toArray=function(){return this.nodes.slice(0)},y.prototype.insert=y.prototype.push,y.prototype.top=y.prototype.peek,y.prototype.front=y.prototype.peek,y.prototype.has=y.prototype.contains,y.prototype.copy=y.prototype.clone,y})(),(function(y,m){return t.exports=m()})(this,function(){return r})}).call(sb)})(Gi)),Gi.exports}var Bo,mc;function ub(){return mc||(mc=1,Bo=ob()),Bo}var lb=ub(),yi=di(lb),fb=Et({root:null,weight:function(e){return 1},directed:!1}),cb={dijkstra:function(e){if(!ze(e)){var r=arguments;e={root:r[0],weight:r[1],directed:r[2]}}var n=fb(e),a=n.root,i=n.weight,s=n.directed,o=this,u=i,l=De(a)?this.filter(a)[0]:a[0],f={},c={},v={},h=this.byGroup(),d=h.nodes,p=h.edges;p.unmergeBy(function(N){return N.isLoop()});for(var g=function(O){return f[O.id()]},y=function(O,I){f[O.id()]=I,m.updateItem(O)},m=new yi(function(N,O){return g(N)-g(O)}),b=0;b<d.length;b++){var w=d[b];f[w.id()]=w.same(l)?0:1/0,m.push(w)}for(var E=function(O,I){for(var F=(s?O.edgesTo(I):O.edgesWith(I)).intersect(p),H=1/0,G,z=0;z<F.length;z++){var V=F[z],re=u(V);(re<H||!G)&&(H=re,G=V)}return{edge:G,dist:H}};m.size()>0;){var T=m.pop(),x=g(T),S=T.id();if(v[S]=x,x!==1/0)for(var D=T.neighborhood().intersect(d),A=0;A<D.length;A++){var k=D[A],R=k.id(),M=E(T,k),L=x+M.dist;L<g(k)&&(y(k,L),c[R]={node:T,edge:M.edge})}}return{distanceTo:function(O){var I=De(O)?d.filter(O)[0]:O[0];return v[I.id()]},pathTo:function(O){var I=De(O)?d.filter(O)[0]:O[0],F=[],H=I,G=H.id();if(I.length>0)for(F.unshift(I);c[G];){var z=c[G];F.unshift(z.edge),F.unshift(z.node),H=z.node,G=H.id()}return o.spawn(F)}}}},vb={kruskal:function(e){e=e||function(b){return 1};for(var r=this.byGroup(),n=r.nodes,a=r.edges,i=n.length,s=new Array(i),o=n,u=function(w){for(var E=0;E<s.length;E++){var T=s[E];if(T.has(w))return E}},l=0;l<i;l++)s[l]=this.spawn(n[l]);for(var f=a.sort(function(b,w){return e(b)-e(w)}),c=0;c<f.length;c++){var v=f[c],h=v.source()[0],d=v.target()[0],p=u(h),g=u(d),y=s[p],m=s[g];p!==g&&(o.merge(v),y.merge(m),s.splice(g,1))}return o}},db=Et({root:null,goal:null,weight:function(e){return 1},heuristic:function(e){return 0},directed:!1}),hb={aStar:function(e){var r=this.cy(),n=db(e),a=n.root,i=n.goal,s=n.heuristic,o=n.directed,u=n.weight;a=r.collection(a)[0],i=r.collection(i)[0];var l=a.id(),f=i.id(),c={},v={},h={},d=new yi(function(G,z){return v[G.id()]-v[z.id()]}),p=new ca,g={},y={},m=function(z,V){d.push(z),p.add(V)},b,w,E=function(){b=d.pop(),w=b.id(),p.delete(w)},T=function(z){return p.has(z)};m(a,l),c[l]=0,v[l]=s(a);for(var x=0;d.size()>0;){if(E(),x++,w===f){for(var S=[],D=i,A=f,k=y[A];S.unshift(D),k!=null&&S.unshift(k),D=g[A],D!=null;)A=D.id(),k=y[A];return{found:!0,distance:c[w],path:this.spawn(S),steps:x}}h[w]=!0;for(var R=b._private.edges,M=0;M<R.length;M++){var L=R[M];if(this.hasElementWithId(L.id())&&!(o&&L.data("source")!==w)){var N=L.source(),O=L.target(),I=N.id()!==w?N:O,F=I.id();if(this.hasElementWithId(F)&&!h[F]){var H=c[w]+u(L);if(!T(F)){c[F]=H,v[F]=H+s(I),m(I,F),g[F]=b,y[F]=L;continue}H<c[F]&&(c[F]=H,v[F]=H+s(I),g[F]=b,y[F]=L)}}}}return{found:!1,distance:void 0,path:void 0,steps:x}}},gb=Et({weight:function(e){return 1},directed:!1}),pb={floydWarshall:function(e){for(var r=this.cy(),n=gb(e),a=n.weight,i=n.directed,s=a,o=this.byGroup(),u=o.nodes,l=o.edges,f=u.length,c=f*f,v=function(re){return u.indexOf(re)},h=function(re){return u[re]},d=new Array(c),p=0;p<c;p++){var g=p%f,y=(p-g)/f;y===g?d[p]=0:d[p]=1/0}for(var m=new Array(c),b=new Array(c),w=0;w<l.length;w++){var E=l[w],T=E.source()[0],x=E.target()[0];if(T!==x){var S=v(T),D=v(x),A=S*f+D,k=s(E);if(d[A]>k&&(d[A]=k,m[A]=D,b[A]=E),!i){var R=D*f+S;!i&&d[R]>k&&(d[R]=k,m[R]=S,b[R]=E)}}}for(var M=0;M<f;M++)for(var L=0;L<f;L++)for(var N=L*f+M,O=0;O<f;O++){var I=L*f+O,F=M*f+O;d[N]+d[F]<d[I]&&(d[I]=d[N]+d[F],m[I]=m[N])}var H=function(re){return(De(re)?r.filter(re):re)[0]},G=function(re){return v(H(re))},z={distance:function(re,ie){var ne=G(re),oe=G(ie);return d[ne*f+oe]},path:function(re,ie){var ne=G(re),oe=G(ie),ve=h(ne);if(ne===oe)return ve.collection();if(m[ne*f+oe]==null)return r.collection();var ge=r.collection(),ue=ne,q;for(ge.merge(ve);ne!==oe;)ue=ne,ne=m[ne*f+oe],q=b[ue*f+ne],ge.merge(q),ge.merge(h(ne));return ge}};return z}},yb=Et({weight:function(e){return 1},directed:!1,root:null}),mb={bellmanFord:function(e){var r=this,n=yb(e),a=n.weight,i=n.directed,s=n.root,o=a,u=this,l=this.cy(),f=this.byGroup(),c=f.edges,v=f.nodes,h=v.length,d=new Rr,p=!1,g=[];s=l.collection(s)[0],c.unmergeBy(function(Z){return Z.isLoop()});for(var y=c.length,m=function(te){var j=d.get(te.id());return j||(j={},d.set(te.id(),j)),j},b=function(te){return(De(te)?l.$(te):te)[0]},w=function(te){return m(b(te)).dist},E=function(te){for(var j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:s,Y=b(te),W=[],fe=Y;;){if(fe==null)return r.spawn();var se=m(fe),le=se.edge,de=se.pred;if(W.unshift(fe[0]),fe.same(j)&&W.length>0)break;le!=null&&W.unshift(le),fe=de}return u.spawn(W)},T=0;T<h;T++){var x=v[T],S=m(x);x.same(s)?S.dist=0:S.dist=1/0,S.pred=null,S.edge=null}for(var D=!1,A=function(te,j,Y,W,fe,se){var le=W.dist+se;le<fe.dist&&!Y.same(W.edge)&&(fe.dist=le,fe.pred=te,fe.edge=Y,D=!0)},k=1;k<h;k++){D=!1;for(var R=0;R<y;R++){var M=c[R],L=M.source(),N=M.target(),O=o(M),I=m(L),F=m(N);A(L,N,M,I,F,O),i||A(N,L,M,F,I,O)}if(!D)break}if(D)for(var H=[],G=0;G<y;G++){var z=c[G],V=z.source(),re=z.target(),ie=o(z),ne=m(V).dist,oe=m(re).dist;if(ne+ie<oe||!i&&oe+ie<ne)if(p||(Ue("Graph contains a negative weight cycle for Bellman-Ford"),p=!0),e.findNegativeWeightCycles!==!1){var ve=[];ne+ie<oe&&ve.push(V),!i&&oe+ie<ne&&ve.push(re);for(var ge=ve.length,ue=0;ue<ge;ue++){var q=ve[ue],$=[q];$.push(m(q).edge);for(var C=m(q).pred;$.indexOf(C)===-1;)$.push(C),$.push(m(C).edge),C=m(C).pred;$=$.slice($.indexOf(C));for(var B=$[0].id(),_=0,K=2;K<$.length;K+=2)$[K].id()<B&&(B=$[K].id(),_=K);$=$.slice(_).concat($.slice(0,_)),$.push($[0]);var J=$.map(function(Z){return Z.id()}).join(",");H.indexOf(J)===-1&&(g.push(u.spawn($)),H.push(J))}}else break}return{distanceTo:w,pathTo:E,hasNegativeWeightCycle:p,negativeWeightCycles:g}}},bb=Math.sqrt(2),wb=function(e,r,n){n.length===0&&je("Karger-Stein must be run on a connected (sub)graph");for(var a=n[e],i=a[1],s=a[2],o=r[i],u=r[s],l=n,f=l.length-1;f>=0;f--){var c=l[f],v=c[1],h=c[2];(r[v]===o&&r[h]===u||r[v]===u&&r[h]===o)&&l.splice(f,1)}for(var d=0;d<l.length;d++){var p=l[d];p[1]===u?(l[d]=p.slice(),l[d][1]=o):p[2]===u&&(l[d]=p.slice(),l[d][2]=o)}for(var g=0;g<r.length;g++)r[g]===u&&(r[g]=o);return l},Ro=function(e,r,n,a){for(;n>a;){var i=Math.floor(Math.random()*r.length);r=wb(i,e,r),n--}return r},xb={kargerStein:function(){var e=this,r=this.byGroup(),n=r.nodes,a=r.edges;a.unmergeBy(function(F){return F.isLoop()});var i=n.length,s=a.length,o=Math.ceil(Math.pow(Math.log(i)/Math.LN2,2)),u=Math.floor(i/bb);if(i<2){je("At least 2 nodes are required for Karger-Stein algorithm");return}for(var l=[],f=0;f<s;f++){var c=a[f];l.push([f,n.indexOf(c.source()),n.indexOf(c.target())])}for(var v=1/0,h=[],d=new Array(i),p=new Array(i),g=new Array(i),y=function(H,G){for(var z=0;z<i;z++)G[z]=H[z]},m=0;m<=o;m++){for(var b=0;b<i;b++)p[b]=b;var w=Ro(p,l.slice(),i,u),E=w.slice();y(p,g);var T=Ro(p,w,u,2),x=Ro(g,E,u,2);T.length<=x.length&&T.length<v?(v=T.length,h=T,y(p,d)):x.length<=T.length&&x.length<v&&(v=x.length,h=x,y(g,d))}for(var S=this.spawn(h.map(function(F){return a[F[0]]})),D=this.spawn(),A=this.spawn(),k=d[0],R=0;R<d.length;R++){var M=d[R],L=n[R];M===k?D.merge(L):A.merge(L)}var N=function(H){var G=e.spawn();return H.forEach(function(z){G.merge(z),z.connectedEdges().forEach(function(V){e.contains(V)&&!S.contains(V)&&G.merge(V)})}),G},O=[N(D),N(A)],I={cut:S,components:O,partition1:D,partition2:A};return I}},Mo,Eb=function(e){return{x:e.x,y:e.y}},zs=function(e,r,n){return{x:e.x*r+n.x,y:e.y*r+n.y}},Jh=function(e,r,n){return{x:(e.x-n.x)/r,y:(e.y-n.y)/r}},Yn=function(e){return{x:e[0],y:e[1]}},Cb=function(e){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,a=1/0,i=r;i<n;i++){var s=e[i];isFinite(s)&&(a=Math.min(s,a))}return a},Tb=function(e){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,a=-1/0,i=r;i<n;i++){var s=e[i];isFinite(s)&&(a=Math.max(s,a))}return a},Sb=function(e){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,a=0,i=0,s=r;s<n;s++){var o=e[s];isFinite(o)&&(a+=o,i++)}return a/i},Pb=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,s=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0;a?e=e.slice(r,n):(n<e.length&&e.splice(n,e.length-n),r>0&&e.splice(0,r));for(var o=0,u=e.length-1;u>=0;u--){var l=e[u];s?isFinite(l)||(e[u]=-1/0,o++):e.splice(u,1)}i&&e.sort(function(v,h){return v-h});var f=e.length,c=Math.floor(f/2);return f%2!==0?e[c+1+o]:(e[c-1+o]+e[c+o])/2},Db=function(e){return Math.PI*e/180},Bi=function(e,r){return Math.atan2(r,e)-Math.PI/2},Kl=Math.log2||function(t){return Math.log(t)/Math.log(2)},Yl=function(e){return e>0?1:e<0?-1:0},An=function(e,r){return Math.sqrt(bn(e,r))},bn=function(e,r){var n=r.x-e.x,a=r.y-e.y;return n*n+a*a},Ab=function(e){for(var r=e.length,n=0,a=0;a<r;a++)n+=e[a];for(var i=0;i<r;i++)e[i]=e[i]/n;return e},gt=function(e,r,n,a){return(1-a)*(1-a)*e+2*(1-a)*a*r+a*a*n},ra=function(e,r,n,a){return{x:gt(e.x,r.x,n.x,a),y:gt(e.y,r.y,n.y,a)}},kb=function(e,r,n,a){var i={x:r.x-e.x,y:r.y-e.y},s=An(e,r),o={x:i.x/s,y:i.y/s};return n=n??0,a=a??n*s,{x:e.x+o.x*a,y:e.y+o.y*a}},ei=function(e,r,n){return Math.max(e,Math.min(n,r))},Ot=function(e){if(e==null)return{x1:1/0,y1:1/0,x2:-1/0,y2:-1/0,w:0,h:0};if(e.x1!=null&&e.y1!=null){if(e.x2!=null&&e.y2!=null&&e.x2>=e.x1&&e.y2>=e.y1)return{x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,w:e.x2-e.x1,h:e.y2-e.y1};if(e.w!=null&&e.h!=null&&e.w>=0&&e.h>=0)return{x1:e.x1,y1:e.y1,x2:e.x1+e.w,y2:e.y1+e.h,w:e.w,h:e.h}}},Bb=function(e){return{x1:e.x1,x2:e.x2,w:e.w,y1:e.y1,y2:e.y2,h:e.h}},Rb=function(e){e.x1=1/0,e.y1=1/0,e.x2=-1/0,e.y2=-1/0,e.w=0,e.h=0},Mb=function(e,r){e.x1=Math.min(e.x1,r.x1),e.x2=Math.max(e.x2,r.x2),e.w=e.x2-e.x1,e.y1=Math.min(e.y1,r.y1),e.y2=Math.max(e.y2,r.y2),e.h=e.y2-e.y1},jh=function(e,r,n){e.x1=Math.min(e.x1,r),e.x2=Math.max(e.x2,r),e.w=e.x2-e.x1,e.y1=Math.min(e.y1,n),e.y2=Math.max(e.y2,n),e.h=e.y2-e.y1},Wi=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return e.x1-=r,e.x2+=r,e.y1-=r,e.y2+=r,e.w=e.x2-e.x1,e.h=e.y2-e.y1,e},Ki=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[0],n,a,i,s;if(r.length===1)n=a=i=s=r[0];else if(r.length===2)n=i=r[0],s=a=r[1];else if(r.length===4){var o=st(r,4);n=o[0],a=o[1],i=o[2],s=o[3]}return e.x1-=s,e.x2+=a,e.y1-=n,e.y2+=i,e.w=e.x2-e.x1,e.h=e.y2-e.y1,e},bc=function(e,r){e.x1=r.x1,e.y1=r.y1,e.x2=r.x2,e.y2=r.y2,e.w=e.x2-e.x1,e.h=e.y2-e.y1},Xl=function(e,r){return!(e.x1>r.x2||r.x1>e.x2||e.x2<r.x1||r.x2<e.x1||e.y2<r.y1||r.y2<e.y1||e.y1>r.y2||r.y1>e.y2)},Yr=function(e,r,n){return e.x1<=r&&r<=e.x2&&e.y1<=n&&n<=e.y2},wc=function(e,r){return Yr(e,r.x,r.y)},eg=function(e,r){return Yr(e,r.x1,r.y1)&&Yr(e,r.x2,r.y2)},Ib=(Mo=Math.hypot)!==null&&Mo!==void 0?Mo:function(t,e){return Math.sqrt(t*t+e*e)};function Lb(t,e){if(t.length<3)throw new Error("Need at least 3 vertices");var r=function(S,D){return{x:S.x+D.x,y:S.y+D.y}},n=function(S,D){return{x:S.x-D.x,y:S.y-D.y}},a=function(S,D){return{x:S.x*D,y:S.y*D}},i=function(S,D){return S.x*D.y-S.y*D.x},s=function(S){var D=Ib(S.x,S.y);return D===0?{x:0,y:0}:{x:S.x/D,y:S.y/D}},o=function(S){for(var D=0,A=0;A<S.length;A++){var k=S[A],R=S[(A+1)%S.length];D+=k.x*R.y-R.x*k.y}return D/2},u=function(S,D,A,k){var R=n(D,S),M=n(k,A),L=i(R,M);if(Math.abs(L)<1e-9)return r(S,a(R,.5));var N=i(n(A,S),M)/L;return r(S,a(R,N))},l=t.map(function(x){return{x:x.x,y:x.y}});o(l)<0&&l.reverse();for(var f=l.length,c=[],v=0;v<f;v++){var h=l[v],d=l[(v+1)%f],p=n(d,h),g=s({x:p.y,y:-p.x});c.push(g)}for(var y=c.map(function(x,S){var D=r(l[S],a(x,e)),A=r(l[(S+1)%f],a(x,e));return{p1:D,p2:A}}),m=[],b=0;b<f;b++){var w=y[(b-1+f)%f],E=y[b],T=u(w.p1,w.p2,E.p1,E.p2);m.push(T)}return m}function Ob(t,e,r,n,a,i){var s=Ub(t,e,r,n,a),o=Lb(s,i),u=Ot();return o.forEach(function(l){return jh(u,l.x,l.y)}),u}var tg=function(e,r,n,a,i,s,o){var u=arguments.length>7&&arguments[7]!==void 0?arguments[7]:"auto",l=u==="auto"?nn(i,s):u,f=i/2,c=s/2;l=Math.min(l,f,c);var v=l!==f,h=l!==c,d;if(v){var p=n-f+l-o,g=a-c-o,y=n+f-l+o,m=g;if(d=Xr(e,r,n,a,p,g,y,m,!1),d.length>0)return d}if(h){var b=n+f+o,w=a-c+l-o,E=b,T=a+c-l+o;if(d=Xr(e,r,n,a,b,w,E,T,!1),d.length>0)return d}if(v){var x=n-f+l-o,S=a+c+o,D=n+f-l+o,A=S;if(d=Xr(e,r,n,a,x,S,D,A,!1),d.length>0)return d}if(h){var k=n-f-o,R=a-c+l-o,M=k,L=a+c-l+o;if(d=Xr(e,r,n,a,k,R,M,L,!1),d.length>0)return d}var N;{var O=n-f+l,I=a-c+l;if(N=Ma(e,r,n,a,O,I,l+o),N.length>0&&N[0]<=O&&N[1]<=I)return[N[0],N[1]]}{var F=n+f-l,H=a-c+l;if(N=Ma(e,r,n,a,F,H,l+o),N.length>0&&N[0]>=F&&N[1]<=H)return[N[0],N[1]]}{var G=n+f-l,z=a+c-l;if(N=Ma(e,r,n,a,G,z,l+o),N.length>0&&N[0]>=G&&N[1]>=z)return[N[0],N[1]]}{var V=n-f+l,re=a+c-l;if(N=Ma(e,r,n,a,V,re,l+o),N.length>0&&N[0]<=V&&N[1]>=re)return[N[0],N[1]]}return[]},Nb=function(e,r,n,a,i,s,o){var u=o,l=Math.min(n,i),f=Math.max(n,i),c=Math.min(a,s),v=Math.max(a,s);return l-u<=e&&e<=f+u&&c-u<=r&&r<=v+u},Fb=function(e,r,n,a,i,s,o,u,l){var f={x1:Math.min(n,o,i)-l,x2:Math.max(n,o,i)+l,y1:Math.min(a,u,s)-l,y2:Math.max(a,u,s)+l};return!(e<f.x1||e>f.x2||r<f.y1||r>f.y2)},_b=function(e,r,n,a){n-=a;var i=r*r-4*e*n;if(i<0)return[];var s=Math.sqrt(i),o=2*e,u=(-r+s)/o,l=(-r-s)/o;return[u,l]},zb=function(e,r,n,a,i){var s=1e-5;e===0&&(e=s),r/=e,n/=e,a/=e;var o,u,l,f,c,v,h,d;if(u=(3*n-r*r)/9,l=-(27*a)+r*(9*n-2*(r*r)),l/=54,o=u*u*u+l*l,i[1]=0,h=r/3,o>0){c=l+Math.sqrt(o),c=c<0?-Math.pow(-c,1/3):Math.pow(c,1/3),v=l-Math.sqrt(o),v=v<0?-Math.pow(-v,1/3):Math.pow(v,1/3),i[0]=-h+c+v,h+=(c+v)/2,i[4]=i[2]=-h,h=Math.sqrt(3)*(-v+c)/2,i[3]=h,i[5]=-h;return}if(i[5]=i[3]=0,o===0){d=l<0?-Math.pow(-l,1/3):Math.pow(l,1/3),i[0]=-h+2*d,i[4]=i[2]=-(d+h);return}u=-u,f=u*u*u,f=Math.acos(l/Math.sqrt(f)),d=2*Math.sqrt(u),i[0]=-h+d*Math.cos(f/3),i[2]=-h+d*Math.cos((f+2*Math.PI)/3),i[4]=-h+d*Math.cos((f+4*Math.PI)/3)},Vb=function(e,r,n,a,i,s,o,u){var l=1*n*n-4*n*i+2*n*o+4*i*i-4*i*o+o*o+a*a-4*a*s+2*a*u+4*s*s-4*s*u+u*u,f=9*n*i-3*n*n-3*n*o-6*i*i+3*i*o+9*a*s-3*a*a-3*a*u-6*s*s+3*s*u,c=3*n*n-6*n*i+n*o-n*e+2*i*i+2*i*e-o*e+3*a*a-6*a*s+a*u-a*r+2*s*s+2*s*r-u*r,v=1*n*i-n*n+n*e-i*e+a*s-a*a+a*r-s*r,h=[];zb(l,f,c,v,h);for(var d=1e-7,p=[],g=0;g<6;g+=2)Math.abs(h[g+1])<d&&h[g]>=0&&h[g]<=1&&p.push(h[g]);p.push(1),p.push(0);for(var y=-1,m,b,w,E=0;E<p.length;E++)m=Math.pow(1-p[E],2)*n+2*(1-p[E])*p[E]*i+p[E]*p[E]*o,b=Math.pow(1-p[E],2)*a+2*(1-p[E])*p[E]*s+p[E]*p[E]*u,w=Math.pow(m-e,2)+Math.pow(b-r,2),y>=0?w<y&&(y=w):y=w;return y},qb=function(e,r,n,a,i,s){var o=[e-n,r-a],u=[i-n,s-a],l=u[0]*u[0]+u[1]*u[1],f=o[0]*o[0]+o[1]*o[1],c=o[0]*u[0]+o[1]*u[1],v=c*c/l;return c<0?f:v>l?(e-i)*(e-i)+(r-s)*(r-s):f-v},Ht=function(e,r,n){for(var a,i,s,o,u,l=0,f=0;f<n.length/2;f++)if(a=n[f*2],i=n[f*2+1],f+1<n.length/2?(s=n[(f+1)*2],o=n[(f+1)*2+1]):(s=n[(f+1-n.length/2)*2],o=n[(f+1-n.length/2)*2+1]),!(a==e&&s==e))if(a>=e&&e>=s||a<=e&&e<=s)u=(e-a)/(s-a)*(o-i)+i,u>r&&l++;else continue;return l%2!==0},Nr=function(e,r,n,a,i,s,o,u,l){var f=new Array(n.length),c;u[0]!=null?(c=Math.atan(u[1]/u[0]),u[0]<0?c=c+Math.PI/2:c=-c-Math.PI/2):c=u;for(var v=Math.cos(-c),h=Math.sin(-c),d=0;d<f.length/2;d++)f[d*2]=s/2*(n[d*2]*v-n[d*2+1]*h),f[d*2+1]=o/2*(n[d*2+1]*v+n[d*2]*h),f[d*2]+=a,f[d*2+1]+=i;var p;if(l>0){var g=gs(f,-l);p=hs(g)}else p=f;return Ht(e,r,p)},Hb=function(e,r,n,a,i,s,o,u){for(var l=new Array(n.length*2),f=0;f<u.length;f++){var c=u[f];l[f*4+0]=c.startX,l[f*4+1]=c.startY,l[f*4+2]=c.stopX,l[f*4+3]=c.stopY;var v=Math.pow(c.cx-e,2)+Math.pow(c.cy-r,2);if(v<=Math.pow(c.radius,2))return!0}return Ht(e,r,l)},hs=function(e){for(var r=new Array(e.length/2),n,a,i,s,o,u,l,f,c=0;c<e.length/4;c++){n=e[c*4],a=e[c*4+1],i=e[c*4+2],s=e[c*4+3],c<e.length/4-1?(o=e[(c+1)*4],u=e[(c+1)*4+1],l=e[(c+1)*4+2],f=e[(c+1)*4+3]):(o=e[0],u=e[1],l=e[2],f=e[3]);var v=Xr(n,a,i,s,o,u,l,f,!0);r[c*2]=v[0],r[c*2+1]=v[1]}return r},gs=function(e,r){for(var n=new Array(e.length*2),a,i,s,o,u=0;u<e.length/2;u++){a=e[u*2],i=e[u*2+1],u<e.length/2-1?(s=e[(u+1)*2],o=e[(u+1)*2+1]):(s=e[0],o=e[1]);var l=o-i,f=-(s-a),c=Math.sqrt(l*l+f*f),v=l/c,h=f/c;n[u*4]=a+v*r,n[u*4+1]=i+h*r,n[u*4+2]=s+v*r,n[u*4+3]=o+h*r}return n},$b=function(e,r,n,a,i,s){var o=n-e,u=a-r;o/=i,u/=s;var l=Math.sqrt(o*o+u*u),f=l-1;if(f<0)return[];var c=f/l;return[(n-e)*c+e,(a-r)*c+r]},Tn=function(e,r,n,a,i,s,o){return e-=i,r-=s,e/=n/2+o,r/=a/2+o,e*e+r*r<=1},Ma=function(e,r,n,a,i,s,o){var u=[n-e,a-r],l=[e-i,r-s],f=u[0]*u[0]+u[1]*u[1],c=2*(l[0]*u[0]+l[1]*u[1]),v=l[0]*l[0]+l[1]*l[1]-o*o,h=c*c-4*f*v;if(h<0)return[];var d=(-c+Math.sqrt(h))/(2*f),p=(-c-Math.sqrt(h))/(2*f),g=Math.min(d,p),y=Math.max(d,p),m=[];if(g>=0&&g<=1&&m.push(g),y>=0&&y<=1&&m.push(y),m.length===0)return[];var b=m[0]*u[0]+e,w=m[0]*u[1]+r;if(m.length>1){if(m[0]==m[1])return[b,w];var E=m[1]*u[0]+e,T=m[1]*u[1]+r;return[b,w,E,T]}else return[b,w]},Io=function(e,r,n){return r<=e&&e<=n||n<=e&&e<=r?e:e<=r&&r<=n||n<=r&&r<=e?r:n},Xr=function(e,r,n,a,i,s,o,u,l){var f=e-i,c=n-e,v=o-i,h=r-s,d=a-r,p=u-s,g=v*h-p*f,y=c*h-d*f,m=p*c-v*d;if(m!==0){var b=g/m,w=y/m,E=.001,T=0-E,x=1+E;return T<=b&&b<=x&&T<=w&&w<=x?[e+b*c,r+b*d]:l?[e+b*c,r+b*d]:[]}else return g===0||y===0?Io(e,n,o)===o?[o,u]:Io(e,n,i)===i?[i,s]:Io(i,o,n)===n?[n,a]:[]:[]},Ub=function(e,r,n,a,i){var s=[],o=a/2,u=i/2,l=r,f=n;s.push({x:l+o*e[0],y:f+u*e[1]});for(var c=1;c<e.length/2;c++)s.push({x:l+o*e[c*2],y:f+u*e[c*2+1]});return s},ti=function(e,r,n,a,i,s,o,u){var l=[],f,c=new Array(n.length),v=!0;s==null&&(v=!1);var h;if(v){for(var d=0;d<c.length/2;d++)c[d*2]=n[d*2]*s+a,c[d*2+1]=n[d*2+1]*o+i;if(u>0){var p=gs(c,-u);h=hs(p)}else h=c}else h=n;for(var g,y,m,b,w=0;w<h.length/2;w++)g=h[w*2],y=h[w*2+1],w<h.length/2-1?(m=h[(w+1)*2],b=h[(w+1)*2+1]):(m=h[0],b=h[1]),f=Xr(e,r,a,i,g,y,m,b),f.length!==0&&l.push(f[0],f[1]);return l},Gb=function(e,r,n,a,i,s,o,u,l){var f=[],c,v=new Array(n.length*2);l.forEach(function(m,b){b===0?(v[v.length-2]=m.startX,v[v.length-1]=m.startY):(v[b*4-2]=m.startX,v[b*4-1]=m.startY),v[b*4]=m.stopX,v[b*4+1]=m.stopY,c=Ma(e,r,a,i,m.cx,m.cy,m.radius),c.length!==0&&f.push(c[0],c[1])});for(var h=0;h<v.length/4;h++)c=Xr(e,r,a,i,v[h*4],v[h*4+1],v[h*4+2],v[h*4+3],!1),c.length!==0&&f.push(c[0],c[1]);if(f.length>2){for(var d=[f[0],f[1]],p=Math.pow(d[0]-e,2)+Math.pow(d[1]-r,2),g=1;g<f.length/2;g++){var y=Math.pow(f[g*2]-e,2)+Math.pow(f[g*2+1]-r,2);y<=p&&(d[0]=f[g*2],d[1]=f[g*2+1],p=y)}return d}return f},Ri=function(e,r,n){var a=[e[0]-r[0],e[1]-r[1]],i=Math.sqrt(a[0]*a[0]+a[1]*a[1]),s=(i-n)/i;return s<0&&(s=1e-5),[r[0]+s*a[0],r[1]+s*a[1]]},Mt=function(e,r){var n=nl(e,r);return n=rg(n),n},rg=function(e){for(var r,n,a=e.length/2,i=1/0,s=1/0,o=-1/0,u=-1/0,l=0;l<a;l++)r=e[2*l],n=e[2*l+1],i=Math.min(i,r),o=Math.max(o,r),s=Math.min(s,n),u=Math.max(u,n);for(var f=2/(o-i),c=2/(u-s),v=0;v<a;v++)r=e[2*v]=e[2*v]*f,n=e[2*v+1]=e[2*v+1]*c,i=Math.min(i,r),o=Math.max(o,r),s=Math.min(s,n),u=Math.max(u,n);if(s<-1)for(var h=0;h<a;h++)n=e[2*h+1]=e[2*h+1]+(-1-s);return e},nl=function(e,r){var n=1/e*2*Math.PI,a=e%2===0?Math.PI/2+n/2:Math.PI/2;a+=r;for(var i=new Array(e*2),s,o=0;o<e;o++)s=o*n+a,i[2*o]=Math.cos(s),i[2*o+1]=Math.sin(-s);return i},nn=function(e,r){return Math.min(e/4,r/4,8)},ng=function(e,r){return Math.min(e/10,r/10,8)},Zl=function(){return 8},Wb=function(e,r,n){return[e-2*r+n,2*(r-e),e]},al=function(e,r){return{heightOffset:Math.min(15,.05*r),widthOffset:Math.min(100,.25*e),ctrlPtOffsetPct:.05}};function Lo(t,e){function r(c){for(var v=[],h=0;h<c.length;h++){var d=c[h],p=c[(h+1)%c.length],g={x:p.x-d.x,y:p.y-d.y},y={x:-g.y,y:g.x},m=Math.sqrt(y.x*y.x+y.y*y.y);v.push({x:y.x/m,y:y.y/m})}return v}function n(c,v){var h=1/0,d=-1/0,p=$t(c),g;try{for(p.s();!(g=p.n()).done;){var y=g.value,m=y.x*v.x+y.y*v.y;h=Math.min(h,m),d=Math.max(d,m)}}catch(b){p.e(b)}finally{p.f()}return{min:h,max:d}}function a(c,v){return!(c.max<v.min||v.max<c.min)}var i=[].concat(fs(r(t)),fs(r(e))),s=$t(i),o;try{for(s.s();!(o=s.n()).done;){var u=o.value,l=n(t,u),f=n(e,u);if(!a(l,f))return!1}}catch(c){s.e(c)}finally{s.f()}return!0}var Kb=Et({dampingFactor:.8,precision:1e-6,iterations:200,weight:function(e){return 1}}),Yb={pageRank:function(e){for(var r=Kb(e),n=r.dampingFactor,a=r.precision,i=r.iterations,s=r.weight,o=this._private.cy,u=this.byGroup(),l=u.nodes,f=u.edges,c=l.length,v=c*c,h=f.length,d=new Array(v),p=new Array(c),g=(1-n)/c,y=0;y<c;y++){for(var m=0;m<c;m++){var b=y*c+m;d[b]=0}p[y]=0}for(var w=0;w<h;w++){var E=f[w],T=E.data("source"),x=E.data("target");if(T!==x){var S=l.indexOfId(T),D=l.indexOfId(x),A=s(E),k=D*c+S;d[k]+=A,p[S]+=A}}for(var R=1/c+g,M=0;M<c;M++)if(p[M]===0)for(var L=0;L<c;L++){var N=L*c+M;d[N]=R}else for(var O=0;O<c;O++){var I=O*c+M;d[I]=d[I]/p[M]+g}for(var F=new Array(c),H=new Array(c),G,z=0;z<c;z++)F[z]=1;for(var V=0;V<i;V++){for(var re=0;re<c;re++)H[re]=0;for(var ie=0;ie<c;ie++)for(var ne=0;ne<c;ne++){var oe=ie*c+ne;H[ie]+=d[oe]*F[ne]}Ab(H),G=F,F=H,H=G;for(var ve=0,ge=0;ge<c;ge++){var ue=G[ge]-F[ge];ve+=ue*ue}if(ve<a)break}var q={rank:function(C){return C=o.collection(C)[0],F[l.indexOf(C)]}};return q}},xc=Et({root:null,weight:function(e){return 1},directed:!1,alpha:0}),na={degreeCentralityNormalized:function(e){e=xc(e);var r=this.cy(),n=this.nodes(),a=n.length;if(e.directed){for(var f={},c={},v=0,h=0,d=0;d<a;d++){var p=n[d],g=p.id();e.root=p;var y=this.degreeCentrality(e);v<y.indegree&&(v=y.indegree),h<y.outdegree&&(h=y.outdegree),f[g]=y.indegree,c[g]=y.outdegree}return{indegree:function(b){return v==0?0:(De(b)&&(b=r.filter(b)),f[b.id()]/v)},outdegree:function(b){return h===0?0:(De(b)&&(b=r.filter(b)),c[b.id()]/h)}}}else{for(var i={},s=0,o=0;o<a;o++){var u=n[o];e.root=u;var l=this.degreeCentrality(e);s<l.degree&&(s=l.degree),i[u.id()]=l.degree}return{degree:function(b){return s===0?0:(De(b)&&(b=r.filter(b)),i[b.id()]/s)}}}},degreeCentrality:function(e){e=xc(e);var r=this.cy(),n=this,a=e,i=a.root,s=a.weight,o=a.directed,u=a.alpha;if(i=r.collection(i)[0],o){for(var h=i.connectedEdges(),d=h.filter(function(T){return T.target().same(i)&&n.has(T)}),p=h.filter(function(T){return T.source().same(i)&&n.has(T)}),g=d.length,y=p.length,m=0,b=0,w=0;w<d.length;w++)m+=s(d[w]);for(var E=0;E<p.length;E++)b+=s(p[E]);return{indegree:Math.pow(g,1-u)*Math.pow(m,u),outdegree:Math.pow(y,1-u)*Math.pow(b,u)}}else{for(var l=i.connectedEdges().intersection(n),f=l.length,c=0,v=0;v<l.length;v++)c+=s(l[v]);return{degree:Math.pow(f,1-u)*Math.pow(c,u)}}}};na.dc=na.degreeCentrality;na.dcn=na.degreeCentralityNormalised=na.degreeCentralityNormalized;var Ec=Et({harmonic:!0,weight:function(){return 1},directed:!1,root:null}),aa={closenessCentralityNormalized:function(e){for(var r=Ec(e),n=r.harmonic,a=r.weight,i=r.directed,s=this.cy(),o={},u=0,l=this.nodes(),f=this.floydWarshall({weight:a,directed:i}),c=0;c<l.length;c++){for(var v=0,h=l[c],d=0;d<l.length;d++)if(c!==d){var p=f.distance(h,l[d]);n?v+=1/p:v+=p}n||(v=1/v),u<v&&(u=v),o[h.id()]=v}return{closeness:function(y){return u==0?0:(De(y)?y=s.filter(y)[0].id():y=y.id(),o[y]/u)}}},closenessCentrality:function(e){var r=Ec(e),n=r.root,a=r.weight,i=r.directed,s=r.harmonic;n=this.filter(n)[0];for(var o=this.dijkstra({root:n,weight:a,directed:i}),u=0,l=this.nodes(),f=0;f<l.length;f++){var c=l[f];if(!c.same(n)){var v=o.distanceTo(c);s?u+=1/v:u+=v}}return s?u:1/u}};aa.cc=aa.closenessCentrality;aa.ccn=aa.closenessCentralityNormalised=aa.closenessCentralityNormalized;var Xb=Et({weight:null,directed:!1}),il={betweennessCentrality:function(e){for(var r=Xb(e),n=r.directed,a=r.weight,i=a!=null,s=this.cy(),o=this.nodes(),u={},l={},f=0,c={set:function(b,w){l[b]=w,w>f&&(f=w)},get:function(b){return l[b]}},v=0;v<o.length;v++){var h=o[v],d=h.id();n?u[d]=h.outgoers().nodes():u[d]=h.openNeighborhood().nodes(),c.set(d,0)}for(var p=function(){for(var b=o[g].id(),w=[],E={},T={},x={},S=new yi(function(ie,ne){return x[ie]-x[ne]}),D=0;D<o.length;D++){var A=o[D].id();E[A]=[],T[A]=0,x[A]=1/0}for(T[b]=1,x[b]=0,S.push(b);!S.empty();){var k=S.pop();if(w.push(k),i)for(var R=0;R<u[k].length;R++){var M=u[k][R],L=s.getElementById(k),N=void 0;L.edgesTo(M).length>0?N=L.edgesTo(M)[0]:N=M.edgesTo(L)[0];var O=a(N);M=M.id(),x[M]>x[k]+O&&(x[M]=x[k]+O,S.nodes.indexOf(M)<0?S.push(M):S.updateItem(M),T[M]=0,E[M]=[]),x[M]==x[k]+O&&(T[M]=T[M]+T[k],E[M].push(k))}else for(var I=0;I<u[k].length;I++){var F=u[k][I].id();x[F]==1/0&&(S.push(F),x[F]=x[k]+1),x[F]==x[k]+1&&(T[F]=T[F]+T[k],E[F].push(k))}}for(var H={},G=0;G<o.length;G++)H[o[G].id()]=0;for(;w.length>0;){for(var z=w.pop(),V=0;V<E[z].length;V++){var re=E[z][V];H[re]=H[re]+T[re]/T[z]*(1+H[z])}z!=o[g].id()&&c.set(z,c.get(z)+H[z])}},g=0;g<o.length;g++)p();var y={betweenness:function(b){var w=s.collection(b).id();return c.get(w)},betweennessNormalized:function(b){if(f==0)return 0;var w=s.collection(b).id();return c.get(w)/f}};return y.betweennessNormalised=y.betweennessNormalized,y}};il.bc=il.betweennessCentrality;var Zb=Et({expandFactor:2,inflateFactor:2,multFactor:1,maxIterations:20,attributes:[function(t){return 1}]}),Qb=function(e){return Zb(e)},Jb=function(e,r){for(var n=0,a=0;a<r.length;a++)n+=r[a](e);return n},jb=function(e,r,n){for(var a=0;a<r;a++)e[a*r+a]=n},ag=function(e,r){for(var n,a=0;a<r;a++){n=0;for(var i=0;i<r;i++)n+=e[i*r+a];for(var s=0;s<r;s++)e[s*r+a]=e[s*r+a]/n}},e1=function(e,r,n){for(var a=new Array(n*n),i=0;i<n;i++){for(var s=0;s<n;s++)a[i*n+s]=0;for(var o=0;o<n;o++)for(var u=0;u<n;u++)a[i*n+u]+=e[i*n+o]*r[o*n+u]}return a},t1=function(e,r,n){for(var a=e.slice(0),i=1;i<n;i++)e=e1(e,a,r);return e},r1=function(e,r,n){for(var a=new Array(r*r),i=0;i<r*r;i++)a[i]=Math.pow(e[i],n);return ag(a,r),a},n1=function(e,r,n,a){for(var i=0;i<n;i++){var s=Math.round(e[i]*Math.pow(10,a))/Math.pow(10,a),o=Math.round(r[i]*Math.pow(10,a))/Math.pow(10,a);if(s!==o)return!1}return!0},a1=function(e,r,n,a){for(var i=[],s=0;s<r;s++){for(var o=[],u=0;u<r;u++)Math.round(e[s*r+u]*1e3)/1e3>0&&o.push(n[u]);o.length!==0&&i.push(a.collection(o))}return i},i1=function(e,r){for(var n=0;n<e.length;n++)if(!r[n]||e[n].id()!==r[n].id())return!1;return!0},s1=function(e){for(var r=0;r<e.length;r++)for(var n=0;n<e.length;n++)r!=n&&i1(e[r],e[n])&&e.splice(n,1);return e},Cc=function(e){for(var r=this.nodes(),n=this.edges(),a=this.cy(),i=Qb(e),s={},o=0;o<r.length;o++)s[r[o].id()]=o;for(var u=r.length,l=u*u,f=new Array(l),c,v=0;v<l;v++)f[v]=0;for(var h=0;h<n.length;h++){var d=n[h],p=s[d.source().id()],g=s[d.target().id()],y=Jb(d,i.attributes);f[p*u+g]+=y,f[g*u+p]+=y}jb(f,u,i.multFactor),ag(f,u);for(var m=!0,b=0;m&&b<i.maxIterations;)m=!1,c=t1(f,u,i.expandFactor),f=r1(c,u,i.inflateFactor),n1(f,c,l,4)||(m=!0),b++;var w=a1(f,u,r,a);return w=s1(w),w},o1={markovClustering:Cc,mcl:Cc},u1=function(e){return e},ig=function(e,r){return Math.abs(r-e)},Tc=function(e,r,n){return e+ig(r,n)},Sc=function(e,r,n){return e+Math.pow(n-r,2)},l1=function(e){return Math.sqrt(e)},f1=function(e,r,n){return Math.max(e,ig(r,n))},Ca=function(e,r,n,a,i){for(var s=arguments.length>5&&arguments[5]!==void 0?arguments[5]:u1,o=a,u,l,f=0;f<e;f++)u=r(f),l=n(f),o=i(o,u,l);return s(o)},la={euclidean:function(e,r,n){return e>=2?Ca(e,r,n,0,Sc,l1):Ca(e,r,n,0,Tc)},squaredEuclidean:function(e,r,n){return Ca(e,r,n,0,Sc)},manhattan:function(e,r,n){return Ca(e,r,n,0,Tc)},max:function(e,r,n){return Ca(e,r,n,-1/0,f1)}};la["squared-euclidean"]=la.squaredEuclidean;la.squaredeuclidean=la.squaredEuclidean;function Vs(t,e,r,n,a,i){var s;return et(t)?s=t:s=la[t]||la.euclidean,e===0&&et(t)?s(a,i):s(e,r,n,a,i)}var c1=Et({k:2,m:2,sensitivityThreshold:1e-4,distance:"euclidean",maxIterations:10,attributes:[],testMode:!1,testCentroids:null}),Ql=function(e){return c1(e)},ps=function(e,r,n,a,i){var s=i!=="kMedoids",o=s?function(c){return n[c]}:function(c){return a[c](n)},u=function(v){return a[v](r)},l=n,f=r;return Vs(e,a.length,o,u,l,f)},Oo=function(e,r,n){for(var a=n.length,i=new Array(a),s=new Array(a),o=new Array(r),u=null,l=0;l<a;l++)i[l]=e.min(n[l]).value,s[l]=e.max(n[l]).value;for(var f=0;f<r;f++){u=[];for(var c=0;c<a;c++)u[c]=Math.random()*(s[c]-i[c])+i[c];o[f]=u}return o},sg=function(e,r,n,a,i){for(var s=1/0,o=0,u=0;u<r.length;u++){var l=ps(n,e,r[u],a,i);l<s&&(s=l,o=u)}return o},og=function(e,r,n){for(var a=[],i=null,s=0;s<r.length;s++)i=r[s],n[i.id()]===e&&a.push(i);return a},v1=function(e,r,n){return Math.abs(r-e)<=n},d1=function(e,r,n){for(var a=0;a<e.length;a++)for(var i=0;i<e[a].length;i++){var s=Math.abs(e[a][i]-r[a][i]);if(s>n)return!1}return!0},h1=function(e,r,n){for(var a=0;a<n;a++)if(e===r[a])return!0;return!1},Pc=function(e,r){var n=new Array(r);if(e.length<50)for(var a=0;a<r;a++){for(var i=e[Math.floor(Math.random()*e.length)];h1(i,n,a);)i=e[Math.floor(Math.random()*e.length)];n[a]=i}else for(var s=0;s<r;s++)n[s]=e[Math.floor(Math.random()*e.length)];return n},Dc=function(e,r,n){for(var a=0,i=0;i<r.length;i++)a+=ps("manhattan",r[i],e,n,"kMedoids");return a},g1=function(e){var r=this.cy(),n=this.nodes(),a=null,i=Ql(e),s=new Array(i.k),o={},u;i.testMode?typeof i.testCentroids=="number"?(i.testCentroids,u=Oo(n,i.k,i.attributes)):vt(i.testCentroids)==="object"?u=i.testCentroids:u=Oo(n,i.k,i.attributes):u=Oo(n,i.k,i.attributes);for(var l=!0,f=0;l&&f<i.maxIterations;){for(var c=0;c<n.length;c++)a=n[c],o[a.id()]=sg(a,u,i.distance,i.attributes,"kMeans");l=!1;for(var v=0;v<i.k;v++){var h=og(v,n,o);if(h.length!==0){for(var d=i.attributes.length,p=u[v],g=new Array(d),y=new Array(d),m=0;m<d;m++){y[m]=0;for(var b=0;b<h.length;b++)a=h[b],y[m]+=i.attributes[m](a);g[m]=y[m]/h.length,v1(g[m],p[m],i.sensitivityThreshold)||(l=!0)}u[v]=g,s[v]=r.collection(h)}}f++}return s},p1=function(e){var r=this.cy(),n=this.nodes(),a=null,i=Ql(e),s=new Array(i.k),o,u={},l,f=new Array(i.k);i.testMode?typeof i.testCentroids=="number"||(vt(i.testCentroids)==="object"?o=i.testCentroids:o=Pc(n,i.k)):o=Pc(n,i.k);for(var c=!0,v=0;c&&v<i.maxIterations;){for(var h=0;h<n.length;h++)a=n[h],u[a.id()]=sg(a,o,i.distance,i.attributes,"kMedoids");c=!1;for(var d=0;d<o.length;d++){var p=og(d,n,u);if(p.length!==0){f[d]=Dc(o[d],p,i.attributes);for(var g=0;g<p.length;g++)l=Dc(p[g],p,i.attributes),l<f[d]&&(f[d]=l,o[d]=p[g],c=!0);s[d]=r.collection(p)}}v++}return s},y1=function(e,r,n,a,i){for(var s,o,u=0;u<r.length;u++)for(var l=0;l<e.length;l++)a[u][l]=Math.pow(n[u][l],i.m);for(var f=0;f<e.length;f++)for(var c=0;c<i.attributes.length;c++){s=0,o=0;for(var v=0;v<r.length;v++)s+=a[v][f]*i.attributes[c](r[v]),o+=a[v][f];e[f][c]=s/o}},m1=function(e,r,n,a,i){for(var s=0;s<e.length;s++)r[s]=e[s].slice();for(var o,u,l,f=2/(i.m-1),c=0;c<n.length;c++)for(var v=0;v<a.length;v++){o=0;for(var h=0;h<n.length;h++)u=ps(i.distance,a[v],n[c],i.attributes,"cmeans"),l=ps(i.distance,a[v],n[h],i.attributes,"cmeans"),o+=Math.pow(u/l,f);e[v][c]=1/o}},b1=function(e,r,n,a){for(var i=new Array(n.k),s=0;s<i.length;s++)i[s]=[];for(var o,u,l=0;l<r.length;l++){o=-1/0,u=-1;for(var f=0;f<r[0].length;f++)r[l][f]>o&&(o=r[l][f],u=f);i[u].push(e[l])}for(var c=0;c<i.length;c++)i[c]=a.collection(i[c]);return i},Ac=function(e){var r=this.cy(),n=this.nodes(),a=Ql(e),i,s,o,u,l;u=new Array(n.length);for(var f=0;f<n.length;f++)u[f]=new Array(a.k);o=new Array(n.length);for(var c=0;c<n.length;c++)o[c]=new Array(a.k);for(var v=0;v<n.length;v++){for(var h=0,d=0;d<a.k;d++)o[v][d]=Math.random(),h+=o[v][d];for(var p=0;p<a.k;p++)o[v][p]=o[v][p]/h}s=new Array(a.k);for(var g=0;g<a.k;g++)s[g]=new Array(a.attributes.length);l=new Array(n.length);for(var y=0;y<n.length;y++)l[y]=new Array(a.k);for(var m=!0,b=0;m&&b<a.maxIterations;)m=!1,y1(s,n,o,l,a),m1(o,u,s,n,a),d1(o,u,a.sensitivityThreshold)||(m=!0),b++;return i=b1(n,o,a,r),{clusters:i,degreeOfMembership:o}},w1={kMeans:g1,kMedoids:p1,fuzzyCMeans:Ac,fcm:Ac},x1=Et({distance:"euclidean",linkage:"min",mode:"threshold",threshold:1/0,addDendrogram:!1,dendrogramDepth:0,attributes:[]}),E1={single:"min",complete:"max"},C1=function(e){var r=x1(e),n=E1[r.linkage];return n!=null&&(r.linkage=n),r},kc=function(e,r,n,a,i){for(var s=0,o=1/0,u,l=i.attributes,f=function(D,A){return Vs(i.distance,l.length,function(k){return l[k](D)},function(k){return l[k](A)},D,A)},c=0;c<e.length;c++){var v=e[c].key,h=n[v][a[v]];h<o&&(s=v,o=h)}if(i.mode==="threshold"&&o>=i.threshold||i.mode==="dendrogram"&&e.length===1)return!1;var d=r[s],p=r[a[s]],g;i.mode==="dendrogram"?g={left:d,right:p,key:d.key}:g={value:d.value.concat(p.value),key:d.key},e[d.index]=g,e.splice(p.index,1),r[d.key]=g;for(var y=0;y<e.length;y++){var m=e[y];d.key===m.key?u=1/0:i.linkage==="min"?(u=n[d.key][m.key],n[d.key][m.key]>n[p.key][m.key]&&(u=n[p.key][m.key])):i.linkage==="max"?(u=n[d.key][m.key],n[d.key][m.key]<n[p.key][m.key]&&(u=n[p.key][m.key])):i.linkage==="mean"?u=(n[d.key][m.key]*d.size+n[p.key][m.key]*p.size)/(d.size+p.size):i.mode==="dendrogram"?u=f(m.value,d.value):u=f(m.value[0],d.value[0]),n[d.key][m.key]=n[m.key][d.key]=u}for(var b=0;b<e.length;b++){var w=e[b].key;if(a[w]===d.key||a[w]===p.key){for(var E=w,T=0;T<e.length;T++){var x=e[T].key;n[w][x]<n[w][E]&&(E=x)}a[w]=E}e[b].index=b}return d.key=p.key=d.index=p.index=null,!0},Xn=function(e,r,n){e&&(e.value?r.push(e.value):(e.left&&Xn(e.left,r),e.right&&Xn(e.right,r)))},sl=function(e,r){if(!e)return"";if(e.left&&e.right){var n=sl(e.left,r),a=sl(e.right,r),i=r.add({group:"nodes",data:{id:n+","+a}});return r.add({group:"edges",data:{source:n,target:i.id()}}),r.add({group:"edges",data:{source:a,target:i.id()}}),i.id()}else if(e.value)return e.value.id()},ol=function(e,r,n){if(!e)return[];var a=[],i=[],s=[];return r===0?(e.left&&Xn(e.left,a),e.right&&Xn(e.right,i),s=a.concat(i),[n.collection(s)]):r===1?e.value?[n.collection(e.value)]:(e.left&&Xn(e.left,a),e.right&&Xn(e.right,i),[n.collection(a),n.collection(i)]):e.value?[n.collection(e.value)]:(e.left&&(a=ol(e.left,r-1,n)),e.right&&(i=ol(e.right,r-1,n)),a.concat(i))},Bc=function(e){for(var r=this.cy(),n=this.nodes(),a=C1(e),i=a.attributes,s=function(b,w){return Vs(a.distance,i.length,function(E){return i[E](b)},function(E){return i[E](w)},b,w)},o=[],u=[],l=[],f=[],c=0;c<n.length;c++){var v={value:a.mode==="dendrogram"?n[c]:[n[c]],key:c,index:c};o[c]=v,f[c]=v,u[c]=[],l[c]=0}for(var h=0;h<o.length;h++)for(var d=0;d<=h;d++){var p=void 0;a.mode==="dendrogram"?p=h===d?1/0:s(o[h].value,o[d].value):p=h===d?1/0:s(o[h].value[0],o[d].value[0]),u[h][d]=p,u[d][h]=p,p<u[h][l[h]]&&(l[h]=d)}for(var g=kc(o,f,u,l,a);g;)g=kc(o,f,u,l,a);var y;return a.mode==="dendrogram"?(y=ol(o[0],a.dendrogramDepth,r),a.addDendrogram&&sl(o[0],r)):(y=new Array(o.length),o.forEach(function(m,b){m.key=m.index=null,y[b]=r.collection(m.value)})),y},T1={hierarchicalClustering:Bc,hca:Bc},S1=Et({distance:"euclidean",preference:"median",damping:.8,maxIterations:1e3,minIterations:100,attributes:[]}),P1=function(e){var r=e.damping,n=e.preference;.5<=r&&r<1||je("Damping must range on [0.5, 1).  Got: ".concat(r));var a=["median","mean","min","max"];return a.some(function(i){return i===n})||he(n)||je("Preference must be one of [".concat(a.map(function(i){return"'".concat(i,"'")}).join(", "),"] or a number.  Got: ").concat(n)),S1(e)},D1=function(e,r,n,a){var i=function(o,u){return a[u](o)};return-Vs(e,a.length,function(s){return i(r,s)},function(s){return i(n,s)},r,n)},A1=function(e,r){var n=null;return r==="median"?n=Pb(e):r==="mean"?n=Sb(e):r==="min"?n=Cb(e):r==="max"?n=Tb(e):n=r,n},k1=function(e,r,n){for(var a=[],i=0;i<e;i++)r[i*e+i]+n[i*e+i]>0&&a.push(i);return a},Rc=function(e,r,n){for(var a=[],i=0;i<e;i++){for(var s=-1,o=-1/0,u=0;u<n.length;u++){var l=n[u];r[i*e+l]>o&&(s=l,o=r[i*e+l])}s>0&&a.push(s)}for(var f=0;f<n.length;f++)a[n[f]]=n[f];return a},B1=function(e,r,n){for(var a=Rc(e,r,n),i=0;i<n.length;i++){for(var s=[],o=0;o<a.length;o++)a[o]===n[i]&&s.push(o);for(var u=-1,l=-1/0,f=0;f<s.length;f++){for(var c=0,v=0;v<s.length;v++)c+=r[s[v]*e+s[f]];c>l&&(u=f,l=c)}n[i]=s[u]}return a=Rc(e,r,n),a},Mc=function(e){for(var r=this.cy(),n=this.nodes(),a=P1(e),i={},s=0;s<n.length;s++)i[n[s].id()]=s;var o,u,l,f,c,v;o=n.length,u=o*o,l=new Array(u);for(var h=0;h<u;h++)l[h]=-1/0;for(var d=0;d<o;d++)for(var p=0;p<o;p++)d!==p&&(l[d*o+p]=D1(a.distance,n[d],n[p],a.attributes));f=A1(l,a.preference);for(var g=0;g<o;g++)l[g*o+g]=f;c=new Array(u);for(var y=0;y<u;y++)c[y]=0;v=new Array(u);for(var m=0;m<u;m++)v[m]=0;for(var b=new Array(o),w=new Array(o),E=new Array(o),T=0;T<o;T++)b[T]=0,w[T]=0,E[T]=0;for(var x=new Array(o*a.minIterations),S=0;S<x.length;S++)x[S]=0;var D;for(D=0;D<a.maxIterations;D++){for(var A=0;A<o;A++){for(var k=-1/0,R=-1/0,M=-1,L=0,N=0;N<o;N++)b[N]=c[A*o+N],L=v[A*o+N]+l[A*o+N],L>=k?(R=k,k=L,M=N):L>R&&(R=L);for(var O=0;O<o;O++)c[A*o+O]=(1-a.damping)*(l[A*o+O]-k)+a.damping*b[O];c[A*o+M]=(1-a.damping)*(l[A*o+M]-R)+a.damping*b[M]}for(var I=0;I<o;I++){for(var F=0,H=0;H<o;H++)b[H]=v[H*o+I],w[H]=Math.max(0,c[H*o+I]),F+=w[H];F-=w[I],w[I]=c[I*o+I],F+=w[I];for(var G=0;G<o;G++)v[G*o+I]=(1-a.damping)*Math.min(0,F-w[G])+a.damping*b[G];v[I*o+I]=(1-a.damping)*(F-w[I])+a.damping*b[I]}for(var z=0,V=0;V<o;V++){var re=v[V*o+V]+c[V*o+V]>0?1:0;x[D%a.minIterations*o+V]=re,z+=re}if(z>0&&(D>=a.minIterations-1||D==a.maxIterations-1)){for(var ie=0,ne=0;ne<o;ne++){E[ne]=0;for(var oe=0;oe<a.minIterations;oe++)E[ne]+=x[oe*o+ne];(E[ne]===0||E[ne]===a.minIterations)&&ie++}if(ie===o)break}}for(var ve=k1(o,c,v),ge=B1(o,l,ve),ue={},q=0;q<ve.length;q++)ue[ve[q]]=[];for(var $=0;$<n.length;$++){var C=i[n[$].id()],B=ge[C];B!=null&&ue[B].push(n[$])}for(var _=new Array(ve.length),K=0;K<ve.length;K++)_[K]=r.collection(ue[ve[K]]);return _},R1={affinityPropagation:Mc,ap:Mc},M1=Et({root:void 0,directed:!1}),I1={hierholzer:function(e){if(!ze(e)){var r=arguments;e={root:r[0],directed:r[1]}}var n=M1(e),a=n.root,i=n.directed,s=this,o=!1,u,l,f;a&&(f=De(a)?this.filter(a)[0].id():a[0].id());var c={},v={};i?s.forEach(function(m){var b=m.id();if(m.isNode()){var w=m.indegree(!0),E=m.outdegree(!0),T=w-E,x=E-w;T==1?u?o=!0:u=b:x==1?l?o=!0:l=b:(x>1||T>1)&&(o=!0),c[b]=[],m.outgoers().forEach(function(S){S.isEdge()&&c[b].push(S.id())})}else v[b]=[void 0,m.target().id()]}):s.forEach(function(m){var b=m.id();if(m.isNode()){var w=m.degree(!0);w%2&&(u?l?o=!0:l=b:u=b),c[b]=[],m.connectedEdges().forEach(function(E){return c[b].push(E.id())})}else v[b]=[m.source().id(),m.target().id()]});var h={found:!1,trail:void 0};if(o)return h;if(l&&u)if(i){if(f&&l!=f)return h;f=l}else{if(f&&l!=f&&u!=f)return h;f||(f=l)}else f||(f=s[0].id());var d=function(b){for(var w=b,E=[b],T,x,S;c[w].length;)T=c[w].shift(),x=v[T][0],S=v[T][1],w!=S?(c[S]=c[S].filter(function(D){return D!=T}),w=S):!i&&w!=x&&(c[x]=c[x].filter(function(D){return D!=T}),w=x),E.unshift(T),E.unshift(w);return E},p=[],g=[];for(g=d(f);g.length!=1;)c[g[0]].length==0?(p.unshift(s.getElementById(g.shift())),p.unshift(s.getElementById(g.shift()))):g=d(g.shift()).concat(g);p.unshift(s.getElementById(g.shift()));for(var y in c)if(c[y].length)return h;return h.found=!0,h.trail=this.spawn(p,!0),h}},Mi=function(){var e=this,r={},n=0,a=0,i=[],s=[],o={},u=function(v,h){for(var d=s.length-1,p=[],g=e.spawn();s[d].x!=v||s[d].y!=h;)p.push(s.pop().edge),d--;p.push(s.pop().edge),p.forEach(function(y){var m=y.connectedNodes().intersection(e);g.merge(y),m.forEach(function(b){var w=b.id(),E=b.connectedEdges().intersection(e);g.merge(b),r[w].cutVertex?g.merge(E.filter(function(T){return T.isLoop()})):g.merge(E)})}),i.push(g)},l=function(v,h,d){v===d&&(a+=1),r[h]={id:n,low:n++,cutVertex:!1};var p=e.getElementById(h).connectedEdges().intersection(e);if(p.size()===0)i.push(e.spawn(e.getElementById(h)));else{var g,y,m,b;p.forEach(function(w){g=w.source().id(),y=w.target().id(),m=g===h?y:g,m!==d&&(b=w.id(),o[b]||(o[b]=!0,s.push({x:h,y:m,edge:w})),m in r?r[h].low=Math.min(r[h].low,r[m].id):(l(v,m,h),r[h].low=Math.min(r[h].low,r[m].low),r[h].id<=r[m].low&&(r[h].cutVertex=!0,u(h,m))))})}};e.forEach(function(c){if(c.isNode()){var v=c.id();v in r||(a=0,l(v,v),r[v].cutVertex=a>1)}});var f=Object.keys(r).filter(function(c){return r[c].cutVertex}).map(function(c){return e.getElementById(c)});return{cut:e.spawn(f),components:i}},L1={hopcroftTarjanBiconnected:Mi,htbc:Mi,htb:Mi,hopcroftTarjanBiconnectedComponents:Mi},Ii=function(){var e=this,r={},n=0,a=[],i=[],s=e.spawn(e),o=function(l){i.push(l),r[l]={index:n,low:n++,explored:!1};var f=e.getElementById(l).connectedEdges().intersection(e);if(f.forEach(function(p){var g=p.target().id();g!==l&&(g in r||o(g),r[g].explored||(r[l].low=Math.min(r[l].low,r[g].low)))}),r[l].index===r[l].low){for(var c=e.spawn();;){var v=i.pop();if(c.merge(e.getElementById(v)),r[v].low=r[l].index,r[v].explored=!0,v===l)break}var h=c.edgesWith(c),d=c.merge(h);a.push(d),s=s.difference(d)}};return e.forEach(function(u){if(u.isNode()){var l=u.id();l in r||o(l)}}),{cut:s,components:a}},O1={tarjanStronglyConnected:Ii,tsc:Ii,tscc:Ii,tarjanStronglyConnectedComponents:Ii},ug={};[ja,cb,vb,hb,pb,mb,xb,Yb,na,aa,il,o1,w1,T1,R1,I1,L1,O1].forEach(function(t){ke(ug,t)});var lg=0,fg=1,cg=2,ar=function(e){if(!(this instanceof ar))return new ar(e);this.id="Thenable/1.0.7",this.state=lg,this.fulfillValue=void 0,this.rejectReason=void 0,this.onFulfilled=[],this.onRejected=[],this.proxy={then:this.then.bind(this)},typeof e=="function"&&e.call(this,this.fulfill.bind(this),this.reject.bind(this))};ar.prototype={fulfill:function(e){return Ic(this,fg,"fulfillValue",e)},reject:function(e){return Ic(this,cg,"rejectReason",e)},then:function(e,r){var n=this,a=new ar;return n.onFulfilled.push(Oc(e,a,"fulfill")),n.onRejected.push(Oc(r,a,"reject")),vg(n),a.proxy}};var Ic=function(e,r,n,a){return e.state===lg&&(e.state=r,e[n]=a,vg(e)),e},vg=function(e){e.state===fg?Lc(e,"onFulfilled",e.fulfillValue):e.state===cg&&Lc(e,"onRejected",e.rejectReason)},Lc=function(e,r,n){if(e[r].length!==0){var a=e[r];e[r]=[];var i=function(){for(var o=0;o<a.length;o++)a[o](n)};typeof setImmediate=="function"?setImmediate(i):setTimeout(i,0)}},Oc=function(e,r,n){return function(a){if(typeof e!="function")r[n].call(r,a);else{var i;try{i=e(a)}catch(s){r.reject(s);return}dg(r,i)}}},dg=function(e,r){if(e===r||e.proxy===r){e.reject(new TypeError("cannot resolve promise with itself"));return}var n;if(vt(r)==="object"&&r!==null||typeof r=="function")try{n=r.then}catch(i){e.reject(i);return}if(typeof n=="function"){var a=!1;try{n.call(r,function(i){a||(a=!0,i===r?e.reject(new TypeError("circular thenable chain")):dg(e,i))},function(i){a||(a=!0,e.reject(i))})}catch(i){a||e.reject(i)}return}e.fulfill(r)};ar.all=function(t){return new ar(function(e,r){for(var n=new Array(t.length),a=0,i=function(u,l){n[u]=l,a++,a===t.length&&e(n)},s=0;s<t.length;s++)(function(o){var u=t[o],l=u!=null&&u.then!=null;if(l)u.then(function(c){i(o,c)},function(c){r(c)});else{var f=u;i(o,f)}})(s)})};ar.resolve=function(t){return new ar(function(e,r){e(t)})};ar.reject=function(t){return new ar(function(e,r){r(t)})};var va=typeof Promise<"u"?Promise:ar,ul=function(e,r,n){var a=ql(e),i=!a,s=this._private=ke({duration:1e3},r,n);if(s.target=e,s.style=s.style||s.css,s.started=!1,s.playing=!1,s.hooked=!1,s.applying=!1,s.progress=0,s.completes=[],s.frames=[],s.complete&&et(s.complete)&&s.completes.push(s.complete),i){var o=e.position();s.startPosition=s.startPosition||{x:o.x,y:o.y},s.startStyle=s.startStyle||e.cy().style().getAnimationStartStyle(e,s.style)}if(a){var u=e.pan();s.startPan={x:u.x,y:u.y},s.startZoom=e.zoom()}this.length=1,this[0]=this},kn=ul.prototype;ke(kn,{instanceString:function(){return"animation"},hook:function(){var e=this._private;if(!e.hooked){var r,n=e.target._private.animation;e.queue?r=n.queue:r=n.current,r.push(this),Gt(e.target)&&e.target.cy().addToAnimationPool(e.target),e.hooked=!0}return this},play:function(){var e=this._private;return e.progress===1&&(e.progress=0),e.playing=!0,e.started=!1,e.stopped=!1,this.hook(),this},playing:function(){return this._private.playing},apply:function(){var e=this._private;return e.applying=!0,e.started=!1,e.stopped=!1,this.hook(),this},applying:function(){return this._private.applying},pause:function(){var e=this._private;return e.playing=!1,e.started=!1,this},stop:function(){var e=this._private;return e.playing=!1,e.started=!1,e.stopped=!0,this},rewind:function(){return this.progress(0)},fastforward:function(){return this.progress(1)},time:function(e){var r=this._private;return e===void 0?r.progress*r.duration:this.progress(e/r.duration)},progress:function(e){var r=this._private,n=r.playing;return e===void 0?r.progress:(n&&this.pause(),r.progress=e,r.started=!1,n&&this.play(),this)},completed:function(){return this._private.progress===1},reverse:function(){var e=this._private,r=e.playing;r&&this.pause(),e.progress=1-e.progress,e.started=!1;var n=function(l,f){var c=e[l];c!=null&&(e[l]=e[f],e[f]=c)};if(n("zoom","startZoom"),n("pan","startPan"),n("position","startPosition"),e.style)for(var a=0;a<e.style.length;a++){var i=e.style[a],s=i.name,o=e.startStyle[s];e.startStyle[s]=i,e.style[a]=o}return r&&this.play(),this},promise:function(e){var r=this._private,n;switch(e){case"frame":n=r.frames;break;default:case"complete":case"completed":n=r.completes}return new va(function(a,i){n.push(function(){a()})})}});kn.complete=kn.completed;kn.run=kn.play;kn.running=kn.playing;var N1={animated:function(){return function(){var r=this,n=r.length!==void 0,a=n?r:[r],i=this._private.cy||this;if(!i.styleEnabled())return!1;var s=a[0];if(s)return s._private.animation.current.length>0}},clearQueue:function(){return function(){var r=this,n=r.length!==void 0,a=n?r:[r],i=this._private.cy||this;if(!i.styleEnabled())return this;for(var s=0;s<a.length;s++){var o=a[s];o._private.animation.queue=[]}return this}},delay:function(){return function(r,n){var a=this._private.cy||this;return a.styleEnabled()?this.animate({delay:r,duration:r,complete:n}):this}},delayAnimation:function(){return function(r,n){var a=this._private.cy||this;return a.styleEnabled()?this.animation({delay:r,duration:r,complete:n}):this}},animation:function(){return function(r,n){var a=this,i=a.length!==void 0,s=i?a:[a],o=this._private.cy||this,u=!i,l=!u;if(!o.styleEnabled())return this;var f=o.style();r=ke({},r,n);var c=Object.keys(r).length===0;if(c)return new ul(s[0],r);switch(r.duration===void 0&&(r.duration=400),r.duration){case"slow":r.duration=600;break;case"fast":r.duration=200;break}if(l&&(r.style=f.getPropsList(r.style||r.css),r.css=void 0),l&&r.renderedPosition!=null){var v=r.renderedPosition,h=o.pan(),d=o.zoom();r.position=Jh(v,d,h)}if(u&&r.panBy!=null){var p=r.panBy,g=o.pan();r.pan={x:g.x+p.x,y:g.y+p.y}}var y=r.center||r.centre;if(u&&y!=null){var m=o.getCenterPan(y.eles,r.zoom);m!=null&&(r.pan=m)}if(u&&r.fit!=null){var b=r.fit,w=o.getFitViewport(b.eles||b.boundingBox,b.padding);w!=null&&(r.pan=w.pan,r.zoom=w.zoom)}if(u&&ze(r.zoom)){var E=o.getZoomedViewport(r.zoom);E!=null?(E.zoomed&&(r.zoom=E.zoom),E.panned&&(r.pan=E.pan)):r.zoom=null}return new ul(s[0],r)}},animate:function(){return function(r,n){var a=this,i=a.length!==void 0,s=i?a:[a],o=this._private.cy||this;if(!o.styleEnabled())return this;n&&(r=ke({},r,n));for(var u=0;u<s.length;u++){var l=s[u],f=l.animated()&&(r.queue===void 0||r.queue),c=l.animation(r,f?{queue:!0}:void 0);c.play()}return this}},stop:function(){return function(r,n){var a=this,i=a.length!==void 0,s=i?a:[a],o=this._private.cy||this;if(!o.styleEnabled())return this;for(var u=0;u<s.length;u++){for(var l=s[u],f=l._private,c=f.animation.current,v=0;v<c.length;v++){var h=c[v],d=h._private;n&&(d.duration=0)}r&&(f.animation.queue=[]),n||(f.animation.current=[])}return o.notify("draw"),this}}},No,Nc;function qs(){if(Nc)return No;Nc=1;var t=Array.isArray;return No=t,No}var Fo,Fc;function F1(){if(Fc)return Fo;Fc=1;var t=qs(),e=gi(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function a(i,s){if(t(i))return!1;var o=typeof i;return o=="number"||o=="symbol"||o=="boolean"||i==null||e(i)?!0:n.test(i)||!r.test(i)||s!=null&&i in Object(s)}return Fo=a,Fo}var _o,_c;function _1(){if(_c)return _o;_c=1;var t=$h(),e=hi(),r="[object AsyncFunction]",n="[object Function]",a="[object GeneratorFunction]",i="[object Proxy]";function s(o){if(!e(o))return!1;var u=t(o);return u==n||u==a||u==r||u==i}return _o=s,_o}var zo,zc;function z1(){if(zc)return zo;zc=1;var t=Fs(),e=t["__core-js_shared__"];return zo=e,zo}var Vo,Vc;function V1(){if(Vc)return Vo;Vc=1;var t=z1(),e=(function(){var n=/[^.]+$/.exec(t&&t.keys&&t.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""})();function r(n){return!!e&&e in n}return Vo=r,Vo}var qo,qc;function q1(){if(qc)return qo;qc=1;var t=Function.prototype,e=t.toString;function r(n){if(n!=null){try{return e.call(n)}catch{}try{return n+""}catch{}}return""}return qo=r,qo}var Ho,Hc;function H1(){if(Hc)return Ho;Hc=1;var t=_1(),e=V1(),r=hi(),n=q1(),a=/[\\^$.*+?()[\]{}|]/g,i=/^\[object .+?Constructor\]$/,s=Function.prototype,o=Object.prototype,u=s.toString,l=o.hasOwnProperty,f=RegExp("^"+u.call(l).replace(a,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function c(v){if(!r(v)||e(v))return!1;var h=t(v)?f:i;return h.test(n(v))}return Ho=c,Ho}var $o,$c;function $1(){if($c)return $o;$c=1;function t(e,r){return e?.[r]}return $o=t,$o}var Uo,Uc;function Jl(){if(Uc)return Uo;Uc=1;var t=H1(),e=$1();function r(n,a){var i=e(n,a);return t(i)?i:void 0}return Uo=r,Uo}var Go,Gc;function Hs(){if(Gc)return Go;Gc=1;var t=Jl(),e=t(Object,"create");return Go=e,Go}var Wo,Wc;function U1(){if(Wc)return Wo;Wc=1;var t=Hs();function e(){this.__data__=t?t(null):{},this.size=0}return Wo=e,Wo}var Ko,Kc;function G1(){if(Kc)return Ko;Kc=1;function t(e){var r=this.has(e)&&delete this.__data__[e];return this.size-=r?1:0,r}return Ko=t,Ko}var Yo,Yc;function W1(){if(Yc)return Yo;Yc=1;var t=Hs(),e="__lodash_hash_undefined__",r=Object.prototype,n=r.hasOwnProperty;function a(i){var s=this.__data__;if(t){var o=s[i];return o===e?void 0:o}return n.call(s,i)?s[i]:void 0}return Yo=a,Yo}var Xo,Xc;function K1(){if(Xc)return Xo;Xc=1;var t=Hs(),e=Object.prototype,r=e.hasOwnProperty;function n(a){var i=this.__data__;return t?i[a]!==void 0:r.call(i,a)}return Xo=n,Xo}var Zo,Zc;function Y1(){if(Zc)return Zo;Zc=1;var t=Hs(),e="__lodash_hash_undefined__";function r(n,a){var i=this.__data__;return this.size+=this.has(n)?0:1,i[n]=t&&a===void 0?e:a,this}return Zo=r,Zo}var Qo,Qc;function X1(){if(Qc)return Qo;Qc=1;var t=U1(),e=G1(),r=W1(),n=K1(),a=Y1();function i(s){var o=-1,u=s==null?0:s.length;for(this.clear();++o<u;){var l=s[o];this.set(l[0],l[1])}}return i.prototype.clear=t,i.prototype.delete=e,i.prototype.get=r,i.prototype.has=n,i.prototype.set=a,Qo=i,Qo}var Jo,Jc;function Z1(){if(Jc)return Jo;Jc=1;function t(){this.__data__=[],this.size=0}return Jo=t,Jo}var jo,jc;function hg(){if(jc)return jo;jc=1;function t(e,r){return e===r||e!==e&&r!==r}return jo=t,jo}var eu,ev;function $s(){if(ev)return eu;ev=1;var t=hg();function e(r,n){for(var a=r.length;a--;)if(t(r[a][0],n))return a;return-1}return eu=e,eu}var tu,tv;function Q1(){if(tv)return tu;tv=1;var t=$s(),e=Array.prototype,r=e.splice;function n(a){var i=this.__data__,s=t(i,a);if(s<0)return!1;var o=i.length-1;return s==o?i.pop():r.call(i,s,1),--this.size,!0}return tu=n,tu}var ru,rv;function J1(){if(rv)return ru;rv=1;var t=$s();function e(r){var n=this.__data__,a=t(n,r);return a<0?void 0:n[a][1]}return ru=e,ru}var nu,nv;function j1(){if(nv)return nu;nv=1;var t=$s();function e(r){return t(this.__data__,r)>-1}return nu=e,nu}var au,av;function ew(){if(av)return au;av=1;var t=$s();function e(r,n){var a=this.__data__,i=t(a,r);return i<0?(++this.size,a.push([r,n])):a[i][1]=n,this}return au=e,au}var iu,iv;function tw(){if(iv)return iu;iv=1;var t=Z1(),e=Q1(),r=J1(),n=j1(),a=ew();function i(s){var o=-1,u=s==null?0:s.length;for(this.clear();++o<u;){var l=s[o];this.set(l[0],l[1])}}return i.prototype.clear=t,i.prototype.delete=e,i.prototype.get=r,i.prototype.has=n,i.prototype.set=a,iu=i,iu}var su,sv;function rw(){if(sv)return su;sv=1;var t=Jl(),e=Fs(),r=t(e,"Map");return su=r,su}var ou,ov;function nw(){if(ov)return ou;ov=1;var t=X1(),e=tw(),r=rw();function n(){this.size=0,this.__data__={hash:new t,map:new(r||e),string:new t}}return ou=n,ou}var uu,uv;function aw(){if(uv)return uu;uv=1;function t(e){var r=typeof e;return r=="string"||r=="number"||r=="symbol"||r=="boolean"?e!=="__proto__":e===null}return uu=t,uu}var lu,lv;function Us(){if(lv)return lu;lv=1;var t=aw();function e(r,n){var a=r.__data__;return t(n)?a[typeof n=="string"?"string":"hash"]:a.map}return lu=e,lu}var fu,fv;function iw(){if(fv)return fu;fv=1;var t=Us();function e(r){var n=t(this,r).delete(r);return this.size-=n?1:0,n}return fu=e,fu}var cu,cv;function sw(){if(cv)return cu;cv=1;var t=Us();function e(r){return t(this,r).get(r)}return cu=e,cu}var vu,vv;function ow(){if(vv)return vu;vv=1;var t=Us();function e(r){return t(this,r).has(r)}return vu=e,vu}var du,dv;function uw(){if(dv)return du;dv=1;var t=Us();function e(r,n){var a=t(this,r),i=a.size;return a.set(r,n),this.size+=a.size==i?0:1,this}return du=e,du}var hu,hv;function lw(){if(hv)return hu;hv=1;var t=nw(),e=iw(),r=sw(),n=ow(),a=uw();function i(s){var o=-1,u=s==null?0:s.length;for(this.clear();++o<u;){var l=s[o];this.set(l[0],l[1])}}return i.prototype.clear=t,i.prototype.delete=e,i.prototype.get=r,i.prototype.has=n,i.prototype.set=a,hu=i,hu}var gu,gv;function fw(){if(gv)return gu;gv=1;var t=lw(),e="Expected a function";function r(n,a){if(typeof n!="function"||a!=null&&typeof a!="function")throw new TypeError(e);var i=function(){var s=arguments,o=a?a.apply(this,s):s[0],u=i.cache;if(u.has(o))return u.get(o);var l=n.apply(this,s);return i.cache=u.set(o,l)||u,l};return i.cache=new(r.Cache||t),i}return r.Cache=t,gu=r,gu}var pu,pv;function cw(){if(pv)return pu;pv=1;var t=fw(),e=500;function r(n){var a=t(n,function(s){return i.size===e&&i.clear(),s}),i=a.cache;return a}return pu=r,pu}var yu,yv;function gg(){if(yv)return yu;yv=1;var t=cw(),e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,r=/\\(\\)?/g,n=t(function(a){var i=[];return a.charCodeAt(0)===46&&i.push(""),a.replace(e,function(s,o,u,l){i.push(u?l.replace(r,"$1"):o||s)}),i});return yu=n,yu}var mu,mv;function pg(){if(mv)return mu;mv=1;function t(e,r){for(var n=-1,a=e==null?0:e.length,i=Array(a);++n<a;)i[n]=r(e[n],n,e);return i}return mu=t,mu}var bu,bv;function vw(){if(bv)return bu;bv=1;var t=$l(),e=pg(),r=qs(),n=gi(),a=t?t.prototype:void 0,i=a?a.toString:void 0;function s(o){if(typeof o=="string")return o;if(r(o))return e(o,s)+"";if(n(o))return i?i.call(o):"";var u=o+"";return u=="0"&&1/o==-1/0?"-0":u}return bu=s,bu}var wu,wv;function yg(){if(wv)return wu;wv=1;var t=vw();function e(r){return r==null?"":t(r)}return wu=e,wu}var xu,xv;function mg(){if(xv)return xu;xv=1;var t=qs(),e=F1(),r=gg(),n=yg();function a(i,s){return t(i)?i:e(i,s)?[i]:r(n(i))}return xu=a,xu}var Eu,Ev;function jl(){if(Ev)return Eu;Ev=1;var t=gi();function e(r){if(typeof r=="string"||t(r))return r;var n=r+"";return n=="0"&&1/r==-1/0?"-0":n}return Eu=e,Eu}var Cu,Cv;function dw(){if(Cv)return Cu;Cv=1;var t=mg(),e=jl();function r(n,a){a=t(a,n);for(var i=0,s=a.length;n!=null&&i<s;)n=n[e(a[i++])];return i&&i==s?n:void 0}return Cu=r,Cu}var Tu,Tv;function hw(){if(Tv)return Tu;Tv=1;var t=dw();function e(r,n,a){var i=r==null?void 0:t(r,n);return i===void 0?a:i}return Tu=e,Tu}var gw=hw(),pw=di(gw),Su,Sv;function yw(){if(Sv)return Su;Sv=1;var t=Jl(),e=(function(){try{var r=t(Object,"defineProperty");return r({},"",{}),r}catch{}})();return Su=e,Su}var Pu,Pv;function mw(){if(Pv)return Pu;Pv=1;var t=yw();function e(r,n,a){n=="__proto__"&&t?t(r,n,{configurable:!0,enumerable:!0,value:a,writable:!0}):r[n]=a}return Pu=e,Pu}var Du,Dv;function bw(){if(Dv)return Du;Dv=1;var t=mw(),e=hg(),r=Object.prototype,n=r.hasOwnProperty;function a(i,s,o){var u=i[s];(!(n.call(i,s)&&e(u,o))||o===void 0&&!(s in i))&&t(i,s,o)}return Du=a,Du}var Au,Av;function ww(){if(Av)return Au;Av=1;var t=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function r(n,a){var i=typeof n;return a=a??t,!!a&&(i=="number"||i!="symbol"&&e.test(n))&&n>-1&&n%1==0&&n<a}return Au=r,Au}var ku,kv;function xw(){if(kv)return ku;kv=1;var t=bw(),e=mg(),r=ww(),n=hi(),a=jl();function i(s,o,u,l){if(!n(s))return s;o=e(o,s);for(var f=-1,c=o.length,v=c-1,h=s;h!=null&&++f<c;){var d=a(o[f]),p=u;if(d==="__proto__"||d==="constructor"||d==="prototype")return s;if(f!=v){var g=h[d];p=l?l(g,d,h):void 0,p===void 0&&(p=n(g)?g:r(o[f+1])?[]:{})}t(h,d,p),h=h[d]}return s}return ku=i,ku}var Bu,Bv;function Ew(){if(Bv)return Bu;Bv=1;var t=xw();function e(r,n,a){return r==null?r:t(r,n,a)}return Bu=e,Bu}var Cw=Ew(),Tw=di(Cw),Ru,Rv;function Sw(){if(Rv)return Ru;Rv=1;function t(e,r){var n=-1,a=e.length;for(r||(r=Array(a));++n<a;)r[n]=e[n];return r}return Ru=t,Ru}var Mu,Mv;function Pw(){if(Mv)return Mu;Mv=1;var t=pg(),e=Sw(),r=qs(),n=gi(),a=gg(),i=jl(),s=yg();function o(u){return r(u)?t(u,i):n(u)?[u]:e(a(s(u)))}return Mu=o,Mu}var Dw=Pw(),Aw=di(Dw),kw={data:function(e){var r={field:"data",bindingEvent:"data",allowBinding:!1,allowSetting:!1,allowGetting:!1,settingEvent:"data",settingTriggersEvent:!1,triggerFnName:"trigger",immutableKeys:{},updateStyle:!1,beforeGet:function(a){},beforeSet:function(a,i){},onSet:function(a){},canSet:function(a){return!0}};return e=ke({},r,e),function(a,i){var s=e,o=this,u=o.length!==void 0,l=u?o:[o],f=u?o[0]:o;if(De(a)){var c=a.indexOf(".")!==-1,v=c&&Aw(a);if(s.allowGetting&&i===void 0){var h;return f&&(s.beforeGet(f),v&&f._private[s.field][a]===void 0?h=pw(f._private[s.field],v):h=f._private[s.field][a]),h}else if(s.allowSetting&&i!==void 0){var d=!s.immutableKeys[a];if(d){var p=Ih({},a,i);s.beforeSet(o,p);for(var g=0,y=l.length;g<y;g++){var m=l[g];s.canSet(m)&&(v&&f._private[s.field][a]===void 0?Tw(m._private[s.field],v,i):m._private[s.field][a]=i)}s.updateStyle&&o.updateStyle(),s.onSet(o),s.settingTriggersEvent&&o[s.triggerFnName](s.settingEvent)}}}else if(s.allowSetting&&ze(a)){var b=a,w,E,T=Object.keys(b);s.beforeSet(o,b);for(var x=0;x<T.length;x++){w=T[x],E=b[w];var S=!s.immutableKeys[w];if(S)for(var D=0;D<l.length;D++){var A=l[D];s.canSet(A)&&(A._private[s.field][w]=E)}}s.updateStyle&&o.updateStyle(),s.onSet(o),s.settingTriggersEvent&&o[s.triggerFnName](s.settingEvent)}else if(s.allowBinding&&et(a)){var k=a;o.on(s.bindingEvent,k)}else if(s.allowGetting&&a===void 0){var R;return f&&(s.beforeGet(f),R=f._private[s.field]),R}return o}},removeData:function(e){var r={field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!1,immutableKeys:{}};return e=ke({},r,e),function(a){var i=e,s=this,o=s.length!==void 0,u=o?s:[s];if(De(a)){for(var l=a.split(/\s+/),f=l.length,c=0;c<f;c++){var v=l[c];if(!tn(v)){var h=!i.immutableKeys[v];if(h)for(var d=0,p=u.length;d<p;d++)u[d]._private[i.field][v]=void 0}}i.triggerEvent&&s[i.triggerFnName](i.event)}else if(a===void 0){for(var g=0,y=u.length;g<y;g++)for(var m=u[g]._private[i.field],b=Object.keys(m),w=0;w<b.length;w++){var E=b[w],T=!i.immutableKeys[E];T&&(m[E]=void 0)}i.triggerEvent&&s[i.triggerFnName](i.event)}return s}}},Bw={eventAliasesOn:function(e){var r=e;r.addListener=r.listen=r.bind=r.on,r.unlisten=r.unbind=r.off=r.removeListener,r.trigger=r.emit,r.pon=r.promiseOn=function(n,a){var i=this,s=Array.prototype.slice.call(arguments,0);return new va(function(o,u){var l=function(h){i.off.apply(i,c),o(h)},f=s.concat([l]),c=f.concat([]);i.on.apply(i,f)})}}},$e={};[N1,kw,Bw].forEach(function(t){ke($e,t)});var Rw={animate:$e.animate(),animation:$e.animation(),animated:$e.animated(),clearQueue:$e.clearQueue(),delay:$e.delay(),delayAnimation:$e.delayAnimation(),stop:$e.stop()},Yi={classes:function(e){var r=this;if(e===void 0){var n=[];return r[0]._private.classes.forEach(function(d){return n.push(d)}),n}else Ye(e)||(e=(e||"").match(/\S+/g)||[]);for(var a=[],i=new ca(e),s=0;s<r.length;s++){for(var o=r[s],u=o._private,l=u.classes,f=!1,c=0;c<e.length;c++){var v=e[c],h=l.has(v);if(!h){f=!0;break}}f||(f=l.size!==e.length),f&&(u.classes=i,a.push(o))}return a.length>0&&this.spawn(a).updateStyle().emit("class"),r},addClass:function(e){return this.toggleClass(e,!0)},hasClass:function(e){var r=this[0];return r!=null&&r._private.classes.has(e)},toggleClass:function(e,r){Ye(e)||(e=e.match(/\S+/g)||[]);for(var n=this,a=r===void 0,i=[],s=0,o=n.length;s<o;s++)for(var u=n[s],l=u._private.classes,f=!1,c=0;c<e.length;c++){var v=e[c],h=l.has(v),d=!1;r||a&&!h?(l.add(v),d=!0):(!r||a&&h)&&(l.delete(v),d=!0),!f&&d&&(i.push(u),f=!0)}return i.length>0&&this.spawn(i).updateStyle().emit("class"),n},removeClass:function(e){return this.toggleClass(e,!1)},flashClass:function(e,r){var n=this;if(r==null)r=250;else if(r===0)return n;return n.addClass(e),setTimeout(function(){n.removeClass(e)},r),n}};Yi.className=Yi.classNames=Yi.classes;var _e={metaChar:"[\\!\\\"\\#\\$\\%\\&\\'\\(\\)\\*\\+\\,\\.\\/\\:\\;\\<\\=\\>\\?\\@\\[\\]\\^\\`\\{\\|\\}\\~]",comparatorOp:"=|\\!=|>|>=|<|<=|\\$=|\\^=|\\*=",boolOp:"\\?|\\!|\\^",string:`"(?:\\\\"|[^"])*"|'(?:\\\\'|[^'])*'`,number:ct,meta:"degree|indegree|outdegree",separator:"\\s*,\\s*",descendant:"\\s+",child:"\\s+>\\s+",subject:"\\$",group:"node|edge|\\*",directedEdge:"\\s+->\\s+",undirectedEdge:"\\s+<->\\s+"};_e.variable="(?:[\\w-.]|(?:\\\\"+_e.metaChar+"))+";_e.className="(?:[\\w-]|(?:\\\\"+_e.metaChar+"))+";_e.value=_e.string+"|"+_e.number;_e.id=_e.variable;(function(){var t,e,r;for(t=_e.comparatorOp.split("|"),r=0;r<t.length;r++)e=t[r],_e.comparatorOp+="|@"+e;for(t=_e.comparatorOp.split("|"),r=0;r<t.length;r++)e=t[r],!(e.indexOf("!")>=0)&&e!=="="&&(_e.comparatorOp+="|\\!"+e)})();var Ge=function(){return{checks:[]}},we={GROUP:0,COLLECTION:1,FILTER:2,DATA_COMPARE:3,DATA_EXIST:4,DATA_BOOL:5,META_COMPARE:6,STATE:7,ID:8,CLASS:9,UNDIRECTED_EDGE:10,DIRECTED_EDGE:11,NODE_SOURCE:12,NODE_TARGET:13,NODE_NEIGHBOR:14,CHILD:15,DESCENDANT:16,PARENT:17,ANCESTOR:18,COMPOUND_SPLIT:19,TRUE:20},ll=[{selector:":selected",matches:function(e){return e.selected()}},{selector:":unselected",matches:function(e){return!e.selected()}},{selector:":selectable",matches:function(e){return e.selectable()}},{selector:":unselectable",matches:function(e){return!e.selectable()}},{selector:":locked",matches:function(e){return e.locked()}},{selector:":unlocked",matches:function(e){return!e.locked()}},{selector:":visible",matches:function(e){return e.visible()}},{selector:":hidden",matches:function(e){return!e.visible()}},{selector:":transparent",matches:function(e){return e.transparent()}},{selector:":grabbed",matches:function(e){return e.grabbed()}},{selector:":free",matches:function(e){return!e.grabbed()}},{selector:":removed",matches:function(e){return e.removed()}},{selector:":inside",matches:function(e){return!e.removed()}},{selector:":grabbable",matches:function(e){return e.grabbable()}},{selector:":ungrabbable",matches:function(e){return!e.grabbable()}},{selector:":animated",matches:function(e){return e.animated()}},{selector:":unanimated",matches:function(e){return!e.animated()}},{selector:":parent",matches:function(e){return e.isParent()}},{selector:":childless",matches:function(e){return e.isChildless()}},{selector:":child",matches:function(e){return e.isChild()}},{selector:":orphan",matches:function(e){return e.isOrphan()}},{selector:":nonorphan",matches:function(e){return e.isChild()}},{selector:":compound",matches:function(e){return e.isNode()?e.isParent():e.source().isParent()||e.target().isParent()}},{selector:":loop",matches:function(e){return e.isLoop()}},{selector:":simple",matches:function(e){return e.isSimple()}},{selector:":active",matches:function(e){return e.active()}},{selector:":inactive",matches:function(e){return!e.active()}},{selector:":backgrounding",matches:function(e){return e.backgrounding()}},{selector:":nonbackgrounding",matches:function(e){return!e.backgrounding()}}].sort(function(t,e){return k0(t.selector,e.selector)}),Mw=(function(){for(var t={},e,r=0;r<ll.length;r++)e=ll[r],t[e.selector]=e.matches;return t})(),Iw=function(e,r){return Mw[e](r)},Lw="("+ll.map(function(t){return t.selector}).join("|")+")",_n=function(e){return e.replace(new RegExp("\\\\("+_e.metaChar+")","g"),function(r,n){return n})},Hr=function(e,r,n){e[e.length-1]=n},fl=[{name:"group",query:!0,regex:"("+_e.group+")",populate:function(e,r,n){var a=st(n,1),i=a[0];r.checks.push({type:we.GROUP,value:i==="*"?i:i+"s"})}},{name:"state",query:!0,regex:Lw,populate:function(e,r,n){var a=st(n,1),i=a[0];r.checks.push({type:we.STATE,value:i})}},{name:"id",query:!0,regex:"\\#("+_e.id+")",populate:function(e,r,n){var a=st(n,1),i=a[0];r.checks.push({type:we.ID,value:_n(i)})}},{name:"className",query:!0,regex:"\\.("+_e.className+")",populate:function(e,r,n){var a=st(n,1),i=a[0];r.checks.push({type:we.CLASS,value:_n(i)})}},{name:"dataExists",query:!0,regex:"\\[\\s*("+_e.variable+")\\s*\\]",populate:function(e,r,n){var a=st(n,1),i=a[0];r.checks.push({type:we.DATA_EXIST,field:_n(i)})}},{name:"dataCompare",query:!0,regex:"\\[\\s*("+_e.variable+")\\s*("+_e.comparatorOp+")\\s*("+_e.value+")\\s*\\]",populate:function(e,r,n){var a=st(n,3),i=a[0],s=a[1],o=a[2],u=new RegExp("^"+_e.string+"$").exec(o)!=null;u?o=o.substring(1,o.length-1):o=parseFloat(o),r.checks.push({type:we.DATA_COMPARE,field:_n(i),operator:s,value:o})}},{name:"dataBool",query:!0,regex:"\\[\\s*("+_e.boolOp+")\\s*("+_e.variable+")\\s*\\]",populate:function(e,r,n){var a=st(n,2),i=a[0],s=a[1];r.checks.push({type:we.DATA_BOOL,field:_n(s),operator:i})}},{name:"metaCompare",query:!0,regex:"\\[\\[\\s*("+_e.meta+")\\s*("+_e.comparatorOp+")\\s*("+_e.number+")\\s*\\]\\]",populate:function(e,r,n){var a=st(n,3),i=a[0],s=a[1],o=a[2];r.checks.push({type:we.META_COMPARE,field:_n(i),operator:s,value:parseFloat(o)})}},{name:"nextQuery",separator:!0,regex:_e.separator,populate:function(e,r){var n=e.currentSubject,a=e.edgeCount,i=e.compoundCount,s=e[e.length-1];n!=null&&(s.subject=n,e.currentSubject=null),s.edgeCount=a,s.compoundCount=i,e.edgeCount=0,e.compoundCount=0;var o=e[e.length++]=Ge();return o}},{name:"directedEdge",separator:!0,regex:_e.directedEdge,populate:function(e,r){if(e.currentSubject==null){var n=Ge(),a=r,i=Ge();return n.checks.push({type:we.DIRECTED_EDGE,source:a,target:i}),Hr(e,r,n),e.edgeCount++,i}else{var s=Ge(),o=r,u=Ge();return s.checks.push({type:we.NODE_SOURCE,source:o,target:u}),Hr(e,r,s),e.edgeCount++,u}}},{name:"undirectedEdge",separator:!0,regex:_e.undirectedEdge,populate:function(e,r){if(e.currentSubject==null){var n=Ge(),a=r,i=Ge();return n.checks.push({type:we.UNDIRECTED_EDGE,nodes:[a,i]}),Hr(e,r,n),e.edgeCount++,i}else{var s=Ge(),o=r,u=Ge();return s.checks.push({type:we.NODE_NEIGHBOR,node:o,neighbor:u}),Hr(e,r,s),u}}},{name:"child",separator:!0,regex:_e.child,populate:function(e,r){if(e.currentSubject==null){var n=Ge(),a=Ge(),i=e[e.length-1];return n.checks.push({type:we.CHILD,parent:i,child:a}),Hr(e,r,n),e.compoundCount++,a}else if(e.currentSubject===r){var s=Ge(),o=e[e.length-1],u=Ge(),l=Ge(),f=Ge(),c=Ge();return s.checks.push({type:we.COMPOUND_SPLIT,left:o,right:u,subject:l}),l.checks=r.checks,r.checks=[{type:we.TRUE}],c.checks.push({type:we.TRUE}),u.checks.push({type:we.PARENT,parent:c,child:f}),Hr(e,o,s),e.currentSubject=l,e.compoundCount++,f}else{var v=Ge(),h=Ge(),d=[{type:we.PARENT,parent:v,child:h}];return v.checks=r.checks,r.checks=d,e.compoundCount++,h}}},{name:"descendant",separator:!0,regex:_e.descendant,populate:function(e,r){if(e.currentSubject==null){var n=Ge(),a=Ge(),i=e[e.length-1];return n.checks.push({type:we.DESCENDANT,ancestor:i,descendant:a}),Hr(e,r,n),e.compoundCount++,a}else if(e.currentSubject===r){var s=Ge(),o=e[e.length-1],u=Ge(),l=Ge(),f=Ge(),c=Ge();return s.checks.push({type:we.COMPOUND_SPLIT,left:o,right:u,subject:l}),l.checks=r.checks,r.checks=[{type:we.TRUE}],c.checks.push({type:we.TRUE}),u.checks.push({type:we.ANCESTOR,ancestor:c,descendant:f}),Hr(e,o,s),e.currentSubject=l,e.compoundCount++,f}else{var v=Ge(),h=Ge(),d=[{type:we.ANCESTOR,ancestor:v,descendant:h}];return v.checks=r.checks,r.checks=d,e.compoundCount++,h}}},{name:"subject",modifier:!0,regex:_e.subject,populate:function(e,r){if(e.currentSubject!=null&&e.currentSubject!==r)return Ue("Redefinition of subject in selector `"+e.toString()+"`"),!1;e.currentSubject=r;var n=e[e.length-1],a=n.checks[0],i=a==null?null:a.type;i===we.DIRECTED_EDGE?a.type=we.NODE_TARGET:i===we.UNDIRECTED_EDGE&&(a.type=we.NODE_NEIGHBOR,a.node=a.nodes[1],a.neighbor=a.nodes[0],a.nodes=null)}}];fl.forEach(function(t){return t.regexObj=new RegExp("^"+t.regex)});var Ow=function(e){for(var r,n,a,i=0;i<fl.length;i++){var s=fl[i],o=s.name,u=e.match(s.regexObj);if(u!=null){n=u,r=s,a=o;var l=u[0];e=e.substring(l.length);break}}return{expr:r,match:n,name:a,remaining:e}},Nw=function(e){var r=e.match(/^\s+/);if(r){var n=r[0];e=e.substring(n.length)}return e},Fw=function(e){var r=this,n=r.inputText=e,a=r[0]=Ge();for(r.length=1,n=Nw(n);;){var i=Ow(n);if(i.expr==null)return Ue("The selector `"+e+"`is invalid"),!1;var s=i.match.slice(1),o=i.expr.populate(r,a,s);if(o===!1)return!1;if(o!=null&&(a=o),n=i.remaining,n.match(/^\s*$/))break}var u=r[r.length-1];r.currentSubject!=null&&(u.subject=r.currentSubject),u.edgeCount=r.edgeCount,u.compoundCount=r.compoundCount;for(var l=0;l<r.length;l++){var f=r[l];if(f.compoundCount>0&&f.edgeCount>0)return Ue("The selector `"+e+"` is invalid because it uses both a compound selector and an edge selector"),!1;if(f.edgeCount>1)return Ue("The selector `"+e+"` is invalid because it uses multiple edge selectors"),!1;f.edgeCount===1&&Ue("The selector `"+e+"` is deprecated.  Edge selectors do not take effect on changes to source and target nodes after an edge is added, for performance reasons.  Use a class or data selector on edges instead, updating the class or data of an edge when your app detects a change in source or target nodes.")}return!0},_w=function(){if(this.toStringCache!=null)return this.toStringCache;for(var e=function(f){return f??""},r=function(f){return De(f)?'"'+f+'"':e(f)},n=function(f){return" "+f+" "},a=function(f,c){var v=f.type,h=f.value;switch(v){case we.GROUP:{var d=e(h);return d.substring(0,d.length-1)}case we.DATA_COMPARE:{var p=f.field,g=f.operator;return"["+p+n(e(g))+r(h)+"]"}case we.DATA_BOOL:{var y=f.operator,m=f.field;return"["+e(y)+m+"]"}case we.DATA_EXIST:{var b=f.field;return"["+b+"]"}case we.META_COMPARE:{var w=f.operator,E=f.field;return"[["+E+n(e(w))+r(h)+"]]"}case we.STATE:return h;case we.ID:return"#"+h;case we.CLASS:return"."+h;case we.PARENT:case we.CHILD:return i(f.parent,c)+n(">")+i(f.child,c);case we.ANCESTOR:case we.DESCENDANT:return i(f.ancestor,c)+" "+i(f.descendant,c);case we.COMPOUND_SPLIT:{var T=i(f.left,c),x=i(f.subject,c),S=i(f.right,c);return T+(T.length>0?" ":"")+x+S}case we.TRUE:return""}},i=function(f,c){return f.checks.reduce(function(v,h,d){return v+(c===f&&d===0?"$":"")+a(h,c)},"")},s="",o=0;o<this.length;o++){var u=this[o];s+=i(u,u.subject),this.length>1&&o<this.length-1&&(s+=", ")}return this.toStringCache=s,s},zw={parse:Fw,toString:_w},bg=function(e,r,n){var a,i=De(e),s=he(e),o=De(n),u,l,f=!1,c=!1,v=!1;switch(r.indexOf("!")>=0&&(r=r.replace("!",""),c=!0),r.indexOf("@")>=0&&(r=r.replace("@",""),f=!0),(i||o||f)&&(u=!i&&!s?"":""+e,l=""+n),f&&(e=u=u.toLowerCase(),n=l=l.toLowerCase()),r){case"*=":a=u.indexOf(l)>=0;break;case"$=":a=u.indexOf(l,u.length-l.length)>=0;break;case"^=":a=u.indexOf(l)===0;break;case"=":a=e===n;break;case">":v=!0,a=e>n;break;case">=":v=!0,a=e>=n;break;case"<":v=!0,a=e<n;break;case"<=":v=!0,a=e<=n;break;default:a=!1;break}return c&&(e!=null||!v)&&(a=!a),a},Vw=function(e,r){switch(r){case"?":return!!e;case"!":return!e;case"^":return e===void 0}},qw=function(e){return e!==void 0},ef=function(e,r){return e.data(r)},Hw=function(e,r){return e[r]()},rt=[],Je=function(e,r){return e.checks.every(function(n){return rt[n.type](n,r)})};rt[we.GROUP]=function(t,e){var r=t.value;return r==="*"||r===e.group()};rt[we.STATE]=function(t,e){var r=t.value;return Iw(r,e)};rt[we.ID]=function(t,e){var r=t.value;return e.id()===r};rt[we.CLASS]=function(t,e){var r=t.value;return e.hasClass(r)};rt[we.META_COMPARE]=function(t,e){var r=t.field,n=t.operator,a=t.value;return bg(Hw(e,r),n,a)};rt[we.DATA_COMPARE]=function(t,e){var r=t.field,n=t.operator,a=t.value;return bg(ef(e,r),n,a)};rt[we.DATA_BOOL]=function(t,e){var r=t.field,n=t.operator;return Vw(ef(e,r),n)};rt[we.DATA_EXIST]=function(t,e){var r=t.field;return t.operator,qw(ef(e,r))};rt[we.UNDIRECTED_EDGE]=function(t,e){var r=t.nodes[0],n=t.nodes[1],a=e.source(),i=e.target();return Je(r,a)&&Je(n,i)||Je(n,a)&&Je(r,i)};rt[we.NODE_NEIGHBOR]=function(t,e){return Je(t.node,e)&&e.neighborhood().some(function(r){return r.isNode()&&Je(t.neighbor,r)})};rt[we.DIRECTED_EDGE]=function(t,e){return Je(t.source,e.source())&&Je(t.target,e.target())};rt[we.NODE_SOURCE]=function(t,e){return Je(t.source,e)&&e.outgoers().some(function(r){return r.isNode()&&Je(t.target,r)})};rt[we.NODE_TARGET]=function(t,e){return Je(t.target,e)&&e.incomers().some(function(r){return r.isNode()&&Je(t.source,r)})};rt[we.CHILD]=function(t,e){return Je(t.child,e)&&Je(t.parent,e.parent())};rt[we.PARENT]=function(t,e){return Je(t.parent,e)&&e.children().some(function(r){return Je(t.child,r)})};rt[we.DESCENDANT]=function(t,e){return Je(t.descendant,e)&&e.ancestors().some(function(r){return Je(t.ancestor,r)})};rt[we.ANCESTOR]=function(t,e){return Je(t.ancestor,e)&&e.descendants().some(function(r){return Je(t.descendant,r)})};rt[we.COMPOUND_SPLIT]=function(t,e){return Je(t.subject,e)&&Je(t.left,e)&&Je(t.right,e)};rt[we.TRUE]=function(){return!0};rt[we.COLLECTION]=function(t,e){var r=t.value;return r.has(e)};rt[we.FILTER]=function(t,e){var r=t.value;return r(e)};var $w=function(e){var r=this;if(r.length===1&&r[0].checks.length===1&&r[0].checks[0].type===we.ID)return e.getElementById(r[0].checks[0].value).collection();var n=function(i){for(var s=0;s<r.length;s++){var o=r[s];if(Je(o,i))return!0}return!1};return r.text()==null&&(n=function(){return!0}),e.filter(n)},Uw=function(e){for(var r=this,n=0;n<r.length;n++){var a=r[n];if(Je(a,e))return!0}return!1},Gw={matches:Uw,filter:$w},an=function(e){this.inputText=e,this.currentSubject=null,this.compoundCount=0,this.edgeCount=0,this.length=0,e==null||De(e)&&e.match(/^\s*$/)||(Gt(e)?this.addQuery({checks:[{type:we.COLLECTION,value:e.collection()}]}):et(e)?this.addQuery({checks:[{type:we.FILTER,value:e}]}):De(e)?this.parse(e)||(this.invalid=!0):je("A selector must be created from a string; found "))},sn=an.prototype;[zw,Gw].forEach(function(t){return ke(sn,t)});sn.text=function(){return this.inputText};sn.size=function(){return this.length};sn.eq=function(t){return this[t]};sn.sameText=function(t){return!this.invalid&&!t.invalid&&this.text()===t.text()};sn.addQuery=function(t){this[this.length++]=t};sn.selector=sn.toString;var Qr={allAre:function(e){var r=new an(e);return this.every(function(n){return r.matches(n)})},is:function(e){var r=new an(e);return this.some(function(n){return r.matches(n)})},some:function(e,r){for(var n=0;n<this.length;n++){var a=r?e.apply(r,[this[n],n,this]):e(this[n],n,this);if(a)return!0}return!1},every:function(e,r){for(var n=0;n<this.length;n++){var a=r?e.apply(r,[this[n],n,this]):e(this[n],n,this);if(!a)return!1}return!0},same:function(e){if(this===e)return!0;e=this.cy().collection(e);var r=this.length,n=e.length;return r!==n?!1:r===1?this[0]===e[0]:this.every(function(a){return e.hasElementWithId(a.id())})},anySame:function(e){return e=this.cy().collection(e),this.some(function(r){return e.hasElementWithId(r.id())})},allAreNeighbors:function(e){e=this.cy().collection(e);var r=this.neighborhood();return e.every(function(n){return r.hasElementWithId(n.id())})},contains:function(e){e=this.cy().collection(e);var r=this;return e.every(function(n){return r.hasElementWithId(n.id())})}};Qr.allAreNeighbours=Qr.allAreNeighbors;Qr.has=Qr.contains;Qr.equal=Qr.equals=Qr.same;var Zt=function(e,r){return function(a,i,s,o){var u=a,l=this,f;if(u==null?f="":Gt(u)&&u.length===1&&(f=u.id()),l.length===1&&f){var c=l[0]._private,v=c.traversalCache=c.traversalCache||{},h=v[r]=v[r]||[],d=Dn(f),p=h[d];return p||(h[d]=e.call(l,a,i,s,o))}else return e.call(l,a,i,s,o)}},fa={parent:function(e){var r=[];if(this.length===1){var n=this[0]._private.parent;if(n)return n}for(var a=0;a<this.length;a++){var i=this[a],s=i._private.parent;s&&r.push(s)}return this.spawn(r,!0).filter(e)},parents:function(e){for(var r=[],n=this.parent();n.nonempty();){for(var a=0;a<n.length;a++){var i=n[a];r.push(i)}n=n.parent()}return this.spawn(r,!0).filter(e)},commonAncestors:function(e){for(var r,n=0;n<this.length;n++){var a=this[n],i=a.parents();r=r||i,r=r.intersect(i)}return r.filter(e)},orphans:function(e){return this.stdFilter(function(r){return r.isOrphan()}).filter(e)},nonorphans:function(e){return this.stdFilter(function(r){return r.isChild()}).filter(e)},children:Zt(function(t){for(var e=[],r=0;r<this.length;r++)for(var n=this[r],a=n._private.children,i=0;i<a.length;i++)e.push(a[i]);return this.spawn(e,!0).filter(t)},"children"),siblings:function(e){return this.parent().children().not(this).filter(e)},isParent:function(){var e=this[0];if(e)return e.isNode()&&e._private.children.length!==0},isChildless:function(){var e=this[0];if(e)return e.isNode()&&e._private.children.length===0},isChild:function(){var e=this[0];if(e)return e.isNode()&&e._private.parent!=null},isOrphan:function(){var e=this[0];if(e)return e.isNode()&&e._private.parent==null},descendants:function(e){var r=[];function n(a){for(var i=0;i<a.length;i++){var s=a[i];r.push(s),s.children().nonempty()&&n(s.children())}}return n(this.children()),this.spawn(r,!0).filter(e)}};function tf(t,e,r,n){for(var a=[],i=new ca,s=t.cy(),o=s.hasCompoundNodes(),u=0;u<t.length;u++){var l=t[u];r?a.push(l):o&&n(a,i,l)}for(;a.length>0;){var f=a.shift();e(f),i.add(f.id()),o&&n(a,i,f)}return t}function wg(t,e,r){if(r.isParent())for(var n=r._private.children,a=0;a<n.length;a++){var i=n[a];e.has(i.id())||t.push(i)}}fa.forEachDown=function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return tf(this,t,e,wg)};function xg(t,e,r){if(r.isChild()){var n=r._private.parent;e.has(n.id())||t.push(n)}}fa.forEachUp=function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return tf(this,t,e,xg)};function Ww(t,e,r){xg(t,e,r),wg(t,e,r)}fa.forEachUpAndDown=function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return tf(this,t,e,Ww)};fa.ancestors=fa.parents;var ri,Eg;ri=Eg={data:$e.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),removeData:$e.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),scratch:$e.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:$e.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),rscratch:$e.data({field:"rscratch",allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!0}),removeRscratch:$e.removeData({field:"rscratch",triggerEvent:!1}),id:function(){var e=this[0];if(e)return e._private.data.id}};ri.attr=ri.data;ri.removeAttr=ri.removeData;var Kw=Eg,Gs={};function Iu(t){return function(e){var r=this;if(e===void 0&&(e=!0),r.length!==0)if(r.isNode()&&!r.removed()){for(var n=0,a=r[0],i=a._private.edges,s=0;s<i.length;s++){var o=i[s];!e&&o.isLoop()||(n+=t(a,o))}return n}else return}}ke(Gs,{degree:Iu(function(t,e){return e.source().same(e.target())?2:1}),indegree:Iu(function(t,e){return e.target().same(t)?1:0}),outdegree:Iu(function(t,e){return e.source().same(t)?1:0})});function zn(t,e){return function(r){for(var n,a=this.nodes(),i=0;i<a.length;i++){var s=a[i],o=s[t](r);o!==void 0&&(n===void 0||e(o,n))&&(n=o)}return n}}ke(Gs,{minDegree:zn("degree",function(t,e){return t<e}),maxDegree:zn("degree",function(t,e){return t>e}),minIndegree:zn("indegree",function(t,e){return t<e}),maxIndegree:zn("indegree",function(t,e){return t>e}),minOutdegree:zn("outdegree",function(t,e){return t<e}),maxOutdegree:zn("outdegree",function(t,e){return t>e})});ke(Gs,{totalDegree:function(e){for(var r=0,n=this.nodes(),a=0;a<n.length;a++)r+=n[a].degree(e);return r}});var rr,Cg,Tg=function(e,r,n){for(var a=0;a<e.length;a++){var i=e[a];if(!i.locked()){var s=i._private.position,o={x:r.x!=null?r.x-s.x:0,y:r.y!=null?r.y-s.y:0};i.isParent()&&!(o.x===0&&o.y===0)&&i.children().shift(o,n),i.dirtyBoundingBoxCache()}}},Iv={field:"position",bindingEvent:"position",allowBinding:!0,allowSetting:!0,settingEvent:"position",settingTriggersEvent:!0,triggerFnName:"emitAndNotify",allowGetting:!0,validKeys:["x","y"],beforeGet:function(e){e.updateCompoundBounds()},beforeSet:function(e,r){Tg(e,r,!1)},onSet:function(e){e.dirtyCompoundBoundsCache()},canSet:function(e){return!e.locked()}};rr=Cg={position:$e.data(Iv),silentPosition:$e.data(ke({},Iv,{allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!1,beforeSet:function(e,r){Tg(e,r,!0)},onSet:function(e){e.dirtyCompoundBoundsCache()}})),positions:function(e,r){if(ze(e))r?this.silentPosition(e):this.position(e);else if(et(e)){var n=e,a=this.cy();a.startBatch();for(var i=0;i<this.length;i++){var s=this[i],o=void 0;(o=n(s,i))&&(r?s.silentPosition(o):s.position(o))}a.endBatch()}return this},silentPositions:function(e){return this.positions(e,!0)},shift:function(e,r,n){var a;if(ze(e)?(a={x:he(e.x)?e.x:0,y:he(e.y)?e.y:0},n=r):De(e)&&he(r)&&(a={x:0,y:0},a[e]=r),a!=null){var i=this.cy();i.startBatch();for(var s=0;s<this.length;s++){var o=this[s];if(!(i.hasCompoundNodes()&&o.isChild()&&o.ancestors().anySame(this))){var u=o.position(),l={x:u.x+a.x,y:u.y+a.y};n?o.silentPosition(l):o.position(l)}}i.endBatch()}return this},silentShift:function(e,r){return ze(e)?this.shift(e,!0):De(e)&&he(r)&&this.shift(e,r,!0),this},renderedPosition:function(e,r){var n=this[0],a=this.cy(),i=a.zoom(),s=a.pan(),o=ze(e)?e:void 0,u=o!==void 0||r!==void 0&&De(e);if(n&&n.isNode())if(u)for(var l=0;l<this.length;l++){var f=this[l];r!==void 0?f.position(e,(r-s[e])/i):o!==void 0&&f.position(Jh(o,i,s))}else{var c=n.position();return o=zs(c,i,s),e===void 0?o:o[e]}else if(!u)return;return this},relativePosition:function(e,r){var n=this[0],a=this.cy(),i=ze(e)?e:void 0,s=i!==void 0||r!==void 0&&De(e),o=a.hasCompoundNodes();if(n&&n.isNode())if(s)for(var u=0;u<this.length;u++){var l=this[u],f=o?l.parent():null,c=f&&f.length>0,v=c;c&&(f=f[0]);var h=v?f.position():{x:0,y:0};r!==void 0?l.position(e,r+h[e]):i!==void 0&&l.position({x:i.x+h.x,y:i.y+h.y})}else{var d=n.position(),p=o?n.parent():null,g=p&&p.length>0,y=g;g&&(p=p[0]);var m=y?p.position():{x:0,y:0};return i={x:d.x-m.x,y:d.y-m.y},e===void 0?i:i[e]}else if(!s)return;return this}};rr.modelPosition=rr.point=rr.position;rr.modelPositions=rr.points=rr.positions;rr.renderedPoint=rr.renderedPosition;rr.relativePoint=rr.relativePosition;var Yw=Cg,ia,fn;ia=fn={};fn.renderedBoundingBox=function(t){var e=this.boundingBox(t),r=this.cy(),n=r.zoom(),a=r.pan(),i=e.x1*n+a.x,s=e.x2*n+a.x,o=e.y1*n+a.y,u=e.y2*n+a.y;return{x1:i,x2:s,y1:o,y2:u,w:s-i,h:u-o}};fn.dirtyCompoundBoundsCache=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,e=this.cy();return!e.styleEnabled()||!e.hasCompoundNodes()?this:(this.forEachUp(function(r){if(r.isParent()){var n=r._private;n.compoundBoundsClean=!1,n.bbCache=null,t||r.emitAndNotify("bounds")}}),this)};fn.updateCompoundBounds=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,e=this.cy();if(!e.styleEnabled()||!e.hasCompoundNodes())return this;if(!t&&e.batching())return this;function r(s){if(!s.isParent())return;var o=s._private,u=s.children(),l=s.pstyle("compound-sizing-wrt-labels").value==="include",f={width:{val:s.pstyle("min-width").pfValue,left:s.pstyle("min-width-bias-left"),right:s.pstyle("min-width-bias-right")},height:{val:s.pstyle("min-height").pfValue,top:s.pstyle("min-height-bias-top"),bottom:s.pstyle("min-height-bias-bottom")}},c=u.boundingBox({includeLabels:l,includeOverlays:!1,useCache:!1}),v=o.position;(c.w===0||c.h===0)&&(c={w:s.pstyle("width").pfValue,h:s.pstyle("height").pfValue},c.x1=v.x-c.w/2,c.x2=v.x+c.w/2,c.y1=v.y-c.h/2,c.y2=v.y+c.h/2);function h(D,A,k){var R=0,M=0,L=A+k;return D>0&&L>0&&(R=A/L*D,M=k/L*D),{biasDiff:R,biasComplementDiff:M}}function d(D,A,k,R){if(k.units==="%")switch(R){case"width":return D>0?k.pfValue*D:0;case"height":return A>0?k.pfValue*A:0;case"average":return D>0&&A>0?k.pfValue*(D+A)/2:0;case"min":return D>0&&A>0?D>A?k.pfValue*A:k.pfValue*D:0;case"max":return D>0&&A>0?D>A?k.pfValue*D:k.pfValue*A:0;default:return 0}else return k.units==="px"?k.pfValue:0}var p=f.width.left.value;f.width.left.units==="px"&&f.width.val>0&&(p=p*100/f.width.val);var g=f.width.right.value;f.width.right.units==="px"&&f.width.val>0&&(g=g*100/f.width.val);var y=f.height.top.value;f.height.top.units==="px"&&f.height.val>0&&(y=y*100/f.height.val);var m=f.height.bottom.value;f.height.bottom.units==="px"&&f.height.val>0&&(m=m*100/f.height.val);var b=h(f.width.val-c.w,p,g),w=b.biasDiff,E=b.biasComplementDiff,T=h(f.height.val-c.h,y,m),x=T.biasDiff,S=T.biasComplementDiff;o.autoPadding=d(c.w,c.h,s.pstyle("padding"),s.pstyle("padding-relative-to").value),o.autoWidth=Math.max(c.w,f.width.val),v.x=(-w+c.x1+c.x2+E)/2,o.autoHeight=Math.max(c.h,f.height.val),v.y=(-x+c.y1+c.y2+S)/2}for(var n=0;n<this.length;n++){var a=this[n],i=a._private;(!i.compoundBoundsClean||t)&&(r(a),e.batching()||(i.compoundBoundsClean=!0))}return this};var Yt=function(e){return e===1/0||e===-1/0?0:e},er=function(e,r,n,a,i){a-r===0||i-n===0||r==null||n==null||a==null||i==null||(e.x1=r<e.x1?r:e.x1,e.x2=a>e.x2?a:e.x2,e.y1=n<e.y1?n:e.y1,e.y2=i>e.y2?i:e.y2,e.w=e.x2-e.x1,e.h=e.y2-e.y1)},Gr=function(e,r){return r==null?e:er(e,r.x1,r.y1,r.x2,r.y2)},Ta=function(e,r,n){return qt(e,r,n)},Li=function(e,r,n){if(!r.cy().headless()){var a=r._private,i=a.rstyle,s=i.arrowWidth/2,o=r.pstyle(n+"-arrow-shape").value,u,l;if(o!=="none"){n==="source"?(u=i.srcX,l=i.srcY):n==="target"?(u=i.tgtX,l=i.tgtY):(u=i.midX,l=i.midY);var f=a.arrowBounds=a.arrowBounds||{},c=f[n]=f[n]||{};c.x1=u-s,c.y1=l-s,c.x2=u+s,c.y2=l+s,c.w=c.x2-c.x1,c.h=c.y2-c.y1,Wi(c,1),er(e,c.x1,c.y1,c.x2,c.y2)}}},Lu=function(e,r,n){if(!r.cy().headless()){var a;n?a=n+"-":a="";var i=r._private,s=i.rstyle,o=r.pstyle(a+"label").strValue;if(o){var u=r.pstyle("text-halign"),l=r.pstyle("text-valign"),f=Ta(s,"labelWidth",n),c=Ta(s,"labelHeight",n),v=Ta(s,"labelX",n),h=Ta(s,"labelY",n),d=r.pstyle(a+"text-margin-x").pfValue,p=r.pstyle(a+"text-margin-y").pfValue,g=r.isEdge(),y=r.pstyle(a+"text-rotation"),m=r.pstyle("text-outline-width").pfValue,b=r.pstyle("text-border-width").pfValue,w=b/2,E=r.pstyle("text-background-padding").pfValue,T=2,x=c,S=f,D=S/2,A=x/2,k,R,M,L;if(g)k=v-D,R=v+D,M=h-A,L=h+A;else{switch(u.value){case"left":k=v-S,R=v;break;case"center":k=v-D,R=v+D;break;case"right":k=v,R=v+S;break}switch(l.value){case"top":M=h-x,L=h;break;case"center":M=h-A,L=h+A;break;case"bottom":M=h,L=h+x;break}}var N=d-Math.max(m,w)-E-T,O=d+Math.max(m,w)+E+T,I=p-Math.max(m,w)-E-T,F=p+Math.max(m,w)+E+T;k+=N,R+=O,M+=I,L+=F;var H=n||"main",G=i.labelBounds,z=G[H]=G[H]||{};z.x1=k,z.y1=M,z.x2=R,z.y2=L,z.w=R-k,z.h=L-M,z.leftPad=N,z.rightPad=O,z.topPad=I,z.botPad=F;var V=g&&y.strValue==="autorotate",re=y.pfValue!=null&&y.pfValue!==0;if(V||re){var ie=V?Ta(i.rstyle,"labelAngle",n):y.pfValue,ne=Math.cos(ie),oe=Math.sin(ie),ve=(k+R)/2,ge=(M+L)/2;if(!g){switch(u.value){case"left":ve=R;break;case"right":ve=k;break}switch(l.value){case"top":ge=L;break;case"bottom":ge=M;break}}var ue=function(Z,te){return Z=Z-ve,te=te-ge,{x:Z*ne-te*oe+ve,y:Z*oe+te*ne+ge}},q=ue(k,M),$=ue(k,L),C=ue(R,M),B=ue(R,L);k=Math.min(q.x,$.x,C.x,B.x),R=Math.max(q.x,$.x,C.x,B.x),M=Math.min(q.y,$.y,C.y,B.y),L=Math.max(q.y,$.y,C.y,B.y)}var _=H+"Rot",K=G[_]=G[_]||{};K.x1=k,K.y1=M,K.x2=R,K.y2=L,K.w=R-k,K.h=L-M,er(e,k,M,R,L),er(i.labelBounds.all,k,M,R,L)}return e}},Lv=function(e,r){if(!r.cy().headless()){var n=r.pstyle("outline-opacity").value,a=r.pstyle("outline-width").value,i=r.pstyle("outline-offset").value,s=a+i;Sg(e,r,n,s,"outside",s/2)}},Sg=function(e,r,n,a,i,s){if(!(n===0||a<=0||i==="inside")){var o=r.cy(),u=r.pstyle("shape").value,l=o.renderer().nodeShapes[u],f=r.position(),c=f.x,v=f.y,h=r.width(),d=r.height();if(l.hasMiterBounds){i==="center"&&(a/=2);var p=l.miterBounds(c,v,h,d,a);Gr(e,p)}else s!=null&&s>0&&Ki(e,[s,s,s,s])}},Xw=function(e,r){if(!r.cy().headless()){var n=r.pstyle("border-opacity").value,a=r.pstyle("border-width").pfValue,i=r.pstyle("border-position").value;Sg(e,r,n,a,i)}},Zw=function(e,r){var n=e._private.cy,a=n.styleEnabled(),i=n.headless(),s=Ot(),o=e._private,u=e.isNode(),l=e.isEdge(),f,c,v,h,d,p,g=o.rstyle,y=u&&a?e.pstyle("bounds-expansion").pfValue:[0],m=function(J){return J.pstyle("display").value!=="none"},b=!a||m(e)&&(!l||m(e.source())&&m(e.target()));if(b){var w=0,E=0;a&&r.includeOverlays&&(w=e.pstyle("overlay-opacity").value,w!==0&&(E=e.pstyle("overlay-padding").value));var T=0,x=0;a&&r.includeUnderlays&&(T=e.pstyle("underlay-opacity").value,T!==0&&(x=e.pstyle("underlay-padding").value));var S=Math.max(E,x),D=0,A=0;if(a&&(D=e.pstyle("width").pfValue,A=D/2),u&&r.includeNodes){var k=e.position();d=k.x,p=k.y;var R=e.outerWidth(),M=R/2,L=e.outerHeight(),N=L/2;f=d-M,c=d+M,v=p-N,h=p+N,er(s,f,v,c,h),a&&Lv(s,e),a&&r.includeOutlines&&!i&&Lv(s,e),a&&Xw(s,e)}else if(l&&r.includeEdges)if(a&&!i){var O=e.pstyle("curve-style").strValue;if(f=Math.min(g.srcX,g.midX,g.tgtX),c=Math.max(g.srcX,g.midX,g.tgtX),v=Math.min(g.srcY,g.midY,g.tgtY),h=Math.max(g.srcY,g.midY,g.tgtY),f-=A,c+=A,v-=A,h+=A,er(s,f,v,c,h),O==="haystack"){var I=g.haystackPts;if(I&&I.length===2){if(f=I[0].x,v=I[0].y,c=I[1].x,h=I[1].y,f>c){var F=f;f=c,c=F}if(v>h){var H=v;v=h,h=H}er(s,f-A,v-A,c+A,h+A)}}else if(O==="bezier"||O==="unbundled-bezier"||Kr(O,"segments")||Kr(O,"taxi")){var G;switch(O){case"bezier":case"unbundled-bezier":G=g.bezierPts;break;case"segments":case"taxi":case"round-segments":case"round-taxi":G=g.linePts;break}if(G!=null)for(var z=0;z<G.length;z++){var V=G[z];f=V.x-A,c=V.x+A,v=V.y-A,h=V.y+A,er(s,f,v,c,h)}}}else{var re=e.source(),ie=re.position(),ne=e.target(),oe=ne.position();if(f=ie.x,c=oe.x,v=ie.y,h=oe.y,f>c){var ve=f;f=c,c=ve}if(v>h){var ge=v;v=h,h=ge}f-=A,c+=A,v-=A,h+=A,er(s,f,v,c,h)}if(a&&r.includeEdges&&l&&(Li(s,e,"mid-source"),Li(s,e,"mid-target"),Li(s,e,"source"),Li(s,e,"target")),a){var ue=e.pstyle("ghost").value==="yes";if(ue){var q=e.pstyle("ghost-offset-x").pfValue,$=e.pstyle("ghost-offset-y").pfValue;er(s,s.x1+q,s.y1+$,s.x2+q,s.y2+$)}}var C=o.bodyBounds=o.bodyBounds||{};bc(C,s),Ki(C,y),Wi(C,1),a&&(f=s.x1,c=s.x2,v=s.y1,h=s.y2,er(s,f-S,v-S,c+S,h+S));var B=o.overlayBounds=o.overlayBounds||{};bc(B,s),Ki(B,y),Wi(B,1);var _=o.labelBounds=o.labelBounds||{};_.all!=null?Rb(_.all):_.all=Ot(),a&&r.includeLabels&&(r.includeMainLabels&&Lu(s,e,null),l&&(r.includeSourceLabels&&Lu(s,e,"source"),r.includeTargetLabels&&Lu(s,e,"target")))}return s.x1=Yt(s.x1),s.y1=Yt(s.y1),s.x2=Yt(s.x2),s.y2=Yt(s.y2),s.w=Yt(s.x2-s.x1),s.h=Yt(s.y2-s.y1),s.w>0&&s.h>0&&b&&(Ki(s,y),Wi(s,1)),s},Pg=function(e){var r=0,n=function(s){return(s?1:0)<<r++},a=0;return a+=n(e.incudeNodes),a+=n(e.includeEdges),a+=n(e.includeLabels),a+=n(e.includeMainLabels),a+=n(e.includeSourceLabels),a+=n(e.includeTargetLabels),a+=n(e.includeOverlays),a+=n(e.includeOutlines),a},Dg=function(e){var r=function(o){return Math.round(o)};if(e.isEdge()){var n=e.source().position(),a=e.target().position();return dc([r(n.x),r(n.y),r(a.x),r(a.y)])}else{var i=e.position();return dc([r(i.x),r(i.y)])}},Ov=function(e,r){var n=e._private,a,i=e.isEdge(),s=r==null?Nv:Pg(r),o=s===Nv;if(n.bbCache==null?(a=Zw(e,ni),n.bbCache=a,n.bbCachePosKey=Dg(e)):a=n.bbCache,!o){var u=e.isNode();a=Ot(),(r.includeNodes&&u||r.includeEdges&&!u)&&(r.includeOverlays?Gr(a,n.overlayBounds):Gr(a,n.bodyBounds)),r.includeLabels&&(r.includeMainLabels&&(!i||r.includeSourceLabels&&r.includeTargetLabels)?Gr(a,n.labelBounds.all):(r.includeMainLabels&&Gr(a,n.labelBounds.mainRot),r.includeSourceLabels&&Gr(a,n.labelBounds.sourceRot),r.includeTargetLabels&&Gr(a,n.labelBounds.targetRot))),a.w=a.x2-a.x1,a.h=a.y2-a.y1}return a},ni={includeNodes:!0,includeEdges:!0,includeLabels:!0,includeMainLabels:!0,includeSourceLabels:!0,includeTargetLabels:!0,includeOverlays:!0,includeUnderlays:!0,includeOutlines:!0,useCache:!0},Nv=Pg(ni),Fv=Et(ni);fn.boundingBox=function(t){var e,r=t===void 0||t.useCache===void 0||t.useCache===!0,n=ua(function(f){var c=f._private;return c.bbCache==null||c.styleDirty||c.bbCachePosKey!==Dg(f)},function(f){return f.id()});if(r&&this.length===1&&!n(this[0]))t===void 0?t=ni:t=Fv(t),e=Ov(this[0],t);else{e=Ot(),t=t||ni;var a=Fv(t),i=this,s=i.cy(),o=s.styleEnabled();this.edges().forEach(n),this.nodes().forEach(n),o&&this.recalculateRenderedStyle(r),this.updateCompoundBounds(!r);for(var u=0;u<i.length;u++){var l=i[u];n(l)&&l.dirtyBoundingBoxCache(),Gr(e,Ov(l,a))}}return e.x1=Yt(e.x1),e.y1=Yt(e.y1),e.x2=Yt(e.x2),e.y2=Yt(e.y2),e.w=Yt(e.x2-e.x1),e.h=Yt(e.y2-e.y1),e};fn.dirtyBoundingBoxCache=function(){for(var t=0;t<this.length;t++){var e=this[t]._private;e.bbCache=null,e.bbCachePosKey=null,e.bodyBounds=null,e.overlayBounds=null,e.labelBounds.all=null,e.labelBounds.source=null,e.labelBounds.target=null,e.labelBounds.main=null,e.labelBounds.sourceRot=null,e.labelBounds.targetRot=null,e.labelBounds.mainRot=null,e.arrowBounds.source=null,e.arrowBounds.target=null,e.arrowBounds["mid-source"]=null,e.arrowBounds["mid-target"]=null}return this.emitAndNotify("bounds"),this};fn.boundingBoxAt=function(t){var e=this.nodes(),r=this.cy(),n=r.hasCompoundNodes(),a=r.collection();if(n&&(a=e.filter(function(l){return l.isParent()}),e=e.not(a)),ze(t)){var i=t;t=function(){return i}}var s=function(f,c){return f._private.bbAtOldPos=t(f,c)},o=function(f){return f._private.bbAtOldPos};r.startBatch(),e.forEach(s).silentPositions(t),n&&(a.dirtyCompoundBoundsCache(),a.dirtyBoundingBoxCache(),a.updateCompoundBounds(!0));var u=Bb(this.boundingBox({useCache:!1}));return e.silentPositions(o),n&&(a.dirtyCompoundBoundsCache(),a.dirtyBoundingBoxCache(),a.updateCompoundBounds(!0)),r.endBatch(),u};ia.boundingbox=ia.bb=ia.boundingBox;ia.renderedBoundingbox=ia.renderedBoundingBox;var Qw=fn,Ia,mi;Ia=mi={};var Ag=function(e){e.uppercaseName=Jf(e.name),e.autoName="auto"+e.uppercaseName,e.labelName="label"+e.uppercaseName,e.outerName="outer"+e.uppercaseName,e.uppercaseOuterName=Jf(e.outerName),Ia[e.name]=function(){var n=this[0],a=n._private,i=a.cy,s=i._private.styleEnabled;if(n)if(s){if(n.isParent())return n.updateCompoundBounds(),a[e.autoName]||0;var o=n.pstyle(e.name);return o.strValue==="label"?(n.recalculateRenderedStyle(),a.rstyle[e.labelName]||0):o.pfValue}else return 1},Ia["outer"+e.uppercaseName]=function(){var n=this[0],a=n._private,i=a.cy,s=i._private.styleEnabled;if(n)if(s){var o=n[e.name](),u=n.pstyle("border-position").value,l;u==="center"?l=n.pstyle("border-width").pfValue:u==="outside"?l=2*n.pstyle("border-width").pfValue:l=0;var f=2*n.padding();return o+l+f}else return 1},Ia["rendered"+e.uppercaseName]=function(){var n=this[0];if(n){var a=n[e.name]();return a*this.cy().zoom()}},Ia["rendered"+e.uppercaseOuterName]=function(){var n=this[0];if(n){var a=n[e.outerName]();return a*this.cy().zoom()}}};Ag({name:"width"});Ag({name:"height"});mi.padding=function(){var t=this[0],e=t._private;return t.isParent()?(t.updateCompoundBounds(),e.autoPadding!==void 0?e.autoPadding:t.pstyle("padding").pfValue):t.pstyle("padding").pfValue};mi.paddedHeight=function(){var t=this[0];return t.height()+2*t.padding()};mi.paddedWidth=function(){var t=this[0];return t.width()+2*t.padding()};var Jw=mi,jw=function(e,r){if(e.isEdge()&&e.takesUpSpace())return r(e)},ex=function(e,r){if(e.isEdge()&&e.takesUpSpace()){var n=e.cy();return zs(r(e),n.zoom(),n.pan())}},tx=function(e,r){if(e.isEdge()&&e.takesUpSpace()){var n=e.cy(),a=n.pan(),i=n.zoom();return r(e).map(function(s){return zs(s,i,a)})}},rx=function(e){return e.renderer().getControlPoints(e)},nx=function(e){return e.renderer().getSegmentPoints(e)},ax=function(e){return e.renderer().getSourceEndpoint(e)},ix=function(e){return e.renderer().getTargetEndpoint(e)},sx=function(e){return e.renderer().getEdgeMidpoint(e)},_v={controlPoints:{get:rx,mult:!0},segmentPoints:{get:nx,mult:!0},sourceEndpoint:{get:ax},targetEndpoint:{get:ix},midpoint:{get:sx}},ox=function(e){return"rendered"+e[0].toUpperCase()+e.substr(1)},ux=Object.keys(_v).reduce(function(t,e){var r=_v[e],n=ox(e);return t[e]=function(){return jw(this,r.get)},r.mult?t[n]=function(){return tx(this,r.get)}:t[n]=function(){return ex(this,r.get)},t},{}),lx=ke({},Yw,Qw,Jw,ux);var kg=function(e,r){this.recycle(e,r)};function Sa(){return!1}function Oi(){return!0}kg.prototype={instanceString:function(){return"event"},recycle:function(e,r){if(this.isImmediatePropagationStopped=this.isPropagationStopped=this.isDefaultPrevented=Sa,e!=null&&e.preventDefault?(this.type=e.type,this.isDefaultPrevented=e.defaultPrevented?Oi:Sa):e!=null&&e.type?r=e:this.type=e,r!=null&&(this.originalEvent=r.originalEvent,this.type=r.type!=null?r.type:this.type,this.cy=r.cy,this.target=r.target,this.position=r.position,this.renderedPosition=r.renderedPosition,this.namespace=r.namespace,this.layout=r.layout),this.cy!=null&&this.position!=null&&this.renderedPosition==null){var n=this.position,a=this.cy.zoom(),i=this.cy.pan();this.renderedPosition={x:n.x*a+i.x,y:n.y*a+i.y}}this.timeStamp=e&&e.timeStamp||Date.now()},preventDefault:function(){this.isDefaultPrevented=Oi;var e=this.originalEvent;e&&e.preventDefault&&e.preventDefault()},stopPropagation:function(){this.isPropagationStopped=Oi;var e=this.originalEvent;e&&e.stopPropagation&&e.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=Oi,this.stopPropagation()},isDefaultPrevented:Sa,isPropagationStopped:Sa,isImmediatePropagationStopped:Sa};var Bg=/^([^.]+)(\.(?:[^.]+))?$/,fx=".*",Rg={qualifierCompare:function(e,r){return e===r},eventMatches:function(){return!0},addEventFields:function(){},callbackContext:function(e){return e},beforeEmit:function(){},afterEmit:function(){},bubble:function(){return!1},parent:function(){return null},context:null},zv=Object.keys(Rg),cx={};function Ws(){for(var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:cx,e=arguments.length>1?arguments[1]:void 0,r=0;r<zv.length;r++){var n=zv[r];this[n]=t[n]||Rg[n]}this.context=e||this.context,this.listeners=[],this.emitting=0}var on=Ws.prototype,Mg=function(e,r,n,a,i,s,o){et(a)&&(i=a,a=null),o&&(s==null?s=o:s=ke({},s,o));for(var u=Ye(n)?n:n.split(/\s+/),l=0;l<u.length;l++){var f=u[l];if(!tn(f)){var c=f.match(Bg);if(c){var v=c[1],h=c[2]?c[2]:null,d=r(e,f,v,h,a,i,s);if(d===!1)break}}}},Vv=function(e,r){return e.addEventFields(e.context,r),new kg(r.type,r)},vx=function(e,r,n){if(m0(n)){r(e,n);return}else if(ze(n)){r(e,Vv(e,n));return}for(var a=Ye(n)?n:n.split(/\s+/),i=0;i<a.length;i++){var s=a[i];if(!tn(s)){var o=s.match(Bg);if(o){var u=o[1],l=o[2]?o[2]:null,f=Vv(e,{type:u,namespace:l,target:e.context});r(e,f)}}}};on.on=on.addListener=function(t,e,r,n,a){return Mg(this,function(i,s,o,u,l,f,c){et(f)&&i.listeners.push({event:s,callback:f,type:o,namespace:u,qualifier:l,conf:c})},t,e,r,n,a),this};on.one=function(t,e,r,n){return this.on(t,e,r,n,{one:!0})};on.removeListener=on.off=function(t,e,r,n){var a=this;this.emitting!==0&&(this.listeners=eb(this.listeners));for(var i=this.listeners,s=function(l){var f=i[l];Mg(a,function(c,v,h,d,p,g){if((f.type===h||t==="*")&&(!d&&f.namespace!==".*"||f.namespace===d)&&(!p||c.qualifierCompare(f.qualifier,p))&&(!g||f.callback===g))return i.splice(l,1),!1},t,e,r,n)},o=i.length-1;o>=0;o--)s(o);return this};on.removeAllListeners=function(){return this.removeListener("*")};on.emit=on.trigger=function(t,e,r){var n=this.listeners,a=n.length;return this.emitting++,Ye(e)||(e=[e]),vx(this,function(i,s){r!=null&&(n=[{event:s.event,type:s.type,namespace:s.namespace,callback:r}],a=n.length);for(var o=function(){var f=n[u];if(f.type===s.type&&(!f.namespace||f.namespace===s.namespace||f.namespace===fx)&&i.eventMatches(i.context,f,s)){var c=[s];e!=null&&rb(c,e),i.beforeEmit(i.context,f,s),f.conf&&f.conf.one&&(i.listeners=i.listeners.filter(function(d){return d!==f}));var v=i.callbackContext(i.context,f,s),h=f.callback.apply(v,c);i.afterEmit(i.context,f,s),h===!1&&(s.stopPropagation(),s.preventDefault())}},u=0;u<a;u++)o();i.bubble(i.context)&&!s.isPropagationStopped()&&i.parent(i.context).emit(s,e)},t),this.emitting--,this};var dx={qualifierCompare:function(e,r){return e==null||r==null?e==null&&r==null:e.sameText(r)},eventMatches:function(e,r,n){var a=r.qualifier;return a!=null?e!==n.target&&vi(n.target)&&a.matches(n.target):!0},addEventFields:function(e,r){r.cy=e.cy(),r.target=e},callbackContext:function(e,r,n){return r.qualifier!=null?n.target:e},beforeEmit:function(e,r){r.conf&&r.conf.once&&r.conf.onceCollection.removeListener(r.event,r.qualifier,r.callback)},bubble:function(){return!0},parent:function(e){return e.isChild()?e.parent():e.cy()}},Ni=function(e){return De(e)?new an(e):e},Ig={createEmitter:function(){for(var e=0;e<this.length;e++){var r=this[e],n=r._private;n.emitter||(n.emitter=new Ws(dx,r))}return this},emitter:function(){return this._private.emitter},on:function(e,r,n){for(var a=Ni(r),i=0;i<this.length;i++){var s=this[i];s.emitter().on(e,a,n)}return this},removeListener:function(e,r,n){for(var a=Ni(r),i=0;i<this.length;i++){var s=this[i];s.emitter().removeListener(e,a,n)}return this},removeAllListeners:function(){for(var e=0;e<this.length;e++){var r=this[e];r.emitter().removeAllListeners()}return this},one:function(e,r,n){for(var a=Ni(r),i=0;i<this.length;i++){var s=this[i];s.emitter().one(e,a,n)}return this},once:function(e,r,n){for(var a=Ni(r),i=0;i<this.length;i++){var s=this[i];s.emitter().on(e,a,n,{once:!0,onceCollection:this})}},emit:function(e,r){for(var n=0;n<this.length;n++){var a=this[n];a.emitter().emit(e,r)}return this},emitAndNotify:function(e,r){if(this.length!==0)return this.cy().notify(e,this),this.emit(e,r),this}};$e.eventAliasesOn(Ig);var Lg={nodes:function(e){return this.filter(function(r){return r.isNode()}).filter(e)},edges:function(e){return this.filter(function(r){return r.isEdge()}).filter(e)},byGroup:function(){for(var e=this.spawn(),r=this.spawn(),n=0;n<this.length;n++){var a=this[n];a.isNode()?e.push(a):r.push(a)}return{nodes:e,edges:r}},filter:function(e,r){if(e===void 0)return this;if(De(e)||Gt(e))return new an(e).filter(this);if(et(e)){for(var n=this.spawn(),a=this,i=0;i<a.length;i++){var s=a[i],o=r?e.apply(r,[s,i,a]):e(s,i,a);o&&n.push(s)}return n}return this.spawn()},not:function(e){if(e){De(e)&&(e=this.filter(e));for(var r=this.spawn(),n=0;n<this.length;n++){var a=this[n],i=e.has(a);i||r.push(a)}return r}else return this},absoluteComplement:function(){var e=this.cy();return e.mutableElements().not(this)},intersect:function(e){if(De(e)){var r=e;return this.filter(r)}for(var n=this.spawn(),a=this,i=e,s=this.length<e.length,o=s?a:i,u=s?i:a,l=0;l<o.length;l++){var f=o[l];u.has(f)&&n.push(f)}return n},xor:function(e){var r=this._private.cy;De(e)&&(e=r.$(e));var n=this.spawn(),a=this,i=e,s=function(u,l){for(var f=0;f<u.length;f++){var c=u[f],v=c._private.data.id,h=l.hasElementWithId(v);h||n.push(c)}};return s(a,i),s(i,a),n},diff:function(e){var r=this._private.cy;De(e)&&(e=r.$(e));var n=this.spawn(),a=this.spawn(),i=this.spawn(),s=this,o=e,u=function(f,c,v){for(var h=0;h<f.length;h++){var d=f[h],p=d._private.data.id,g=c.hasElementWithId(p);g?i.merge(d):v.push(d)}};return u(s,o,n),u(o,s,a),{left:n,right:a,both:i}},add:function(e){var r=this._private.cy;if(!e)return this;if(De(e)){var n=e;e=r.mutableElements().filter(n)}for(var a=this.spawnSelf(),i=0;i<e.length;i++){var s=e[i],o=!this.has(s);o&&a.push(s)}return a},merge:function(e){var r=this._private,n=r.cy;if(!e)return this;if(e&&De(e)){var a=e;e=n.mutableElements().filter(a)}for(var i=r.map,s=0;s<e.length;s++){var o=e[s],u=o._private.data.id,l=!i.has(u);if(l){var f=this.length++;this[f]=o,i.set(u,{ele:o,index:f})}}return this},unmergeAt:function(e){var r=this[e],n=r.id(),a=this._private,i=a.map;this[e]=void 0,i.delete(n);var s=e===this.length-1;if(this.length>1&&!s){var o=this.length-1,u=this[o],l=u._private.data.id;this[o]=void 0,this[e]=u,i.set(l,{ele:u,index:e})}return this.length--,this},unmergeOne:function(e){e=e[0];var r=this._private,n=e._private.data.id,a=r.map,i=a.get(n);if(!i)return this;var s=i.index;return this.unmergeAt(s),this},unmerge:function(e){var r=this._private.cy;if(!e)return this;if(e&&De(e)){var n=e;e=r.mutableElements().filter(n)}for(var a=0;a<e.length;a++)this.unmergeOne(e[a]);return this},unmergeBy:function(e){for(var r=this.length-1;r>=0;r--){var n=this[r];e(n)&&this.unmergeAt(r)}return this},map:function(e,r){for(var n=[],a=this,i=0;i<a.length;i++){var s=a[i],o=r?e.apply(r,[s,i,a]):e(s,i,a);n.push(o)}return n},reduce:function(e,r){for(var n=r,a=this,i=0;i<a.length;i++)n=e(n,a[i],i,a);return n},max:function(e,r){for(var n=-1/0,a,i=this,s=0;s<i.length;s++){var o=i[s],u=r?e.apply(r,[o,s,i]):e(o,s,i);u>n&&(n=u,a=o)}return{value:n,ele:a}},min:function(e,r){for(var n=1/0,a,i=this,s=0;s<i.length;s++){var o=i[s],u=r?e.apply(r,[o,s,i]):e(o,s,i);u<n&&(n=u,a=o)}return{value:n,ele:a}}},Ve=Lg;Ve.u=Ve["|"]=Ve["+"]=Ve.union=Ve.or=Ve.add;Ve["\\"]=Ve["!"]=Ve["-"]=Ve.difference=Ve.relativeComplement=Ve.subtract=Ve.not;Ve.n=Ve["&"]=Ve["."]=Ve.and=Ve.intersection=Ve.intersect;Ve["^"]=Ve["(+)"]=Ve["(-)"]=Ve.symmetricDifference=Ve.symdiff=Ve.xor;Ve.fnFilter=Ve.filterFn=Ve.stdFilter=Ve.filter;Ve.complement=Ve.abscomp=Ve.absoluteComplement;var hx={isNode:function(){return this.group()==="nodes"},isEdge:function(){return this.group()==="edges"},isLoop:function(){return this.isEdge()&&this.source()[0]===this.target()[0]},isSimple:function(){return this.isEdge()&&this.source()[0]!==this.target()[0]},group:function(){var e=this[0];if(e)return e._private.group}},Og=function(e,r){var n=e.cy(),a=n.hasCompoundNodes();function i(f){var c=f.pstyle("z-compound-depth");return c.value==="auto"?a?f.zDepth():0:c.value==="bottom"?-1:c.value==="top"?Ul:0}var s=i(e)-i(r);if(s!==0)return s;function o(f){var c=f.pstyle("z-index-compare");return c.value==="auto"&&f.isNode()?1:0}var u=o(e)-o(r);if(u!==0)return u;var l=e.pstyle("z-index").value-r.pstyle("z-index").value;return l!==0?l:e.poolIndex()-r.poolIndex()},ys={forEach:function(e,r){if(et(e))for(var n=this.length,a=0;a<n;a++){var i=this[a],s=r?e.apply(r,[i,a,this]):e(i,a,this);if(s===!1)break}return this},toArray:function(){for(var e=[],r=0;r<this.length;r++)e.push(this[r]);return e},slice:function(e,r){var n=[],a=this.length;r==null&&(r=a),e==null&&(e=0),e<0&&(e=a+e),r<0&&(r=a+r);for(var i=e;i>=0&&i<r&&i<a;i++)n.push(this[i]);return this.spawn(n)},size:function(){return this.length},eq:function(e){return this[e]||this.spawn()},first:function(){return this[0]||this.spawn()},last:function(){return this[this.length-1]||this.spawn()},empty:function(){return this.length===0},nonempty:function(){return!this.empty()},sort:function(e){if(!et(e))return this;var r=this.toArray().sort(e);return this.spawn(r)},sortByZIndex:function(){return this.sort(Og)},zDepth:function(){var e=this[0];if(e){var r=e._private,n=r.group;if(n==="nodes"){var a=r.data.parent?e.parents().size():0;return e.isParent()?a:Ul-1}else{var i=r.source,s=r.target,o=i.zDepth(),u=s.zDepth();return Math.max(o,u,0)}}}};ys.each=ys.forEach;var gx=function(){var e="undefined",r=(typeof Symbol>"u"?"undefined":vt(Symbol))!=e&&vt(Symbol.iterator)!=e;r&&(ys[Symbol.iterator]=function(){var n=this,a={value:void 0,done:!1},i=0,s=this.length;return Ih({next:function(){return i<s?a.value=n[i++]:(a.value=void 0,a.done=!0),a}},Symbol.iterator,function(){return this})})};gx();var px=Et({nodeDimensionsIncludeLabels:!1}),Xi={layoutDimensions:function(e){e=px(e);var r;if(!this.takesUpSpace())r={w:0,h:0};else if(e.nodeDimensionsIncludeLabels){var n=this.boundingBox();r={w:n.w,h:n.h}}else r={w:this.outerWidth(),h:this.outerHeight()};return(r.w===0||r.h===0)&&(r.w=r.h=1),r},layoutPositions:function(e,r,n){var a=this.nodes().filter(function(E){return!E.isParent()}),i=this.cy(),s=r.eles,o=function(T){return T.id()},u=ua(n,o);e.emit({type:"layoutstart",layout:e}),e.animations=[];var l=function(T,x,S){var D={x:x.x1+x.w/2,y:x.y1+x.h/2},A={x:(S.x-D.x)*T,y:(S.y-D.y)*T};return{x:D.x+A.x,y:D.y+A.y}},f=r.spacingFactor&&r.spacingFactor!==1,c=function(){if(!f)return null;for(var T=Ot(),x=0;x<a.length;x++){var S=a[x],D=u(S,x);jh(T,D.x,D.y)}return T},v=c(),h=ua(function(E,T){var x=u(E,T);if(f){var S=Math.abs(r.spacingFactor);x=l(S,v,x)}return r.transform!=null&&(x=r.transform(E,x)),x},o);if(r.animate){for(var d=0;d<a.length;d++){var p=a[d],g=h(p,d),y=r.animateFilter==null||r.animateFilter(p,d);if(y){var m=p.animation({position:g,duration:r.animationDuration,easing:r.animationEasing});e.animations.push(m)}else p.position(g)}if(r.fit){var b=i.animation({fit:{boundingBox:s.boundingBoxAt(h),padding:r.padding},duration:r.animationDuration,easing:r.animationEasing});e.animations.push(b)}else if(r.zoom!==void 0&&r.pan!==void 0){var w=i.animation({zoom:r.zoom,pan:r.pan,duration:r.animationDuration,easing:r.animationEasing});e.animations.push(w)}e.animations.forEach(function(E){return E.play()}),e.one("layoutready",r.ready),e.emit({type:"layoutready",layout:e}),va.all(e.animations.map(function(E){return E.promise()})).then(function(){e.one("layoutstop",r.stop),e.emit({type:"layoutstop",layout:e})})}else a.positions(h),r.fit&&i.fit(r.eles,r.padding),r.zoom!=null&&i.zoom(r.zoom),r.pan&&i.pan(r.pan),e.one("layoutready",r.ready),e.emit({type:"layoutready",layout:e}),e.one("layoutstop",r.stop),e.emit({type:"layoutstop",layout:e});return this},layout:function(e){var r=this.cy();return r.makeLayout(ke({},e,{eles:this}))}};Xi.createLayout=Xi.makeLayout=Xi.layout;function Ng(t,e,r){var n=r._private,a=n.styleCache=n.styleCache||[],i;return(i=a[t])!=null||(i=a[t]=e(r)),i}function Ks(t,e){return t=Dn(t),function(n){return Ng(t,e,n)}}function Ys(t,e){t=Dn(t);var r=function(a){return e.call(a)};return function(){var a=this[0];if(a)return Ng(t,r,a)}}var bt={recalculateRenderedStyle:function(e){var r=this.cy(),n=r.renderer(),a=r.styleEnabled();return n&&a&&n.recalculateRenderedStyle(this,e),this},dirtyStyleCache:function(){var e=this.cy(),r=function(i){return i._private.styleCache=null};if(e.hasCompoundNodes()){var n;n=this.spawnSelf().merge(this.descendants()).merge(this.parents()),n.merge(n.connectedEdges()),n.forEach(r)}else this.forEach(function(a){r(a),a.connectedEdges().forEach(r)});return this},updateStyle:function(e){var r=this._private.cy;if(!r.styleEnabled())return this;if(r.batching()){var n=r._private.batchStyleEles;return n.merge(this),this}var a=r.hasCompoundNodes(),i=this;e=!!(e||e===void 0),a&&(i=this.spawnSelf().merge(this.descendants()).merge(this.parents()));var s=i;return e?s.emitAndNotify("style"):s.emit("style"),i.forEach(function(o){return o._private.styleDirty=!0}),this},cleanStyle:function(){var e=this.cy();if(e.styleEnabled())for(var r=0;r<this.length;r++){var n=this[r];n._private.styleDirty&&(n._private.styleDirty=!1,e.style().apply(n))}},parsedStyle:function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,n=this[0],a=n.cy();if(a.styleEnabled()&&n){n._private.styleDirty&&(n._private.styleDirty=!1,a.style().apply(n));var i=n._private.style[e];return i??(r?a.style().getDefaultProperty(e):null)}},numericStyle:function(e){var r=this[0];if(r.cy().styleEnabled()&&r){var n=r.pstyle(e);return n.pfValue!==void 0?n.pfValue:n.value}},numericStyleUnits:function(e){var r=this[0];if(r.cy().styleEnabled()&&r)return r.pstyle(e).units},renderedStyle:function(e){var r=this.cy();if(!r.styleEnabled())return this;var n=this[0];if(n)return r.style().getRenderedStyle(n,e)},style:function(e,r){var n=this.cy();if(!n.styleEnabled())return this;var a=!1,i=n.style();if(ze(e)){var s=e;i.applyBypass(this,s,a),this.emitAndNotify("style")}else if(De(e))if(r===void 0){var o=this[0];return o?i.getStylePropertyValue(o,e):void 0}else i.applyBypass(this,e,r,a),this.emitAndNotify("style");else if(e===void 0){var u=this[0];return u?i.getRawStyle(u):void 0}return this},removeStyle:function(e){var r=this.cy();if(!r.styleEnabled())return this;var n=!1,a=r.style(),i=this;if(e===void 0)for(var s=0;s<i.length;s++){var o=i[s];a.removeAllBypasses(o,n)}else{e=e.split(/\s+/);for(var u=0;u<i.length;u++){var l=i[u];a.removeBypasses(l,e,n)}}return this.emitAndNotify("style"),this},show:function(){return this.css("display","element"),this},hide:function(){return this.css("display","none"),this},effectiveOpacity:function(){var e=this.cy();if(!e.styleEnabled())return 1;var r=e.hasCompoundNodes(),n=this[0];if(n){var a=n._private,i=n.pstyle("opacity").value;if(!r)return i;var s=a.data.parent?n.parents():null;if(s)for(var o=0;o<s.length;o++){var u=s[o],l=u.pstyle("opacity").value;i=l*i}return i}},transparent:function(){var e=this.cy();if(!e.styleEnabled())return!1;var r=this[0],n=r.cy().hasCompoundNodes();if(r)return n?r.effectiveOpacity()===0:r.pstyle("opacity").value===0},backgrounding:function(){var e=this.cy();if(!e.styleEnabled())return!1;var r=this[0];return!!r._private.backgrounding}};function Ou(t,e){var r=t._private,n=r.data.parent?t.parents():null;if(n)for(var a=0;a<n.length;a++){var i=n[a];if(!e(i))return!1}return!0}function rf(t){var e=t.ok,r=t.edgeOkViaNode||t.ok,n=t.parentOk||t.ok;return function(){var a=this.cy();if(!a.styleEnabled())return!0;var i=this[0],s=a.hasCompoundNodes();if(i){var o=i._private;if(!e(i))return!1;if(i.isNode())return!s||Ou(i,n);var u=o.source,l=o.target;return r(u)&&(!s||Ou(u,r))&&(u===l||r(l)&&(!s||Ou(l,r)))}}}var da=Ks("eleTakesUpSpace",function(t){return t.pstyle("display").value==="element"&&t.width()!==0&&(t.isNode()?t.height()!==0:!0)});bt.takesUpSpace=Ys("takesUpSpace",rf({ok:da}));var yx=Ks("eleInteractive",function(t){return t.pstyle("events").value==="yes"&&t.pstyle("visibility").value==="visible"&&da(t)}),mx=Ks("parentInteractive",function(t){return t.pstyle("visibility").value==="visible"&&da(t)});bt.interactive=Ys("interactive",rf({ok:yx,parentOk:mx,edgeOkViaNode:da}));bt.noninteractive=function(){var t=this[0];if(t)return!t.interactive()};var bx=Ks("eleVisible",function(t){return t.pstyle("visibility").value==="visible"&&t.pstyle("opacity").pfValue!==0&&da(t)}),wx=da;bt.visible=Ys("visible",rf({ok:bx,edgeOkViaNode:wx}));bt.hidden=function(){var t=this[0];if(t)return!t.visible()};bt.isBundledBezier=Ys("isBundledBezier",function(){return this.cy().styleEnabled()?!this.removed()&&this.pstyle("curve-style").value==="bezier"&&this.takesUpSpace():!1});bt.bypass=bt.css=bt.style;bt.renderedCss=bt.renderedStyle;bt.removeBypass=bt.removeCss=bt.removeStyle;bt.pstyle=bt.parsedStyle;var Jr={};function qv(t){return function(){var e=arguments,r=[];if(e.length===2){var n=e[0],a=e[1];this.on(t.event,n,a)}else if(e.length===1&&et(e[0])){var i=e[0];this.on(t.event,i)}else if(e.length===0||e.length===1&&Ye(e[0])){for(var s=e.length===1?e[0]:null,o=0;o<this.length;o++){var u=this[o],l=!t.ableField||u._private[t.ableField],f=u._private[t.field]!=t.value;if(t.overrideAble){var c=t.overrideAble(u);if(c!==void 0&&(l=c,!c))return this}l&&(u._private[t.field]=t.value,f&&r.push(u))}var v=this.spawn(r);v.updateStyle(),v.emit(t.event),s&&v.emit(s)}return this}}function ha(t){Jr[t.field]=function(){var e=this[0];if(e){if(t.overrideField){var r=t.overrideField(e);if(r!==void 0)return r}return e._private[t.field]}},Jr[t.on]=qv({event:t.on,field:t.field,ableField:t.ableField,overrideAble:t.overrideAble,value:!0}),Jr[t.off]=qv({event:t.off,field:t.field,ableField:t.ableField,overrideAble:t.overrideAble,value:!1})}ha({field:"locked",overrideField:function(e){return e.cy().autolock()?!0:void 0},on:"lock",off:"unlock"});ha({field:"grabbable",overrideField:function(e){return e.cy().autoungrabify()||e.pannable()?!1:void 0},on:"grabify",off:"ungrabify"});ha({field:"selected",ableField:"selectable",overrideAble:function(e){return e.cy().autounselectify()?!1:void 0},on:"select",off:"unselect"});ha({field:"selectable",overrideField:function(e){return e.cy().autounselectify()?!1:void 0},on:"selectify",off:"unselectify"});Jr.deselect=Jr.unselect;Jr.grabbed=function(){var t=this[0];if(t)return t._private.grabbed};ha({field:"active",on:"activate",off:"unactivate"});ha({field:"pannable",on:"panify",off:"unpanify"});Jr.inactive=function(){var t=this[0];if(t)return!t._private.active};var Dt={},Hv=function(e){return function(n){for(var a=this,i=[],s=0;s<a.length;s++){var o=a[s];if(o.isNode()){for(var u=!1,l=o.connectedEdges(),f=0;f<l.length;f++){var c=l[f],v=c.source(),h=c.target();if(e.noIncomingEdges&&h===o&&v!==o||e.noOutgoingEdges&&v===o&&h!==o){u=!0;break}}u||i.push(o)}}return this.spawn(i,!0).filter(n)}},$v=function(e){return function(r){for(var n=this,a=[],i=0;i<n.length;i++){var s=n[i];if(s.isNode())for(var o=s.connectedEdges(),u=0;u<o.length;u++){var l=o[u],f=l.source(),c=l.target();e.outgoing&&f===s?(a.push(l),a.push(c)):e.incoming&&c===s&&(a.push(l),a.push(f))}}return this.spawn(a,!0).filter(r)}},Uv=function(e){return function(r){for(var n=this,a=[],i={};;){var s=e.outgoing?n.outgoers():n.incomers();if(s.length===0)break;for(var o=!1,u=0;u<s.length;u++){var l=s[u],f=l.id();i[f]||(i[f]=!0,a.push(l),o=!0)}if(!o)break;n=s}return this.spawn(a,!0).filter(r)}};Dt.clearTraversalCache=function(){for(var t=0;t<this.length;t++)this[t]._private.traversalCache=null};ke(Dt,{roots:Hv({noIncomingEdges:!0}),leaves:Hv({noOutgoingEdges:!0}),outgoers:Zt($v({outgoing:!0}),"outgoers"),successors:Uv({outgoing:!0}),incomers:Zt($v({incoming:!0}),"incomers"),predecessors:Uv({})});ke(Dt,{neighborhood:Zt(function(t){for(var e=[],r=this.nodes(),n=0;n<r.length;n++)for(var a=r[n],i=a.connectedEdges(),s=0;s<i.length;s++){var o=i[s],u=o.source(),l=o.target(),f=a===u?l:u;f.length>0&&e.push(f[0]),e.push(o[0])}return this.spawn(e,!0).filter(t)},"neighborhood"),closedNeighborhood:function(e){return this.neighborhood().add(this).filter(e)},openNeighborhood:function(e){return this.neighborhood(e)}});Dt.neighbourhood=Dt.neighborhood;Dt.closedNeighbourhood=Dt.closedNeighborhood;Dt.openNeighbourhood=Dt.openNeighborhood;ke(Dt,{source:Zt(function(e){var r=this[0],n;return r&&(n=r._private.source||r.cy().collection()),n&&e?n.filter(e):n},"source"),target:Zt(function(e){var r=this[0],n;return r&&(n=r._private.target||r.cy().collection()),n&&e?n.filter(e):n},"target"),sources:Gv({attr:"source"}),targets:Gv({attr:"target"})});function Gv(t){return function(r){for(var n=[],a=0;a<this.length;a++){var i=this[a],s=i._private[t.attr];s&&n.push(s)}return this.spawn(n,!0).filter(r)}}ke(Dt,{edgesWith:Zt(Wv(),"edgesWith"),edgesTo:Zt(Wv({thisIsSrc:!0}),"edgesTo")});function Wv(t){return function(r){var n=[],a=this._private.cy,i=t||{};De(r)&&(r=a.$(r));for(var s=0;s<r.length;s++)for(var o=r[s]._private.edges,u=0;u<o.length;u++){var l=o[u],f=l._private.data,c=this.hasElementWithId(f.source)&&r.hasElementWithId(f.target),v=r.hasElementWithId(f.source)&&this.hasElementWithId(f.target),h=c||v;h&&((i.thisIsSrc||i.thisIsTgt)&&(i.thisIsSrc&&!c||i.thisIsTgt&&!v)||n.push(l))}return this.spawn(n,!0)}}ke(Dt,{connectedEdges:Zt(function(t){for(var e=[],r=this,n=0;n<r.length;n++){var a=r[n];if(a.isNode())for(var i=a._private.edges,s=0;s<i.length;s++){var o=i[s];e.push(o)}}return this.spawn(e,!0).filter(t)},"connectedEdges"),connectedNodes:Zt(function(t){for(var e=[],r=this,n=0;n<r.length;n++){var a=r[n];a.isEdge()&&(e.push(a.source()[0]),e.push(a.target()[0]))}return this.spawn(e,!0).filter(t)},"connectedNodes"),parallelEdges:Zt(Kv(),"parallelEdges"),codirectedEdges:Zt(Kv({codirected:!0}),"codirectedEdges")});function Kv(t){var e={codirected:!1};return t=ke({},e,t),function(n){for(var a=[],i=this.edges(),s=t,o=0;o<i.length;o++)for(var u=i[o],l=u._private,f=l.source,c=f._private.data.id,v=l.data.target,h=f._private.edges,d=0;d<h.length;d++){var p=h[d],g=p._private.data,y=g.target,m=g.source,b=y===v&&m===c,w=c===y&&v===m;(s.codirected&&b||!s.codirected&&(b||w))&&a.push(p)}return this.spawn(a,!0).filter(n)}}ke(Dt,{components:function(e){var r=this,n=r.cy(),a=n.collection(),i=e==null?r.nodes():e.nodes(),s=[];e!=null&&i.empty()&&(i=e.sources());var o=function(f,c){a.merge(f),i.unmerge(f),c.merge(f)};if(i.empty())return r.spawn();var u=function(){var f=n.collection();s.push(f);var c=i[0];o(c,f),r.bfs({directed:!1,roots:c,visit:function(h){return o(h,f)}}),f.forEach(function(v){v.connectedEdges().forEach(function(h){r.has(h)&&f.has(h.source())&&f.has(h.target())&&f.merge(h)})})};do u();while(i.length>0);return s},component:function(){var e=this[0];return e.cy().mutableElements().components(e)[0]}});Dt.componentsOf=Dt.components;var wt=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(e===void 0){je("A collection must have a reference to the core");return}var i=new Rr,s=!1;if(!r)r=[];else if(r.length>0&&ze(r[0])&&!vi(r[0])){s=!0;for(var o=[],u=new ca,l=0,f=r.length;l<f;l++){var c=r[l];c.data==null&&(c.data={});var v=c.data;if(v.id==null)v.id=Zh();else if(e.hasElementWithId(v.id)||u.has(v.id))continue;var h=new _s(e,c,!1);o.push(h),u.add(v.id)}r=o}this.length=0;for(var d=0,p=r.length;d<p;d++){var g=r[d][0];if(g!=null){var y=g._private.data.id;(!n||!i.has(y))&&(n&&i.set(y,{index:this.length,ele:g}),this[this.length]=g,this.length++)}}this._private={eles:this,cy:e,get map(){return this.lazyMap==null&&this.rebuildMap(),this.lazyMap},set map(m){this.lazyMap=m},rebuildMap:function(){for(var b=this.lazyMap=new Rr,w=this.eles,E=0;E<w.length;E++){var T=w[E];b.set(T.id(),{index:E,ele:T})}}},n&&(this._private.map=i),s&&!a&&this.restore()},Qe=_s.prototype=wt.prototype=Object.create(Array.prototype);Qe.instanceString=function(){return"collection"};Qe.spawn=function(t,e){return new wt(this.cy(),t,e)};Qe.spawnSelf=function(){return this.spawn(this)};Qe.cy=function(){return this._private.cy};Qe.renderer=function(){return this._private.cy.renderer()};Qe.element=function(){return this[0]};Qe.collection=function(){return Nh(this)?this:new wt(this._private.cy,[this])};Qe.unique=function(){return new wt(this._private.cy,this,!0)};Qe.hasElementWithId=function(t){return t=""+t,this._private.map.has(t)};Qe.getElementById=function(t){t=""+t;var e=this._private.cy,r=this._private.map.get(t);return r?r.ele:new wt(e)};Qe.$id=Qe.getElementById;Qe.poolIndex=function(){var t=this._private.cy,e=t._private.elements,r=this[0]._private.data.id;return e._private.map.get(r).index};Qe.indexOf=function(t){var e=t[0]._private.data.id;return this._private.map.get(e).index};Qe.indexOfId=function(t){return t=""+t,this._private.map.get(t).index};Qe.json=function(t){var e=this.element(),r=this.cy();if(e==null&&t)return this;if(e!=null){var n=e._private;if(ze(t)){if(r.startBatch(),t.data){e.data(t.data);var a=n.data;if(e.isEdge()){var i=!1,s={},o=t.data.source,u=t.data.target;o!=null&&o!=a.source&&(s.source=""+o,i=!0),u!=null&&u!=a.target&&(s.target=""+u,i=!0),i&&(e=e.move(s))}else{var l="parent"in t.data,f=t.data.parent;l&&(f!=null||a.parent!=null)&&f!=a.parent&&(f===void 0&&(f=null),f!=null&&(f=""+f),e=e.move({parent:f}))}}t.position&&e.position(t.position);var c=function(p,g,y){var m=t[p];m!=null&&m!==n[p]&&(m?e[g]():e[y]())};return c("removed","remove","restore"),c("selected","select","unselect"),c("selectable","selectify","unselectify"),c("locked","lock","unlock"),c("grabbable","grabify","ungrabify"),c("pannable","panify","unpanify"),t.classes!=null&&e.classes(t.classes),r.endBatch(),this}else if(t===void 0){var v={data:dr(n.data),position:dr(n.position),group:n.group,removed:n.removed,selected:n.selected,selectable:n.selectable,locked:n.locked,grabbable:n.grabbable,pannable:n.pannable,classes:null};v.classes="";var h=0;return n.classes.forEach(function(d){return v.classes+=h++===0?d:" "+d}),v}}};Qe.jsons=function(){for(var t=[],e=0;e<this.length;e++){var r=this[e],n=r.json();t.push(n)}return t};Qe.clone=function(){for(var t=this.cy(),e=[],r=0;r<this.length;r++){var n=this[r],a=n.json(),i=new _s(t,a,!1);e.push(i)}return new wt(t,e)};Qe.copy=Qe.clone;Qe.restore=function(){for(var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,r=this,n=r.cy(),a=n._private,i=[],s=[],o,u=0,l=r.length;u<l;u++){var f=r[u];e&&!f.removed()||(f.isNode()?i.push(f):s.push(f))}o=i.concat(s);var c,v=function(){o.splice(c,1),c--};for(c=0;c<o.length;c++){var h=o[c],d=h._private,p=d.data;if(h.clearTraversalCache(),!(!e&&!d.removed)){if(p.id===void 0)p.id=Zh();else if(he(p.id))p.id=""+p.id;else if(tn(p.id)||!De(p.id)){je("Can not create element with invalid string ID `"+p.id+"`"),v();continue}else if(n.hasElementWithId(p.id)){je("Can not create second element with ID `"+p.id+"`"),v();continue}}var g=p.id;if(h.isNode()){var y=d.position;y.x==null&&(y.x=0),y.y==null&&(y.y=0)}if(h.isEdge()){for(var m=h,b=["source","target"],w=b.length,E=!1,T=0;T<w;T++){var x=b[T],S=p[x];he(S)&&(S=p[x]=""+p[x]),S==null||S===""?(je("Can not create edge `"+g+"` with unspecified "+x),E=!0):n.hasElementWithId(S)||(je("Can not create edge `"+g+"` with nonexistant "+x+" `"+S+"`"),E=!0)}if(E){v();continue}var D=n.getElementById(p.source),A=n.getElementById(p.target);D.same(A)?D._private.edges.push(m):(D._private.edges.push(m),A._private.edges.push(m)),m._private.source=D,m._private.target=A}d.map=new Rr,d.map.set(g,{ele:h,index:0}),d.removed=!1,e&&n.addToPool(h)}for(var k=0;k<i.length;k++){var R=i[k],M=R._private.data;he(M.parent)&&(M.parent=""+M.parent);var L=M.parent,N=L!=null;if(N||R._private.parent){var O=R._private.parent?n.collection().merge(R._private.parent):n.getElementById(L);if(O.empty())M.parent=void 0;else if(O[0].removed())Ue("Node added with missing parent, reference to parent removed"),M.parent=void 0,R._private.parent=null;else{for(var I=!1,F=O;!F.empty();){if(R.same(F)){I=!0,M.parent=void 0;break}F=F.parent()}I||(O[0]._private.children.push(R),R._private.parent=O[0],a.hasCompoundNodes=!0)}}}if(o.length>0){for(var H=o.length===r.length?r:new wt(n,o),G=0;G<H.length;G++){var z=H[G];z.isNode()||(z.parallelEdges().clearTraversalCache(),z.source().clearTraversalCache(),z.target().clearTraversalCache())}var V;a.hasCompoundNodes?V=n.collection().merge(H).merge(H.connectedNodes()).merge(H.parent()):V=H,V.dirtyCompoundBoundsCache().dirtyBoundingBoxCache().updateStyle(t),t?H.emitAndNotify("add"):e&&H.emit("add")}return r};Qe.removed=function(){var t=this[0];return t&&t._private.removed};Qe.inside=function(){var t=this[0];return t&&!t._private.removed};Qe.remove=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,r=this,n=[],a={},i=r._private.cy;function s(L){for(var N=L._private.edges,O=0;O<N.length;O++)u(N[O])}function o(L){for(var N=L._private.children,O=0;O<N.length;O++)u(N[O])}function u(L){var N=a[L.id()];e&&L.removed()||N||(a[L.id()]=!0,L.isNode()?(n.push(L),s(L),o(L)):n.unshift(L))}for(var l=0,f=r.length;l<f;l++){var c=r[l];u(c)}function v(L,N){var O=L._private.edges;rn(O,N),L.clearTraversalCache()}function h(L){L.clearTraversalCache()}var d=[];d.ids={};function p(L,N){N=N[0],L=L[0];var O=L._private.children,I=L.id();rn(O,N),N._private.parent=null,d.ids[I]||(d.ids[I]=!0,d.push(L))}r.dirtyCompoundBoundsCache(),e&&i.removeFromPool(n);for(var g=0;g<n.length;g++){var y=n[g];if(y.isEdge()){var m=y.source()[0],b=y.target()[0];v(m,y),v(b,y);for(var w=y.parallelEdges(),E=0;E<w.length;E++){var T=w[E];h(T),T.isBundledBezier()&&T.dirtyBoundingBoxCache()}}else{var x=y.parent();x.length!==0&&p(x,y)}e&&(y._private.removed=!0)}var S=i._private.elements;i._private.hasCompoundNodes=!1;for(var D=0;D<S.length;D++){var A=S[D];if(A.isParent()){i._private.hasCompoundNodes=!0;break}}var k=new wt(this.cy(),n);k.size()>0&&(t?k.emitAndNotify("remove"):e&&k.emit("remove"));for(var R=0;R<d.length;R++){var M=d[R];(!e||!M.removed())&&M.updateStyle()}return k};Qe.move=function(t){var e=this._private.cy,r=this,n=!1,a=!1,i=function(d){return d==null?d:""+d};if(t.source!==void 0||t.target!==void 0){var s=i(t.source),o=i(t.target),u=s!=null&&e.hasElementWithId(s),l=o!=null&&e.hasElementWithId(o);(u||l)&&(e.batch(function(){r.remove(n,a),r.emitAndNotify("moveout");for(var h=0;h<r.length;h++){var d=r[h],p=d._private.data;d.isEdge()&&(u&&(p.source=s),l&&(p.target=o))}r.restore(n,a)}),r.emitAndNotify("move"))}else if(t.parent!==void 0){var f=i(t.parent),c=f===null||e.hasElementWithId(f);if(c){var v=f===null?void 0:f;e.batch(function(){var h=r.remove(n,a);h.emitAndNotify("moveout");for(var d=0;d<r.length;d++){var p=r[d],g=p._private.data;p.isNode()&&(g.parent=v)}h.restore(n,a)}),r.emitAndNotify("move")}}return this};[ug,Rw,Yi,Qr,fa,Kw,Gs,lx,Ig,Lg,hx,ys,Xi,bt,Jr,Dt].forEach(function(t){ke(Qe,t)});var xx={add:function(e){var r,n=this;if(Gt(e)){var a=e;if(a._private.cy===n)r=a.restore();else{for(var i=[],s=0;s<a.length;s++){var o=a[s];i.push(o.json())}r=new wt(n,i)}}else if(Ye(e)){var u=e;r=new wt(n,u)}else if(ze(e)&&(Ye(e.nodes)||Ye(e.edges))){for(var l=e,f=[],c=["nodes","edges"],v=0,h=c.length;v<h;v++){var d=c[v],p=l[d];if(Ye(p))for(var g=0,y=p.length;g<y;g++){var m=ke({group:d},p[g]);f.push(m)}}r=new wt(n,f)}else{var b=e;r=new _s(n,b).collection()}return r},remove:function(e){if(!Gt(e)){if(De(e)){var r=e;e=this.$(r)}}return e.remove()}};function Ex(t,e,r,n){var a=4,i=.001,s=1e-7,o=10,u=11,l=1/(u-1),f=typeof Float32Array<"u";if(arguments.length!==4)return!1;for(var c=0;c<4;++c)if(typeof arguments[c]!="number"||isNaN(arguments[c])||!isFinite(arguments[c]))return!1;t=Math.min(t,1),r=Math.min(r,1),t=Math.max(t,0),r=Math.max(r,0);var v=f?new Float32Array(u):new Array(u);function h(A,k){return 1-3*k+3*A}function d(A,k){return 3*k-6*A}function p(A){return 3*A}function g(A,k,R){return((h(k,R)*A+d(k,R))*A+p(k))*A}function y(A,k,R){return 3*h(k,R)*A*A+2*d(k,R)*A+p(k)}function m(A,k){for(var R=0;R<a;++R){var M=y(k,t,r);if(M===0)return k;var L=g(k,t,r)-A;k-=L/M}return k}function b(){for(var A=0;A<u;++A)v[A]=g(A*l,t,r)}function w(A,k,R){var M,L,N=0;do L=k+(R-k)/2,M=g(L,t,r)-A,M>0?R=L:k=L;while(Math.abs(M)>s&&++N<o);return L}function E(A){for(var k=0,R=1,M=u-1;R!==M&&v[R]<=A;++R)k+=l;--R;var L=(A-v[R])/(v[R+1]-v[R]),N=k+L*l,O=y(N,t,r);return O>=i?m(A,N):O===0?N:w(A,k,k+l)}var T=!1;function x(){T=!0,(t!==e||r!==n)&&b()}var S=function(k){return T||x(),t===e&&r===n?k:k===0?0:k===1?1:g(E(k),e,n)};S.getControlPoints=function(){return[{x:t,y:e},{x:r,y:n}]};var D="generateBezier("+[t,e,r,n]+")";return S.toString=function(){return D},S}var Cx=(function(){function t(n){return-n.tension*n.x-n.friction*n.v}function e(n,a,i){var s={x:n.x+i.dx*a,v:n.v+i.dv*a,tension:n.tension,friction:n.friction};return{dx:s.v,dv:t(s)}}function r(n,a){var i={dx:n.v,dv:t(n)},s=e(n,a*.5,i),o=e(n,a*.5,s),u=e(n,a,o),l=1/6*(i.dx+2*(s.dx+o.dx)+u.dx),f=1/6*(i.dv+2*(s.dv+o.dv)+u.dv);return n.x=n.x+l*a,n.v=n.v+f*a,n}return function n(a,i,s){var o={x:-1,v:0,tension:null,friction:null},u=[0],l=0,f=1/1e4,c=16/1e3,v,h,d;for(a=parseFloat(a)||500,i=parseFloat(i)||20,s=s||null,o.tension=a,o.friction=i,v=s!==null,v?(l=n(a,i),h=l/s*c):h=c;d=r(d||o,h),u.push(1+d.x),l+=16,Math.abs(d.x)>f&&Math.abs(d.v)>f;);return v?function(p){return u[p*(u.length-1)|0]}:l}})(),Xe=function(e,r,n,a){var i=Ex(e,r,n,a);return function(s,o,u){return s+(o-s)*i(u)}},Zi={linear:function(e,r,n){return e+(r-e)*n},ease:Xe(.25,.1,.25,1),"ease-in":Xe(.42,0,1,1),"ease-out":Xe(0,0,.58,1),"ease-in-out":Xe(.42,0,.58,1),"ease-in-sine":Xe(.47,0,.745,.715),"ease-out-sine":Xe(.39,.575,.565,1),"ease-in-out-sine":Xe(.445,.05,.55,.95),"ease-in-quad":Xe(.55,.085,.68,.53),"ease-out-quad":Xe(.25,.46,.45,.94),"ease-in-out-quad":Xe(.455,.03,.515,.955),"ease-in-cubic":Xe(.55,.055,.675,.19),"ease-out-cubic":Xe(.215,.61,.355,1),"ease-in-out-cubic":Xe(.645,.045,.355,1),"ease-in-quart":Xe(.895,.03,.685,.22),"ease-out-quart":Xe(.165,.84,.44,1),"ease-in-out-quart":Xe(.77,0,.175,1),"ease-in-quint":Xe(.755,.05,.855,.06),"ease-out-quint":Xe(.23,1,.32,1),"ease-in-out-quint":Xe(.86,0,.07,1),"ease-in-expo":Xe(.95,.05,.795,.035),"ease-out-expo":Xe(.19,1,.22,1),"ease-in-out-expo":Xe(1,0,0,1),"ease-in-circ":Xe(.6,.04,.98,.335),"ease-out-circ":Xe(.075,.82,.165,1),"ease-in-out-circ":Xe(.785,.135,.15,.86),spring:function(e,r,n){if(n===0)return Zi.linear;var a=Cx(e,r,n);return function(i,s,o){return i+(s-i)*a(o)}},"cubic-bezier":Xe};function Yv(t,e,r,n,a){if(n===1||e===r)return r;var i=a(e,r,n);return t==null||((t.roundValue||t.color)&&(i=Math.round(i)),t.min!==void 0&&(i=Math.max(i,t.min)),t.max!==void 0&&(i=Math.min(i,t.max))),i}function Xv(t,e){return t.pfValue!=null||t.value!=null?t.pfValue!=null&&(e==null||e.type.units!=="%")?t.pfValue:t.value:t}function Vn(t,e,r,n,a){var i=a!=null?a.type:null;r<0?r=0:r>1&&(r=1);var s=Xv(t,a),o=Xv(e,a);if(he(s)&&he(o))return Yv(i,s,o,r,n);if(Ye(s)&&Ye(o)){for(var u=[],l=0;l<o.length;l++){var f=s[l],c=o[l];if(f!=null&&c!=null){var v=Yv(i,f,c,r,n);u.push(v)}else u.push(c)}return u}}function Tx(t,e,r,n){var a=!n,i=t._private,s=e._private,o=s.easing,u=s.startTime,l=n?t:t.cy(),f=l.style();if(!s.easingImpl)if(o==null)s.easingImpl=Zi.linear;else{var c;if(De(o)){var v=f.parse("transition-timing-function",o);c=v.value}else c=o;var h,d;De(c)?(h=c,d=[]):(h=c[1],d=c.slice(2).map(function(H){return+H})),d.length>0?(h==="spring"&&d.push(s.duration),s.easingImpl=Zi[h].apply(null,d)):s.easingImpl=Zi[h]}var p=s.easingImpl,g;if(s.duration===0?g=1:g=(r-u)/s.duration,s.applying&&(g=s.progress),g<0?g=0:g>1&&(g=1),s.delay==null){var y=s.startPosition,m=s.position;if(m&&a&&!t.locked()){var b={};Pa(y.x,m.x)&&(b.x=Vn(y.x,m.x,g,p)),Pa(y.y,m.y)&&(b.y=Vn(y.y,m.y,g,p)),t.position(b)}var w=s.startPan,E=s.pan,T=i.pan,x=E!=null&&n;x&&(Pa(w.x,E.x)&&(T.x=Vn(w.x,E.x,g,p)),Pa(w.y,E.y)&&(T.y=Vn(w.y,E.y,g,p)),t.emit("pan"));var S=s.startZoom,D=s.zoom,A=D!=null&&n;A&&(Pa(S,D)&&(i.zoom=ei(i.minZoom,Vn(S,D,g,p),i.maxZoom)),t.emit("zoom")),(x||A)&&t.emit("viewport");var k=s.style;if(k&&k.length>0&&a){for(var R=0;R<k.length;R++){var M=k[R],L=M.name,N=M,O=s.startStyle[L],I=f.properties[O.name],F=Vn(O,N,g,p,I);f.overrideBypass(t,L,F)}t.emit("style")}}return s.progress=g,g}function Pa(t,e){return t==null||e==null?!1:he(t)&&he(e)?!0:!!(t&&e)}function Sx(t,e,r,n){var a=e._private;a.started=!0,a.startTime=r-a.progress*a.duration}function Zv(t,e){var r=e._private.aniEles,n=[];function a(f,c){var v=f._private,h=v.animation.current,d=v.animation.queue,p=!1;if(h.length===0){var g=d.shift();g&&h.push(g)}for(var y=function(T){for(var x=T.length-1;x>=0;x--){var S=T[x];S()}T.splice(0,T.length)},m=h.length-1;m>=0;m--){var b=h[m],w=b._private;if(w.stopped){h.splice(m,1),w.hooked=!1,w.playing=!1,w.started=!1,y(w.frames);continue}!w.playing&&!w.applying||(w.playing&&w.applying&&(w.applying=!1),w.started||Sx(f,b,t),Tx(f,b,t,c),w.applying&&(w.applying=!1),y(w.frames),w.step!=null&&w.step(t),b.completed()&&(h.splice(m,1),w.hooked=!1,w.playing=!1,w.started=!1,y(w.completes)),p=!0)}return!c&&h.length===0&&d.length===0&&n.push(f),p}for(var i=!1,s=0;s<r.length;s++){var o=r[s],u=a(o);i=i||u}var l=a(e,!0);(i||l)&&(r.length>0?e.notify("draw",r):e.notify("draw")),r.unmerge(n),e.emit("step")}var Px={animate:$e.animate(),animation:$e.animation(),animated:$e.animated(),clearQueue:$e.clearQueue(),delay:$e.delay(),delayAnimation:$e.delayAnimation(),stop:$e.stop(),addToAnimationPool:function(e){var r=this;r.styleEnabled()&&r._private.aniEles.merge(e)},stopAnimationLoop:function(){this._private.animationsRunning=!1},startAnimationLoop:function(){var e=this;if(e._private.animationsRunning=!0,!e.styleEnabled())return;function r(){e._private.animationsRunning&&vs(function(i){Zv(i,e),r()})}var n=e.renderer();n&&n.beforeRender?n.beforeRender(function(i,s){Zv(s,e)},n.beforeRenderPriorities.animations):r()}},Dx={qualifierCompare:function(e,r){return e==null||r==null?e==null&&r==null:e.sameText(r)},eventMatches:function(e,r,n){var a=r.qualifier;return a!=null?e!==n.target&&vi(n.target)&&a.matches(n.target):!0},addEventFields:function(e,r){r.cy=e,r.target=e},callbackContext:function(e,r,n){return r.qualifier!=null?n.target:e}},Fi=function(e){return De(e)?new an(e):e},Fg={createEmitter:function(){var e=this._private;return e.emitter||(e.emitter=new Ws(Dx,this)),this},emitter:function(){return this._private.emitter},on:function(e,r,n){return this.emitter().on(e,Fi(r),n),this},removeListener:function(e,r,n){return this.emitter().removeListener(e,Fi(r),n),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},one:function(e,r,n){return this.emitter().one(e,Fi(r),n),this},once:function(e,r,n){return this.emitter().one(e,Fi(r),n),this},emit:function(e,r){return this.emitter().emit(e,r),this},emitAndNotify:function(e,r){return this.emit(e),this.notify(e,r),this}};$e.eventAliasesOn(Fg);var cl={png:function(e){var r=this._private.renderer;return e=e||{},r.png(e)},jpg:function(e){var r=this._private.renderer;return e=e||{},e.bg=e.bg||"#fff",r.jpg(e)}};cl.jpeg=cl.jpg;var Qi={layout:function(e){var r=this;if(e==null){je("Layout options must be specified to make a layout");return}if(e.name==null){je("A `name` must be specified to make a layout");return}var n=e.name,a=r.extension("layout",n);if(a==null){je("No such layout `"+n+"` found.  Did you forget to import it and `cytoscape.use()` it?");return}var i;De(e.eles)?i=r.$(e.eles):i=e.eles!=null?e.eles:r.$();var s=new a(ke({},e,{cy:r,eles:i}));return s}};Qi.createLayout=Qi.makeLayout=Qi.layout;var Ax={notify:function(e,r){var n=this._private;if(this.batching()){n.batchNotifications=n.batchNotifications||{};var a=n.batchNotifications[e]=n.batchNotifications[e]||this.collection();r!=null&&a.merge(r);return}if(n.notificationsEnabled){var i=this.renderer();this.destroyed()||!i||i.notify(e,r)}},notifications:function(e){var r=this._private;return e===void 0?r.notificationsEnabled:(r.notificationsEnabled=!!e,this)},noNotifications:function(e){this.notifications(!1),e(),this.notifications(!0)},batching:function(){return this._private.batchCount>0},startBatch:function(){var e=this._private;return e.batchCount==null&&(e.batchCount=0),e.batchCount===0&&(e.batchStyleEles=this.collection(),e.batchNotifications={}),e.batchCount++,this},endBatch:function(){var e=this._private;if(e.batchCount===0)return this;if(e.batchCount--,e.batchCount===0){e.batchStyleEles.updateStyle();var r=this.renderer();Object.keys(e.batchNotifications).forEach(function(n){var a=e.batchNotifications[n];a.empty()?r.notify(n):r.notify(n,a)})}return this},batch:function(e){return this.startBatch(),e(),this.endBatch(),this},batchData:function(e){var r=this;return this.batch(function(){for(var n=Object.keys(e),a=0;a<n.length;a++){var i=n[a],s=e[i],o=r.getElementById(i);o.data(s)}})}},kx=Et({hideEdgesOnViewport:!1,textureOnViewport:!1,motionBlur:!1,motionBlurOpacity:.05,pixelRatio:void 0,desktopTapThreshold:4,touchTapThreshold:8,wheelSensitivity:1,debug:!1,showFps:!1,webgl:!1,webglDebug:!1,webglDebugShowAtlases:!1,webglTexSize:2048,webglTexRows:36,webglTexRowsNodes:18,webglBatchSize:2048,webglTexPerBatch:14,webglBgColor:[255,255,255]}),vl={renderTo:function(e,r,n,a){var i=this._private.renderer;return i.renderTo(e,r,n,a),this},renderer:function(){return this._private.renderer},forceRender:function(){return this.notify("draw"),this},resize:function(){return this.invalidateSize(),this.emitAndNotify("resize"),this},initRenderer:function(e){var r=this,n=r.extension("renderer",e.name);if(n==null){je("Can not initialise: No such renderer `".concat(e.name,"` found. Did you forget to import it and `cytoscape.use()` it?"));return}e.wheelSensitivity!==void 0&&Ue("You have set a custom wheel sensitivity.  This will make your app zoom unnaturally when using mainstream mice.  You should change this value from the default only if you can guarantee that all your users will use the same hardware and OS configuration as your current machine.");var a=kx(e);a.cy=r,r._private.renderer=new n(a),this.notify("init")},destroyRenderer:function(){var e=this;e.notify("destroy");var r=e.container();if(r)for(r._cyreg=null;r.childNodes.length>0;)r.removeChild(r.childNodes[0]);e._private.renderer=null,e.mutableElements().forEach(function(n){var a=n._private;a.rscratch={},a.rstyle={},a.animation.current=[],a.animation.queue=[]})},onRender:function(e){return this.on("render",e)},offRender:function(e){return this.off("render",e)}};vl.invalidateDimensions=vl.resize;var Ji={collection:function(e,r){return De(e)?this.$(e):Gt(e)?e.collection():Ye(e)?(r||(r={}),new wt(this,e,r.unique,r.removed)):new wt(this)},nodes:function(e){var r=this.$(function(n){return n.isNode()});return e?r.filter(e):r},edges:function(e){var r=this.$(function(n){return n.isEdge()});return e?r.filter(e):r},$:function(e){var r=this._private.elements;return e?r.filter(e):r.spawnSelf()},mutableElements:function(){return this._private.elements}};Ji.elements=Ji.filter=Ji.$;var yt={},$a="t",Bx="f";yt.apply=function(t){for(var e=this,r=e._private,n=r.cy,a=n.collection(),i=0;i<t.length;i++){var s=t[i],o=e.getContextMeta(s);if(!o.empty){var u=e.getContextStyle(o),l=e.applyContextStyle(o,u,s);s._private.appliedInitStyle?e.updateTransitions(s,l.diffProps):s._private.appliedInitStyle=!0;var f=e.updateStyleHints(s);f&&a.push(s)}}return a};yt.getPropertiesDiff=function(t,e){var r=this,n=r._private.propDiffs=r._private.propDiffs||{},a=t+"-"+e,i=n[a];if(i)return i;for(var s=[],o={},u=0;u<r.length;u++){var l=r[u],f=t[u]===$a,c=e[u]===$a,v=f!==c,h=l.mappedProperties.length>0;if(v||c&&h){var d=void 0;v&&h||v?d=l.properties:h&&(d=l.mappedProperties);for(var p=0;p<d.length;p++){for(var g=d[p],y=g.name,m=!1,b=u+1;b<r.length;b++){var w=r[b],E=e[b]===$a;if(E&&(m=w.properties[g.name]!=null,m))break}!o[y]&&!m&&(o[y]=!0,s.push(y))}}}return n[a]=s,s};yt.getContextMeta=function(t){for(var e=this,r="",n,a=t._private.styleCxtKey||"",i=0;i<e.length;i++){var s=e[i],o=s.selector&&s.selector.matches(t);o?r+=$a:r+=Bx}return n=e.getPropertiesDiff(a,r),t._private.styleCxtKey=r,{key:r,diffPropNames:n,empty:n.length===0}};yt.getContextStyle=function(t){var e=t.key,r=this,n=this._private.contextStyles=this._private.contextStyles||{};if(n[e])return n[e];for(var a={_private:{key:e}},i=0;i<r.length;i++){var s=r[i],o=e[i]===$a;if(o)for(var u=0;u<s.properties.length;u++){var l=s.properties[u];a[l.name]=l}}return n[e]=a,a};yt.applyContextStyle=function(t,e,r){for(var n=this,a=t.diffPropNames,i={},s=n.types,o=0;o<a.length;o++){var u=a[o],l=e[u],f=r.pstyle(u);if(!l)if(f)f.bypass?l={name:u,deleteBypassed:!0}:l={name:u,delete:!0};else continue;if(f!==l){if(l.mapped===s.fn&&f!=null&&f.mapping!=null&&f.mapping.value===l.value){var c=f.mapping,v=c.fnValue=l.value(r);if(v===c.prevFnValue)continue}var h=i[u]={prev:f};n.applyParsedProperty(r,l),h.next=r.pstyle(u),h.next&&h.next.bypass&&(h.next=h.next.bypassed)}}return{diffProps:i}};yt.updateStyleHints=function(t){var e=t._private,r=this,n=r.propertyGroupNames,a=r.propertyGroupKeys,i=function(C,B,_){return r.getPropertiesHash(C,B,_)},s=e.styleKey;if(t.removed())return!1;var o=e.group==="nodes",u=t._private.style;n=Object.keys(u);for(var l=0;l<a.length;l++){var f=a[l];e.styleKeys[f]=[En,Kn]}for(var c=function(C,B){return e.styleKeys[B][0]=Qa(C,e.styleKeys[B][0])},v=function(C,B){return e.styleKeys[B][1]=Ja(C,e.styleKeys[B][1])},h=function(C,B){c(C,B),v(C,B)},d=function(C,B){for(var _=0;_<C.length;_++){var K=C.charCodeAt(_);c(K,B),v(K,B)}},p=2e9,g=function(C){return-128<C&&C<128&&Math.floor(C)!==C?p-(C*1024|0):C},y=0;y<n.length;y++){var m=n[y],b=u[m];if(b!=null){var w=this.properties[m],E=w.type,T=w.groupKey,x=void 0;w.hashOverride!=null?x=w.hashOverride(t,b):b.pfValue!=null&&(x=b.pfValue);var S=w.enums==null?b.value:null,D=x!=null,A=S!=null,k=D||A,R=b.units;if(E.number&&k&&!E.multiple){var M=D?x:S;h(g(M),T),!D&&R!=null&&d(R,T)}else d(b.strValue,T)}}for(var L=[En,Kn],N=0;N<a.length;N++){var O=a[N],I=e.styleKeys[O];L[0]=Qa(I[0],L[0]),L[1]=Ja(I[1],L[1])}e.styleKey=W0(L[0],L[1]);var F=e.styleKeys;e.labelDimsKey=qr(F.labelDimensions);var H=i(t,["label"],F.labelDimensions);if(e.labelKey=qr(H),e.labelStyleKey=qr(ki(F.commonLabel,H)),!o){var G=i(t,["source-label"],F.labelDimensions);e.sourceLabelKey=qr(G),e.sourceLabelStyleKey=qr(ki(F.commonLabel,G));var z=i(t,["target-label"],F.labelDimensions);e.targetLabelKey=qr(z),e.targetLabelStyleKey=qr(ki(F.commonLabel,z))}if(o){var V=e.styleKeys,re=V.nodeBody,ie=V.nodeBorder,ne=V.nodeOutline,oe=V.backgroundImage,ve=V.compound,ge=V.pie,ue=V.stripe,q=[re,ie,ne,oe,ve,ge,ue].filter(function($){return $!=null}).reduce(ki,[En,Kn]);e.nodeKey=qr(q),e.hasPie=ge!=null&&ge[0]!==En&&ge[1]!==Kn,e.hasStripe=ue!=null&&ue[0]!==En&&ue[1]!==Kn}return s!==e.styleKey};yt.clearStyleHints=function(t){var e=t._private;e.styleCxtKey="",e.styleKeys={},e.styleKey=null,e.labelKey=null,e.labelStyleKey=null,e.sourceLabelKey=null,e.sourceLabelStyleKey=null,e.targetLabelKey=null,e.targetLabelStyleKey=null,e.nodeKey=null,e.hasPie=null,e.hasStripe=null};yt.applyParsedProperty=function(t,e){var r=this,n=e,a=t._private.style,i,s=r.types,o=r.properties[n.name].type,u=n.bypass,l=a[n.name],f=l&&l.bypass,c=t._private,v="mapping",h=function(re){return re==null?null:re.pfValue!=null?re.pfValue:re.value},d=function(){var re=h(l),ie=h(n);r.checkTriggers(t,n.name,re,ie)};if(e.name==="curve-style"&&t.isEdge()&&(e.value!=="bezier"&&t.isLoop()||e.value==="haystack"&&(t.source().isParent()||t.target().isParent()))&&(n=e=this.parse(e.name,"bezier",u)),n.delete)return a[n.name]=void 0,d(),!0;if(n.deleteBypassed)return l?l.bypass?(l.bypassed=void 0,d(),!0):!1:(d(),!0);if(n.deleteBypass)return l?l.bypass?(a[n.name]=l.bypassed,d(),!0):!1:(d(),!0);var p=function(){Ue("Do not assign mappings to elements without corresponding data (i.e. ele `"+t.id()+"` has no mapping for property `"+n.name+"` with data field `"+n.field+"`); try a `["+n.field+"]` selector to limit scope to elements with `"+n.field+"` defined")};switch(n.mapped){case s.mapData:{for(var g=n.field.split("."),y=c.data,m=0;m<g.length&&y;m++){var b=g[m];y=y[b]}if(y==null)return p(),!1;var w;if(he(y)){var E=n.fieldMax-n.fieldMin;E===0?w=0:w=(y-n.fieldMin)/E}else return Ue("Do not use continuous mappers without specifying numeric data (i.e. `"+n.field+": "+y+"` for `"+t.id()+"` is non-numeric)"),!1;if(w<0?w=0:w>1&&(w=1),o.color){var T=n.valueMin[0],x=n.valueMax[0],S=n.valueMin[1],D=n.valueMax[1],A=n.valueMin[2],k=n.valueMax[2],R=n.valueMin[3]==null?1:n.valueMin[3],M=n.valueMax[3]==null?1:n.valueMax[3],L=[Math.round(T+(x-T)*w),Math.round(S+(D-S)*w),Math.round(A+(k-A)*w),Math.round(R+(M-R)*w)];i={bypass:n.bypass,name:n.name,value:L,strValue:"rgb("+L[0]+", "+L[1]+", "+L[2]+")"}}else if(o.number){var N=n.valueMin+(n.valueMax-n.valueMin)*w;i=this.parse(n.name,N,n.bypass,v)}else return!1;if(!i)return p(),!1;i.mapping=n,n=i;break}case s.data:{for(var O=n.field.split("."),I=c.data,F=0;F<O.length&&I;F++){var H=O[F];I=I[H]}if(I!=null&&(i=this.parse(n.name,I,n.bypass,v)),!i)return p(),!1;i.mapping=n,n=i;break}case s.fn:{var G=n.value,z=n.fnValue!=null?n.fnValue:G(t);if(n.prevFnValue=z,z==null)return Ue("Custom function mappers may not return null (i.e. `"+n.name+"` for ele `"+t.id()+"` is null)"),!1;if(i=this.parse(n.name,z,n.bypass,v),!i)return Ue("Custom function mappers may not return invalid values for the property type (i.e. `"+n.name+"` for ele `"+t.id()+"` is invalid)"),!1;i.mapping=dr(n),n=i;break}case void 0:break;default:return!1}return u?(f?n.bypassed=l.bypassed:n.bypassed=l,a[n.name]=n):f?l.bypassed=n:a[n.name]=n,d(),!0};yt.cleanElements=function(t,e){for(var r=0;r<t.length;r++){var n=t[r];if(this.clearStyleHints(n),n.dirtyCompoundBoundsCache(),n.dirtyBoundingBoxCache(),!e)n._private.style={};else for(var a=n._private.style,i=Object.keys(a),s=0;s<i.length;s++){var o=i[s],u=a[o];u!=null&&(u.bypass?u.bypassed=null:a[o]=null)}}};yt.update=function(){var t=this._private.cy,e=t.mutableElements();e.updateStyle()};yt.updateTransitions=function(t,e){var r=this,n=t._private,a=t.pstyle("transition-property").value,i=t.pstyle("transition-duration").pfValue,s=t.pstyle("transition-delay").pfValue;if(a.length>0&&i>0){for(var o={},u=!1,l=0;l<a.length;l++){var f=a[l],c=t.pstyle(f),v=e[f];if(v){var h=v.prev,d=h,p=v.next!=null?v.next:c,g=!1,y=void 0,m=1e-6;d&&(he(d.pfValue)&&he(p.pfValue)?(g=p.pfValue-d.pfValue,y=d.pfValue+m*g):he(d.value)&&he(p.value)?(g=p.value-d.value,y=d.value+m*g):Ye(d.value)&&Ye(p.value)&&(g=d.value[0]!==p.value[0]||d.value[1]!==p.value[1]||d.value[2]!==p.value[2],y=d.strValue),g&&(o[f]=p.strValue,this.applyBypass(t,f,y),u=!0))}}if(!u)return;n.transitioning=!0,new va(function(b){s>0?t.delayAnimation(s).play().promise().then(b):b()}).then(function(){return t.animation({style:o,duration:i,easing:t.pstyle("transition-timing-function").value,queue:!1}).play().promise()}).then(function(){r.removeBypasses(t,a),t.emitAndNotify("style"),n.transitioning=!1})}else n.transitioning&&(this.removeBypasses(t,a),t.emitAndNotify("style"),n.transitioning=!1)};yt.checkTrigger=function(t,e,r,n,a,i){var s=this.properties[e],o=a(s);t.removed()||o!=null&&o(r,n,t)&&i(s)};yt.checkZOrderTrigger=function(t,e,r,n){var a=this;this.checkTrigger(t,e,r,n,function(i){return i.triggersZOrder},function(){a._private.cy.notify("zorder",t)})};yt.checkBoundsTrigger=function(t,e,r,n){this.checkTrigger(t,e,r,n,function(a){return a.triggersBounds},function(a){t.dirtyCompoundBoundsCache(),t.dirtyBoundingBoxCache()})};yt.checkConnectedEdgesBoundsTrigger=function(t,e,r,n){this.checkTrigger(t,e,r,n,function(a){return a.triggersBoundsOfConnectedEdges},function(a){t.connectedEdges().forEach(function(i){i.dirtyBoundingBoxCache()})})};yt.checkParallelEdgesBoundsTrigger=function(t,e,r,n){this.checkTrigger(t,e,r,n,function(a){return a.triggersBoundsOfParallelEdges},function(a){t.parallelEdges().forEach(function(i){i.dirtyBoundingBoxCache()})})};yt.checkTriggers=function(t,e,r,n){t.dirtyStyleCache(),this.checkZOrderTrigger(t,e,r,n),this.checkBoundsTrigger(t,e,r,n),this.checkConnectedEdgesBoundsTrigger(t,e,r,n),this.checkParallelEdgesBoundsTrigger(t,e,r,n)};var bi={};bi.applyBypass=function(t,e,r,n){var a=this,i=[],s=!0;if(e==="*"||e==="**"){if(r!==void 0)for(var o=0;o<a.properties.length;o++){var u=a.properties[o],l=u.name,f=this.parse(l,r,!0);f&&i.push(f)}}else if(De(e)){var c=this.parse(e,r,!0);c&&i.push(c)}else if(ze(e)){var v=e;n=r;for(var h=Object.keys(v),d=0;d<h.length;d++){var p=h[d],g=v[p];if(g===void 0&&(g=v[Ns(p)]),g!==void 0){var y=this.parse(p,g,!0);y&&i.push(y)}}}else return!1;if(i.length===0)return!1;for(var m=!1,b=0;b<t.length;b++){for(var w=t[b],E={},T=void 0,x=0;x<i.length;x++){var S=i[x];if(n){var D=w.pstyle(S.name);T=E[S.name]={prev:D}}m=this.applyParsedProperty(w,dr(S))||m,n&&(T.next=w.pstyle(S.name))}m&&this.updateStyleHints(w),n&&this.updateTransitions(w,E,s)}return m};bi.overrideBypass=function(t,e,r){e=Hl(e);for(var n=0;n<t.length;n++){var a=t[n],i=a._private.style[e],s=this.properties[e].type,o=s.color,u=s.mutiple,l=i?i.pfValue!=null?i.pfValue:i.value:null;!i||!i.bypass?this.applyBypass(a,e,r):(i.value=r,i.pfValue!=null&&(i.pfValue=r),o?i.strValue="rgb("+r.join(",")+")":u?i.strValue=r.join(" "):i.strValue=""+r,this.updateStyleHints(a)),this.checkTriggers(a,e,l,r)}};bi.removeAllBypasses=function(t,e){return this.removeBypasses(t,this.propertyNames,e)};bi.removeBypasses=function(t,e,r){for(var n=!0,a=0;a<t.length;a++){for(var i=t[a],s={},o=0;o<e.length;o++){var u=e[o],l=this.properties[u],f=i.pstyle(l.name);if(!(!f||!f.bypass)){var c="",v=this.parse(u,c,!0),h=s[l.name]={prev:f};this.applyParsedProperty(i,v),h.next=i.pstyle(l.name)}}this.updateStyleHints(i),r&&this.updateTransitions(i,s,n)}};var nf={};nf.getEmSizeInPixels=function(){var t=this.containerCss("font-size");return t!=null?parseFloat(t):1};nf.containerCss=function(t){var e=this._private.cy,r=e.container(),n=e.window();if(n&&r&&n.getComputedStyle)return n.getComputedStyle(r).getPropertyValue(t)};var mr={};mr.getRenderedStyle=function(t,e){return e?this.getStylePropertyValue(t,e,!0):this.getRawStyle(t,!0)};mr.getRawStyle=function(t,e){var r=this;if(t=t[0],t){for(var n={},a=0;a<r.properties.length;a++){var i=r.properties[a],s=r.getStylePropertyValue(t,i.name,e);s!=null&&(n[i.name]=s,n[Ns(i.name)]=s)}return n}};mr.getIndexedStyle=function(t,e,r,n){var a=t.pstyle(e)[r][n];return a??t.cy().style().getDefaultProperty(e)[r][0]};mr.getStylePropertyValue=function(t,e,r){var n=this;if(t=t[0],t){var a=n.properties[e];a.alias&&(a=a.pointsTo);var i=a.type,s=t.pstyle(a.name);if(s){var o=s.value,u=s.units,l=s.strValue;if(r&&i.number&&o!=null&&he(o)){var f=t.cy().zoom(),c=function(g){return g*f},v=function(g,y){return c(g)+y},h=Ye(o),d=h?u.every(function(p){return p!=null}):u!=null;return d?h?o.map(function(p,g){return v(p,u[g])}).join(" "):v(o,u):h?o.map(function(p){return De(p)?p:""+c(p)}).join(" "):""+c(o)}else if(l!=null)return l}return null}};mr.getAnimationStartStyle=function(t,e){for(var r={},n=0;n<e.length;n++){var a=e[n],i=a.name,s=t.pstyle(i);s!==void 0&&(ze(s)?s=this.parse(i,s.strValue):s=this.parse(i,s)),s&&(r[i]=s)}return r};mr.getPropsList=function(t){var e=this,r=[],n=t,a=e.properties;if(n)for(var i=Object.keys(n),s=0;s<i.length;s++){var o=i[s],u=n[o],l=a[o]||a[Hl(o)],f=this.parse(l.name,u);f&&r.push(f)}return r};mr.getNonDefaultPropertiesHash=function(t,e,r){var n=r.slice(),a,i,s,o,u,l;for(u=0;u<e.length;u++)if(a=e[u],i=t.pstyle(a,!1),i!=null)if(i.pfValue!=null)n[0]=Qa(o,n[0]),n[1]=Ja(o,n[1]);else for(s=i.strValue,l=0;l<s.length;l++)o=s.charCodeAt(l),n[0]=Qa(o,n[0]),n[1]=Ja(o,n[1]);return n};mr.getPropertiesHash=mr.getNonDefaultPropertiesHash;var Xs={};Xs.appendFromJson=function(t){for(var e=this,r=0;r<t.length;r++){var n=t[r],a=n.selector,i=n.style||n.css,s=Object.keys(i);e.selector(a);for(var o=0;o<s.length;o++){var u=s[o],l=i[u];e.css(u,l)}}return e};Xs.fromJson=function(t){var e=this;return e.resetToDefault(),e.appendFromJson(t),e};Xs.json=function(){for(var t=[],e=this.defaultLength;e<this.length;e++){for(var r=this[e],n=r.selector,a=r.properties,i={},s=0;s<a.length;s++){var o=a[s];i[o.name]=o.strValue}t.push({selector:n?n.toString():"core",style:i})}return t};var af={};af.appendFromString=function(t){var e=this,r=this,n=""+t,a,i,s;n=n.replace(/[/][*](\s|.)+?[*][/]/g,"");function o(){n.length>a.length?n=n.substr(a.length):n=""}function u(){i.length>s.length?i=i.substr(s.length):i=""}for(;;){var l=n.match(/^\s*$/);if(l)break;var f=n.match(/^\s*((?:.|\s)+?)\s*\{((?:.|\s)+?)\}/);if(!f){Ue("Halting stylesheet parsing: String stylesheet contains more to parse but no selector and block found in: "+n);break}a=f[0];var c=f[1];if(c!=="core"){var v=new an(c);if(v.invalid){Ue("Skipping parsing of block: Invalid selector found in string stylesheet: "+c),o();continue}}var h=f[2],d=!1;i=h;for(var p=[];;){var g=i.match(/^\s*$/);if(g)break;var y=i.match(/^\s*(.+?)\s*:\s*(.+?)(?:\s*;|\s*$)/);if(!y){Ue("Skipping parsing of block: Invalid formatting of style property and value definitions found in:"+h),d=!0;break}s=y[0];var m=y[1],b=y[2],w=e.properties[m];if(!w){Ue("Skipping property: Invalid property name in: "+s),u();continue}var E=r.parse(m,b);if(!E){Ue("Skipping property: Invalid property definition in: "+s),u();continue}p.push({name:m,val:b}),u()}if(d){o();break}r.selector(c);for(var T=0;T<p.length;T++){var x=p[T];r.css(x.name,x.val)}o()}return r};af.fromString=function(t){var e=this;return e.resetToDefault(),e.appendFromString(t),e};var it={};(function(){var t=ct,e=T0,r=P0,n=D0,a=A0,i=function($){return"^"+$+"\\s*\\(\\s*([\\w\\.]+)\\s*\\)$"},s=function($){var C=t+"|\\w+|"+e+"|"+r+"|"+n+"|"+a;return"^"+$+"\\s*\\(([\\w\\.]+)\\s*\\,\\s*("+t+")\\s*\\,\\s*("+t+")\\s*,\\s*("+C+")\\s*\\,\\s*("+C+")\\)$"},o=[`^url\\s*\\(\\s*['"]?(.+?)['"]?\\s*\\)$`,"^(none)$","^(.+)$"];it.types={time:{number:!0,min:0,units:"s|ms",implicitUnits:"ms"},percent:{number:!0,min:0,max:100,units:"%",implicitUnits:"%"},percentages:{number:!0,min:0,max:100,units:"%",implicitUnits:"%",multiple:!0},zeroOneNumber:{number:!0,min:0,max:1,unitless:!0},zeroOneNumbers:{number:!0,min:0,max:1,unitless:!0,multiple:!0},nOneOneNumber:{number:!0,min:-1,max:1,unitless:!0},nonNegativeInt:{number:!0,min:0,integer:!0,unitless:!0},nonNegativeNumber:{number:!0,min:0,unitless:!0},position:{enums:["parent","origin"]},nodeSize:{number:!0,min:0,enums:["label"]},number:{number:!0,unitless:!0},numbers:{number:!0,unitless:!0,multiple:!0},positiveNumber:{number:!0,unitless:!0,min:0,strictMin:!0},size:{number:!0,min:0},bidirectionalSize:{number:!0},bidirectionalSizeMaybePercent:{number:!0,allowPercent:!0},bidirectionalSizes:{number:!0,multiple:!0},sizeMaybePercent:{number:!0,min:0,allowPercent:!0},axisDirection:{enums:["horizontal","leftward","rightward","vertical","upward","downward","auto"]},axisDirectionExplicit:{enums:["leftward","rightward","upward","downward"]},axisDirectionPrimary:{enums:["horizontal","vertical"]},paddingRelativeTo:{enums:["width","height","average","min","max"]},bgWH:{number:!0,min:0,allowPercent:!0,enums:["auto"],multiple:!0},bgPos:{number:!0,allowPercent:!0,multiple:!0},bgRelativeTo:{enums:["inner","include-padding"],multiple:!0},bgRepeat:{enums:["repeat","repeat-x","repeat-y","no-repeat"],multiple:!0},bgFit:{enums:["none","contain","cover"],multiple:!0},bgCrossOrigin:{enums:["anonymous","use-credentials","null"],multiple:!0},bgClip:{enums:["none","node"],multiple:!0},bgContainment:{enums:["inside","over"],multiple:!0},boxSelection:{enums:["contain","overlap","none"]},color:{color:!0},colors:{color:!0,multiple:!0},fill:{enums:["solid","linear-gradient","radial-gradient"]},bool:{enums:["yes","no"]},bools:{enums:["yes","no"],multiple:!0},lineStyle:{enums:["solid","dotted","dashed"]},lineCap:{enums:["butt","round","square"]},linePosition:{enums:["center","inside","outside"]},lineJoin:{enums:["round","bevel","miter"]},borderStyle:{enums:["solid","dotted","dashed","double"]},curveStyle:{enums:["bezier","unbundled-bezier","haystack","segments","straight","straight-triangle","taxi","round-segments","round-taxi"]},radiusType:{enums:["arc-radius","influence-radius"],multiple:!0},fontFamily:{regex:'^([\\w- \\"]+(?:\\s*,\\s*[\\w- \\"]+)*)$'},fontStyle:{enums:["italic","normal","oblique"]},fontWeight:{enums:["normal","bold","bolder","lighter","100","200","300","400","500","600","800","900",100,200,300,400,500,600,700,800,900]},textDecoration:{enums:["none","underline","overline","line-through"]},textTransform:{enums:["none","uppercase","lowercase"]},textWrap:{enums:["none","wrap","ellipsis"]},textOverflowWrap:{enums:["whitespace","anywhere"]},textBackgroundShape:{enums:["rectangle","roundrectangle","round-rectangle","circle"]},nodeShape:{enums:["rectangle","roundrectangle","round-rectangle","cutrectangle","cut-rectangle","bottomroundrectangle","bottom-round-rectangle","barrel","ellipse","triangle","round-triangle","square","pentagon","round-pentagon","hexagon","round-hexagon","concavehexagon","concave-hexagon","heptagon","round-heptagon","octagon","round-octagon","tag","round-tag","star","diamond","round-diamond","vee","rhomboid","right-rhomboid","polygon"]},overlayShape:{enums:["roundrectangle","round-rectangle","ellipse"]},cornerRadius:{number:!0,min:0,units:"px|em",implicitUnits:"px",enums:["auto"]},compoundIncludeLabels:{enums:["include","exclude"]},arrowShape:{enums:["tee","triangle","triangle-tee","circle-triangle","triangle-cross","triangle-backcurve","vee","square","circle","diamond","chevron","none"]},arrowFill:{enums:["filled","hollow"]},arrowWidth:{number:!0,units:"%|px|em",implicitUnits:"px",enums:["match-line"]},display:{enums:["element","none"]},visibility:{enums:["hidden","visible"]},zCompoundDepth:{enums:["bottom","orphan","auto","top"]},zIndexCompare:{enums:["auto","manual"]},valign:{enums:["top","center","bottom"]},halign:{enums:["left","center","right"]},justification:{enums:["left","center","right","auto"]},text:{string:!0},data:{mapping:!0,regex:i("data")},layoutData:{mapping:!0,regex:i("layoutData")},scratch:{mapping:!0,regex:i("scratch")},mapData:{mapping:!0,regex:s("mapData")},mapLayoutData:{mapping:!0,regex:s("mapLayoutData")},mapScratch:{mapping:!0,regex:s("mapScratch")},fn:{mapping:!0,fn:!0},url:{regexes:o,singleRegexMatchValue:!0},urls:{regexes:o,singleRegexMatchValue:!0,multiple:!0},propList:{propList:!0},angle:{number:!0,units:"deg|rad",implicitUnits:"rad"},textRotation:{number:!0,units:"deg|rad",implicitUnits:"rad",enums:["none","autorotate"]},polygonPointList:{number:!0,multiple:!0,evenMultiple:!0,min:-1,max:1,unitless:!0},edgeDistances:{enums:["intersection","node-position","endpoints"]},edgeEndpoint:{number:!0,multiple:!0,units:"%|px|em|deg|rad",implicitUnits:"px",enums:["inside-to-node","outside-to-node","outside-to-node-or-label","outside-to-line","outside-to-line-or-label"],singleEnum:!0,validate:function($,C){switch($.length){case 2:return C[0]!=="deg"&&C[0]!=="rad"&&C[1]!=="deg"&&C[1]!=="rad";case 1:return De($[0])||C[0]==="deg"||C[0]==="rad";default:return!1}}},easing:{regexes:["^(spring)\\s*\\(\\s*("+t+")\\s*,\\s*("+t+")\\s*\\)$","^(cubic-bezier)\\s*\\(\\s*("+t+")\\s*,\\s*("+t+")\\s*,\\s*("+t+")\\s*,\\s*("+t+")\\s*\\)$"],enums:["linear","ease","ease-in","ease-out","ease-in-out","ease-in-sine","ease-out-sine","ease-in-out-sine","ease-in-quad","ease-out-quad","ease-in-out-quad","ease-in-cubic","ease-out-cubic","ease-in-out-cubic","ease-in-quart","ease-out-quart","ease-in-out-quart","ease-in-quint","ease-out-quint","ease-in-out-quint","ease-in-expo","ease-out-expo","ease-in-out-expo","ease-in-circ","ease-out-circ","ease-in-out-circ"]},gradientDirection:{enums:["to-bottom","to-top","to-left","to-right","to-bottom-right","to-bottom-left","to-top-right","to-top-left","to-right-bottom","to-left-bottom","to-right-top","to-left-top"]},boundsExpansion:{number:!0,multiple:!0,min:0,validate:function($){var C=$.length;return C===1||C===2||C===4}}};var u={zeroNonZero:function($,C){return($==null||C==null)&&$!==C||$==0&&C!=0?!0:$!=0&&C==0},any:function($,C){return $!=C},emptyNonEmpty:function($,C){var B=tn($),_=tn(C);return B&&!_||!B&&_}},l=it.types,f=[{name:"label",type:l.text,triggersBounds:u.any,triggersZOrder:u.emptyNonEmpty},{name:"text-rotation",type:l.textRotation,triggersBounds:u.any},{name:"text-margin-x",type:l.bidirectionalSize,triggersBounds:u.any},{name:"text-margin-y",type:l.bidirectionalSize,triggersBounds:u.any}],c=[{name:"source-label",type:l.text,triggersBounds:u.any},{name:"source-text-rotation",type:l.textRotation,triggersBounds:u.any},{name:"source-text-margin-x",type:l.bidirectionalSize,triggersBounds:u.any},{name:"source-text-margin-y",type:l.bidirectionalSize,triggersBounds:u.any},{name:"source-text-offset",type:l.size,triggersBounds:u.any}],v=[{name:"target-label",type:l.text,triggersBounds:u.any},{name:"target-text-rotation",type:l.textRotation,triggersBounds:u.any},{name:"target-text-margin-x",type:l.bidirectionalSize,triggersBounds:u.any},{name:"target-text-margin-y",type:l.bidirectionalSize,triggersBounds:u.any},{name:"target-text-offset",type:l.size,triggersBounds:u.any}],h=[{name:"font-family",type:l.fontFamily,triggersBounds:u.any},{name:"font-style",type:l.fontStyle,triggersBounds:u.any},{name:"font-weight",type:l.fontWeight,triggersBounds:u.any},{name:"font-size",type:l.size,triggersBounds:u.any},{name:"text-transform",type:l.textTransform,triggersBounds:u.any},{name:"text-wrap",type:l.textWrap,triggersBounds:u.any},{name:"text-overflow-wrap",type:l.textOverflowWrap,triggersBounds:u.any},{name:"text-max-width",type:l.size,triggersBounds:u.any},{name:"text-outline-width",type:l.size,triggersBounds:u.any},{name:"line-height",type:l.positiveNumber,triggersBounds:u.any}],d=[{name:"text-valign",type:l.valign,triggersBounds:u.any},{name:"text-halign",type:l.halign,triggersBounds:u.any},{name:"color",type:l.color},{name:"text-outline-color",type:l.color},{name:"text-outline-opacity",type:l.zeroOneNumber},{name:"text-background-color",type:l.color},{name:"text-background-opacity",type:l.zeroOneNumber},{name:"text-background-padding",type:l.size,triggersBounds:u.any},{name:"text-border-opacity",type:l.zeroOneNumber},{name:"text-border-color",type:l.color},{name:"text-border-width",type:l.size,triggersBounds:u.any},{name:"text-border-style",type:l.borderStyle,triggersBounds:u.any},{name:"text-background-shape",type:l.textBackgroundShape,triggersBounds:u.any},{name:"text-justification",type:l.justification},{name:"box-select-labels",type:l.bool,triggersBounds:u.any}],p=[{name:"events",type:l.bool,triggersZOrder:u.any},{name:"text-events",type:l.bool,triggersZOrder:u.any},{name:"box-selection",type:l.boxSelection,triggersZOrder:u.any}],g=[{name:"display",type:l.display,triggersZOrder:u.any,triggersBounds:u.any,triggersBoundsOfConnectedEdges:u.any,triggersBoundsOfParallelEdges:function($,C,B){return $===C?!1:B.pstyle("curve-style").value==="bezier"}},{name:"visibility",type:l.visibility,triggersZOrder:u.any},{name:"opacity",type:l.zeroOneNumber,triggersZOrder:u.zeroNonZero},{name:"text-opacity",type:l.zeroOneNumber},{name:"min-zoomed-font-size",type:l.size},{name:"z-compound-depth",type:l.zCompoundDepth,triggersZOrder:u.any},{name:"z-index-compare",type:l.zIndexCompare,triggersZOrder:u.any},{name:"z-index",type:l.number,triggersZOrder:u.any}],y=[{name:"overlay-padding",type:l.size,triggersBounds:u.any},{name:"overlay-color",type:l.color},{name:"overlay-opacity",type:l.zeroOneNumber,triggersBounds:u.zeroNonZero},{name:"overlay-shape",type:l.overlayShape,triggersBounds:u.any},{name:"overlay-corner-radius",type:l.cornerRadius}],m=[{name:"underlay-padding",type:l.size,triggersBounds:u.any},{name:"underlay-color",type:l.color},{name:"underlay-opacity",type:l.zeroOneNumber,triggersBounds:u.zeroNonZero},{name:"underlay-shape",type:l.overlayShape,triggersBounds:u.any},{name:"underlay-corner-radius",type:l.cornerRadius}],b=[{name:"transition-property",type:l.propList},{name:"transition-duration",type:l.time},{name:"transition-delay",type:l.time},{name:"transition-timing-function",type:l.easing}],w=function($,C){return C.value==="label"?-$.poolIndex():C.pfValue},E=[{name:"height",type:l.nodeSize,triggersBounds:u.any,hashOverride:w},{name:"width",type:l.nodeSize,triggersBounds:u.any,hashOverride:w},{name:"shape",type:l.nodeShape,triggersBounds:u.any},{name:"shape-polygon-points",type:l.polygonPointList,triggersBounds:u.any},{name:"corner-radius",type:l.cornerRadius},{name:"background-color",type:l.color},{name:"background-fill",type:l.fill},{name:"background-opacity",type:l.zeroOneNumber},{name:"background-blacken",type:l.nOneOneNumber},{name:"background-gradient-stop-colors",type:l.colors},{name:"background-gradient-stop-positions",type:l.percentages},{name:"background-gradient-direction",type:l.gradientDirection},{name:"padding",type:l.sizeMaybePercent,triggersBounds:u.any},{name:"padding-relative-to",type:l.paddingRelativeTo,triggersBounds:u.any},{name:"bounds-expansion",type:l.boundsExpansion,triggersBounds:u.any}],T=[{name:"border-color",type:l.color},{name:"border-opacity",type:l.zeroOneNumber},{name:"border-width",type:l.size,triggersBounds:u.any},{name:"border-style",type:l.borderStyle},{name:"border-cap",type:l.lineCap},{name:"border-join",type:l.lineJoin},{name:"border-dash-pattern",type:l.numbers},{name:"border-dash-offset",type:l.number},{name:"border-position",type:l.linePosition}],x=[{name:"outline-color",type:l.color},{name:"outline-opacity",type:l.zeroOneNumber},{name:"outline-width",type:l.size,triggersBounds:u.any},{name:"outline-style",type:l.borderStyle},{name:"outline-offset",type:l.size,triggersBounds:u.any}],S=[{name:"background-image",type:l.urls},{name:"background-image-crossorigin",type:l.bgCrossOrigin},{name:"background-image-opacity",type:l.zeroOneNumbers},{name:"background-image-containment",type:l.bgContainment},{name:"background-image-smoothing",type:l.bools},{name:"background-position-x",type:l.bgPos},{name:"background-position-y",type:l.bgPos},{name:"background-width-relative-to",type:l.bgRelativeTo},{name:"background-height-relative-to",type:l.bgRelativeTo},{name:"background-repeat",type:l.bgRepeat},{name:"background-fit",type:l.bgFit},{name:"background-clip",type:l.bgClip},{name:"background-width",type:l.bgWH},{name:"background-height",type:l.bgWH},{name:"background-offset-x",type:l.bgPos},{name:"background-offset-y",type:l.bgPos}],D=[{name:"position",type:l.position,triggersBounds:u.any},{name:"compound-sizing-wrt-labels",type:l.compoundIncludeLabels,triggersBounds:u.any},{name:"min-width",type:l.size,triggersBounds:u.any},{name:"min-width-bias-left",type:l.sizeMaybePercent,triggersBounds:u.any},{name:"min-width-bias-right",type:l.sizeMaybePercent,triggersBounds:u.any},{name:"min-height",type:l.size,triggersBounds:u.any},{name:"min-height-bias-top",type:l.sizeMaybePercent,triggersBounds:u.any},{name:"min-height-bias-bottom",type:l.sizeMaybePercent,triggersBounds:u.any}],A=[{name:"line-style",type:l.lineStyle},{name:"line-color",type:l.color},{name:"line-fill",type:l.fill},{name:"line-cap",type:l.lineCap},{name:"line-opacity",type:l.zeroOneNumber},{name:"line-dash-pattern",type:l.numbers},{name:"line-dash-offset",type:l.number},{name:"line-outline-width",type:l.size},{name:"line-outline-color",type:l.color},{name:"line-gradient-stop-colors",type:l.colors},{name:"line-gradient-stop-positions",type:l.percentages},{name:"curve-style",type:l.curveStyle,triggersBounds:u.any,triggersBoundsOfParallelEdges:function($,C){return $===C?!1:$==="bezier"||C==="bezier"}},{name:"haystack-radius",type:l.zeroOneNumber,triggersBounds:u.any},{name:"source-endpoint",type:l.edgeEndpoint,triggersBounds:u.any},{name:"target-endpoint",type:l.edgeEndpoint,triggersBounds:u.any},{name:"control-point-step-size",type:l.size,triggersBounds:u.any},{name:"control-point-distances",type:l.bidirectionalSizes,triggersBounds:u.any},{name:"control-point-weights",type:l.numbers,triggersBounds:u.any},{name:"segment-distances",type:l.bidirectionalSizes,triggersBounds:u.any},{name:"segment-weights",type:l.numbers,triggersBounds:u.any},{name:"segment-radii",type:l.numbers,triggersBounds:u.any},{name:"radius-type",type:l.radiusType,triggersBounds:u.any},{name:"taxi-turn",type:l.bidirectionalSizeMaybePercent,triggersBounds:u.any},{name:"taxi-turn-min-distance",type:l.size,triggersBounds:u.any},{name:"taxi-direction",type:l.axisDirection,triggersBounds:u.any},{name:"taxi-radius",type:l.number,triggersBounds:u.any},{name:"edge-distances",type:l.edgeDistances,triggersBounds:u.any},{name:"arrow-scale",type:l.positiveNumber,triggersBounds:u.any},{name:"loop-direction",type:l.angle,triggersBounds:u.any},{name:"loop-sweep",type:l.angle,triggersBounds:u.any},{name:"source-distance-from-node",type:l.size,triggersBounds:u.any},{name:"target-distance-from-node",type:l.size,triggersBounds:u.any}],k=[{name:"ghost",type:l.bool,triggersBounds:u.any},{name:"ghost-offset-x",type:l.bidirectionalSize,triggersBounds:u.any},{name:"ghost-offset-y",type:l.bidirectionalSize,triggersBounds:u.any},{name:"ghost-opacity",type:l.zeroOneNumber}],R=[{name:"selection-box-color",type:l.color},{name:"selection-box-opacity",type:l.zeroOneNumber},{name:"selection-box-border-color",type:l.color},{name:"selection-box-border-width",type:l.size},{name:"active-bg-color",type:l.color},{name:"active-bg-opacity",type:l.zeroOneNumber},{name:"active-bg-size",type:l.size},{name:"outside-texture-bg-color",type:l.color},{name:"outside-texture-bg-opacity",type:l.zeroOneNumber}],M=[];it.pieBackgroundN=16,M.push({name:"pie-size",type:l.sizeMaybePercent}),M.push({name:"pie-hole",type:l.sizeMaybePercent}),M.push({name:"pie-start-angle",type:l.angle});for(var L=1;L<=it.pieBackgroundN;L++)M.push({name:"pie-"+L+"-background-color",type:l.color}),M.push({name:"pie-"+L+"-background-size",type:l.percent}),M.push({name:"pie-"+L+"-background-opacity",type:l.zeroOneNumber});var N=[];it.stripeBackgroundN=16,N.push({name:"stripe-size",type:l.sizeMaybePercent}),N.push({name:"stripe-direction",type:l.axisDirectionPrimary});for(var O=1;O<=it.stripeBackgroundN;O++)N.push({name:"stripe-"+O+"-background-color",type:l.color}),N.push({name:"stripe-"+O+"-background-size",type:l.percent}),N.push({name:"stripe-"+O+"-background-opacity",type:l.zeroOneNumber});var I=[],F=it.arrowPrefixes=["source","mid-source","target","mid-target"];[{name:"arrow-shape",type:l.arrowShape,triggersBounds:u.any},{name:"arrow-color",type:l.color},{name:"arrow-fill",type:l.arrowFill},{name:"arrow-width",type:l.arrowWidth}].forEach(function(q){F.forEach(function($){var C=$+"-"+q.name,B=q.type,_=q.triggersBounds;I.push({name:C,type:B,triggersBounds:_})})},{});var H=it.properties=[].concat(p,b,g,y,m,k,d,h,f,c,v,E,T,x,S,M,N,D,A,I,R),G=it.propertyGroups={behavior:p,transition:b,visibility:g,overlay:y,underlay:m,ghost:k,commonLabel:d,labelDimensions:h,mainLabel:f,sourceLabel:c,targetLabel:v,nodeBody:E,nodeBorder:T,nodeOutline:x,backgroundImage:S,pie:M,stripe:N,compound:D,edgeLine:A,edgeArrow:I,core:R},z=it.propertyGroupNames={},V=it.propertyGroupKeys=Object.keys(G);V.forEach(function(q){z[q]=G[q].map(function($){return $.name}),G[q].forEach(function($){return $.groupKey=q})});var re=it.aliases=[{name:"content",pointsTo:"label"},{name:"control-point-distance",pointsTo:"control-point-distances"},{name:"control-point-weight",pointsTo:"control-point-weights"},{name:"segment-distance",pointsTo:"segment-distances"},{name:"segment-weight",pointsTo:"segment-weights"},{name:"segment-radius",pointsTo:"segment-radii"},{name:"edge-text-rotation",pointsTo:"text-rotation"},{name:"padding-left",pointsTo:"padding"},{name:"padding-right",pointsTo:"padding"},{name:"padding-top",pointsTo:"padding"},{name:"padding-bottom",pointsTo:"padding"}];it.propertyNames=H.map(function(q){return q.name});for(var ie=0;ie<H.length;ie++){var ne=H[ie];H[ne.name]=ne}for(var oe=0;oe<re.length;oe++){var ve=re[oe],ge=H[ve.pointsTo],ue={name:ve.name,alias:!0,pointsTo:ge};H.push(ue),H[ve.name]=ue}})();it.getDefaultProperty=function(t){return this.getDefaultProperties()[t]};it.getDefaultProperties=function(){var t=this._private;if(t.defaultProperties!=null)return t.defaultProperties;for(var e=ke({"selection-box-color":"#ddd","selection-box-opacity":.65,"selection-box-border-color":"#aaa","selection-box-border-width":1,"active-bg-color":"black","active-bg-opacity":.15,"active-bg-size":30,"outside-texture-bg-color":"#000","outside-texture-bg-opacity":.125,events:"yes","text-events":"no","text-valign":"top","text-halign":"center","text-justification":"auto","line-height":1,color:"#000","box-selection":"contain","text-outline-color":"#000","text-outline-width":0,"text-outline-opacity":1,"text-opacity":1,"text-decoration":"none","text-transform":"none","text-wrap":"none","text-overflow-wrap":"whitespace","text-max-width":9999,"text-background-color":"#000","text-background-opacity":0,"text-background-shape":"rectangle","text-background-padding":0,"text-border-opacity":0,"text-border-width":0,"text-border-style":"solid","text-border-color":"#000","font-family":"Helvetica Neue, Helvetica, sans-serif","font-style":"normal","font-weight":"normal","font-size":16,"min-zoomed-font-size":0,"text-rotation":"none","source-text-rotation":"none","target-text-rotation":"none",visibility:"visible",display:"element",opacity:1,"z-compound-depth":"auto","z-index-compare":"auto","z-index":0,label:"","text-margin-x":0,"text-margin-y":0,"source-label":"","source-text-offset":0,"source-text-margin-x":0,"source-text-margin-y":0,"target-label":"","target-text-offset":0,"target-text-margin-x":0,"target-text-margin-y":0,"overlay-opacity":0,"overlay-color":"#000","overlay-padding":10,"overlay-shape":"round-rectangle","overlay-corner-radius":"auto","underlay-opacity":0,"underlay-color":"#000","underlay-padding":10,"underlay-shape":"round-rectangle","underlay-corner-radius":"auto","transition-property":"none","transition-duration":0,"transition-delay":0,"transition-timing-function":"linear","box-select-labels":"no","background-blacken":0,"background-color":"#999","background-fill":"solid","background-opacity":1,"background-image":"none","background-image-crossorigin":"anonymous","background-image-opacity":1,"background-image-containment":"inside","background-image-smoothing":"yes","background-position-x":"50%","background-position-y":"50%","background-offset-x":0,"background-offset-y":0,"background-width-relative-to":"include-padding","background-height-relative-to":"include-padding","background-repeat":"no-repeat","background-fit":"none","background-clip":"node","background-width":"auto","background-height":"auto","border-color":"#000","border-opacity":1,"border-width":0,"border-style":"solid","border-dash-pattern":[4,2],"border-dash-offset":0,"border-cap":"butt","border-join":"miter","border-position":"center","outline-color":"#999","outline-opacity":1,"outline-width":0,"outline-offset":0,"outline-style":"solid",height:30,width:30,shape:"ellipse","shape-polygon-points":"-1, -1,   1, -1,   1, 1,   -1, 1","corner-radius":"auto","bounds-expansion":0,"background-gradient-direction":"to-bottom","background-gradient-stop-colors":"#999","background-gradient-stop-positions":"0%",ghost:"no","ghost-offset-y":0,"ghost-offset-x":0,"ghost-opacity":0,padding:0,"padding-relative-to":"width",position:"origin","compound-sizing-wrt-labels":"include","min-width":0,"min-width-bias-left":0,"min-width-bias-right":0,"min-height":0,"min-height-bias-top":0,"min-height-bias-bottom":0},{"pie-size":"100%","pie-hole":0,"pie-start-angle":"0deg"},[{name:"pie-{{i}}-background-color",value:"black"},{name:"pie-{{i}}-background-size",value:"0%"},{name:"pie-{{i}}-background-opacity",value:1}].reduce(function(u,l){for(var f=1;f<=it.pieBackgroundN;f++){var c=l.name.replace("{{i}}",f),v=l.value;u[c]=v}return u},{}),{"stripe-size":"100%","stripe-direction":"horizontal"},[{name:"stripe-{{i}}-background-color",value:"black"},{name:"stripe-{{i}}-background-size",value:"0%"},{name:"stripe-{{i}}-background-opacity",value:1}].reduce(function(u,l){for(var f=1;f<=it.stripeBackgroundN;f++){var c=l.name.replace("{{i}}",f),v=l.value;u[c]=v}return u},{}),{"line-style":"solid","line-color":"#999","line-fill":"solid","line-cap":"butt","line-opacity":1,"line-outline-width":0,"line-outline-color":"#000","line-gradient-stop-colors":"#999","line-gradient-stop-positions":"0%","control-point-step-size":40,"control-point-weights":.5,"segment-weights":.5,"segment-distances":20,"segment-radii":15,"radius-type":"arc-radius","taxi-turn":"50%","taxi-radius":15,"taxi-turn-min-distance":10,"taxi-direction":"auto","edge-distances":"intersection","curve-style":"haystack","haystack-radius":0,"arrow-scale":1,"loop-direction":"-45deg","loop-sweep":"-90deg","source-distance-from-node":0,"target-distance-from-node":0,"source-endpoint":"outside-to-node","target-endpoint":"outside-to-node","line-dash-pattern":[6,3],"line-dash-offset":0},[{name:"arrow-shape",value:"none"},{name:"arrow-color",value:"#999"},{name:"arrow-fill",value:"filled"},{name:"arrow-width",value:1}].reduce(function(u,l){return it.arrowPrefixes.forEach(function(f){var c=f+"-"+l.name,v=l.value;u[c]=v}),u},{})),r={},n=0;n<this.properties.length;n++){var a=this.properties[n];if(!a.pointsTo){var i=a.name,s=e[i],o=this.parse(i,s);r[i]=o}}return t.defaultProperties=r,t.defaultProperties};it.addDefaultStylesheet=function(){this.selector(":parent").css({shape:"rectangle",padding:10,"background-color":"#eee","border-color":"#ccc","border-width":1}).selector("edge").css({width:3}).selector(":loop").css({"curve-style":"bezier"}).selector("edge:compound").css({"curve-style":"bezier","source-endpoint":"outside-to-line","target-endpoint":"outside-to-line"}).selector(":selected").css({"background-color":"#0169D9","line-color":"#0169D9","source-arrow-color":"#0169D9","target-arrow-color":"#0169D9","mid-source-arrow-color":"#0169D9","mid-target-arrow-color":"#0169D9"}).selector(":parent:selected").css({"background-color":"#CCE1F9","border-color":"#aec8e5"}).selector(":active").css({"overlay-color":"black","overlay-padding":10,"overlay-opacity":.25}),this.defaultLength=this.length};var Zs={};Zs.parse=function(t,e,r,n){var a=this;if(et(e))return a.parseImplWarn(t,e,r,n);var i=n==="mapping"||n===!0||n===!1||n==null?"dontcare":n,s=r?"t":"f",o=""+e,u=Kh(t,o,s,i),l=a.propCache=a.propCache||[],f;return(f=l[u])||(f=l[u]=a.parseImplWarn(t,e,r,n)),(r||n==="mapping")&&(f=dr(f),f&&(f.value=dr(f.value))),f};Zs.parseImplWarn=function(t,e,r,n){var a=this.parseImpl(t,e,r,n);return!a&&e!=null&&Ue("The style property `".concat(t,": ").concat(e,"` is invalid")),a&&(a.name==="width"||a.name==="height")&&e==="label"&&Ue("The style value of `label` is deprecated for `"+a.name+"`"),a};Zs.parseImpl=function(t,e,r,n){var a=this;t=Hl(t);var i=a.properties[t],s=e,o=a.types;if(!i||e===void 0)return null;i.alias&&(i=i.pointsTo,t=i.name);var u=De(e);u&&(e=e.trim());var l=i.type;if(!l)return null;if(r&&(e===""||e===null))return{name:t,value:e,bypass:!0,deleteBypass:!0};if(et(e))return{name:t,value:e,strValue:"fn",mapped:o.fn,bypass:r};var f,c;if(!(!u||n||e.length<7||e[1]!=="a")){if(e.length>=7&&e[0]==="d"&&(f=new RegExp(o.data.regex).exec(e))){if(r)return!1;var v=o.data;return{name:t,value:f,strValue:""+e,mapped:v,field:f[1],bypass:r}}else if(e.length>=10&&e[0]==="m"&&(c=new RegExp(o.mapData.regex).exec(e))){if(r||l.multiple)return!1;var h=o.mapData;if(!(l.color||l.number))return!1;var d=this.parse(t,c[4]);if(!d||d.mapped)return!1;var p=this.parse(t,c[5]);if(!p||p.mapped)return!1;if(d.pfValue===p.pfValue||d.strValue===p.strValue)return Ue("`"+t+": "+e+"` is not a valid mapper because the output range is zero; converting to `"+t+": "+d.strValue+"`"),this.parse(t,d.strValue);if(l.color){var g=d.value,y=p.value,m=g[0]===y[0]&&g[1]===y[1]&&g[2]===y[2]&&(g[3]===y[3]||(g[3]==null||g[3]===1)&&(y[3]==null||y[3]===1));if(m)return!1}return{name:t,value:c,strValue:""+e,mapped:h,field:c[1],fieldMin:parseFloat(c[2]),fieldMax:parseFloat(c[3]),valueMin:d.value,valueMax:p.value,bypass:r}}}if(l.multiple&&n!=="multiple"){var b;if(u?b=e.split(/\s+/):Ye(e)?b=e:b=[e],l.evenMultiple&&b.length%2!==0)return null;for(var w=[],E=[],T=[],x="",S=!1,D=0;D<b.length;D++){var A=a.parse(t,b[D],r,"multiple");S=S||De(A.value),w.push(A.value),T.push(A.pfValue!=null?A.pfValue:A.value),E.push(A.units),x+=(D>0?" ":"")+A.strValue}return l.validate&&!l.validate(w,E)?null:l.singleEnum&&S?w.length===1&&De(w[0])?{name:t,value:w[0],strValue:w[0],bypass:r}:null:{name:t,value:w,pfValue:T,strValue:x,bypass:r,units:E}}var k=function(){for(var ue=0;ue<l.enums.length;ue++){var q=l.enums[ue];if(q===e)return{name:t,value:e,strValue:""+e,bypass:r}}return null};if(l.number){var R,M="px";if(l.units&&(R=l.units),l.implicitUnits&&(M=l.implicitUnits),!l.unitless)if(u){var L="px|em"+(l.allowPercent?"|\\%":"");R&&(L=R);var N=e.match("^("+ct+")("+L+")?$");N&&(e=N[1],R=N[2]||M)}else(!R||l.implicitUnits)&&(R=M);if(e=parseFloat(e),isNaN(e)&&l.enums===void 0)return null;if(isNaN(e)&&l.enums!==void 0)return e=s,k();if(l.integer&&!y0(e)||l.min!==void 0&&(e<l.min||l.strictMin&&e===l.min)||l.max!==void 0&&(e>l.max||l.strictMax&&e===l.max))return null;var O={name:t,value:e,strValue:""+e+(R||""),units:R,bypass:r};return l.unitless||R!=="px"&&R!=="em"?O.pfValue=e:O.pfValue=R==="px"||!R?e:this.getEmSizeInPixels()*e,(R==="ms"||R==="s")&&(O.pfValue=R==="ms"?e:1e3*e),(R==="deg"||R==="rad")&&(O.pfValue=R==="rad"?e:Db(e)),R==="%"&&(O.pfValue=e/100),O}else if(l.propList){var I=[],F=""+e;if(F!=="none"){for(var H=F.split(/\s*,\s*|\s+/),G=0;G<H.length;G++){var z=H[G].trim();a.properties[z]?I.push(z):Ue("`"+z+"` is not a valid property name")}if(I.length===0)return null}return{name:t,value:I,strValue:I.length===0?"none":I.join(" "),bypass:r}}else if(l.color){var V=Vh(e);return V?{name:t,value:V,pfValue:V,strValue:"rgb("+V[0]+","+V[1]+","+V[2]+")",bypass:r}:null}else if(l.regex||l.regexes){if(l.enums){var re=k();if(re)return re}for(var ie=l.regexes?l.regexes:[l.regex],ne=0;ne<ie.length;ne++){var oe=new RegExp(ie[ne]),ve=oe.exec(e);if(ve)return{name:t,value:l.singleRegexMatchValue?ve[1]:ve,strValue:""+e,bypass:r}}return null}else return l.string?{name:t,value:""+e,strValue:""+e,bypass:r}:l.enums?k():null};var pt=function(e){if(!(this instanceof pt))return new pt(e);if(!ql(e)){je("A style must have a core reference");return}this._private={cy:e,coreStyle:{}},this.length=0,this.resetToDefault()},At=pt.prototype;At.instanceString=function(){return"style"};At.clear=function(){for(var t=this._private,e=t.cy,r=e.elements(),n=0;n<this.length;n++)this[n]=void 0;return this.length=0,t.contextStyles={},t.propDiffs={},this.cleanElements(r,!0),r.forEach(function(a){var i=a[0]._private;i.styleDirty=!0,i.appliedInitStyle=!1}),this};At.resetToDefault=function(){return this.clear(),this.addDefaultStylesheet(),this};At.core=function(t){return this._private.coreStyle[t]||this.getDefaultProperty(t)};At.selector=function(t){var e=t==="core"?null:new an(t),r=this.length++;return this[r]={selector:e,properties:[],mappedProperties:[],index:r},this};At.css=function(){var t=this,e=arguments;if(e.length===1)for(var r=e[0],n=0;n<t.properties.length;n++){var a=t.properties[n],i=r[a.name];i===void 0&&(i=r[Ns(a.name)]),i!==void 0&&this.cssRule(a.name,i)}else e.length===2&&this.cssRule(e[0],e[1]);return this};At.style=At.css;At.cssRule=function(t,e){var r=this.parse(t,e);if(r){var n=this.length-1;this[n].properties.push(r),this[n].properties[r.name]=r,r.name.match(/pie-(\d+)-background-size/)&&r.value&&(this._private.hasPie=!0),r.name.match(/stripe-(\d+)-background-size/)&&r.value&&(this._private.hasStripe=!0),r.mapped&&this[n].mappedProperties.push(r);var a=!this[n].selector;a&&(this._private.coreStyle[r.name]=r)}return this};At.append=function(t){return Fh(t)?t.appendToStyle(this):Ye(t)?this.appendFromJson(t):De(t)&&this.appendFromString(t),this};pt.fromJson=function(t,e){var r=new pt(t);return r.fromJson(e),r};pt.fromString=function(t,e){return new pt(t).fromString(e)};[yt,bi,nf,mr,Xs,af,it,Zs].forEach(function(t){ke(At,t)});pt.types=At.types;pt.properties=At.properties;pt.propertyGroups=At.propertyGroups;pt.propertyGroupNames=At.propertyGroupNames;pt.propertyGroupKeys=At.propertyGroupKeys;var Rx={style:function(e){if(e){var r=this.setStyle(e);r.update()}return this._private.style},setStyle:function(e){var r=this._private;return Fh(e)?r.style=e.generateStyle(this):Ye(e)?r.style=pt.fromJson(this,e):De(e)?r.style=pt.fromString(this,e):r.style=pt(this),r.style},updateStyle:function(){this.mutableElements().updateStyle()}},Mx="single",Bn={autolock:function(e){if(e!==void 0)this._private.autolock=!!e;else return this._private.autolock;return this},autoungrabify:function(e){if(e!==void 0)this._private.autoungrabify=!!e;else return this._private.autoungrabify;return this},autounselectify:function(e){if(e!==void 0)this._private.autounselectify=!!e;else return this._private.autounselectify;return this},selectionType:function(e){var r=this._private;if(r.selectionType==null&&(r.selectionType=Mx),e!==void 0)(e==="additive"||e==="single")&&(r.selectionType=e);else return r.selectionType;return this},panningEnabled:function(e){if(e!==void 0)this._private.panningEnabled=!!e;else return this._private.panningEnabled;return this},userPanningEnabled:function(e){if(e!==void 0)this._private.userPanningEnabled=!!e;else return this._private.userPanningEnabled;return this},zoomingEnabled:function(e){if(e!==void 0)this._private.zoomingEnabled=!!e;else return this._private.zoomingEnabled;return this},userZoomingEnabled:function(e){if(e!==void 0)this._private.userZoomingEnabled=!!e;else return this._private.userZoomingEnabled;return this},boxSelectionEnabled:function(e){if(e!==void 0)this._private.boxSelectionEnabled=!!e;else return this._private.boxSelectionEnabled;return this},pan:function(){var e=arguments,r=this._private.pan,n,a,i,s,o;switch(e.length){case 0:return r;case 1:if(De(e[0]))return n=e[0],r[n];if(ze(e[0])){if(!this._private.panningEnabled)return this;i=e[0],s=i.x,o=i.y,he(s)&&(r.x=s),he(o)&&(r.y=o),this.emit("pan viewport")}break;case 2:if(!this._private.panningEnabled)return this;n=e[0],a=e[1],(n==="x"||n==="y")&&he(a)&&(r[n]=a),this.emit("pan viewport");break}return this.notify("viewport"),this},panBy:function(e,r){var n=arguments,a=this._private.pan,i,s,o,u,l;if(!this._private.panningEnabled)return this;switch(n.length){case 1:ze(e)&&(o=n[0],u=o.x,l=o.y,he(u)&&(a.x+=u),he(l)&&(a.y+=l),this.emit("pan viewport"));break;case 2:i=e,s=r,(i==="x"||i==="y")&&he(s)&&(a[i]+=s),this.emit("pan viewport");break}return this.notify("viewport"),this},gc:function(){this.notify("gc")},fit:function(e,r){var n=this.getFitViewport(e,r);if(n){var a=this._private;a.zoom=n.zoom,a.pan=n.pan,this.emit("pan zoom viewport"),this.notify("viewport")}return this},getFitViewport:function(e,r){if(he(e)&&r===void 0&&(r=e,e=void 0),!(!this._private.panningEnabled||!this._private.zoomingEnabled)){var n;if(De(e)){var a=e;e=this.$(a)}else if(w0(e)){var i=e;n={x1:i.x1,y1:i.y1,x2:i.x2,y2:i.y2},n.w=n.x2-n.x1,n.h=n.y2-n.y1}else Gt(e)||(e=this.mutableElements());if(!(Gt(e)&&e.empty())){n=n||e.boundingBox();var s=this.width(),o=this.height(),u;if(r=he(r)?r:0,!isNaN(s)&&!isNaN(o)&&s>0&&o>0&&!isNaN(n.w)&&!isNaN(n.h)&&n.w>0&&n.h>0){u=Math.min((s-2*r)/n.w,(o-2*r)/n.h),u=u>this._private.maxZoom?this._private.maxZoom:u,u=u<this._private.minZoom?this._private.minZoom:u;var l={x:(s-u*(n.x1+n.x2))/2,y:(o-u*(n.y1+n.y2))/2};return{zoom:u,pan:l}}}}},zoomRange:function(e,r){var n=this._private;if(r==null){var a=e;e=a.min,r=a.max}return he(e)&&he(r)&&e<=r?(n.minZoom=e,n.maxZoom=r):he(e)&&r===void 0&&e<=n.maxZoom?n.minZoom=e:he(r)&&e===void 0&&r>=n.minZoom&&(n.maxZoom=r),this},minZoom:function(e){return e===void 0?this._private.minZoom:this.zoomRange({min:e})},maxZoom:function(e){return e===void 0?this._private.maxZoom:this.zoomRange({max:e})},getZoomedViewport:function(e){var r=this._private,n=r.pan,a=r.zoom,i,s,o=!1;if(r.zoomingEnabled||(o=!0),he(e)?s=e:ze(e)&&(s=e.level,e.position!=null?i=zs(e.position,a,n):e.renderedPosition!=null&&(i=e.renderedPosition),i!=null&&!r.panningEnabled&&(o=!0)),s=s>r.maxZoom?r.maxZoom:s,s=s<r.minZoom?r.minZoom:s,o||!he(s)||s===a||i!=null&&(!he(i.x)||!he(i.y)))return null;if(i!=null){var u=n,l=a,f=s,c={x:-f/l*(i.x-u.x)+i.x,y:-f/l*(i.y-u.y)+i.y};return{zoomed:!0,panned:!0,zoom:f,pan:c}}else return{zoomed:!0,panned:!1,zoom:s,pan:n}},zoom:function(e){if(e===void 0)return this._private.zoom;var r=this.getZoomedViewport(e),n=this._private;return r==null||!r.zoomed?this:(n.zoom=r.zoom,r.panned&&(n.pan.x=r.pan.x,n.pan.y=r.pan.y),this.emit("zoom"+(r.panned?" pan":"")+" viewport"),this.notify("viewport"),this)},viewport:function(e){var r=this._private,n=!0,a=!0,i=[],s=!1,o=!1;if(!e)return this;if(he(e.zoom)||(n=!1),ze(e.pan)||(a=!1),!n&&!a)return this;if(n){var u=e.zoom;u<r.minZoom||u>r.maxZoom||!r.zoomingEnabled?s=!0:(r.zoom=u,i.push("zoom"))}if(a&&(!s||!e.cancelOnFailedZoom)&&r.panningEnabled){var l=e.pan;he(l.x)&&(r.pan.x=l.x,o=!1),he(l.y)&&(r.pan.y=l.y,o=!1),o||i.push("pan")}return i.length>0&&(i.push("viewport"),this.emit(i.join(" ")),this.notify("viewport")),this},center:function(e){var r=this.getCenterPan(e);return r&&(this._private.pan=r,this.emit("pan viewport"),this.notify("viewport")),this},getCenterPan:function(e,r){if(this._private.panningEnabled){if(De(e)){var n=e;e=this.mutableElements().filter(n)}else Gt(e)||(e=this.mutableElements());if(e.length!==0){var a=e.boundingBox(),i=this.width(),s=this.height();r=r===void 0?this._private.zoom:r;var o={x:(i-r*(a.x1+a.x2))/2,y:(s-r*(a.y1+a.y2))/2};return o}}},reset:function(){return!this._private.panningEnabled||!this._private.zoomingEnabled?this:(this.viewport({pan:{x:0,y:0},zoom:1}),this)},invalidateSize:function(){this._private.sizeCache=null},size:function(){var e=this._private,r=e.container,n=this;return e.sizeCache=e.sizeCache||(r?(function(){var a=n.window().getComputedStyle(r),i=function(o){return parseFloat(a.getPropertyValue(o))};return{width:r.clientWidth-i("padding-left")-i("padding-right"),height:r.clientHeight-i("padding-top")-i("padding-bottom")}})():{width:1,height:1})},width:function(){return this.size().width},height:function(){return this.size().height},extent:function(){var e=this._private.pan,r=this._private.zoom,n=this.renderedExtent(),a={x1:(n.x1-e.x)/r,x2:(n.x2-e.x)/r,y1:(n.y1-e.y)/r,y2:(n.y2-e.y)/r};return a.w=a.x2-a.x1,a.h=a.y2-a.y1,a},renderedExtent:function(){var e=this.width(),r=this.height();return{x1:0,y1:0,x2:e,y2:r,w:e,h:r}},multiClickDebounceTime:function(e){if(e)this._private.multiClickDebounceTime=e;else return this._private.multiClickDebounceTime;return this}};Bn.centre=Bn.center;Bn.autolockNodes=Bn.autolock;Bn.autoungrabifyNodes=Bn.autoungrabify;var ai={data:$e.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeData:$e.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),scratch:$e.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:$e.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0})};ai.attr=ai.data;ai.removeAttr=ai.removeData;var ii=function(e){var r=this;e=ke({},e);var n=e.container;n&&!cs(n)&&cs(n[0])&&(n=n[0]);var a=n?n._cyreg:null;a=a||{},a&&a.cy&&(a.cy.destroy(),a={});var i=a.readies=a.readies||[];n&&(n._cyreg=a),a.cy=r;var s=ft!==void 0&&n!==void 0&&!e.headless,o=e;o.layout=ke({name:s?"grid":"null"},o.layout),o.renderer=ke({name:s?"canvas":"null"},o.renderer);var u=function(d,p,g){return p!==void 0?p:g!==void 0?g:d},l=this._private={container:n,ready:!1,options:o,elements:new wt(this),listeners:[],aniEles:new wt(this),data:o.data||{},scratch:{},layout:null,renderer:null,destroyed:!1,notificationsEnabled:!0,minZoom:1e-50,maxZoom:1e50,zoomingEnabled:u(!0,o.zoomingEnabled),userZoomingEnabled:u(!0,o.userZoomingEnabled),panningEnabled:u(!0,o.panningEnabled),userPanningEnabled:u(!0,o.userPanningEnabled),boxSelectionEnabled:u(!0,o.boxSelectionEnabled),autolock:u(!1,o.autolock,o.autolockNodes),autoungrabify:u(!1,o.autoungrabify,o.autoungrabifyNodes),autounselectify:u(!1,o.autounselectify),styleEnabled:o.styleEnabled===void 0?s:o.styleEnabled,zoom:he(o.zoom)?o.zoom:1,pan:{x:ze(o.pan)&&he(o.pan.x)?o.pan.x:0,y:ze(o.pan)&&he(o.pan.y)?o.pan.y:0},animation:{current:[],queue:[]},hasCompoundNodes:!1,multiClickDebounceTime:u(250,o.multiClickDebounceTime)};this.createEmitter(),this.selectionType(o.selectionType),this.zoomRange({min:o.minZoom,max:o.maxZoom});var f=function(d,p){var g=d.some(x0);if(g)return va.all(d).then(p);p(d)};l.styleEnabled&&r.setStyle([]);var c=ke({},o,o.renderer);r.initRenderer(c);var v=function(d,p,g){r.notifications(!1);var y=r.mutableElements();y.length>0&&y.remove(),d!=null&&(ze(d)||Ye(d))&&r.add(d),r.one("layoutready",function(b){r.notifications(!0),r.emit(b),r.one("load",p),r.emitAndNotify("load")}).one("layoutstop",function(){r.one("done",g),r.emit("done")});var m=ke({},r._private.options.layout);m.eles=r.elements(),r.layout(m).run()};f([o.style,o.elements],function(h){var d=h[0],p=h[1];l.styleEnabled&&r.style().append(d),v(p,function(){r.startAnimationLoop(),l.ready=!0,et(o.ready)&&r.on("ready",o.ready);for(var g=0;g<i.length;g++){var y=i[g];r.on("ready",y)}a&&(a.readies=[]),r.emit("ready")},o.done)})},ms=ii.prototype;ke(ms,{instanceString:function(){return"core"},isReady:function(){return this._private.ready},destroyed:function(){return this._private.destroyed},ready:function(e){return this.isReady()?this.emitter().emit("ready",[],e):this.on("ready",e),this},destroy:function(){var e=this;if(!e.destroyed())return e.stopAnimationLoop(),e.destroyRenderer(),this.emit("destroy"),e._private.destroyed=!0,e},hasElementWithId:function(e){return this._private.elements.hasElementWithId(e)},getElementById:function(e){return this._private.elements.getElementById(e)},hasCompoundNodes:function(){return this._private.hasCompoundNodes},headless:function(){return this._private.renderer.isHeadless()},styleEnabled:function(){return this._private.styleEnabled},addToPool:function(e){return this._private.elements.merge(e),this},removeFromPool:function(e){return this._private.elements.unmerge(e),this},container:function(){return this._private.container||null},window:function(){var e=this._private.container;if(e==null)return ft;var r=this._private.container.ownerDocument;return r===void 0||r==null?ft:r.defaultView||ft},mount:function(e){if(e!=null){var r=this,n=r._private,a=n.options;return!cs(e)&&cs(e[0])&&(e=e[0]),r.stopAnimationLoop(),r.destroyRenderer(),n.container=e,n.styleEnabled=!0,r.invalidateSize(),r.initRenderer(ke({},a,a.renderer,{name:a.renderer.name==="null"?"canvas":a.renderer.name})),r.startAnimationLoop(),r.style(a.style),r.emit("mount"),r}},unmount:function(){var e=this;return e.stopAnimationLoop(),e.destroyRenderer(),e.initRenderer({name:"null"}),e.emit("unmount"),e},options:function(){return dr(this._private.options)},json:function(e){var r=this,n=r._private,a=r.mutableElements(),i=function(w){return r.getElementById(w.id())};if(ze(e)){if(r.startBatch(),e.elements){var s={},o=function(w,E){for(var T=[],x=[],S=0;S<w.length;S++){var D=w[S];if(!D.data.id){Ue("cy.json() cannot handle elements without an ID attribute");continue}var A=""+D.data.id,k=r.getElementById(A);s[A]=!0,k.length!==0?x.push({ele:k,json:D}):(E&&(D.group=E),T.push(D))}r.add(T);for(var R=0;R<x.length;R++){var M=x[R],L=M.ele,N=M.json;L.json(N)}};if(Ye(e.elements))o(e.elements);else for(var u=["nodes","edges"],l=0;l<u.length;l++){var f=u[l],c=e.elements[f];Ye(c)&&o(c,f)}var v=r.collection();a.filter(function(b){return!s[b.id()]}).forEach(function(b){b.isParent()?v.merge(b):b.remove()}),v.forEach(function(b){return b.children().move({parent:null})}),v.forEach(function(b){return i(b).remove()})}e.style&&r.style(e.style),e.zoom!=null&&e.zoom!==n.zoom&&r.zoom(e.zoom),e.pan&&(e.pan.x!==n.pan.x||e.pan.y!==n.pan.y)&&r.pan(e.pan),e.data&&r.data(e.data);for(var h=["minZoom","maxZoom","zoomingEnabled","userZoomingEnabled","panningEnabled","userPanningEnabled","boxSelectionEnabled","autolock","autoungrabify","autounselectify","multiClickDebounceTime"],d=0;d<h.length;d++){var p=h[d];e[p]!=null&&r[p](e[p])}return r.endBatch(),this}else{var g=!!e,y={};g?y.elements=this.elements().map(function(b){return b.json()}):(y.elements={},a.forEach(function(b){var w=b.group();y.elements[w]||(y.elements[w]=[]),y.elements[w].push(b.json())})),this._private.styleEnabled&&(y.style=r.style().json()),y.data=dr(r.data());var m=n.options;return y.zoomingEnabled=n.zoomingEnabled,y.userZoomingEnabled=n.userZoomingEnabled,y.zoom=n.zoom,y.minZoom=n.minZoom,y.maxZoom=n.maxZoom,y.panningEnabled=n.panningEnabled,y.userPanningEnabled=n.userPanningEnabled,y.pan=dr(n.pan),y.boxSelectionEnabled=n.boxSelectionEnabled,y.renderer=dr(m.renderer),y.hideEdgesOnViewport=m.hideEdgesOnViewport,y.textureOnViewport=m.textureOnViewport,y.wheelSensitivity=m.wheelSensitivity,y.motionBlur=m.motionBlur,y.multiClickDebounceTime=m.multiClickDebounceTime,y}}});ms.$id=ms.getElementById;[xx,Px,Fg,cl,Qi,Ax,vl,Ji,Rx,Bn,ai].forEach(function(t){ke(ms,t)});var Ix={fit:!0,directed:!1,direction:"downward",padding:30,circle:!1,grid:!1,spacingFactor:1.75,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,roots:void 0,depthSort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,r){return!0},ready:void 0,stop:void 0,transform:function(e,r){return r}},Lx={maximal:!1,acyclic:!1},qn=function(e){return e.scratch("breadthfirst")},Qv=function(e,r){return e.scratch("breadthfirst",r)};function _g(t){this.options=ke({},Ix,Lx,t)}_g.prototype.run=function(){var t=this.options,e=t.cy,r=t.eles,n=r.nodes().filter(function(j){return j.isChildless()}),a=r,i=t.directed,s=t.acyclic||t.maximal||t.maximalAdjustments>0,o=!!t.boundingBox,u=Ot(o?t.boundingBox:structuredClone(e.extent())),l;if(Gt(t.roots))l=t.roots;else if(Ye(t.roots)){for(var f=[],c=0;c<t.roots.length;c++){var v=t.roots[c],h=e.getElementById(v);f.push(h)}l=e.collection(f)}else if(De(t.roots))l=e.$(t.roots);else if(i)l=n.roots();else{var d=r.components();l=e.collection();for(var p=function(){var Y=d[g],W=Y.maxDegree(!1),fe=Y.filter(function(se){return se.degree(!1)===W});l=l.add(fe)},g=0;g<d.length;g++)p()}var y=[],m={},b=function(Y,W){y[W]==null&&(y[W]=[]);var fe=y[W].length;y[W].push(Y),Qv(Y,{index:fe,depth:W})},w=function(Y,W){var fe=qn(Y),se=fe.depth,le=fe.index;y[se][le]=null,Y.isChildless()&&b(Y,W)};a.bfs({roots:l,directed:t.directed,visit:function(Y,W,fe,se,le){var de=Y[0],ye=de.id();de.isChildless()&&b(de,le),m[ye]=!0}});for(var E=[],T=0;T<n.length;T++){var x=n[T];m[x.id()]||E.push(x)}var S=function(Y){for(var W=y[Y],fe=0;fe<W.length;fe++){var se=W[fe];if(se==null){W.splice(fe,1),fe--;continue}Qv(se,{depth:Y,index:fe})}},D=function(Y,W){for(var fe=qn(Y),se=Y.incomers().filter(function(Ee){return Ee.isNode()&&r.has(Ee)}),le=-1,de=Y.id(),ye=0;ye<se.length;ye++){var Pe=se[ye],Ce=qn(Pe);le=Math.max(le,Ce.depth)}if(fe.depth<=le){if(!t.acyclic&&W[de])return null;var Re=le+1;return w(Y,Re),W[de]=Re,!0}return!1};if(i&&s){var A=[],k={},R=function(Y){return A.push(Y)},M=function(){return A.shift()};for(n.forEach(function(j){return A.push(j)});A.length>0;){var L=M(),N=D(L,k);if(N)L.outgoers().filter(function(j){return j.isNode()&&r.has(j)}).forEach(R);else if(N===null){Ue("Detected double maximal shift for node `"+L.id()+"`.  Bailing maximal adjustment due to cycle.  Use `options.maximal: true` only on DAGs.");break}}}var O=0;if(t.avoidOverlap)for(var I=0;I<n.length;I++){var F=n[I],H=F.layoutDimensions(t),G=H.w,z=H.h;O=Math.max(O,G,z)}var V={},re=function(Y){if(V[Y.id()])return V[Y.id()];for(var W=qn(Y).depth,fe=Y.neighborhood(),se=0,le=0,de=0;de<fe.length;de++){var ye=fe[de];if(!(ye.isEdge()||ye.isParent()||!n.has(ye))){var Pe=qn(ye);if(Pe!=null){var Ce=Pe.index,Re=Pe.depth;if(!(Ce==null||Re==null)){var Ee=y[Re].length;Re<W&&(se+=Ce/Ee,le++)}}}}return le=Math.max(1,le),se=se/le,le===0&&(se=0),V[Y.id()]=se,se},ie=function(Y,W){var fe=re(Y),se=re(W),le=fe-se;return le===0?zh(Y.id(),W.id()):le};t.depthSort!==void 0&&(ie=t.depthSort);for(var ne=y.length,oe=0;oe<ne;oe++)y[oe].sort(ie),S(oe);for(var ve=[],ge=0;ge<E.length;ge++)ve.push(E[ge]);var ue=function(){for(var Y=0;Y<ne;Y++)S(Y)};ve.length&&(y.unshift(ve),ne=y.length,ue());for(var q=0,$=0;$<ne;$++)q=Math.max(y[$].length,q);var C={x:u.x1+u.w/2,y:u.y1+u.h/2},B=n.reduce(function(j,Y){return(function(W){return{w:j.w===-1?W.w:(j.w+W.w)/2,h:j.h===-1?W.h:(j.h+W.h)/2}})(Y.boundingBox({includeLabels:t.nodeDimensionsIncludeLabels}))},{w:-1,h:-1}),_=Math.max(ne===1?0:o?(u.h-t.padding*2-B.h)/(ne-1):(u.h-t.padding*2-B.h)/(ne+1),O),K=y.reduce(function(j,Y){return Math.max(j,Y.length)},0),J=function(Y){var W=qn(Y),fe=W.depth,se=W.index;if(t.circle){var le=Math.min(u.w/2/ne,u.h/2/ne);le=Math.max(le,O);var de=le*fe+le-(ne>0&&y[0].length<=3?le/2:0),ye=2*Math.PI/y[fe].length*se;return fe===0&&y[0].length===1&&(de=1),{x:C.x+de*Math.cos(ye),y:C.y+de*Math.sin(ye)}}else{var Pe=y[fe].length,Ce=Math.max(Pe===1?0:o?(u.w-t.padding*2-B.w)/((t.grid?K:Pe)-1):(u.w-t.padding*2-B.w)/((t.grid?K:Pe)+1),O),Re={x:C.x+(se+1-(Pe+1)/2)*Ce,y:C.y+(fe+1-(ne+1)/2)*_};return Re}},Z={downward:0,leftward:90,upward:180,rightward:-90};Object.keys(Z).indexOf(t.direction)===-1&&je("Invalid direction '".concat(t.direction,"' specified for breadthfirst layout. Valid values are: ").concat(Object.keys(Z).join(", ")));var te=function(Y){return Z0(J(Y),u,Z[t.direction])};return r.nodes().layoutPositions(this,t,te),this};var Ox={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,radius:void 0,startAngle:3/2*Math.PI,sweep:void 0,clockwise:!0,sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,r){return!0},ready:void 0,stop:void 0,transform:function(e,r){return r}};function zg(t){this.options=ke({},Ox,t)}zg.prototype.run=function(){var t=this.options,e=t,r=t.cy,n=e.eles,a=e.counterclockwise!==void 0?!e.counterclockwise:e.clockwise,i=n.nodes().not(":parent");e.sort&&(i=i.sort(e.sort));for(var s=Ot(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:r.width(),h:r.height()}),o={x:s.x1+s.w/2,y:s.y1+s.h/2},u=e.sweep===void 0?2*Math.PI-2*Math.PI/i.length:e.sweep,l=u/Math.max(1,i.length-1),f,c=0,v=0;v<i.length;v++){var h=i[v],d=h.layoutDimensions(e),p=d.w,g=d.h;c=Math.max(c,p,g)}if(he(e.radius)?f=e.radius:i.length<=1?f=0:f=Math.min(s.h,s.w)/2-c,i.length>1&&e.avoidOverlap){c*=1.75;var y=Math.cos(l)-Math.cos(0),m=Math.sin(l)-Math.sin(0),b=Math.sqrt(c*c/(y*y+m*m));f=Math.max(b,f)}var w=function(T,x){var S=e.startAngle+x*l*(a?1:-1),D=f*Math.cos(S),A=f*Math.sin(S),k={x:o.x+D,y:o.y+A};return k};return n.nodes().layoutPositions(this,e,w),this};var Nx={fit:!0,padding:30,startAngle:3/2*Math.PI,sweep:void 0,clockwise:!0,equidistant:!1,minNodeSpacing:10,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,height:void 0,width:void 0,spacingFactor:void 0,concentric:function(e){return e.degree()},levelWidth:function(e){return e.maxDegree()/4},animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,r){return!0},ready:void 0,stop:void 0,transform:function(e,r){return r}};function Vg(t){this.options=ke({},Nx,t)}Vg.prototype.run=function(){for(var t=this.options,e=t,r=e.counterclockwise!==void 0?!e.counterclockwise:e.clockwise,n=t.cy,a=e.eles,i=a.nodes().not(":parent"),s=Ot(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:n.width(),h:n.height()}),o={x:s.x1+s.w/2,y:s.y1+s.h/2},u=[],l=0,f=0;f<i.length;f++){var c=i[f],v=void 0;v=e.concentric(c),u.push({value:v,node:c}),c._private.scratch.concentric=v}i.updateStyle();for(var h=0;h<i.length;h++){var d=i[h],p=d.layoutDimensions(e);l=Math.max(l,p.w,p.h)}u.sort(function(_,K){return K.value-_.value});for(var g=e.levelWidth(i),y=[[]],m=y[0],b=0;b<u.length;b++){var w=u[b];if(m.length>0){var E=Math.abs(m[0].value-w.value);E>=g&&(m=[],y.push(m))}m.push(w)}var T=l+e.minNodeSpacing;if(!e.avoidOverlap){var x=y.length>0&&y[0].length>1,S=Math.min(s.w,s.h)/2-T,D=S/(y.length+x?1:0);T=Math.min(T,D)}for(var A=0,k=0;k<y.length;k++){var R=y[k],M=e.sweep===void 0?2*Math.PI-2*Math.PI/R.length:e.sweep,L=R.dTheta=M/Math.max(1,R.length-1);if(R.length>1&&e.avoidOverlap){var N=Math.cos(L)-Math.cos(0),O=Math.sin(L)-Math.sin(0),I=Math.sqrt(T*T/(N*N+O*O));A=Math.max(I,A)}R.r=A,A+=T}if(e.equidistant){for(var F=0,H=0,G=0;G<y.length;G++){var z=y[G],V=z.r-H;F=Math.max(F,V)}H=0;for(var re=0;re<y.length;re++){var ie=y[re];re===0&&(H=ie.r),ie.r=H,H+=F}}for(var ne={},oe=0;oe<y.length;oe++)for(var ve=y[oe],ge=ve.dTheta,ue=ve.r,q=0;q<ve.length;q++){var $=ve[q],C=e.startAngle+(r?1:-1)*ge*q,B={x:o.x+ue*Math.cos(C),y:o.y+ue*Math.sin(C)};ne[$.node.id()]=B}return a.nodes().layoutPositions(this,e,function(_){var K=_.id();return ne[K]}),this};var Nu,Fx={ready:function(){},stop:function(){},animate:!0,animationEasing:void 0,animationDuration:void 0,animateFilter:function(e,r){return!0},animationThreshold:250,refresh:20,fit:!0,padding:30,boundingBox:void 0,nodeDimensionsIncludeLabels:!1,randomize:!1,componentSpacing:40,nodeRepulsion:function(e){return 2048},nodeOverlap:4,idealEdgeLength:function(e){return 32},edgeElasticity:function(e){return 32},nestingFactor:1.2,gravity:1,numIter:1e3,initialTemp:1e3,coolingFactor:.99,minTemp:1};function Qs(t){this.options=ke({},Fx,t),this.options.layout=this;var e=this.options.eles.nodes(),r=this.options.eles.edges(),n=r.filter(function(a){var i=a.source().data("id"),s=a.target().data("id"),o=e.some(function(l){return l.data("id")===i}),u=e.some(function(l){return l.data("id")===s});return!o||!u});this.options.eles=this.options.eles.not(n)}Qs.prototype.run=function(){var t=this.options,e=t.cy,r=this;r.stopped=!1,(t.animate===!0||t.animate===!1)&&r.emit({type:"layoutstart",layout:r}),t.debug===!0?Nu=!0:Nu=!1;var n=_x(e,r,t);Nu&&Vx(n),t.randomize&&qx(n);var a=Or(),i=function(){Hx(n,e,t),t.fit===!0&&e.fit(t.padding)},s=function(v){return!(r.stopped||v>=t.numIter||($x(n,t),n.temperature=n.temperature*t.coolingFactor,n.temperature<t.minTemp))},o=function(){if(t.animate===!0||t.animate===!1)i(),r.one("layoutstop",t.stop),r.emit({type:"layoutstop",layout:r});else{var v=t.eles.nodes(),h=Hg(n,t,v);v.layoutPositions(r,t,h)}},u=0,l=!0;if(t.animate===!0){var f=function(){for(var v=0;l&&v<t.refresh;)l=s(u),u++,v++;if(!l)jv(n,t),o();else{var h=Or();h-a>=t.animationThreshold&&i(),vs(f)}};f()}else{for(;l;)l=s(u),u++;jv(n,t),o()}return this};Qs.prototype.stop=function(){return this.stopped=!0,this.thread&&this.thread.stop(),this.emit("layoutstop"),this};Qs.prototype.destroy=function(){return this.thread&&this.thread.stop(),this};var _x=function(e,r,n){for(var a=n.eles.edges(),i=n.eles.nodes(),s=Ot(n.boundingBox?n.boundingBox:{x1:0,y1:0,w:e.width(),h:e.height()}),o={isCompound:e.hasCompoundNodes(),layoutNodes:[],idToIndex:{},nodeSize:i.size(),graphSet:[],indexToGraph:[],layoutEdges:[],edgeSize:a.size(),temperature:n.initialTemp,clientWidth:s.w,clientHeight:s.h,boundingBox:s},u=n.eles.components(),l={},f=0;f<u.length;f++)for(var c=u[f],v=0;v<c.length;v++){var h=c[v];l[h.id()]=f}for(var f=0;f<o.nodeSize;f++){var d=i[f],p=d.layoutDimensions(n),g={};g.isLocked=d.locked(),g.id=d.data("id"),g.parentId=d.data("parent"),g.cmptId=l[d.id()],g.children=[],g.positionX=d.position("x"),g.positionY=d.position("y"),g.offsetX=0,g.offsetY=0,g.height=p.w,g.width=p.h,g.maxX=g.positionX+g.width/2,g.minX=g.positionX-g.width/2,g.maxY=g.positionY+g.height/2,g.minY=g.positionY-g.height/2,g.padLeft=parseFloat(d.style("padding")),g.padRight=parseFloat(d.style("padding")),g.padTop=parseFloat(d.style("padding")),g.padBottom=parseFloat(d.style("padding")),g.nodeRepulsion=et(n.nodeRepulsion)?n.nodeRepulsion(d):n.nodeRepulsion,o.layoutNodes.push(g),o.idToIndex[g.id]=f}for(var y=[],m=0,b=-1,w=[],f=0;f<o.nodeSize;f++){var d=o.layoutNodes[f],E=d.parentId;E!=null?o.layoutNodes[o.idToIndex[E]].children.push(d.id):(y[++b]=d.id,w.push(d.id))}for(o.graphSet.push(w);m<=b;){var T=y[m++],x=o.idToIndex[T],h=o.layoutNodes[x],S=h.children;if(S.length>0){o.graphSet.push(S);for(var f=0;f<S.length;f++)y[++b]=S[f]}}for(var f=0;f<o.graphSet.length;f++)for(var D=o.graphSet[f],v=0;v<D.length;v++){var A=o.idToIndex[D[v]];o.indexToGraph[A]=f}for(var f=0;f<o.edgeSize;f++){var k=a[f],R={};R.id=k.data("id"),R.sourceId=k.data("source"),R.targetId=k.data("target");var M=et(n.idealEdgeLength)?n.idealEdgeLength(k):n.idealEdgeLength,L=et(n.edgeElasticity)?n.edgeElasticity(k):n.edgeElasticity,N=o.idToIndex[R.sourceId],O=o.idToIndex[R.targetId],I=o.indexToGraph[N],F=o.indexToGraph[O];if(I!=F){for(var H=zx(R.sourceId,R.targetId,o),G=o.graphSet[H],z=0,g=o.layoutNodes[N];G.indexOf(g.id)===-1;)g=o.layoutNodes[o.idToIndex[g.parentId]],z++;for(g=o.layoutNodes[O];G.indexOf(g.id)===-1;)g=o.layoutNodes[o.idToIndex[g.parentId]],z++;M*=z*n.nestingFactor}R.idealLength=M,R.elasticity=L,o.layoutEdges.push(R)}return o},zx=function(e,r,n){var a=qg(e,r,0,n);return 2>a.count?0:a.graph},qg=function(e,r,n,a){var i=a.graphSet[n];if(-1<i.indexOf(e)&&-1<i.indexOf(r))return{count:2,graph:n};for(var s=0,o=0;o<i.length;o++){var u=i[o],l=a.idToIndex[u],f=a.layoutNodes[l].children;if(f.length!==0){var c=a.indexToGraph[a.idToIndex[f[0]]],v=qg(e,r,c,a);if(v.count!==0)if(v.count===1){if(s++,s===2)break}else return v}}return{count:s,graph:n}},Vx,qx=function(e,r){for(var n=e.clientWidth,a=e.clientHeight,i=0;i<e.nodeSize;i++){var s=e.layoutNodes[i];s.children.length===0&&!s.isLocked&&(s.positionX=Math.random()*n,s.positionY=Math.random()*a)}},Hg=function(e,r,n){var a=e.boundingBox,i={x1:1/0,x2:-1/0,y1:1/0,y2:-1/0};return r.boundingBox&&(n.forEach(function(s){var o=e.layoutNodes[e.idToIndex[s.data("id")]];i.x1=Math.min(i.x1,o.positionX),i.x2=Math.max(i.x2,o.positionX),i.y1=Math.min(i.y1,o.positionY),i.y2=Math.max(i.y2,o.positionY)}),i.w=i.x2-i.x1,i.h=i.y2-i.y1),function(s,o){var u=e.layoutNodes[e.idToIndex[s.data("id")]];if(r.boundingBox){var l=i.w===0?.5:(u.positionX-i.x1)/i.w,f=i.h===0?.5:(u.positionY-i.y1)/i.h;return{x:a.x1+l*a.w,y:a.y1+f*a.h}}else return{x:u.positionX,y:u.positionY}}},Hx=function(e,r,n){var a=n.layout,i=n.eles.nodes(),s=Hg(e,n,i);i.positions(s),e.ready!==!0&&(e.ready=!0,a.one("layoutready",n.ready),a.emit({type:"layoutready",layout:this}))},$x=function(e,r,n){Ux(e,r),Kx(e),Yx(e,r),Xx(e),Zx(e)},Ux=function(e,r){for(var n=0;n<e.graphSet.length;n++)for(var a=e.graphSet[n],i=a.length,s=0;s<i;s++)for(var o=e.layoutNodes[e.idToIndex[a[s]]],u=s+1;u<i;u++){var l=e.layoutNodes[e.idToIndex[a[u]]];Gx(o,l,e,r)}},Jv=function(e){return-1+2*e*Math.random()},Gx=function(e,r,n,a){var i=e.cmptId,s=r.cmptId;if(!(i!==s&&!n.isCompound)){var o=r.positionX-e.positionX,u=r.positionY-e.positionY,l=1;o===0&&u===0&&(o=Jv(l),u=Jv(l));var f=Wx(e,r,o,u);if(f>0)var c=a.nodeOverlap*f,v=Math.sqrt(o*o+u*u),h=c*o/v,d=c*u/v;else var p=bs(e,o,u),g=bs(r,-1*o,-1*u),y=g.x-p.x,m=g.y-p.y,b=y*y+m*m,v=Math.sqrt(b),c=(e.nodeRepulsion+r.nodeRepulsion)/b,h=c*y/v,d=c*m/v;e.isLocked||(e.offsetX-=h,e.offsetY-=d),r.isLocked||(r.offsetX+=h,r.offsetY+=d)}},Wx=function(e,r,n,a){if(n>0)var i=e.maxX-r.minX;else var i=r.maxX-e.minX;if(a>0)var s=e.maxY-r.minY;else var s=r.maxY-e.minY;return i>=0&&s>=0?Math.sqrt(i*i+s*s):0},bs=function(e,r,n){var a=e.positionX,i=e.positionY,s=e.height||1,o=e.width||1,u=n/r,l=s/o,f={};return r===0&&0<n||r===0&&0>n?(f.x=a,f.y=i+s/2,f):0<r&&-1*l<=u&&u<=l?(f.x=a+o/2,f.y=i+o*n/2/r,f):0>r&&-1*l<=u&&u<=l?(f.x=a-o/2,f.y=i-o*n/2/r,f):0<n&&(u<=-1*l||u>=l)?(f.x=a+s*r/2/n,f.y=i+s/2,f):(0>n&&(u<=-1*l||u>=l)&&(f.x=a-s*r/2/n,f.y=i-s/2),f)},Kx=function(e,r){for(var n=0;n<e.edgeSize;n++){var a=e.layoutEdges[n],i=e.idToIndex[a.sourceId],s=e.layoutNodes[i],o=e.idToIndex[a.targetId],u=e.layoutNodes[o],l=u.positionX-s.positionX,f=u.positionY-s.positionY;if(!(l===0&&f===0)){var c=bs(s,l,f),v=bs(u,-1*l,-1*f),h=v.x-c.x,d=v.y-c.y,p=Math.sqrt(h*h+d*d),g=Math.pow(a.idealLength-p,2)/a.elasticity;if(p!==0)var y=g*h/p,m=g*d/p;else var y=0,m=0;s.isLocked||(s.offsetX+=y,s.offsetY+=m),u.isLocked||(u.offsetX-=y,u.offsetY-=m)}}},Yx=function(e,r){if(r.gravity!==0)for(var n=1,a=0;a<e.graphSet.length;a++){var i=e.graphSet[a],s=i.length;if(a===0)var o=e.clientHeight/2,u=e.clientWidth/2;else var l=e.layoutNodes[e.idToIndex[i[0]]],f=e.layoutNodes[e.idToIndex[l.parentId]],o=f.positionX,u=f.positionY;for(var c=0;c<s;c++){var v=e.layoutNodes[e.idToIndex[i[c]]];if(!v.isLocked){var h=o-v.positionX,d=u-v.positionY,p=Math.sqrt(h*h+d*d);if(p>n){var g=r.gravity*h/p,y=r.gravity*d/p;v.offsetX+=g,v.offsetY+=y}}}}},Xx=function(e,r){var n=[],a=0,i=-1;for(n.push.apply(n,e.graphSet[0]),i+=e.graphSet[0].length;a<=i;){var s=n[a++],o=e.idToIndex[s],u=e.layoutNodes[o],l=u.children;if(0<l.length&&!u.isLocked){for(var f=u.offsetX,c=u.offsetY,v=0;v<l.length;v++){var h=e.layoutNodes[e.idToIndex[l[v]]];h.offsetX+=f,h.offsetY+=c,n[++i]=l[v]}u.offsetX=0,u.offsetY=0}}},Zx=function(e,r){for(var n=0;n<e.nodeSize;n++){var a=e.layoutNodes[n];0<a.children.length&&(a.maxX=void 0,a.minX=void 0,a.maxY=void 0,a.minY=void 0)}for(var n=0;n<e.nodeSize;n++){var a=e.layoutNodes[n];if(!(0<a.children.length||a.isLocked)){var i=Qx(a.offsetX,a.offsetY,e.temperature);a.positionX+=i.x,a.positionY+=i.y,a.offsetX=0,a.offsetY=0,a.minX=a.positionX-a.width,a.maxX=a.positionX+a.width,a.minY=a.positionY-a.height,a.maxY=a.positionY+a.height,$g(a,e)}}for(var n=0;n<e.nodeSize;n++){var a=e.layoutNodes[n];0<a.children.length&&!a.isLocked&&(a.positionX=(a.maxX+a.minX)/2,a.positionY=(a.maxY+a.minY)/2,a.width=a.maxX-a.minX,a.height=a.maxY-a.minY)}},Qx=function(e,r,n){var a=Math.sqrt(e*e+r*r);if(a>n)var i={x:n*e/a,y:n*r/a};else var i={x:e,y:r};return i},$g=function(e,r){var n=e.parentId;if(n!=null){var a=r.layoutNodes[r.idToIndex[n]],i=!1;if((a.maxX==null||e.maxX+a.padRight>a.maxX)&&(a.maxX=e.maxX+a.padRight,i=!0),(a.minX==null||e.minX-a.padLeft<a.minX)&&(a.minX=e.minX-a.padLeft,i=!0),(a.maxY==null||e.maxY+a.padBottom>a.maxY)&&(a.maxY=e.maxY+a.padBottom,i=!0),(a.minY==null||e.minY-a.padTop<a.minY)&&(a.minY=e.minY-a.padTop,i=!0),i)return $g(a,r)}},jv=function(e,r){for(var n=e.layoutNodes,a=[],i=0;i<n.length;i++){var s=n[i],o=s.cmptId,u=a[o]=a[o]||[];u.push(s)}for(var l=0,i=0;i<a.length;i++){var f=a[i];if(f){f.x1=1/0,f.x2=-1/0,f.y1=1/0,f.y2=-1/0;for(var c=0;c<f.length;c++){var v=f[c];f.x1=Math.min(f.x1,v.positionX-v.width/2),f.x2=Math.max(f.x2,v.positionX+v.width/2),f.y1=Math.min(f.y1,v.positionY-v.height/2),f.y2=Math.max(f.y2,v.positionY+v.height/2)}f.w=f.x2-f.x1,f.h=f.y2-f.y1,l+=f.w*f.h}}a.sort(function(m,b){return b.w*b.h-m.w*m.h});for(var h=0,d=0,p=0,g=0,y=Math.sqrt(l)*e.clientWidth/e.clientHeight,i=0;i<a.length;i++){var f=a[i];if(f){for(var c=0;c<f.length;c++){var v=f[c];v.isLocked||(v.positionX+=h-f.x1,v.positionY+=d-f.y1)}h+=f.w+r.componentSpacing,p+=f.w+r.componentSpacing,g=Math.max(g,f.h),p>y&&(d+=g+r.componentSpacing,h=0,p=0,g=0)}}},Jx={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,avoidOverlapPadding:10,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,condense:!1,rows:void 0,cols:void 0,position:function(e){},sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,r){return!0},ready:void 0,stop:void 0,transform:function(e,r){return r}};function Ug(t){this.options=ke({},Jx,t)}Ug.prototype.run=function(){var t=this.options,e=t,r=t.cy,n=e.eles,a=n.nodes().not(":parent");e.sort&&(a=a.sort(e.sort));var i=Ot(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:r.width(),h:r.height()});if(i.h===0||i.w===0)n.nodes().layoutPositions(this,e,function(re){return{x:i.x1,y:i.y1}});else{var s=a.size(),o=Math.sqrt(s*i.h/i.w),u=Math.round(o),l=Math.round(i.w/i.h*o),f=function(ie){if(ie==null)return Math.min(u,l);var ne=Math.min(u,l);ne==u?u=ie:l=ie},c=function(ie){if(ie==null)return Math.max(u,l);var ne=Math.max(u,l);ne==u?u=ie:l=ie},v=e.rows,h=e.cols!=null?e.cols:e.columns;if(v!=null&&h!=null)u=v,l=h;else if(v!=null&&h==null)u=v,l=Math.ceil(s/u);else if(v==null&&h!=null)l=h,u=Math.ceil(s/l);else if(l*u>s){var d=f(),p=c();(d-1)*p>=s?f(d-1):(p-1)*d>=s&&c(p-1)}else for(;l*u<s;){var g=f(),y=c();(y+1)*g>=s?c(y+1):f(g+1)}var m=i.w/l,b=i.h/u;if(e.condense&&(m=0,b=0),e.avoidOverlap)for(var w=0;w<a.length;w++){var E=a[w],T=E._private.position;(T.x==null||T.y==null)&&(T.x=0,T.y=0);var x=E.layoutDimensions(e),S=e.avoidOverlapPadding,D=x.w+S,A=x.h+S;m=Math.max(m,D),b=Math.max(b,A)}for(var k={},R=function(ie,ne){return!!k["c-"+ie+"-"+ne]},M=function(ie,ne){k["c-"+ie+"-"+ne]=!0},L=0,N=0,O=function(){N++,N>=l&&(N=0,L++)},I={},F=0;F<a.length;F++){var H=a[F],G=e.position(H);if(G&&(G.row!==void 0||G.col!==void 0)){var z={row:G.row,col:G.col};if(z.col===void 0)for(z.col=0;R(z.row,z.col);)z.col++;else if(z.row===void 0)for(z.row=0;R(z.row,z.col);)z.row++;I[H.id()]=z,M(z.row,z.col)}}var V=function(ie,ne){var oe,ve;if(ie.locked()||ie.isParent())return!1;var ge=I[ie.id()];if(ge)oe=ge.col*m+m/2+i.x1,ve=ge.row*b+b/2+i.y1;else{for(;R(L,N);)O();oe=N*m+m/2+i.x1,ve=L*b+b/2+i.y1,M(L,N),O()}return{x:oe,y:ve}};a.layoutPositions(this,e,V)}return this};var jx={ready:function(){},stop:function(){}};function sf(t){this.options=ke({},jx,t)}sf.prototype.run=function(){var t=this.options,e=t.eles,r=this;return t.cy,r.emit("layoutstart"),e.nodes().positions(function(){return{x:0,y:0}}),r.one("layoutready",t.ready),r.emit("layoutready"),r.one("layoutstop",t.stop),r.emit("layoutstop"),this};sf.prototype.stop=function(){return this};var eE={positions:void 0,zoom:void 0,pan:void 0,fit:!0,padding:30,spacingFactor:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,r){return!0},ready:void 0,stop:void 0,transform:function(e,r){return r}};function Gg(t){this.options=ke({},eE,t)}Gg.prototype.run=function(){var t=this.options,e=t.eles,r=e.nodes(),n=et(t.positions);function a(i){if(t.positions==null)return Eb(i.position());if(n)return t.positions(i);var s=t.positions[i._private.data.id];return s??null}return r.layoutPositions(this,t,function(i,s){var o=a(i);return i.locked()||o==null?!1:o}),this};var tE={fit:!0,padding:30,boundingBox:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,r){return!0},ready:void 0,stop:void 0,transform:function(e,r){return r}};function Wg(t){this.options=ke({},tE,t)}Wg.prototype.run=function(){var t=this.options,e=t.cy,r=t.eles,n=Ot(t.boundingBox?t.boundingBox:{x1:0,y1:0,w:e.width(),h:e.height()}),a=function(s,o){return{x:n.x1+Math.round(Math.random()*n.w),y:n.y1+Math.round(Math.random()*n.h)}};return r.nodes().layoutPositions(this,t,a),this};var rE=[{name:"breadthfirst",impl:_g},{name:"circle",impl:zg},{name:"concentric",impl:Vg},{name:"cose",impl:Qs},{name:"grid",impl:Ug},{name:"null",impl:sf},{name:"preset",impl:Gg},{name:"random",impl:Wg}];function Kg(t){this.options=t,this.notifications=0}var ed=function(){},td=function(){throw new Error("A headless instance can not render images")};Kg.prototype={recalculateRenderedStyle:ed,notify:function(){this.notifications++},init:ed,isHeadless:function(){return!0},png:td,jpg:td};var of={};of.arrowShapeWidth=.3;of.registerArrowShapes=function(){var t=this.arrowShapes={},e=this,r=function(l,f,c,v,h,d,p){var g=h.x-c/2-p,y=h.x+c/2+p,m=h.y-c/2-p,b=h.y+c/2+p,w=g<=l&&l<=y&&m<=f&&f<=b;return w},n=function(l,f,c,v,h){var d=l*Math.cos(v)-f*Math.sin(v),p=l*Math.sin(v)+f*Math.cos(v),g=d*c,y=p*c,m=g+h.x,b=y+h.y;return{x:m,y:b}},a=function(l,f,c,v){for(var h=[],d=0;d<l.length;d+=2){var p=l[d],g=l[d+1];h.push(n(p,g,f,c,v))}return h},i=function(l){for(var f=[],c=0;c<l.length;c++){var v=l[c];f.push(v.x,v.y)}return f},s=function(l){return l.pstyle("width").pfValue*l.pstyle("arrow-scale").pfValue*2},o=function(l,f){De(f)&&(f=t[f]),t[l]=ke({name:l,points:[-.15,-.3,.15,-.3,.15,.3,-.15,.3],collide:function(v,h,d,p,g,y){var m=i(a(this.points,d+2*y,p,g)),b=Ht(v,h,m);return b},roughCollide:r,draw:function(v,h,d,p){var g=a(this.points,h,d,p);e.arrowShapeImpl("polygon")(v,g)},spacing:function(v){return 0},gap:s},f)};o("none",{collide:ds,roughCollide:ds,draw:Gl,spacing:gc,gap:gc}),o("triangle",{points:[-.15,-.3,0,0,.15,-.3]}),o("arrow","triangle"),o("triangle-backcurve",{points:t.triangle.points,controlPoint:[0,-.15],roughCollide:r,draw:function(l,f,c,v,h){var d=a(this.points,f,c,v),p=this.controlPoint,g=n(p[0],p[1],f,c,v);e.arrowShapeImpl(this.name)(l,d,g)},gap:function(l){return s(l)*.8}}),o("triangle-tee",{points:[0,0,.15,-.3,-.15,-.3,0,0],pointsTee:[-.15,-.4,-.15,-.5,.15,-.5,.15,-.4],collide:function(l,f,c,v,h,d,p){var g=i(a(this.points,c+2*p,v,h)),y=i(a(this.pointsTee,c+2*p,v,h)),m=Ht(l,f,g)||Ht(l,f,y);return m},draw:function(l,f,c,v,h){var d=a(this.points,f,c,v),p=a(this.pointsTee,f,c,v);e.arrowShapeImpl(this.name)(l,d,p)}}),o("circle-triangle",{radius:.15,pointsTr:[0,-.15,.15,-.45,-.15,-.45,0,-.15],collide:function(l,f,c,v,h,d,p){var g=h,y=Math.pow(g.x-l,2)+Math.pow(g.y-f,2)<=Math.pow((c+2*p)*this.radius,2),m=i(a(this.points,c+2*p,v,h));return Ht(l,f,m)||y},draw:function(l,f,c,v,h){var d=a(this.pointsTr,f,c,v);e.arrowShapeImpl(this.name)(l,d,v.x,v.y,this.radius*f)},spacing:function(l){return e.getArrowWidth(l.pstyle("width").pfValue,l.pstyle("arrow-scale").value)*this.radius}}),o("triangle-cross",{points:[0,0,.15,-.3,-.15,-.3,0,0],baseCrossLinePts:[-.15,-.4,-.15,-.4,.15,-.4,.15,-.4],crossLinePts:function(l,f){var c=this.baseCrossLinePts.slice(),v=f/l,h=3,d=5;return c[h]=c[h]-v,c[d]=c[d]-v,c},collide:function(l,f,c,v,h,d,p){var g=i(a(this.points,c+2*p,v,h)),y=i(a(this.crossLinePts(c,d),c+2*p,v,h)),m=Ht(l,f,g)||Ht(l,f,y);return m},draw:function(l,f,c,v,h){var d=a(this.points,f,c,v),p=a(this.crossLinePts(f,h),f,c,v);e.arrowShapeImpl(this.name)(l,d,p)}}),o("vee",{points:[-.15,-.3,0,0,.15,-.3,0,-.15],gap:function(l){return s(l)*.525}}),o("circle",{radius:.15,collide:function(l,f,c,v,h,d,p){var g=h,y=Math.pow(g.x-l,2)+Math.pow(g.y-f,2)<=Math.pow((c+2*p)*this.radius,2);return y},draw:function(l,f,c,v,h){e.arrowShapeImpl(this.name)(l,v.x,v.y,this.radius*f)},spacing:function(l){return e.getArrowWidth(l.pstyle("width").pfValue,l.pstyle("arrow-scale").value)*this.radius}}),o("tee",{points:[-.15,0,-.15,-.1,.15,-.1,.15,0],spacing:function(l){return 1},gap:function(l){return 1}}),o("square",{points:[-.15,0,.15,0,.15,-.3,-.15,-.3]}),o("diamond",{points:[-.15,-.15,0,-.3,.15,-.15,0,0],gap:function(l){return l.pstyle("width").pfValue*l.pstyle("arrow-scale").value}}),o("chevron",{points:[0,0,-.15,-.15,-.1,-.2,0,-.1,.1,-.2,.15,-.15],gap:function(l){return .95*l.pstyle("width").pfValue*l.pstyle("arrow-scale").value}})};var Ln={};Ln.projectIntoViewport=function(t,e){var r=this.cy,n=this.findContainerClientCoords(),a=n[0],i=n[1],s=n[4],o=r.pan(),u=r.zoom(),l=((t-a)/s-o.x)/u,f=((e-i)/s-o.y)/u;return[l,f]};Ln.findContainerClientCoords=function(){if(this.containerBB)return this.containerBB;var t=this.container,e=t.getBoundingClientRect(),r=this.cy.window().getComputedStyle(t),n=function(y){return parseFloat(r.getPropertyValue(y))},a={left:n("padding-left"),right:n("padding-right"),top:n("padding-top"),bottom:n("padding-bottom")},i={left:n("border-left-width"),right:n("border-right-width"),top:n("border-top-width"),bottom:n("border-bottom-width")},s=t.clientWidth,o=t.clientHeight,u=a.left+a.right,l=a.top+a.bottom,f=i.left+i.right,c=e.width/(s+f),v=s-u,h=o-l,d=e.left+a.left+i.left,p=e.top+a.top+i.top;return this.containerBB=[d,p,v,h,c]};Ln.invalidateContainerClientCoordsCache=function(){this.containerBB=null};Ln.findNearestElement=function(t,e,r,n){return this.findNearestElements(t,e,r,n)[0]};Ln.findNearestElements=function(t,e,r,n){var a=this,i=this,s=i.getCachedZSortedEles(),o=[],u=i.cy.zoom(),l=i.cy.hasCompoundNodes(),f=(n?24:8)/u,c=(n?8:2)/u,v=(n?8:2)/u,h=1/0,d,p;r&&(s=s.interactive);function g(x,S){if(x.isNode()){if(p)return;p=x,o.push(x)}if(x.isEdge()&&(S==null||S<h))if(d){if(d.pstyle("z-compound-depth").value===x.pstyle("z-compound-depth").value&&d.pstyle("z-compound-depth").value===x.pstyle("z-compound-depth").value){for(var D=0;D<o.length;D++)if(o[D].isEdge()){o[D]=x,d=x,h=S??h;break}}}else o.push(x),d=x,h=S??h}function y(x){var S=x.outerWidth()+2*c,D=x.outerHeight()+2*c,A=S/2,k=D/2,R=x.position(),M=x.pstyle("corner-radius").value==="auto"?"auto":x.pstyle("corner-radius").pfValue,L=x._private.rscratch;if(R.x-A<=t&&t<=R.x+A&&R.y-k<=e&&e<=R.y+k){var N=i.nodeShapes[a.getNodeShape(x)];if(N.checkPoint(t,e,0,S,D,R.x,R.y,M,L))return g(x,0),!0}}function m(x){var S=x._private,D=S.rscratch,A=x.pstyle("width").pfValue,k=x.pstyle("arrow-scale").value,R=A/2+f,M=R*R,L=R*2,F=S.source,H=S.target,N;if(D.edgeType==="segments"||D.edgeType==="straight"||D.edgeType==="haystack"){for(var O=D.allpts,I=0;I+3<O.length;I+=2)if(Nb(t,e,O[I],O[I+1],O[I+2],O[I+3],L)&&M>(N=qb(t,e,O[I],O[I+1],O[I+2],O[I+3])))return g(x,N),!0}else if(D.edgeType==="bezier"||D.edgeType==="multibezier"||D.edgeType==="self"||D.edgeType==="compound"){for(var O=D.allpts,I=0;I+5<D.allpts.length;I+=4)if(Fb(t,e,O[I],O[I+1],O[I+2],O[I+3],O[I+4],O[I+5],L)&&M>(N=Vb(t,e,O[I],O[I+1],O[I+2],O[I+3],O[I+4],O[I+5])))return g(x,N),!0}for(var F=F||S.source,H=H||S.target,G=a.getArrowWidth(A,k),z=[{name:"source",x:D.arrowStartX,y:D.arrowStartY,angle:D.srcArrowAngle},{name:"target",x:D.arrowEndX,y:D.arrowEndY,angle:D.tgtArrowAngle},{name:"mid-source",x:D.midX,y:D.midY,angle:D.midsrcArrowAngle},{name:"mid-target",x:D.midX,y:D.midY,angle:D.midtgtArrowAngle}],I=0;I<z.length;I++){var V=z[I],re=i.arrowShapes[x.pstyle(V.name+"-arrow-shape").value],ie=x.pstyle("width").pfValue;if(re.roughCollide(t,e,G,V.angle,{x:V.x,y:V.y},ie,f)&&re.collide(t,e,G,V.angle,{x:V.x,y:V.y},ie,f))return g(x),!0}l&&o.length>0&&(y(F),y(H))}function b(x,S,D){return qt(x,S,D)}function w(x,S){var D=x._private,A=v,k;S?k=S+"-":k="",x.boundingBox();var R=D.labelBounds[S||"main"],M=x.pstyle(k+"label").value,L=x.pstyle("text-events").strValue==="yes";if(!(!L||!M)){var N=b(D.rscratch,"labelX",S),O=b(D.rscratch,"labelY",S),I=b(D.rscratch,"labelAngle",S),F=x.pstyle(k+"text-margin-x").pfValue,H=x.pstyle(k+"text-margin-y").pfValue,G=R.x1-A-F,z=R.x2+A-F,V=R.y1-A-H,re=R.y2+A-H;if(I){var ie=Math.cos(I),ne=Math.sin(I),oe=function(B,_){return B=B-N,_=_-O,{x:B*ie-_*ne+N,y:B*ne+_*ie+O}},ve=oe(G,V),ge=oe(G,re),ue=oe(z,V),q=oe(z,re),$=[ve.x+F,ve.y+H,ue.x+F,ue.y+H,q.x+F,q.y+H,ge.x+F,ge.y+H];if(Ht(t,e,$))return g(x),!0}else if(Yr(R,t,e))return g(x),!0}}for(var E=s.length-1;E>=0;E--){var T=s[E];T.isNode()?y(T)||w(T):m(T)||w(T)||w(T,"source")||w(T,"target")}return o};Ln.getAllInBox=function(t,e,r,n){var a=this.getCachedZSortedEles().interactive,i=this.cy.zoom(),s=2/i,o=[],u=Math.min(t,r),l=Math.max(t,r),f=Math.min(e,n),c=Math.max(e,n);t=u,r=l,e=f,n=c;var v=Ot({x1:t,y1:e,x2:r,y2:n}),h=[{x:v.x1,y:v.y1},{x:v.x2,y:v.y1},{x:v.x2,y:v.y2},{x:v.x1,y:v.y2}],d=[[h[0],h[1]],[h[1],h[2]],[h[2],h[3]],[h[3],h[0]]];function p(B,_,K){return qt(B,_,K)}function g(B,_){var K=B._private,J=s,Z="";B.boundingBox();var te=K.labelBounds.main;if(!te)return null;var j=p(K.rscratch,"labelX",_),Y=p(K.rscratch,"labelY",_),W=p(K.rscratch,"labelAngle",_),fe=B.pstyle(Z+"text-margin-x").pfValue,se=B.pstyle(Z+"text-margin-y").pfValue,le=te.x1-J-fe,de=te.x2+J-fe,ye=te.y1-J-se,Pe=te.y2+J-se;if(W){var Ce=Math.cos(W),Re=Math.sin(W),Ee=function(ee,P){return ee=ee-j,P=P-Y,{x:ee*Ce-P*Re+j,y:ee*Re+P*Ce+Y}};return[Ee(le,ye),Ee(de,ye),Ee(de,Pe),Ee(le,Pe)]}else return[{x:le,y:ye},{x:de,y:ye},{x:de,y:Pe},{x:le,y:Pe}]}function y(B,_,K,J){function Z(te,j,Y){return(Y.y-te.y)*(j.x-te.x)>(j.y-te.y)*(Y.x-te.x)}return Z(B,K,J)!==Z(_,K,J)&&Z(B,_,K)!==Z(B,_,J)}for(var m=0;m<a.length;m++){var b=a[m];if(b.isNode()){var w=b,E=w.pstyle("text-events").strValue==="yes",T=w.pstyle("box-selection").strValue,x=w.pstyle("box-select-labels").strValue==="yes";if(T==="none")continue;var S=(T==="overlap"||x)&&E,D=w.boundingBox({includeNodes:!0,includeEdges:!1,includeLabels:S});if(T==="contain"){var A=!1;if(x&&E){var k=g(w);k&&Lo(k,h)&&(o.push(w),A=!0)}!A&&eg(v,D)&&o.push(w)}else if(T==="overlap"&&Xl(v,D)){var R=w.boundingBox({includeNodes:!0,includeEdges:!0,includeLabels:!1,includeMainLabels:!1,includeSourceLabels:!1,includeTargetLabels:!1}),M=[{x:R.x1,y:R.y1},{x:R.x2,y:R.y1},{x:R.x2,y:R.y2},{x:R.x1,y:R.y2}];if(Lo(M,h))o.push(w);else{var L=g(w);L&&Lo(L,h)&&o.push(w)}}}else{var N=b,O=N._private,I=O.rscratch,F=N.pstyle("box-selection").strValue;if(F==="none")continue;if(F==="contain"){if(I.startX!=null&&I.startY!=null&&!Yr(v,I.startX,I.startY)||I.endX!=null&&I.endY!=null&&!Yr(v,I.endX,I.endY))continue;if(I.edgeType==="bezier"||I.edgeType==="multibezier"||I.edgeType==="self"||I.edgeType==="compound"||I.edgeType==="segments"||I.edgeType==="haystack"){for(var H=O.rstyle.bezierPts||O.rstyle.linePts||O.rstyle.haystackPts,G=!0,z=0;z<H.length;z++)if(!wc(v,H[z])){G=!1;break}G&&o.push(N)}else I.edgeType==="straight"&&o.push(N)}else if(F==="overlap"){var V=!1;if(I.startX!=null&&I.startY!=null&&I.endX!=null&&I.endY!=null&&(Yr(v,I.startX,I.startY)||Yr(v,I.endX,I.endY)))o.push(N),V=!0;else if(!V&&I.edgeType==="haystack"){for(var re=O.rstyle.haystackPts,ie=0;ie<re.length;ie++)if(wc(v,re[ie])){o.push(N),V=!0;break}}if(!V){var ne=O.rstyle.bezierPts||O.rstyle.linePts||O.rstyle.haystackPts;if((!ne||ne.length<2)&&I.edgeType==="straight"&&I.startX!=null&&I.startY!=null&&I.endX!=null&&I.endY!=null&&(ne=[{x:I.startX,y:I.startY},{x:I.endX,y:I.endY}]),!ne||ne.length<2)continue;for(var oe=0;oe<ne.length-1;oe++){for(var ve=ne[oe],ge=ne[oe+1],ue=0;ue<d.length;ue++){var q=st(d[ue],2),$=q[0],C=q[1];if(y(ve,ge,$,C)){o.push(N),V=!0;break}}if(V)break}}}}}return o};var ws={};ws.calculateArrowAngles=function(t){var e=t._private.rscratch,r=e.edgeType==="haystack",n=e.edgeType==="bezier",a=e.edgeType==="multibezier",i=e.edgeType==="segments",s=e.edgeType==="compound",o=e.edgeType==="self",u,l,f,c,v,h,y,m;if(r?(f=e.haystackPts[0],c=e.haystackPts[1],v=e.haystackPts[2],h=e.haystackPts[3]):(f=e.arrowStartX,c=e.arrowStartY,v=e.arrowEndX,h=e.arrowEndY),y=e.midX,m=e.midY,i)u=f-e.segpts[0],l=c-e.segpts[1];else if(a||s||o||n){var d=e.allpts,p=gt(d[0],d[2],d[4],.1),g=gt(d[1],d[3],d[5],.1);u=f-p,l=c-g}else u=f-y,l=c-m;e.srcArrowAngle=Bi(u,l);var y=e.midX,m=e.midY;if(r&&(y=(f+v)/2,m=(c+h)/2),u=v-f,l=h-c,i){var d=e.allpts;if(d.length/2%2===0){var b=d.length/2,w=b-2;u=d[b]-d[w],l=d[b+1]-d[w+1]}else if(e.isRound)u=e.midVector[1],l=-e.midVector[0];else{var b=d.length/2-1,w=b-2;u=d[b]-d[w],l=d[b+1]-d[w+1]}}else if(a||s||o){var d=e.allpts,E=e.ctrlpts,T,x,S,D;if(E.length/2%2===0){var A=d.length/2-1,k=A+2,R=k+2;T=gt(d[A],d[k],d[R],0),x=gt(d[A+1],d[k+1],d[R+1],0),S=gt(d[A],d[k],d[R],1e-4),D=gt(d[A+1],d[k+1],d[R+1],1e-4)}else{var k=d.length/2-1,A=k-2,R=k+2;T=gt(d[A],d[k],d[R],.4999),x=gt(d[A+1],d[k+1],d[R+1],.4999),S=gt(d[A],d[k],d[R],.5),D=gt(d[A+1],d[k+1],d[R+1],.5)}u=S-T,l=D-x}if(e.midtgtArrowAngle=Bi(u,l),e.midDispX=u,e.midDispY=l,u*=-1,l*=-1,i){var d=e.allpts;if(d.length/2%2!==0){if(!e.isRound){var b=d.length/2-1,M=b+2;u=-(d[M]-d[b]),l=-(d[M+1]-d[b+1])}}}if(e.midsrcArrowAngle=Bi(u,l),i)u=v-e.segpts[e.segpts.length-2],l=h-e.segpts[e.segpts.length-1];else if(a||s||o||n){var d=e.allpts,L=d.length,p=gt(d[L-6],d[L-4],d[L-2],.9),g=gt(d[L-5],d[L-3],d[L-1],.9);u=v-p,l=h-g}else u=v-y,l=h-m;e.tgtArrowAngle=Bi(u,l)};ws.getArrowWidth=ws.getArrowHeight=function(t,e){var r=this.arrowWidthCache=this.arrowWidthCache||{},n=r[t+", "+e];return n||(n=Math.max(Math.pow(t*13.37,.9),29)*e,r[t+", "+e]=n,n)};var dl,hl,ur={},Kt={},rd,nd,Cn,ji,Tr,pn,wn,sr,Hn,_i,Yg,Xg,gl,pl,ad,id=function(e,r,n){n.x=r.x-e.x,n.y=r.y-e.y,n.len=Math.sqrt(n.x*n.x+n.y*n.y),n.nx=n.x/n.len,n.ny=n.y/n.len,n.ang=Math.atan2(n.ny,n.nx)},nE=function(e,r){r.x=e.x*-1,r.y=e.y*-1,r.nx=e.nx*-1,r.ny=e.ny*-1,r.ang=e.ang>0?-(Math.PI-e.ang):Math.PI+e.ang},aE=function(e,r,n,a,i){if(e!==ad?id(r,e,ur):nE(Kt,ur),id(r,n,Kt),rd=ur.nx*Kt.ny-ur.ny*Kt.nx,nd=ur.nx*Kt.nx-ur.ny*-Kt.ny,Tr=Math.asin(Math.max(-1,Math.min(1,rd))),Math.abs(Tr)<1e-6){dl=r.x,hl=r.y,wn=Hn=0;return}Cn=1,ji=!1,nd<0?Tr<0?Tr=Math.PI+Tr:(Tr=Math.PI-Tr,Cn=-1,ji=!0):Tr>0&&(Cn=-1,ji=!0),r.radius!==void 0?Hn=r.radius:Hn=a,pn=Tr/2,_i=Math.min(ur.len/2,Kt.len/2),i?(sr=Math.abs(Math.cos(pn)*Hn/Math.sin(pn)),sr>_i?(sr=_i,wn=Math.abs(sr*Math.sin(pn)/Math.cos(pn))):wn=Hn):(sr=Math.min(_i,Hn),wn=Math.abs(sr*Math.sin(pn)/Math.cos(pn))),gl=r.x+Kt.nx*sr,pl=r.y+Kt.ny*sr,dl=gl-Kt.ny*wn*Cn,hl=pl+Kt.nx*wn*Cn,Yg=r.x+ur.nx*sr,Xg=r.y+ur.ny*sr,ad=r};function Zg(t,e){e.radius===0?t.lineTo(e.cx,e.cy):t.arc(e.cx,e.cy,e.radius,e.startAngle,e.endAngle,e.counterClockwise)}function uf(t,e,r,n){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0;return n===0||e.radius===0?{cx:e.x,cy:e.y,radius:0,startX:e.x,startY:e.y,stopX:e.x,stopY:e.y,startAngle:void 0,endAngle:void 0,counterClockwise:void 0}:(aE(t,e,r,n,a),{cx:dl,cy:hl,radius:wn,startX:Yg,startY:Xg,stopX:gl,stopY:pl,startAngle:ur.ang+Math.PI/2*Cn,endAngle:Kt.ang-Math.PI/2*Cn,counterClockwise:ji})}var si=.01,iE=Math.sqrt(2*si),kt={};kt.findMidptPtsEtc=function(t,e){var r=e.posPts,n=e.intersectionPts,a=e.vectorNormInverse,i,s=t.pstyle("source-endpoint"),o=t.pstyle("target-endpoint"),u=s.units!=null&&o.units!=null,l=function(E,T,x,S){var D=S-T,A=x-E,k=Math.sqrt(A*A+D*D);return{x:-D/k,y:A/k}},f=t.pstyle("edge-distances").value;switch(f){case"node-position":i=r;break;case"intersection":i=n;break;case"endpoints":{if(u){var c=this.manualEndptToPx(t.source()[0],s),v=st(c,2),h=v[0],d=v[1],p=this.manualEndptToPx(t.target()[0],o),g=st(p,2),y=g[0],m=g[1],b={x1:h,y1:d,x2:y,y2:m};a=l(h,d,y,m),i=b}else Ue("Edge ".concat(t.id()," has edge-distances:endpoints specified without manual endpoints specified via source-endpoint and target-endpoint.  Falling back on edge-distances:intersection (default).")),i=n;break}}return{midptPts:i,vectorNormInverse:a}};kt.findHaystackPoints=function(t){for(var e=0;e<t.length;e++){var r=t[e],n=r._private,a=n.rscratch;if(!a.haystack){var i=Math.random()*2*Math.PI;a.source={x:Math.cos(i),y:Math.sin(i)},i=Math.random()*2*Math.PI,a.target={x:Math.cos(i),y:Math.sin(i)}}var s=n.source,o=n.target,u=s.position(),l=o.position(),f=s.width(),c=o.width(),v=s.height(),h=o.height(),d=r.pstyle("haystack-radius").value,p=d/2;a.haystackPts=a.allpts=[a.source.x*f*p+u.x,a.source.y*v*p+u.y,a.target.x*c*p+l.x,a.target.y*h*p+l.y],a.midX=(a.allpts[0]+a.allpts[2])/2,a.midY=(a.allpts[1]+a.allpts[3])/2,a.edgeType="haystack",a.haystack=!0,this.storeEdgeProjections(r),this.calculateArrowAngles(r),this.recalculateEdgeLabelProjections(r),this.calculateLabelAngles(r)}};kt.findSegmentsPoints=function(t,e){var r=t._private.rscratch,n=t.pstyle("segment-weights"),a=t.pstyle("segment-distances"),i=t.pstyle("segment-radii"),s=t.pstyle("radius-type"),o=Math.min(n.pfValue.length,a.pfValue.length),u=i.pfValue[i.pfValue.length-1],l=s.pfValue[s.pfValue.length-1];r.edgeType="segments",r.segpts=[],r.radii=[],r.isArcRadius=[];for(var f=0;f<o;f++){var c=n.pfValue[f],v=a.pfValue[f],h=1-c,d=c,p=this.findMidptPtsEtc(t,e),g=p.midptPts,y=p.vectorNormInverse,m={x:g.x1*h+g.x2*d,y:g.y1*h+g.y2*d};r.segpts.push(m.x+y.x*v,m.y+y.y*v),r.radii.push(i.pfValue[f]!==void 0?i.pfValue[f]:u),r.isArcRadius.push((s.pfValue[f]!==void 0?s.pfValue[f]:l)==="arc-radius")}};kt.findLoopPoints=function(t,e,r,n){var a=t._private.rscratch,i=e.dirCounts,s=e.srcPos,o=t.pstyle("control-point-distances"),u=o?o.pfValue[0]:void 0,l=t.pstyle("loop-direction").pfValue,f=t.pstyle("loop-sweep").pfValue,c=t.pstyle("control-point-step-size").pfValue;a.edgeType="self";var v=r,h=c;n&&(v=0,h=u);var d=l-Math.PI/2,p=d-f/2,g=d+f/2,y=l+"_"+f;v=i[y]===void 0?i[y]=0:++i[y],a.ctrlpts=[s.x+Math.cos(p)*1.4*h*(v/3+1),s.y+Math.sin(p)*1.4*h*(v/3+1),s.x+Math.cos(g)*1.4*h*(v/3+1),s.y+Math.sin(g)*1.4*h*(v/3+1)]};kt.findCompoundLoopPoints=function(t,e,r,n){var a=t._private.rscratch;a.edgeType="compound";var i=e.srcPos,s=e.tgtPos,o=e.srcW,u=e.srcH,l=e.tgtW,f=e.tgtH,c=t.pstyle("control-point-step-size").pfValue,v=t.pstyle("control-point-distances"),h=v?v.pfValue[0]:void 0,d=r,p=c;n&&(d=0,p=h);var g=50,y={x:i.x-o/2,y:i.y-u/2},m={x:s.x-l/2,y:s.y-f/2},b={x:Math.min(y.x,m.x),y:Math.min(y.y,m.y)},w=.5,E=Math.max(w,Math.log(o*si)),T=Math.max(w,Math.log(l*si));a.ctrlpts=[b.x,b.y-(1+Math.pow(g,1.12)/100)*p*(d/3+1)*E,b.x-(1+Math.pow(g,1.12)/100)*p*(d/3+1)*T,b.y]};kt.findStraightEdgePoints=function(t){t._private.rscratch.edgeType="straight"};kt.findBezierPoints=function(t,e,r,n,a){var i=t._private.rscratch,s=t.pstyle("control-point-step-size").pfValue,o=t.pstyle("control-point-distances"),u=t.pstyle("control-point-weights"),l=o&&u?Math.min(o.value.length,u.value.length):1,f=o?o.pfValue[0]:void 0,c=u.value[0],v=n;i.edgeType=v?"multibezier":"bezier",i.ctrlpts=[];for(var h=0;h<l;h++){var d=(.5-e.eles.length/2+r)*s*(a?-1:1),p=void 0,g=Yl(d);v&&(f=o?o.pfValue[h]:s,c=u.value[h]),n?p=f:p=f!==void 0?g*f:void 0;var y=p!==void 0?p:d,m=1-c,b=c,w=this.findMidptPtsEtc(t,e),E=w.midptPts,T=w.vectorNormInverse,x={x:E.x1*m+E.x2*b,y:E.y1*m+E.y2*b};i.ctrlpts.push(x.x+T.x*y,x.y+T.y*y)}};kt.findTaxiPoints=function(t,e){var r=t._private.rscratch;r.edgeType="segments";var n="vertical",a="horizontal",i="leftward",s="rightward",o="downward",u="upward",l="auto",f=e.posPts,c=e.srcW,v=e.srcH,h=e.tgtW,d=e.tgtH,p=t.pstyle("edge-distances").value,g=p!=="node-position",y=t.pstyle("taxi-direction").value,m=y,b=t.pstyle("taxi-turn"),w=b.units==="%",E=b.pfValue,T=E<0,x=t.pstyle("taxi-turn-min-distance").pfValue,S=g?(c+h)/2:0,D=g?(v+d)/2:0,A=f.x2-f.x1,k=f.y2-f.y1,R=function(P,U){return P>0?Math.max(P-U,0):Math.min(P+U,0)},M=R(A,S),L=R(k,D),N=!1;m===l?y=Math.abs(M)>Math.abs(L)?a:n:m===u||m===o?(y=n,N=!0):(m===i||m===s)&&(y=a,N=!0);var O=y===n,I=O?L:M,F=O?k:A,H=Yl(F),G=!1;!(N&&(w||T))&&(m===o&&F<0||m===u&&F>0||m===i&&F>0||m===s&&F<0)&&(H*=-1,I=H*Math.abs(I),G=!0);var z;if(w){var V=E<0?1+E:E;z=V*I}else{var re=E<0?I:0;z=re+E*H}var ie=function(P){return Math.abs(P)<x||Math.abs(P)>=Math.abs(I)},ne=ie(z),oe=ie(Math.abs(I)-Math.abs(z)),ve=ne||oe;if(ve&&!G)if(O){var ge=Math.abs(F)<=v/2,ue=Math.abs(A)<=h/2;if(ge){var q=(f.x1+f.x2)/2,$=f.y1,C=f.y2;r.segpts=[q,$,q,C]}else if(ue){var B=(f.y1+f.y2)/2,_=f.x1,K=f.x2;r.segpts=[_,B,K,B]}else r.segpts=[f.x1,f.y2]}else{var J=Math.abs(F)<=c/2,Z=Math.abs(k)<=d/2;if(J){var te=(f.y1+f.y2)/2,j=f.x1,Y=f.x2;r.segpts=[j,te,Y,te]}else if(Z){var W=(f.x1+f.x2)/2,fe=f.y1,se=f.y2;r.segpts=[W,fe,W,se]}else r.segpts=[f.x2,f.y1]}else if(O){var le=f.y1+z+(g?v/2*H:0),de=f.x1,ye=f.x2;r.segpts=[de,le,ye,le]}else{var Pe=f.x1+z+(g?c/2*H:0),Ce=f.y1,Re=f.y2;r.segpts=[Pe,Ce,Pe,Re]}if(r.isRound){var Ee=t.pstyle("taxi-radius").value,pe=t.pstyle("radius-type").value[0]==="arc-radius";r.radii=new Array(r.segpts.length/2).fill(Ee),r.isArcRadius=new Array(r.segpts.length/2).fill(pe)}};kt.tryToCorrectInvalidPoints=function(t,e){var r=t._private.rscratch;if(r.edgeType==="bezier"){var n=e.srcPos,a=e.tgtPos,i=e.srcW,s=e.srcH,o=e.tgtW,u=e.tgtH,l=e.srcShape,f=e.tgtShape,c=e.srcCornerRadius,v=e.tgtCornerRadius,h=e.srcRs,d=e.tgtRs,p=!he(r.startX)||!he(r.startY),g=!he(r.arrowStartX)||!he(r.arrowStartY),y=!he(r.endX)||!he(r.endY),m=!he(r.arrowEndX)||!he(r.arrowEndY),b=3,w=this.getArrowWidth(t.pstyle("width").pfValue,t.pstyle("arrow-scale").value)*this.arrowShapeWidth,E=b*w,T=An({x:r.ctrlpts[0],y:r.ctrlpts[1]},{x:r.startX,y:r.startY}),x=T<E,S=An({x:r.ctrlpts[0],y:r.ctrlpts[1]},{x:r.endX,y:r.endY}),D=S<E,A=!1;if(p||g||x){A=!0;var k={x:r.ctrlpts[0]-n.x,y:r.ctrlpts[1]-n.y},R=Math.sqrt(k.x*k.x+k.y*k.y),M={x:k.x/R,y:k.y/R},L=Math.max(i,s),N={x:r.ctrlpts[0]+M.x*2*L,y:r.ctrlpts[1]+M.y*2*L},O=l.intersectLine(n.x,n.y,i,s,N.x,N.y,0,c,h);x?(r.ctrlpts[0]=r.ctrlpts[0]+M.x*(E-T),r.ctrlpts[1]=r.ctrlpts[1]+M.y*(E-T)):(r.ctrlpts[0]=O[0]+M.x*E,r.ctrlpts[1]=O[1]+M.y*E)}if(y||m||D){A=!0;var I={x:r.ctrlpts[0]-a.x,y:r.ctrlpts[1]-a.y},F=Math.sqrt(I.x*I.x+I.y*I.y),H={x:I.x/F,y:I.y/F},G=Math.max(i,s),z={x:r.ctrlpts[0]+H.x*2*G,y:r.ctrlpts[1]+H.y*2*G},V=f.intersectLine(a.x,a.y,o,u,z.x,z.y,0,v,d);D?(r.ctrlpts[0]=r.ctrlpts[0]+H.x*(E-S),r.ctrlpts[1]=r.ctrlpts[1]+H.y*(E-S)):(r.ctrlpts[0]=V[0]+H.x*E,r.ctrlpts[1]=V[1]+H.y*E)}A&&this.findEndpoints(t)}};kt.storeAllpts=function(t){var e=t._private.rscratch;if(e.edgeType==="multibezier"||e.edgeType==="bezier"||e.edgeType==="self"||e.edgeType==="compound"){e.allpts=[],e.allpts.push(e.startX,e.startY);for(var r=0;r+1<e.ctrlpts.length;r+=2)e.allpts.push(e.ctrlpts[r],e.ctrlpts[r+1]),r+3<e.ctrlpts.length&&e.allpts.push((e.ctrlpts[r]+e.ctrlpts[r+2])/2,(e.ctrlpts[r+1]+e.ctrlpts[r+3])/2);e.allpts.push(e.endX,e.endY);var n,a;e.ctrlpts.length/2%2===0?(n=e.allpts.length/2-1,e.midX=e.allpts[n],e.midY=e.allpts[n+1]):(n=e.allpts.length/2-3,a=.5,e.midX=gt(e.allpts[n],e.allpts[n+2],e.allpts[n+4],a),e.midY=gt(e.allpts[n+1],e.allpts[n+3],e.allpts[n+5],a))}else if(e.edgeType==="straight")e.allpts=[e.startX,e.startY,e.endX,e.endY],e.midX=(e.startX+e.endX+e.arrowStartX+e.arrowEndX)/4,e.midY=(e.startY+e.endY+e.arrowStartY+e.arrowEndY)/4;else if(e.edgeType==="segments"){if(e.allpts=[],e.allpts.push(e.startX,e.startY),e.allpts.push.apply(e.allpts,e.segpts),e.allpts.push(e.endX,e.endY),e.isRound){e.roundCorners=[];for(var i=2;i+3<e.allpts.length;i+=2){var s=e.radii[i/2-1],o=e.isArcRadius[i/2-1];e.roundCorners.push(uf({x:e.allpts[i-2],y:e.allpts[i-1]},{x:e.allpts[i],y:e.allpts[i+1],radius:s},{x:e.allpts[i+2],y:e.allpts[i+3]},s,o))}}if(e.segpts.length%4===0){var u=e.segpts.length/2,l=u-2;e.midX=(e.segpts[l]+e.segpts[u])/2,e.midY=(e.segpts[l+1]+e.segpts[u+1])/2}else{var f=e.segpts.length/2-1;if(!e.isRound)e.midX=e.segpts[f],e.midY=e.segpts[f+1];else{var c={x:e.segpts[f],y:e.segpts[f+1]},v=e.roundCorners[f/2];if(v.radius===0){var h={x:e.segpts[f+2],y:e.segpts[f+3]};e.midX=c.x,e.midY=c.y,e.midVector=[c.y-h.y,h.x-c.x]}else{var d=[c.x-v.cx,c.y-v.cy],p=v.radius/Math.sqrt(Math.pow(d[0],2)+Math.pow(d[1],2));d=d.map(function(g){return g*p}),e.midX=v.cx+d[0],e.midY=v.cy+d[1],e.midVector=d}}}}};kt.checkForInvalidEdgeWarning=function(t){var e=t[0]._private.rscratch;e.nodesOverlap||he(e.startX)&&he(e.startY)&&he(e.endX)&&he(e.endY)?e.loggedErr=!1:e.loggedErr||(e.loggedErr=!0,Ue("Edge `"+t.id()+"` has invalid endpoints and so it is impossible to draw.  Adjust your edge style (e.g. control points) accordingly or use an alternative edge type.  This is expected behaviour when the source node and the target node overlap."))};kt.findEdgeControlPoints=function(t){var e=this;if(!(!t||t.length===0)){for(var r=this,n=r.cy,a=n.hasCompoundNodes(),i=new Rr,s=function(D,A){return[].concat(fs(D),[A?1:0]).join("-")},o=[],u=[],l=0;l<t.length;l++){var f=t[l],c=f._private,v=f.pstyle("curve-style").value;if(!(f.removed()||!f.takesUpSpace())){if(v==="haystack"){u.push(f);continue}var h=v==="unbundled-bezier"||Kr(v,"segments")||v==="straight"||v==="straight-triangle"||Kr(v,"taxi"),d=v==="unbundled-bezier"||v==="bezier",p=c.source,g=c.target,y=p.poolIndex(),m=g.poolIndex(),b=[y,m].sort(),w=s(b,h),E=i.get(w);E==null&&(E={eles:[]},o.push({pairId:b,edgeIsUnbundled:h}),i.set(w,E)),E.eles.push(f),h&&(E.hasUnbundled=!0),d&&(E.hasBezier=!0)}}for(var T=function(){var D=o[x],A=D.pairId,k=D.edgeIsUnbundled,R=s(A,k),M=i.get(R),L;if(!M.hasUnbundled){var N=M.eles[0].parallelEdges().filter(function(pe){return pe.isBundledBezier()});Wl(M.eles),N.forEach(function(pe){return M.eles.push(pe)}),M.eles.sort(function(pe,ee){return pe.poolIndex()-ee.poolIndex()})}var O=M.eles[0],I=O.source(),F=O.target();if(I.poolIndex()>F.poolIndex()){var H=I;I=F,F=H}var G=M.srcPos=I.position(),z=M.tgtPos=F.position(),V=M.srcW=I.outerWidth(),re=M.srcH=I.outerHeight(),ie=M.tgtW=F.outerWidth(),ne=M.tgtH=F.outerHeight(),oe=M.srcShape=r.nodeShapes[e.getNodeShape(I)],ve=M.tgtShape=r.nodeShapes[e.getNodeShape(F)],ge=M.srcCornerRadius=I.pstyle("corner-radius").value==="auto"?"auto":I.pstyle("corner-radius").pfValue,ue=M.tgtCornerRadius=F.pstyle("corner-radius").value==="auto"?"auto":F.pstyle("corner-radius").pfValue,q=M.tgtRs=F._private.rscratch,$=M.srcRs=I._private.rscratch;M.dirCounts={north:0,west:0,south:0,east:0,northwest:0,southwest:0,northeast:0,southeast:0};for(var C=0;C<M.eles.length;C++){var B=M.eles[C],_=B[0]._private.rscratch,K=B.pstyle("curve-style").value,J=K==="unbundled-bezier"||Kr(K,"segments")||Kr(K,"taxi"),Z=!I.same(B.source());if(!M.calculatedIntersection&&I!==F&&(M.hasBezier||M.hasUnbundled)){M.calculatedIntersection=!0;var te=oe.intersectLine(G.x,G.y,V,re,z.x,z.y,0,ge,$),j=M.srcIntn=te,Y=ve.intersectLine(z.x,z.y,ie,ne,G.x,G.y,0,ue,q),W=M.tgtIntn=Y,fe=M.intersectionPts={x1:te[0],x2:Y[0],y1:te[1],y2:Y[1]},se=M.posPts={x1:G.x,x2:z.x,y1:G.y,y2:z.y},le=Y[1]-te[1],de=Y[0]-te[0],ye=Math.sqrt(de*de+le*le);he(ye)&&ye>=iE||(ye=Math.sqrt(Math.max(de*de,si)+Math.max(le*le,si)));var Pe=M.vector={x:de,y:le},Ce=M.vectorNorm={x:Pe.x/ye,y:Pe.y/ye},Re={x:-Ce.y,y:Ce.x};M.nodesOverlap=!he(ye)||ve.checkPoint(te[0],te[1],0,ie,ne,z.x,z.y,ue,q)||oe.checkPoint(Y[0],Y[1],0,V,re,G.x,G.y,ge,$),M.vectorNormInverse=Re,L={nodesOverlap:M.nodesOverlap,dirCounts:M.dirCounts,calculatedIntersection:!0,hasBezier:M.hasBezier,hasUnbundled:M.hasUnbundled,eles:M.eles,srcPos:z,srcRs:q,tgtPos:G,tgtRs:$,srcW:ie,srcH:ne,tgtW:V,tgtH:re,srcIntn:W,tgtIntn:j,srcShape:ve,tgtShape:oe,posPts:{x1:se.x2,y1:se.y2,x2:se.x1,y2:se.y1},intersectionPts:{x1:fe.x2,y1:fe.y2,x2:fe.x1,y2:fe.y1},vector:{x:-Pe.x,y:-Pe.y},vectorNorm:{x:-Ce.x,y:-Ce.y},vectorNormInverse:{x:-Re.x,y:-Re.y}}}var Ee=Z?L:M;_.nodesOverlap=Ee.nodesOverlap,_.srcIntn=Ee.srcIntn,_.tgtIntn=Ee.tgtIntn,_.isRound=K.startsWith("round"),a&&(I.isParent()||I.isChild()||F.isParent()||F.isChild())&&(I.parents().anySame(F)||F.parents().anySame(I)||I.same(F)&&I.isParent())?e.findCompoundLoopPoints(B,Ee,C,J):I===F?e.findLoopPoints(B,Ee,C,J):K.endsWith("segments")?e.findSegmentsPoints(B,Ee):K.endsWith("taxi")?e.findTaxiPoints(B,Ee):K==="straight"||!J&&M.eles.length%2===1&&C===Math.floor(M.eles.length/2)?e.findStraightEdgePoints(B):e.findBezierPoints(B,Ee,C,J,Z),e.findEndpoints(B),e.tryToCorrectInvalidPoints(B,Ee),e.checkForInvalidEdgeWarning(B),e.storeAllpts(B),e.storeEdgeProjections(B),e.calculateArrowAngles(B),e.recalculateEdgeLabelProjections(B),e.calculateLabelAngles(B)}},x=0;x<o.length;x++)T();this.findHaystackPoints(u)}};function Qg(t){var e=[];if(t!=null){for(var r=0;r<t.length;r+=2){var n=t[r],a=t[r+1];e.push({x:n,y:a})}return e}}kt.getSegmentPoints=function(t){var e=t[0]._private.rscratch;this.recalculateRenderedStyle(t);var r=e.edgeType;if(r==="segments")return Qg(e.segpts)};kt.getControlPoints=function(t){var e=t[0]._private.rscratch;this.recalculateRenderedStyle(t);var r=e.edgeType;if(r==="bezier"||r==="multibezier"||r==="self"||r==="compound")return Qg(e.ctrlpts)};kt.getEdgeMidpoint=function(t){var e=t[0]._private.rscratch;return this.recalculateRenderedStyle(t),{x:e.midX,y:e.midY}};var wi={};wi.manualEndptToPx=function(t,e){var r=this,n=t.position(),a=t.outerWidth(),i=t.outerHeight(),s=t._private.rscratch;if(e.value.length===2){var o=[e.pfValue[0],e.pfValue[1]];return e.units[0]==="%"&&(o[0]=o[0]*a),e.units[1]==="%"&&(o[1]=o[1]*i),o[0]+=n.x,o[1]+=n.y,o}else{var u=e.pfValue[0];u=-Math.PI/2+u;var l=2*Math.max(a,i),f=[n.x+Math.cos(u)*l,n.y+Math.sin(u)*l];return r.nodeShapes[this.getNodeShape(t)].intersectLine(n.x,n.y,a,i,f[0],f[1],0,t.pstyle("corner-radius").value==="auto"?"auto":t.pstyle("corner-radius").pfValue,s)}};wi.findEndpoints=function(t){var e,r,n,a,i=this,s,o=t.source()[0],u=t.target()[0],l=o.position(),f=u.position(),c=t.pstyle("target-arrow-shape").value,v=t.pstyle("source-arrow-shape").value,h=t.pstyle("target-distance-from-node").pfValue,d=t.pstyle("source-distance-from-node").pfValue,p=o._private.rscratch,g=u._private.rscratch,y=t.pstyle("curve-style").value,m=t._private.rscratch,b=m.edgeType,w=Kr(y,"taxi"),E=b==="self"||b==="compound",T=b==="bezier"||b==="multibezier"||E,x=b!=="bezier",S=b==="straight"||b==="segments",D=b==="segments",A=T||x||S,k=E||w,R=t.pstyle("source-endpoint"),M=k?"outside-to-node":R.value,L=o.pstyle("corner-radius").value==="auto"?"auto":o.pstyle("corner-radius").pfValue,N=t.pstyle("target-endpoint"),O=k?"outside-to-node":N.value,I=u.pstyle("corner-radius").value==="auto"?"auto":u.pstyle("corner-radius").pfValue;m.srcManEndpt=R,m.tgtManEndpt=N;var F,H,G,z,V=(e=(N==null||(r=N.pfValue)===null||r===void 0?void 0:r.length)===2?N.pfValue:null)!==null&&e!==void 0?e:[0,0],re=(n=(R==null||(a=R.pfValue)===null||a===void 0?void 0:a.length)===2?R.pfValue:null)!==null&&n!==void 0?n:[0,0];if(T){var ie=[m.ctrlpts[0],m.ctrlpts[1]],ne=x?[m.ctrlpts[m.ctrlpts.length-2],m.ctrlpts[m.ctrlpts.length-1]]:ie;F=ne,H=ie}else if(S){var oe=D?m.segpts.slice(0,2):[f.x+V[0],f.y+V[1]],ve=D?m.segpts.slice(m.segpts.length-2):[l.x+re[0],l.y+re[1]];F=ve,H=oe}if(O==="inside-to-node")s=[f.x,f.y];else if(N.units)s=this.manualEndptToPx(u,N);else if(O==="outside-to-line")s=m.tgtIntn;else if(O==="outside-to-node"||O==="outside-to-node-or-label"?G=F:(O==="outside-to-line"||O==="outside-to-line-or-label")&&(G=[l.x,l.y]),s=i.nodeShapes[this.getNodeShape(u)].intersectLine(f.x,f.y,u.outerWidth(),u.outerHeight(),G[0],G[1],0,I,g),O==="outside-to-node-or-label"||O==="outside-to-line-or-label"){var ge=u._private.rscratch,ue=ge.labelWidth,q=ge.labelHeight,$=ge.labelX,C=ge.labelY,B=ue/2,_=q/2,K=u.pstyle("text-valign").value;K==="top"?C-=_:K==="bottom"&&(C+=_);var J=u.pstyle("text-halign").value;J==="left"?$-=B:J==="right"&&($+=B);var Z=ti(G[0],G[1],[$-B,C-_,$+B,C-_,$+B,C+_,$-B,C+_],f.x,f.y);if(Z.length>0){var te=l,j=bn(te,Yn(s)),Y=bn(te,Yn(Z)),W=j;if(Y<j&&(s=Z,W=Y),Z.length>2){var fe=bn(te,{x:Z[2],y:Z[3]});fe<W&&(s=[Z[2],Z[3]])}}}var se=Ri(s,F,i.arrowShapes[c].spacing(t)+h),le=Ri(s,F,i.arrowShapes[c].gap(t)+h);if(m.endX=le[0],m.endY=le[1],m.arrowEndX=se[0],m.arrowEndY=se[1],M==="inside-to-node")s=[l.x,l.y];else if(R.units)s=this.manualEndptToPx(o,R);else if(M==="outside-to-line")s=m.srcIntn;else if(M==="outside-to-node"||M==="outside-to-node-or-label"?z=H:(M==="outside-to-line"||M==="outside-to-line-or-label")&&(z=[f.x,f.y]),s=i.nodeShapes[this.getNodeShape(o)].intersectLine(l.x,l.y,o.outerWidth(),o.outerHeight(),z[0],z[1],0,L,p),M==="outside-to-node-or-label"||M==="outside-to-line-or-label"){var de=o._private.rscratch,ye=de.labelWidth,Pe=de.labelHeight,Ce=de.labelX,Re=de.labelY,Ee=ye/2,pe=Pe/2,ee=o.pstyle("text-valign").value;ee==="top"?Re-=pe:ee==="bottom"&&(Re+=pe);var P=o.pstyle("text-halign").value;P==="left"?Ce-=Ee:P==="right"&&(Ce+=Ee);var U=ti(z[0],z[1],[Ce-Ee,Re-pe,Ce+Ee,Re-pe,Ce+Ee,Re+pe,Ce-Ee,Re+pe],l.x,l.y);if(U.length>0){var X=f,Q=bn(X,Yn(s)),ae=bn(X,Yn(U)),be=Q;if(ae<Q&&(s=[U[0],U[1]],be=ae),U.length>2){var ce=bn(X,{x:U[2],y:U[3]});ce<be&&(s=[U[2],U[3]])}}}var Te=Ri(s,H,i.arrowShapes[v].spacing(t)+d),xe=Ri(s,H,i.arrowShapes[v].gap(t)+d);m.startX=xe[0],m.startY=xe[1],m.arrowStartX=Te[0],m.arrowStartY=Te[1],A&&(!he(m.startX)||!he(m.startY)||!he(m.endX)||!he(m.endY)?m.badLine=!0:m.badLine=!1)};wi.getSourceEndpoint=function(t){var e=t[0]._private.rscratch;return this.recalculateRenderedStyle(t),e.edgeType==="haystack"?{x:e.haystackPts[0],y:e.haystackPts[1]}:{x:e.arrowStartX,y:e.arrowStartY}};wi.getTargetEndpoint=function(t){var e=t[0]._private.rscratch;return this.recalculateRenderedStyle(t),e.edgeType==="haystack"?{x:e.haystackPts[2],y:e.haystackPts[3]}:{x:e.arrowEndX,y:e.arrowEndY}};var lf={};function sE(t,e,r){for(var n=function(l,f,c,v){return gt(l,f,c,v)},a=e._private,i=a.rstyle.bezierPts,s=0;s<t.bezierProjPcts.length;s++){var o=t.bezierProjPcts[s];i.push({x:n(r[0],r[2],r[4],o),y:n(r[1],r[3],r[5],o)})}}lf.storeEdgeProjections=function(t){var e=t._private,r=e.rscratch,n=r.edgeType;if(e.rstyle.bezierPts=null,e.rstyle.linePts=null,e.rstyle.haystackPts=null,n==="multibezier"||n==="bezier"||n==="self"||n==="compound"){e.rstyle.bezierPts=[];for(var a=0;a+5<r.allpts.length;a+=4)sE(this,t,r.allpts.slice(a,a+6))}else if(n==="segments")for(var i=e.rstyle.linePts=[],a=0;a+1<r.allpts.length;a+=2)i.push({x:r.allpts[a],y:r.allpts[a+1]});else if(n==="haystack"){var s=r.haystackPts;e.rstyle.haystackPts=[{x:s[0],y:s[1]},{x:s[2],y:s[3]}]}e.rstyle.arrowWidth=this.getArrowWidth(t.pstyle("width").pfValue,t.pstyle("arrow-scale").value)*this.arrowShapeWidth};lf.recalculateEdgeProjections=function(t){this.findEdgeControlPoints(t)};var br={};br.recalculateNodeLabelProjection=function(t){var e=t.pstyle("label").strValue;if(!tn(e)){var r,n,a=t._private,i=t.width(),s=t.height(),o=t.padding(),u=t.position(),l=t.pstyle("text-halign").strValue,f=t.pstyle("text-valign").strValue,c=a.rscratch,v=a.rstyle;switch(l){case"left":r=u.x-i/2-o;break;case"right":r=u.x+i/2+o;break;default:r=u.x}switch(f){case"top":n=u.y-s/2-o;break;case"bottom":n=u.y+s/2+o;break;default:n=u.y}c.labelX=r,c.labelY=n,v.labelX=r,v.labelY=n,this.calculateLabelAngles(t),this.applyLabelDimensions(t)}};var Jg=function(e,r){var n=Math.atan(r/e);return e===0&&n<0&&(n=n*-1),n},jg=function(e,r){var n=r.x-e.x,a=r.y-e.y;return Jg(n,a)},oE=function(e,r,n,a){var i=ei(0,a-.001,1),s=ei(0,a+.001,1),o=ra(e,r,n,i),u=ra(e,r,n,s);return jg(o,u)};br.recalculateEdgeLabelProjections=function(t){var e,r=t._private,n=r.rscratch,a=this,i={mid:t.pstyle("label").strValue,source:t.pstyle("source-label").strValue,target:t.pstyle("target-label").strValue};if(i.mid||i.source||i.target){e={x:n.midX,y:n.midY};var s=function(c,v,h){Dr(r.rscratch,c,v,h),Dr(r.rstyle,c,v,h)};s("labelX",null,e.x),s("labelY",null,e.y);var o=Jg(n.midDispX,n.midDispY);s("labelAutoAngle",null,o);var u=function(){if(u.cache)return u.cache;for(var c=[],v=0;v+5<n.allpts.length;v+=4){var h={x:n.allpts[v],y:n.allpts[v+1]},d={x:n.allpts[v+2],y:n.allpts[v+3]},p={x:n.allpts[v+4],y:n.allpts[v+5]};c.push({p0:h,p1:d,p2:p,startDist:0,length:0,segments:[]})}var g=r.rstyle.bezierPts,y=a.bezierProjPcts.length;function m(x,S,D,A,k){var R=An(S,D),M=x.segments[x.segments.length-1],L={p0:S,p1:D,t0:A,t1:k,startDist:M?M.startDist+M.length:0,length:R};x.segments.push(L),x.length+=R}for(var b=0;b<c.length;b++){var w=c[b],E=c[b-1];E&&(w.startDist=E.startDist+E.length),m(w,w.p0,g[b*y],0,a.bezierProjPcts[0]);for(var T=0;T<y-1;T++)m(w,g[b*y+T],g[b*y+T+1],a.bezierProjPcts[T],a.bezierProjPcts[T+1]);m(w,g[b*y+y-1],w.p2,a.bezierProjPcts[y-1],1)}return u.cache=c},l=function(c){var v,h=c==="source";if(i[c]){var d=t.pstyle(c+"-text-offset").pfValue;switch(n.edgeType){case"self":case"compound":case"bezier":case"multibezier":{for(var p=u(),g,y=0,m=0,b=0;b<p.length;b++){for(var w=p[h?b:p.length-1-b],E=0;E<w.segments.length;E++){var T=w.segments[h?E:w.segments.length-1-E],x=b===p.length-1&&E===w.segments.length-1;if(y=m,m+=T.length,m>=d||x){g={cp:w,segment:T};break}}if(g)break}var S=g.cp,D=g.segment,A=(d-y)/D.length,k=D.t1-D.t0,R=h?D.t0+k*A:D.t1-k*A;R=ei(0,R,1),e=ra(S.p0,S.p1,S.p2,R),v=oE(S.p0,S.p1,S.p2,R);break}case"straight":case"segments":case"haystack":{for(var M=0,L,N,O,I,F=n.allpts.length,H=0;H+3<F&&(h?(O={x:n.allpts[H],y:n.allpts[H+1]},I={x:n.allpts[H+2],y:n.allpts[H+3]}):(O={x:n.allpts[F-2-H],y:n.allpts[F-1-H]},I={x:n.allpts[F-4-H],y:n.allpts[F-3-H]}),L=An(O,I),N=M,M+=L,!(M>=d));H+=2);var G=d-N,z=G/L;z=ei(0,z,1),e=kb(O,I,z),v=jg(O,I);break}}s("labelX",c,e.x),s("labelY",c,e.y),s("labelAutoAngle",c,v)}};l("source"),l("target"),this.applyLabelDimensions(t)}};br.applyLabelDimensions=function(t){this.applyPrefixedLabelDimensions(t),t.isEdge()&&(this.applyPrefixedLabelDimensions(t,"source"),this.applyPrefixedLabelDimensions(t,"target"))};br.applyPrefixedLabelDimensions=function(t,e){var r=t._private,n=this.getLabelText(t,e),a=Dn(n,t._private.labelDimsKey);if(qt(r.rscratch,"prefixedLabelDimsKey",e)!==a){Dr(r.rscratch,"prefixedLabelDimsKey",e,a);var i=this.calculateLabelDimensions(t,n),s=t.pstyle("line-height").pfValue,o=t.pstyle("text-wrap").strValue,u=qt(r.rscratch,"labelWrapCachedLines",e)||[],l=o!=="wrap"?1:Math.max(u.length,1),f=i.height/l,c=f*s,v=i.width,h=i.height+(l-1)*(s-1)*f;Dr(r.rstyle,"labelWidth",e,v),Dr(r.rscratch,"labelWidth",e,v),Dr(r.rstyle,"labelHeight",e,h),Dr(r.rscratch,"labelHeight",e,h),Dr(r.rscratch,"labelLineHeight",e,c)}};br.getLabelText=function(t,e){var r=t._private,n=e?e+"-":"",a=t.pstyle(n+"label").strValue,i=t.pstyle("text-transform").value,s=function(re,ie){return ie?(Dr(r.rscratch,re,e,ie),ie):qt(r.rscratch,re,e)};if(!a)return"";i=="none"||(i=="uppercase"?a=a.toUpperCase():i=="lowercase"&&(a=a.toLowerCase()));var o=t.pstyle("text-wrap").value;if(o==="wrap"){var u=s("labelKey");if(u!=null&&s("labelWrapKey")===u)return s("labelWrapCachedText");for(var l="",f=a.split(`
`),c=t.pstyle("text-max-width").pfValue,v=t.pstyle("text-overflow-wrap").value,h=v==="anywhere",d=[],p=/[\s\u200b]+|$/g,g=0;g<f.length;g++){var y=f[g],m=this.calculateLabelDimensions(t,y),b=m.width;if(h){var w=y.split("").join(l);y=w}if(b>c){var E=y.matchAll(p),T="",x=0,S=$t(E),D;try{for(S.s();!(D=S.n()).done;){var A=D.value,k=A[0],R=y.substring(x,A.index);x=A.index+k.length;var M=T.length===0?R:T+R+k,L=this.calculateLabelDimensions(t,M),N=L.width;N<=c?T+=R+k:(T&&d.push(T),T=R+k)}}catch(V){S.e(V)}finally{S.f()}T.match(/^[\s\u200b]+$/)||d.push(T)}else d.push(y)}s("labelWrapCachedLines",d),a=s("labelWrapCachedText",d.join(`
`)),s("labelWrapKey",u)}else if(o==="ellipsis"){var O=t.pstyle("text-max-width").pfValue,I="",F="",H=!1;if(this.calculateLabelDimensions(t,a).width<O)return a;for(var G=0;G<a.length;G++){var z=this.calculateLabelDimensions(t,I+a[G]+F).width;if(z>O)break;I+=a[G],G===a.length-1&&(H=!0)}return H||(I+=F),I}return a};br.getLabelJustification=function(t){var e=t.pstyle("text-justification").strValue,r=t.pstyle("text-halign").strValue;if(e==="auto")if(t.isNode())switch(r){case"left":return"right";case"right":return"left";default:return"center"}else return"center";else return e};br.calculateLabelDimensions=function(t,e){var r=this,n=r.cy.window(),a=n.document,i=0,s=t.pstyle("font-style").strValue,o=t.pstyle("font-size").pfValue,u=t.pstyle("font-family").strValue,l=t.pstyle("font-weight").strValue,f=this.labelCalcCanvas,c=this.labelCalcCanvasContext;if(!f){f=this.labelCalcCanvas=a.createElement("canvas"),c=this.labelCalcCanvasContext=f.getContext("2d");var v=f.style;v.position="absolute",v.left="-9999px",v.top="-9999px",v.zIndex="-1",v.visibility="hidden",v.pointerEvents="none"}c.font="".concat(s," ").concat(l," ").concat(o,"px ").concat(u);for(var h=0,d=0,p=e.split(`
`),g=0;g<p.length;g++){var y=p[g],m=c.measureText(y),b=Math.ceil(m.width),w=o;h=Math.max(b,h),d+=w}return h+=i,d+=i,{width:h,height:d}};br.calculateLabelAngle=function(t,e){var r=t._private,n=r.rscratch,a=t.isEdge(),i=e?e+"-":"",s=t.pstyle(i+"text-rotation"),o=s.strValue;return o==="none"?0:a&&o==="autorotate"?n.labelAutoAngle:o==="autorotate"?0:s.pfValue};br.calculateLabelAngles=function(t){var e=this,r=t.isEdge(),n=t._private,a=n.rscratch;a.labelAngle=e.calculateLabelAngle(t),r&&(a.sourceLabelAngle=e.calculateLabelAngle(t,"source"),a.targetLabelAngle=e.calculateLabelAngle(t,"target"))};var ep={},sd=28,od=!1;ep.getNodeShape=function(t){var e=this,r=t.pstyle("shape").value;if(r==="cutrectangle"&&(t.width()<sd||t.height()<sd))return od||(Ue("The `cutrectangle` node shape can not be used at small sizes so `rectangle` is used instead"),od=!0),"rectangle";if(t.isParent())return r==="rectangle"||r==="roundrectangle"||r==="round-rectangle"||r==="cutrectangle"||r==="cut-rectangle"||r==="barrel"?r:"rectangle";if(r==="polygon"){var n=t.pstyle("shape-polygon-points").value;return e.nodeShapes.makePolygon(n).name}return r};var Js={};Js.registerCalculationListeners=function(){var t=this.cy,e=t.collection(),r=this,n=function(s){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(e.merge(s),o)for(var u=0;u<s.length;u++){var l=s[u],f=l._private,c=f.rstyle;c.clean=!1,c.cleanConnected=!1}};r.binder(t).on("bounds.* dirty.*",function(s){var o=s.target;n(o)}).on("style.* background.*",function(s){var o=s.target;n(o,!1)});var a=function(s){if(s){var o=r.onUpdateEleCalcsFns;e.cleanStyle();for(var u=0;u<e.length;u++){var l=e[u],f=l._private.rstyle;l.isNode()&&!f.cleanConnected&&(n(l.connectedEdges()),f.cleanConnected=!0)}if(o)for(var c=0;c<o.length;c++){var v=o[c];v(s,e)}r.recalculateRenderedStyle(e),e=t.collection()}};r.flushRenderedStyleQueue=function(){a(!0)},r.beforeRender(a,r.beforeRenderPriorities.eleCalcs)};Js.onUpdateEleCalcs=function(t){var e=this.onUpdateEleCalcsFns=this.onUpdateEleCalcsFns||[];e.push(t)};Js.recalculateRenderedStyle=function(t,e){var r=function(w){return w._private.rstyle.cleanConnected};if(t.length!==0){var n=[],a=[];if(!this.destroyed){e===void 0&&(e=!0);for(var i=0;i<t.length;i++){var s=t[i],o=s._private,u=o.rstyle;s.isEdge()&&(!r(s.source())||!r(s.target()))&&(u.clean=!1),s.isEdge()&&s.isBundledBezier()&&s.parallelEdges().some(function(b){return!b._private.rstyle.clean&&b.isBundledBezier()})&&(u.clean=!1),!(e&&u.clean||s.removed())&&s.pstyle("display").value!=="none"&&(o.group==="nodes"?a.push(s):n.push(s),u.clean=!0)}for(var l=0;l<a.length;l++){var f=a[l],c=f._private,v=c.rstyle,h=f.position();this.recalculateNodeLabelProjection(f),v.nodeX=h.x,v.nodeY=h.y,v.nodeW=f.pstyle("width").pfValue,v.nodeH=f.pstyle("height").pfValue}this.recalculateEdgeProjections(n);for(var d=0;d<n.length;d++){var p=n[d],g=p._private,y=g.rstyle,m=g.rscratch;y.srcX=m.arrowStartX,y.srcY=m.arrowStartY,y.tgtX=m.arrowEndX,y.tgtY=m.arrowEndY,y.midX=m.midX,y.midY=m.midY,y.labelAngle=m.labelAngle,y.sourceLabelAngle=m.sourceLabelAngle,y.targetLabelAngle=m.targetLabelAngle}}}};var js={};js.updateCachedGrabbedEles=function(){var t=this.cachedZSortedEles;if(t){t.drag=[],t.nondrag=[];for(var e=[],r=0;r<t.length;r++){var n=t[r],a=n._private.rscratch;n.grabbed()&&!n.isParent()?e.push(n):a.inDragLayer?t.drag.push(n):t.nondrag.push(n)}for(var r=0;r<e.length;r++){var n=e[r];t.drag.push(n)}}};js.invalidateCachedZSortedEles=function(){this.cachedZSortedEles=null};js.getCachedZSortedEles=function(t){if(t||!this.cachedZSortedEles){var e=this.cy.mutableElements().toArray();e.sort(Og),e.interactive=e.filter(function(r){return r.interactive()}),this.cachedZSortedEles=e,this.updateCachedGrabbedEles()}else e=this.cachedZSortedEles;return e};var tp={};[Ln,ws,kt,wi,lf,br,ep,Js,js].forEach(function(t){ke(tp,t)});var rp={};rp.getCachedImage=function(t,e,r){var n=this,a=n.imageCache=n.imageCache||{},i=a[t];if(i)return i.image.complete||i.image.addEventListener("load",r),i.image;i=a[t]=a[t]||{};var s=i.image=new Image;s.addEventListener("load",r),s.addEventListener("error",function(){s.error=!0});var o="data:",u=t.substring(0,o.length).toLowerCase()===o;return u||(e=e==="null"?null:e,s.crossOrigin=e),s.src=t,s};var ga={};ga.registerBinding=function(t,e,r,n){var a=Array.prototype.slice.apply(arguments,[1]);if(Array.isArray(t)){for(var i=[],s=0;s<t.length;s++){var o=t[s];if(o!==void 0){var u=this.binder(o);i.push(u.on.apply(u,a))}}return i}var u=this.binder(t);return u.on.apply(u,a)};ga.binder=function(t){var e=this,r=e.cy.window(),n=t===r||t===r.document||t===r.document.body||b0(t);if(e.supportsPassiveEvents==null){var a=!1;try{var i=Object.defineProperty({},"passive",{get:function(){return a=!0,!0}});r.addEventListener("test",null,i)}catch{}e.supportsPassiveEvents=a}var s=function(u,l,f){var c=Array.prototype.slice.call(arguments);return n&&e.supportsPassiveEvents&&(c[2]={capture:f??!1,passive:!1,once:!1}),e.bindings.push({target:t,args:c}),(t.addEventListener||t.on).apply(t,c),this};return{on:s,addEventListener:s,addListener:s,bind:s}};ga.nodeIsDraggable=function(t){return t&&t.isNode()&&!t.locked()&&t.grabbable()};ga.nodeIsGrabbable=function(t){return this.nodeIsDraggable(t)&&t.interactive()};ga.load=function(){var t=this,e=t.cy.window(),r=function(P){return P.selected()},n=function(P){var U=P.getRootNode();if(U&&U.nodeType===11&&U.host!==void 0)return U},a=function(P,U,X,Q){P==null&&(P=t.cy);for(var ae=0;ae<U.length;ae++){var be=U[ae];P.emit({originalEvent:X,type:be,position:Q})}},i=function(P){return P.shiftKey||P.metaKey||P.ctrlKey},s=function(P,U){var X=!0;if(t.cy.hasCompoundNodes()&&P&&P.pannable())for(var Q=0;U&&Q<U.length;Q++){var P=U[Q];if(P.isNode()&&P.isParent()&&!P.pannable()){X=!1;break}}else X=!0;return X},o=function(P){P[0]._private.grabbed=!0},u=function(P){P[0]._private.grabbed=!1},l=function(P){P[0]._private.rscratch.inDragLayer=!0},f=function(P){P[0]._private.rscratch.inDragLayer=!1},c=function(P){P[0]._private.rscratch.isGrabTarget=!0},v=function(P){P[0]._private.rscratch.isGrabTarget=!1},h=function(P,U){var X=U.addToList,Q=X.has(P);!Q&&P.grabbable()&&!P.locked()&&(X.merge(P),o(P))},d=function(P,U){if(P.cy().hasCompoundNodes()&&!(U.inDragLayer==null&&U.addToList==null)){var X=P.descendants();U.inDragLayer&&(X.forEach(l),X.connectedEdges().forEach(l)),U.addToList&&h(X,U)}},p=function(P,U){U=U||{};var X=P.cy().hasCompoundNodes();U.inDragLayer&&(P.forEach(l),P.neighborhood().stdFilter(function(Q){return!X||Q.isEdge()}).forEach(l)),U.addToList&&P.forEach(function(Q){h(Q,U)}),d(P,U),m(P,{inDragLayer:U.inDragLayer}),t.updateCachedGrabbedEles()},g=p,y=function(P){P&&(t.getCachedZSortedEles().forEach(function(U){u(U),f(U),v(U)}),t.updateCachedGrabbedEles())},m=function(P,U){if(!(U.inDragLayer==null&&U.addToList==null)&&P.cy().hasCompoundNodes()){var X=P.ancestors().orphans();if(!X.same(P)){var Q=X.descendants().spawnSelf().merge(X).unmerge(P).unmerge(P.descendants()),ae=Q.connectedEdges();U.inDragLayer&&(ae.forEach(l),Q.forEach(l)),U.addToList&&Q.forEach(function(be){h(be,U)})}}},b=function(){document.activeElement!=null&&document.activeElement.blur!=null&&document.activeElement.blur()},w=typeof MutationObserver<"u",E=typeof ResizeObserver<"u";w?(t.removeObserver=new MutationObserver(function(ee){for(var P=0;P<ee.length;P++){var U=ee[P],X=U.removedNodes;if(X)for(var Q=0;Q<X.length;Q++){var ae=X[Q];if(ae===t.container){t.destroy();break}}}}),t.container.parentNode&&t.removeObserver.observe(t.container.parentNode,{childList:!0})):t.registerBinding(t.container,"DOMNodeRemoved",function(ee){t.destroy()});var T=pi(function(){t.cy.resize()},100);w&&(t.styleObserver=new MutationObserver(T),t.styleObserver.observe(t.container,{attributes:!0})),t.registerBinding(e,"resize",T),E&&(t.resizeObserver=new ResizeObserver(T),t.resizeObserver.observe(t.container));var x=function(P,U){for(;P!=null;)U(P),P=P.parentNode},S=function(){t.invalidateContainerClientCoordsCache()};x(t.container,function(ee){t.registerBinding(ee,"transitionend",S),t.registerBinding(ee,"animationend",S),t.registerBinding(ee,"scroll",S)}),t.registerBinding(t.container,"contextmenu",function(ee){ee.preventDefault()});var D=function(){return t.selection[4]!==0},A=function(P){for(var U=t.findContainerClientCoords(),X=U[0],Q=U[1],ae=U[2],be=U[3],ce=P.touches?P.touches:[P],Te=!1,xe=0;xe<ce.length;xe++){var Ae=ce[xe];if(X<=Ae.clientX&&Ae.clientX<=X+ae&&Q<=Ae.clientY&&Ae.clientY<=Q+be){Te=!0;break}}if(!Te)return!1;for(var Oe=t.container,Ie=P.target,Se=Ie.parentNode,Fe=!1;Se;){if(Se===Oe){Fe=!0;break}Se=Se.parentNode}return!!Fe};t.registerBinding(t.container,"mousedown",function(P){if(A(P)&&!(t.hoverData.which===1&&P.which!==1)){P.preventDefault(),b(),t.hoverData.capture=!0,t.hoverData.which=P.which;var U=t.cy,X=[P.clientX,P.clientY],Q=t.projectIntoViewport(X[0],X[1]),ae=t.selection,be=t.findNearestElements(Q[0],Q[1],!0,!1),ce=be[0],Te=t.dragData.possibleDragElements;t.hoverData.mdownPos=Q,t.hoverData.mdownGPos=X;var xe=function(Ne){return{originalEvent:P,type:Ne,position:{x:Q[0],y:Q[1]}}},Ae=function(){t.hoverData.tapholdCancelled=!1,clearTimeout(t.hoverData.tapholdTimeout),t.hoverData.tapholdTimeout=setTimeout(function(){if(!t.hoverData.tapholdCancelled){var Ne=t.hoverData.down;Ne?Ne.emit(xe("taphold")):U.emit(xe("taphold"))}},t.tapholdDuration)};if(P.which==3){t.hoverData.cxtStarted=!0;var Oe={originalEvent:P,type:"cxttapstart",position:{x:Q[0],y:Q[1]}};ce?(ce.activate(),ce.emit(Oe),t.hoverData.down=ce):U.emit(Oe),t.hoverData.downTime=new Date().getTime(),t.hoverData.cxtDragged=!1}else if(P.which==1){ce&&ce.activate();{if(ce!=null&&t.nodeIsGrabbable(ce)){var Ie=function(Ne){Ne.emit(xe("grab"))};if(c(ce),!ce.selected())Te=t.dragData.possibleDragElements=U.collection(),g(ce,{addToList:Te}),ce.emit(xe("grabon")).emit(xe("grab"));else{Te=t.dragData.possibleDragElements=U.collection();var Se=U.$(function(Fe){return Fe.isNode()&&Fe.selected()&&t.nodeIsGrabbable(Fe)});p(Se,{addToList:Te}),ce.emit(xe("grabon")),Se.forEach(Ie)}t.redrawHint("eles",!0),t.redrawHint("drag",!0)}t.hoverData.down=ce,t.hoverData.downs=be,t.hoverData.downTime=new Date().getTime()}a(ce,["mousedown","tapstart","vmousedown"],P,{x:Q[0],y:Q[1]}),ce==null?(ae[4]=1,t.data.bgActivePosistion={x:Q[0],y:Q[1]},t.redrawHint("select",!0),t.redraw()):ce.pannable()&&(ae[4]=1),Ae()}ae[0]=ae[2]=Q[0],ae[1]=ae[3]=Q[1]}},!1);var k=n(t.container);t.registerBinding([e,k],"mousemove",function(P){var U=t.hoverData.capture;if(!(!U&&!A(P))){var X=!1,Q=t.cy,ae=Q.zoom(),be=[P.clientX,P.clientY],ce=t.projectIntoViewport(be[0],be[1]),Te=t.hoverData.mdownPos,xe=t.hoverData.mdownGPos,Ae=t.selection,Oe=null;!t.hoverData.draggingEles&&!t.hoverData.dragging&&!t.hoverData.selecting&&(Oe=t.findNearestElement(ce[0],ce[1],!0,!1));var Ie=t.hoverData.last,Se=t.hoverData.down,Fe=[ce[0]-Ae[2],ce[1]-Ae[3]],Ne=t.dragData.possibleDragElements,ut;if(xe){var tt=be[0]-xe[0],Bt=tt*tt,nt=be[1]-xe[1],ht=nt*nt,lt=Bt+ht;t.hoverData.isOverThresholdDrag=ut=lt>=t.desktopTapThreshold2}var mt=i(P);ut&&(t.hoverData.tapholdCancelled=!0);var Vr=function(){var Wt=t.hoverData.dragDelta=t.hoverData.dragDelta||[];Wt.length===0?(Wt.push(Fe[0]),Wt.push(Fe[1])):(Wt[0]+=Fe[0],Wt[1]+=Fe[1])};X=!0,a(Oe,["mousemove","vmousemove","tapdrag"],P,{x:ce[0],y:ce[1]});var at=function(Wt){return{originalEvent:P,type:Wt,position:{x:ce[0],y:ce[1]}}},xr=function(){t.data.bgActivePosistion=void 0,t.hoverData.selecting||Q.emit(at("boxstart")),Ae[4]=1,t.hoverData.selecting=!0,t.redrawHint("select",!0),t.redraw()};if(t.hoverData.which===3){if(ut){var Er=at("cxtdrag");Se?Se.emit(Er):Q.emit(Er),t.hoverData.cxtDragged=!0,(!t.hoverData.cxtOver||Oe!==t.hoverData.cxtOver)&&(t.hoverData.cxtOver&&t.hoverData.cxtOver.emit(at("cxtdragout")),t.hoverData.cxtOver=Oe,Oe&&Oe.emit(at("cxtdragover")))}}else if(t.hoverData.dragging){if(X=!0,Q.panningEnabled()&&Q.userPanningEnabled()){var Nn;if(t.hoverData.justStartedPan){var Ci=t.hoverData.mdownPos;Nn={x:(ce[0]-Ci[0])*ae,y:(ce[1]-Ci[1])*ae},t.hoverData.justStartedPan=!1}else Nn={x:Fe[0]*ae,y:Fe[1]*ae};Q.panBy(Nn),Q.emit(at("dragpan")),t.hoverData.dragged=!0}ce=t.projectIntoViewport(P.clientX,P.clientY)}else if(Ae[4]==1&&(Se==null||Se.pannable())){if(ut){if(!t.hoverData.dragging&&Q.boxSelectionEnabled()&&(mt||!Q.panningEnabled()||!Q.userPanningEnabled()))xr();else if(!t.hoverData.selecting&&Q.panningEnabled()&&Q.userPanningEnabled()){var dn=s(Se,t.hoverData.downs);dn&&(t.hoverData.dragging=!0,t.hoverData.justStartedPan=!0,Ae[4]=0,t.data.bgActivePosistion=Yn(Te),t.redrawHint("select",!0),t.redraw())}Se&&Se.pannable()&&Se.active()&&Se.unactivate()}}else{if(Se&&Se.pannable()&&Se.active()&&Se.unactivate(),(!Se||!Se.grabbed())&&Oe!=Ie&&(Ie&&a(Ie,["mouseout","tapdragout"],P,{x:ce[0],y:ce[1]}),Oe&&a(Oe,["mouseover","tapdragover"],P,{x:ce[0],y:ce[1]}),t.hoverData.last=Oe),Se)if(ut){if(Q.boxSelectionEnabled()&&mt)Se&&Se.grabbed()&&(y(Ne),Se.emit(at("freeon")),Ne.emit(at("free")),t.dragData.didDrag&&(Se.emit(at("dragfreeon")),Ne.emit(at("dragfree")))),xr();else if(Se&&Se.grabbed()&&t.nodeIsDraggable(Se)){var Ft=!t.dragData.didDrag;Ft&&t.redrawHint("eles",!0),t.dragData.didDrag=!0,t.hoverData.draggingEles||p(Ne,{inDragLayer:!0});var Tt={x:0,y:0};if(he(Fe[0])&&he(Fe[1])&&(Tt.x+=Fe[0],Tt.y+=Fe[1],Ft)){var _t=t.hoverData.dragDelta;_t&&he(_t[0])&&he(_t[1])&&(Tt.x+=_t[0],Tt.y+=_t[1])}t.hoverData.draggingEles=!0,Ne.silentShift(Tt).emit(at("position")).emit(at("drag")),t.redrawHint("drag",!0),t.redraw()}}else Vr();X=!0}if(Ae[2]=ce[0],Ae[3]=ce[1],X)return P.stopPropagation&&P.stopPropagation(),P.preventDefault&&P.preventDefault(),!1}},!1);var R,M,L;t.registerBinding(e,"mouseup",function(P){if(!(t.hoverData.which===1&&P.which!==1&&t.hoverData.capture)){var U=t.hoverData.capture;if(U){t.hoverData.capture=!1;var X=t.cy,Q=t.projectIntoViewport(P.clientX,P.clientY),ae=t.selection,be=t.findNearestElement(Q[0],Q[1],!0,!1),ce=t.dragData.possibleDragElements,Te=t.hoverData.down,xe=i(P);t.data.bgActivePosistion&&(t.redrawHint("select",!0),t.redraw()),t.hoverData.tapholdCancelled=!0,t.data.bgActivePosistion=void 0,Te&&Te.unactivate();var Ae=function(tt){return{originalEvent:P,type:tt,position:{x:Q[0],y:Q[1]}}};if(t.hoverData.which===3){var Oe=Ae("cxttapend");if(Te?Te.emit(Oe):X.emit(Oe),!t.hoverData.cxtDragged){var Ie=Ae("cxttap");Te?Te.emit(Ie):X.emit(Ie)}t.hoverData.cxtDragged=!1,t.hoverData.which=null}else if(t.hoverData.which===1){if(a(be,["mouseup","tapend","vmouseup"],P,{x:Q[0],y:Q[1]}),!t.dragData.didDrag&&!t.hoverData.dragged&&!t.hoverData.selecting&&!t.hoverData.isOverThresholdDrag&&(a(Te,["click","tap","vclick"],P,{x:Q[0],y:Q[1]}),M=!1,P.timeStamp-L<=X.multiClickDebounceTime()?(R&&clearTimeout(R),M=!0,L=null,a(Te,["dblclick","dbltap","vdblclick"],P,{x:Q[0],y:Q[1]})):(R=setTimeout(function(){M||a(Te,["oneclick","onetap","voneclick"],P,{x:Q[0],y:Q[1]})},X.multiClickDebounceTime()),L=P.timeStamp)),Te==null&&!t.dragData.didDrag&&!t.hoverData.selecting&&!t.hoverData.dragged&&!i(P)&&(X.$(r).unselect(["tapunselect"]),ce.length>0&&t.redrawHint("eles",!0),t.dragData.possibleDragElements=ce=X.collection()),be==Te&&!t.dragData.didDrag&&!t.hoverData.selecting&&be!=null&&be._private.selectable&&(t.hoverData.dragging||(X.selectionType()==="additive"||xe?be.selected()?be.unselect(["tapunselect"]):be.select(["tapselect"]):xe||(X.$(r).unmerge(be).unselect(["tapunselect"]),be.select(["tapselect"]))),t.redrawHint("eles",!0)),t.hoverData.selecting){var Se=X.collection(t.getAllInBox(ae[0],ae[1],ae[2],ae[3]));t.redrawHint("select",!0),Se.length>0&&t.redrawHint("eles",!0),X.emit(Ae("boxend"));var Fe=function(tt){return tt.selectable()&&!tt.selected()};X.selectionType()==="additive"||xe||X.$(r).unmerge(Se).unselect(),Se.emit(Ae("box")).stdFilter(Fe).select().emit(Ae("boxselect")),t.redraw()}if(t.hoverData.dragging&&(t.hoverData.dragging=!1,t.redrawHint("select",!0),t.redrawHint("eles",!0),t.redraw()),!ae[4]){t.redrawHint("drag",!0),t.redrawHint("eles",!0);var Ne=Te&&Te.grabbed();y(ce),Ne&&(Te.emit(Ae("freeon")),ce.emit(Ae("free")),t.dragData.didDrag&&(Te.emit(Ae("dragfreeon")),ce.emit(Ae("dragfree"))))}}ae[4]=0,t.hoverData.down=null,t.hoverData.cxtStarted=!1,t.hoverData.draggingEles=!1,t.hoverData.selecting=!1,t.hoverData.isOverThresholdDrag=!1,t.dragData.didDrag=!1,t.hoverData.dragged=!1,t.hoverData.dragDelta=[],t.hoverData.mdownPos=null,t.hoverData.mdownGPos=null,t.hoverData.which=null}}},!1);var N=[],O=4,I,F=1e5,H=function(P,U){for(var X=0;X<P.length;X++)if(P[X]%U!==0)return!1;return!0},G=function(P){for(var U=Math.abs(P[0]),X=1;X<P.length;X++)if(Math.abs(P[X])!==U)return!1;return!0},z=function(P){var U=!1,X=P.deltaY;if(X==null&&(P.wheelDeltaY!=null?X=P.wheelDeltaY/4:P.wheelDelta!=null&&(X=P.wheelDelta/4)),X!==0){if(I==null)if(N.length>=O){var Q=N;if(I=H(Q,5),!I){var ae=Math.abs(Q[0]);I=G(Q)&&ae>5}if(I)for(var be=0;be<Q.length;be++)F=Math.min(Math.abs(Q[be]),F)}else N.push(X),U=!0;else I&&(F=Math.min(Math.abs(X),F));if(!t.scrollingPage){var ce=t.cy,Te=ce.zoom(),xe=ce.pan(),Ae=t.projectIntoViewport(P.clientX,P.clientY),Oe=[Ae[0]*Te+xe.x,Ae[1]*Te+xe.y];if(t.hoverData.draggingEles||t.hoverData.dragging||t.hoverData.cxtStarted||D()){P.preventDefault();return}if(ce.panningEnabled()&&ce.userPanningEnabled()&&ce.zoomingEnabled()&&ce.userZoomingEnabled()){P.preventDefault(),t.data.wheelZooming=!0,clearTimeout(t.data.wheelTimeout),t.data.wheelTimeout=setTimeout(function(){t.data.wheelZooming=!1,t.redrawHint("eles",!0),t.redraw()},150);var Ie;U&&Math.abs(X)>5&&(X=Yl(X)*5),Ie=X/-250,I&&(Ie/=F,Ie*=3),Ie=Ie*t.wheelSensitivity;var Se=P.deltaMode===1;Se&&(Ie*=33);var Fe=ce.zoom()*Math.pow(10,Ie);P.type==="gesturechange"&&(Fe=t.gestureStartZoom*P.scale),ce.zoom({level:Fe,renderedPosition:{x:Oe[0],y:Oe[1]}}),ce.emit({type:P.type==="gesturechange"?"pinchzoom":"scrollzoom",originalEvent:P,position:{x:Ae[0],y:Ae[1]}})}}}};t.registerBinding(t.container,"wheel",z,!0),t.registerBinding(e,"scroll",function(P){t.scrollingPage=!0,clearTimeout(t.scrollingPageTimeout),t.scrollingPageTimeout=setTimeout(function(){t.scrollingPage=!1},250)},!0),t.registerBinding(t.container,"gesturestart",function(P){t.gestureStartZoom=t.cy.zoom(),t.hasTouchStarted||P.preventDefault()},!0),t.registerBinding(t.container,"gesturechange",function(ee){t.hasTouchStarted||z(ee)},!0),t.registerBinding(t.container,"mouseout",function(P){var U=t.projectIntoViewport(P.clientX,P.clientY);t.cy.emit({originalEvent:P,type:"mouseout",position:{x:U[0],y:U[1]}})},!1),t.registerBinding(t.container,"mouseover",function(P){var U=t.projectIntoViewport(P.clientX,P.clientY);t.cy.emit({originalEvent:P,type:"mouseover",position:{x:U[0],y:U[1]}})},!1);var V,re,ie,ne,oe,ve,ge,ue,q,$,C,B,_,K=function(P,U,X,Q){return Math.sqrt((X-P)*(X-P)+(Q-U)*(Q-U))},J=function(P,U,X,Q){return(X-P)*(X-P)+(Q-U)*(Q-U)},Z;t.registerBinding(t.container,"touchstart",Z=function(P){if(t.hasTouchStarted=!0,!!A(P)){b(),t.touchData.capture=!0,t.data.bgActivePosistion=void 0;var U=t.cy,X=t.touchData.now,Q=t.touchData.earlier;if(P.touches[0]){var ae=t.projectIntoViewport(P.touches[0].clientX,P.touches[0].clientY);X[0]=ae[0],X[1]=ae[1]}if(P.touches[1]){var ae=t.projectIntoViewport(P.touches[1].clientX,P.touches[1].clientY);X[2]=ae[0],X[3]=ae[1]}if(P.touches[2]){var ae=t.projectIntoViewport(P.touches[2].clientX,P.touches[2].clientY);X[4]=ae[0],X[5]=ae[1]}var be=function(mt){return{originalEvent:P,type:mt,position:{x:X[0],y:X[1]}}};if(P.touches[1]){t.touchData.singleTouchMoved=!0,y(t.dragData.touchDragEles);var ce=t.findContainerClientCoords();q=ce[0],$=ce[1],C=ce[2],B=ce[3],V=P.touches[0].clientX-q,re=P.touches[0].clientY-$,ie=P.touches[1].clientX-q,ne=P.touches[1].clientY-$,_=0<=V&&V<=C&&0<=ie&&ie<=C&&0<=re&&re<=B&&0<=ne&&ne<=B;var Te=U.pan(),xe=U.zoom();oe=K(V,re,ie,ne),ve=J(V,re,ie,ne),ge=[(V+ie)/2,(re+ne)/2],ue=[(ge[0]-Te.x)/xe,(ge[1]-Te.y)/xe];var Ae=200,Oe=Ae*Ae;if(ve<Oe&&!P.touches[2]){var Ie=t.findNearestElement(X[0],X[1],!0,!0),Se=t.findNearestElement(X[2],X[3],!0,!0);Ie&&Ie.isNode()?(Ie.activate().emit(be("cxttapstart")),t.touchData.start=Ie):Se&&Se.isNode()?(Se.activate().emit(be("cxttapstart")),t.touchData.start=Se):U.emit(be("cxttapstart")),t.touchData.start&&(t.touchData.start._private.grabbed=!1),t.touchData.cxt=!0,t.touchData.cxtDragged=!1,t.data.bgActivePosistion=void 0,t.redraw();return}}if(P.touches[2])U.boxSelectionEnabled()&&P.preventDefault();else if(!P.touches[1]){if(P.touches[0]){var Fe=t.findNearestElements(X[0],X[1],!0,!0),Ne=Fe[0];if(Ne!=null&&(Ne.activate(),t.touchData.start=Ne,t.touchData.starts=Fe,t.nodeIsGrabbable(Ne))){var ut=t.dragData.touchDragEles=U.collection(),tt=null;t.redrawHint("eles",!0),t.redrawHint("drag",!0),Ne.selected()?(tt=U.$(function(lt){return lt.selected()&&t.nodeIsGrabbable(lt)}),p(tt,{addToList:ut})):g(Ne,{addToList:ut}),c(Ne),Ne.emit(be("grabon")),tt?tt.forEach(function(lt){lt.emit(be("grab"))}):Ne.emit(be("grab"))}a(Ne,["touchstart","tapstart","vmousedown"],P,{x:X[0],y:X[1]}),Ne==null&&(t.data.bgActivePosistion={x:ae[0],y:ae[1]},t.redrawHint("select",!0),t.redraw()),t.touchData.singleTouchMoved=!1,t.touchData.singleTouchStartTime=+new Date,clearTimeout(t.touchData.tapholdTimeout),t.touchData.tapholdTimeout=setTimeout(function(){t.touchData.singleTouchMoved===!1&&!t.pinching&&!t.touchData.selecting&&a(t.touchData.start,["taphold"],P,{x:X[0],y:X[1]})},t.tapholdDuration)}}if(P.touches.length>=1){for(var Bt=t.touchData.startPosition=[null,null,null,null,null,null],nt=0;nt<X.length;nt++)Bt[nt]=Q[nt]=X[nt];var ht=P.touches[0];t.touchData.startGPosition=[ht.clientX,ht.clientY]}}},!1);var te;t.registerBinding(e,"touchmove",te=function(P){var U=t.touchData.capture;if(!(!U&&!A(P))){var X=t.selection,Q=t.cy,ae=t.touchData.now,be=t.touchData.earlier,ce=Q.zoom();if(P.touches[0]){var Te=t.projectIntoViewport(P.touches[0].clientX,P.touches[0].clientY);ae[0]=Te[0],ae[1]=Te[1]}if(P.touches[1]){var Te=t.projectIntoViewport(P.touches[1].clientX,P.touches[1].clientY);ae[2]=Te[0],ae[3]=Te[1]}if(P.touches[2]){var Te=t.projectIntoViewport(P.touches[2].clientX,P.touches[2].clientY);ae[4]=Te[0],ae[5]=Te[1]}var xe=function(Lp){return{originalEvent:P,type:Lp,position:{x:ae[0],y:ae[1]}}},Ae=t.touchData.startGPosition,Oe;if(U&&P.touches[0]&&Ae){for(var Ie=[],Se=0;Se<ae.length;Se++)Ie[Se]=ae[Se]-be[Se];var Fe=P.touches[0].clientX-Ae[0],Ne=Fe*Fe,ut=P.touches[0].clientY-Ae[1],tt=ut*ut,Bt=Ne+tt;Oe=Bt>=t.touchTapThreshold2}if(U&&t.touchData.cxt){P.preventDefault();var nt=P.touches[0].clientX-q,ht=P.touches[0].clientY-$,lt=P.touches[1].clientX-q,mt=P.touches[1].clientY-$,Vr=J(nt,ht,lt,mt),at=Vr/ve,xr=150,Er=xr*xr,Nn=1.5,Ci=Nn*Nn;if(at>=Ci||Vr>=Er){t.touchData.cxt=!1,t.data.bgActivePosistion=void 0,t.redrawHint("select",!0);var dn=xe("cxttapend");t.touchData.start?(t.touchData.start.unactivate().emit(dn),t.touchData.start=null):Q.emit(dn)}}if(U&&t.touchData.cxt){var dn=xe("cxtdrag");t.data.bgActivePosistion=void 0,t.redrawHint("select",!0),t.touchData.start?t.touchData.start.emit(dn):Q.emit(dn),t.touchData.start&&(t.touchData.start._private.grabbed=!1),t.touchData.cxtDragged=!0;var Ft=t.findNearestElement(ae[0],ae[1],!0,!0);(!t.touchData.cxtOver||Ft!==t.touchData.cxtOver)&&(t.touchData.cxtOver&&t.touchData.cxtOver.emit(xe("cxtdragout")),t.touchData.cxtOver=Ft,Ft&&Ft.emit(xe("cxtdragover")))}else if(U&&P.touches[2]&&Q.boxSelectionEnabled())P.preventDefault(),t.data.bgActivePosistion=void 0,this.lastThreeTouch=+new Date,t.touchData.selecting||Q.emit(xe("boxstart")),t.touchData.selecting=!0,t.touchData.didSelect=!0,X[4]=1,!X||X.length===0||X[0]===void 0?(X[0]=(ae[0]+ae[2]+ae[4])/3,X[1]=(ae[1]+ae[3]+ae[5])/3,X[2]=(ae[0]+ae[2]+ae[4])/3+1,X[3]=(ae[1]+ae[3]+ae[5])/3+1):(X[2]=(ae[0]+ae[2]+ae[4])/3,X[3]=(ae[1]+ae[3]+ae[5])/3),t.redrawHint("select",!0),t.redraw();else if(U&&P.touches[1]&&!t.touchData.didSelect&&Q.zoomingEnabled()&&Q.panningEnabled()&&Q.userZoomingEnabled()&&Q.userPanningEnabled()){P.preventDefault(),t.data.bgActivePosistion=void 0,t.redrawHint("select",!0);var Tt=t.dragData.touchDragEles;if(Tt){t.redrawHint("drag",!0);for(var _t=0;_t<Tt.length;_t++){var ya=Tt[_t]._private;ya.grabbed=!1,ya.rscratch.inDragLayer=!1}}var Wt=t.touchData.start,nt=P.touches[0].clientX-q,ht=P.touches[0].clientY-$,lt=P.touches[1].clientX-q,mt=P.touches[1].clientY-$,vf=K(nt,ht,lt,mt),Sp=vf/oe;if(_){var Pp=nt-V,Dp=ht-re,Ap=lt-ie,kp=mt-ne,Bp=(Pp+Ap)/2,Rp=(Dp+kp)/2,ma=Q.zoom(),eo=ma*Sp,Ti=Q.pan(),df=ue[0]*ma+Ti.x,hf=ue[1]*ma+Ti.y,Mp={x:-eo/ma*(df-Ti.x-Bp)+df,y:-eo/ma*(hf-Ti.y-Rp)+hf};if(Wt&&Wt.active()){var Tt=t.dragData.touchDragEles;y(Tt),t.redrawHint("drag",!0),t.redrawHint("eles",!0),Wt.unactivate().emit(xe("freeon")),Tt.emit(xe("free")),t.dragData.didDrag&&(Wt.emit(xe("dragfreeon")),Tt.emit(xe("dragfree")))}Q.viewport({zoom:eo,pan:Mp,cancelOnFailedZoom:!0}),Q.emit(xe("pinchzoom")),oe=vf,V=nt,re=ht,ie=lt,ne=mt,t.pinching=!0}if(P.touches[0]){var Te=t.projectIntoViewport(P.touches[0].clientX,P.touches[0].clientY);ae[0]=Te[0],ae[1]=Te[1]}if(P.touches[1]){var Te=t.projectIntoViewport(P.touches[1].clientX,P.touches[1].clientY);ae[2]=Te[0],ae[3]=Te[1]}if(P.touches[2]){var Te=t.projectIntoViewport(P.touches[2].clientX,P.touches[2].clientY);ae[4]=Te[0],ae[5]=Te[1]}}else if(P.touches[0]&&!t.touchData.didSelect){var Jt=t.touchData.start,to=t.touchData.last,Ft;if(!t.hoverData.draggingEles&&!t.swipePanning&&(Ft=t.findNearestElement(ae[0],ae[1],!0,!0)),U&&Jt!=null&&P.preventDefault(),U&&Jt!=null&&t.nodeIsDraggable(Jt))if(Oe){var Tt=t.dragData.touchDragEles,gf=!t.dragData.didDrag;gf&&p(Tt,{inDragLayer:!0}),t.dragData.didDrag=!0;var ba={x:0,y:0};if(he(Ie[0])&&he(Ie[1])&&(ba.x+=Ie[0],ba.y+=Ie[1],gf)){t.redrawHint("eles",!0);var jt=t.touchData.dragDelta;jt&&he(jt[0])&&he(jt[1])&&(ba.x+=jt[0],ba.y+=jt[1])}t.hoverData.draggingEles=!0,Tt.silentShift(ba).emit(xe("position")).emit(xe("drag")),t.redrawHint("drag",!0),t.touchData.startPosition[0]==be[0]&&t.touchData.startPosition[1]==be[1]&&t.redrawHint("eles",!0),t.redraw()}else{var jt=t.touchData.dragDelta=t.touchData.dragDelta||[];jt.length===0?(jt.push(Ie[0]),jt.push(Ie[1])):(jt[0]+=Ie[0],jt[1]+=Ie[1])}if(a(Jt||Ft,["touchmove","tapdrag","vmousemove"],P,{x:ae[0],y:ae[1]}),(!Jt||!Jt.grabbed())&&Ft!=to&&(to&&to.emit(xe("tapdragout")),Ft&&Ft.emit(xe("tapdragover"))),t.touchData.last=Ft,U)for(var _t=0;_t<ae.length;_t++)ae[_t]&&t.touchData.startPosition[_t]&&Oe&&(t.touchData.singleTouchMoved=!0);if(U&&(Jt==null||Jt.pannable())&&Q.panningEnabled()&&Q.userPanningEnabled()){var Ip=s(Jt,t.touchData.starts);Ip&&(P.preventDefault(),t.data.bgActivePosistion||(t.data.bgActivePosistion=Yn(t.touchData.startPosition)),t.swipePanning?(Q.panBy({x:Ie[0]*ce,y:Ie[1]*ce}),Q.emit(xe("dragpan"))):Oe&&(t.swipePanning=!0,Q.panBy({x:Fe*ce,y:ut*ce}),Q.emit(xe("dragpan")),Jt&&(Jt.unactivate(),t.redrawHint("select",!0),t.touchData.start=null)));var Te=t.projectIntoViewport(P.touches[0].clientX,P.touches[0].clientY);ae[0]=Te[0],ae[1]=Te[1]}}for(var Se=0;Se<ae.length;Se++)be[Se]=ae[Se];U&&P.touches.length>0&&!t.hoverData.draggingEles&&!t.swipePanning&&t.data.bgActivePosistion!=null&&(t.data.bgActivePosistion=void 0,t.redrawHint("select",!0),t.redraw())}},!1);var j;t.registerBinding(e,"touchcancel",j=function(P){var U=t.touchData.start;t.touchData.capture=!1,U&&U.unactivate()});var Y,W,fe,se;if(t.registerBinding(e,"touchend",Y=function(P){var U=t.touchData.start,X=t.touchData.capture;if(X)P.touches.length===0&&(t.touchData.capture=!1),P.preventDefault();else return;var Q=t.selection;t.swipePanning=!1,t.hoverData.draggingEles=!1;var ae=t.cy,be=ae.zoom(),ce=t.touchData.now,Te=t.touchData.earlier;if(P.touches[0]){var xe=t.projectIntoViewport(P.touches[0].clientX,P.touches[0].clientY);ce[0]=xe[0],ce[1]=xe[1]}if(P.touches[1]){var xe=t.projectIntoViewport(P.touches[1].clientX,P.touches[1].clientY);ce[2]=xe[0],ce[3]=xe[1]}if(P.touches[2]){var xe=t.projectIntoViewport(P.touches[2].clientX,P.touches[2].clientY);ce[4]=xe[0],ce[5]=xe[1]}var Ae=function(Er){return{originalEvent:P,type:Er,position:{x:ce[0],y:ce[1]}}};U&&U.unactivate();var Oe;if(t.touchData.cxt){if(Oe=Ae("cxttapend"),U?U.emit(Oe):ae.emit(Oe),!t.touchData.cxtDragged){var Ie=Ae("cxttap");U?U.emit(Ie):ae.emit(Ie)}t.touchData.start&&(t.touchData.start._private.grabbed=!1),t.touchData.cxt=!1,t.touchData.start=null,t.redraw();return}if(!P.touches[2]&&ae.boxSelectionEnabled()&&t.touchData.selecting){t.touchData.selecting=!1;var Se=ae.collection(t.getAllInBox(Q[0],Q[1],Q[2],Q[3]));Q[0]=void 0,Q[1]=void 0,Q[2]=void 0,Q[3]=void 0,Q[4]=0,t.redrawHint("select",!0),ae.emit(Ae("boxend"));var Fe=function(Er){return Er.selectable()&&!Er.selected()};Se.emit(Ae("box")).stdFilter(Fe).select().emit(Ae("boxselect")),Se.nonempty()&&t.redrawHint("eles",!0),t.redraw()}if(U?.unactivate(),P.touches[2])t.data.bgActivePosistion=void 0,t.redrawHint("select",!0);else if(!P.touches[1]){if(!P.touches[0]){if(!P.touches[0]){t.data.bgActivePosistion=void 0,t.redrawHint("select",!0);var Ne=t.dragData.touchDragEles;if(U!=null){var ut=U._private.grabbed;y(Ne),t.redrawHint("drag",!0),t.redrawHint("eles",!0),ut&&(U.emit(Ae("freeon")),Ne.emit(Ae("free")),t.dragData.didDrag&&(U.emit(Ae("dragfreeon")),Ne.emit(Ae("dragfree")))),a(U,["touchend","tapend","vmouseup","tapdragout"],P,{x:ce[0],y:ce[1]}),U.unactivate(),t.touchData.start=null}else{var tt=t.findNearestElement(ce[0],ce[1],!0,!0);a(tt,["touchend","tapend","vmouseup","tapdragout"],P,{x:ce[0],y:ce[1]})}var Bt=t.touchData.startPosition[0]-ce[0],nt=Bt*Bt,ht=t.touchData.startPosition[1]-ce[1],lt=ht*ht,mt=nt+lt,Vr=mt*be*be;t.touchData.singleTouchMoved||(U||ae.$(":selected").unselect(["tapunselect"]),a(U,["tap","vclick"],P,{x:ce[0],y:ce[1]}),W=!1,P.timeStamp-se<=ae.multiClickDebounceTime()?(fe&&clearTimeout(fe),W=!0,se=null,a(U,["dbltap","vdblclick"],P,{x:ce[0],y:ce[1]})):(fe=setTimeout(function(){W||a(U,["onetap","voneclick"],P,{x:ce[0],y:ce[1]})},ae.multiClickDebounceTime()),se=P.timeStamp)),U!=null&&!t.dragData.didDrag&&U._private.selectable&&Vr<t.touchTapThreshold2&&!t.pinching&&(ae.selectionType()==="single"?(ae.$(r).unmerge(U).unselect(["tapunselect"]),U.select(["tapselect"])):U.selected()?U.unselect(["tapunselect"]):U.select(["tapselect"]),t.redrawHint("eles",!0)),t.touchData.singleTouchMoved=!0}}}for(var at=0;at<ce.length;at++)Te[at]=ce[at];t.dragData.didDrag=!1,P.touches.length===0&&(t.touchData.dragDelta=[],t.touchData.startPosition=[null,null,null,null,null,null],t.touchData.startGPosition=null,t.touchData.didSelect=!1),P.touches.length<2&&(P.touches.length===1&&(t.touchData.startGPosition=[P.touches[0].clientX,P.touches[0].clientY]),t.pinching=!1,t.redrawHint("eles",!0),t.redraw())},!1),typeof TouchEvent>"u"){var le=[],de=function(P){return{clientX:P.clientX,clientY:P.clientY,force:1,identifier:P.pointerId,pageX:P.pageX,pageY:P.pageY,radiusX:P.width/2,radiusY:P.height/2,screenX:P.screenX,screenY:P.screenY,target:P.target}},ye=function(P){return{event:P,touch:de(P)}},Pe=function(P){le.push(ye(P))},Ce=function(P){for(var U=0;U<le.length;U++){var X=le[U];if(X.event.pointerId===P.pointerId){le.splice(U,1);return}}},Re=function(P){var U=le.filter(function(X){return X.event.pointerId===P.pointerId})[0];U.event=P,U.touch=de(P)},Ee=function(P){P.touches=le.map(function(U){return U.touch})},pe=function(P){return P.pointerType==="mouse"||P.pointerType===4};t.registerBinding(t.container,"pointerdown",function(ee){pe(ee)||(ee.preventDefault(),Pe(ee),Ee(ee),Z(ee))}),t.registerBinding(t.container,"pointerup",function(ee){pe(ee)||(Ce(ee),Ee(ee),Y(ee))}),t.registerBinding(t.container,"pointercancel",function(ee){pe(ee)||(Ce(ee),Ee(ee),j(ee))}),t.registerBinding(t.container,"pointermove",function(ee){pe(ee)||(ee.preventDefault(),Re(ee),Ee(ee),te(ee))})}};var _r={};_r.generatePolygon=function(t,e){return this.nodeShapes[t]={renderer:this,name:t,points:e,draw:function(n,a,i,s,o,u){this.renderer.nodeShapeImpl("polygon",n,a,i,s,o,this.points)},intersectLine:function(n,a,i,s,o,u,l,f){return ti(o,u,this.points,n,a,i/2,s/2,l)},checkPoint:function(n,a,i,s,o,u,l,f){return Nr(n,a,this.points,u,l,s,o,[0,-1],i)},hasMiterBounds:t!=="rectangle",miterBounds:function(n,a,i,s,o,u){return Ob(this.points,n,a,i,s,o)}}};_r.generateEllipse=function(){return this.nodeShapes.ellipse={renderer:this,name:"ellipse",draw:function(e,r,n,a,i,s){this.renderer.nodeShapeImpl(this.name,e,r,n,a,i)},intersectLine:function(e,r,n,a,i,s,o,u){return $b(i,s,e,r,n/2+o,a/2+o)},checkPoint:function(e,r,n,a,i,s,o,u){return Tn(e,r,a,i,s,o,n)}}};_r.generateRoundPolygon=function(t,e){return this.nodeShapes[t]={renderer:this,name:t,points:e,getOrCreateCorners:function(n,a,i,s,o,u,l){if(u[l]!==void 0&&u[l+"-cx"]===n&&u[l+"-cy"]===a)return u[l];u[l]=new Array(e.length/2),u[l+"-cx"]=n,u[l+"-cy"]=a;var f=i/2,c=s/2;o=o==="auto"?ng(i,s):o;for(var v=new Array(e.length/2),h=0;h<e.length/2;h++)v[h]={x:n+f*e[h*2],y:a+c*e[h*2+1]};var d,p,g,y,m=v.length;for(p=v[m-1],d=0;d<m;d++)g=v[d%m],y=v[(d+1)%m],u[l][d]=uf(p,g,y,o),p=g,g=y;return u[l]},draw:function(n,a,i,s,o,u,l){this.renderer.nodeShapeImpl("round-polygon",n,a,i,s,o,this.points,this.getOrCreateCorners(a,i,s,o,u,l,"drawCorners"))},intersectLine:function(n,a,i,s,o,u,l,f,c){return Gb(o,u,this.points,n,a,i,s,l,this.getOrCreateCorners(n,a,i,s,f,c,"corners"))},checkPoint:function(n,a,i,s,o,u,l,f,c){return Hb(n,a,this.points,u,l,s,o,this.getOrCreateCorners(u,l,s,o,f,c,"corners"))}}};_r.generateRoundRectangle=function(){return this.nodeShapes["round-rectangle"]=this.nodeShapes.roundrectangle={renderer:this,name:"round-rectangle",points:Mt(4,0),draw:function(e,r,n,a,i,s){this.renderer.nodeShapeImpl(this.name,e,r,n,a,i,this.points,s)},intersectLine:function(e,r,n,a,i,s,o,u){return tg(i,s,e,r,n,a,o,u)},checkPoint:function(e,r,n,a,i,s,o,u){var l=a/2,f=i/2;u=u==="auto"?nn(a,i):u,u=Math.min(l,f,u);var c=u*2;return!!(Nr(e,r,this.points,s,o,a,i-c,[0,-1],n)||Nr(e,r,this.points,s,o,a-c,i,[0,-1],n)||Tn(e,r,c,c,s-l+u,o-f+u,n)||Tn(e,r,c,c,s+l-u,o-f+u,n)||Tn(e,r,c,c,s+l-u,o+f-u,n)||Tn(e,r,c,c,s-l+u,o+f-u,n))}}};_r.generateCutRectangle=function(){return this.nodeShapes["cut-rectangle"]=this.nodeShapes.cutrectangle={renderer:this,name:"cut-rectangle",cornerLength:Zl(),points:Mt(4,0),draw:function(e,r,n,a,i,s){this.renderer.nodeShapeImpl(this.name,e,r,n,a,i,null,s)},generateCutTrianglePts:function(e,r,n,a,i){var s=i==="auto"?this.cornerLength:i,o=r/2,u=e/2,l=n-u,f=n+u,c=a-o,v=a+o;return{topLeft:[l,c+s,l+s,c,l+s,c+s],topRight:[f-s,c,f,c+s,f-s,c+s],bottomRight:[f,v-s,f-s,v,f-s,v-s],bottomLeft:[l+s,v,l,v-s,l+s,v-s]}},intersectLine:function(e,r,n,a,i,s,o,u){var l=this.generateCutTrianglePts(n+2*o,a+2*o,e,r,u),f=[].concat.apply([],[l.topLeft.splice(0,4),l.topRight.splice(0,4),l.bottomRight.splice(0,4),l.bottomLeft.splice(0,4)]);return ti(i,s,f,e,r)},checkPoint:function(e,r,n,a,i,s,o,u){var l=u==="auto"?this.cornerLength:u;if(Nr(e,r,this.points,s,o,a,i-2*l,[0,-1],n)||Nr(e,r,this.points,s,o,a-2*l,i,[0,-1],n))return!0;var f=this.generateCutTrianglePts(a,i,s,o);return Ht(e,r,f.topLeft)||Ht(e,r,f.topRight)||Ht(e,r,f.bottomRight)||Ht(e,r,f.bottomLeft)}}};_r.generateBarrel=function(){return this.nodeShapes.barrel={renderer:this,name:"barrel",points:Mt(4,0),draw:function(e,r,n,a,i,s){this.renderer.nodeShapeImpl(this.name,e,r,n,a,i)},intersectLine:function(e,r,n,a,i,s,o,u){var l=.15,f=.5,c=.85,v=this.generateBarrelBezierPts(n+2*o,a+2*o,e,r),h=function(g){var y=ra({x:g[0],y:g[1]},{x:g[2],y:g[3]},{x:g[4],y:g[5]},l),m=ra({x:g[0],y:g[1]},{x:g[2],y:g[3]},{x:g[4],y:g[5]},f),b=ra({x:g[0],y:g[1]},{x:g[2],y:g[3]},{x:g[4],y:g[5]},c);return[g[0],g[1],y.x,y.y,m.x,m.y,b.x,b.y,g[4],g[5]]},d=[].concat(h(v.topLeft),h(v.topRight),h(v.bottomRight),h(v.bottomLeft));return ti(i,s,d,e,r)},generateBarrelBezierPts:function(e,r,n,a){var i=r/2,s=e/2,o=n-s,u=n+s,l=a-i,f=a+i,c=al(e,r),v=c.heightOffset,h=c.widthOffset,d=c.ctrlPtOffsetPct*e,p={topLeft:[o,l+v,o+d,l,o+h,l],topRight:[u-h,l,u-d,l,u,l+v],bottomRight:[u,f-v,u-d,f,u-h,f],bottomLeft:[o+h,f,o+d,f,o,f-v]};return p.topLeft.isTop=!0,p.topRight.isTop=!0,p.bottomLeft.isBottom=!0,p.bottomRight.isBottom=!0,p},checkPoint:function(e,r,n,a,i,s,o,u){var l=al(a,i),f=l.heightOffset,c=l.widthOffset;if(Nr(e,r,this.points,s,o,a,i-2*f,[0,-1],n)||Nr(e,r,this.points,s,o,a-2*c,i,[0,-1],n))return!0;for(var v=this.generateBarrelBezierPts(a,i,s,o),h=function(S,D,A){var k=A[4],R=A[2],M=A[0],L=A[5],N=A[1],O=Math.min(k,M),I=Math.max(k,M),F=Math.min(L,N),H=Math.max(L,N);if(O<=S&&S<=I&&F<=D&&D<=H){var G=Wb(k,R,M),z=_b(G[0],G[1],G[2],S),V=z.filter(function(re){return 0<=re&&re<=1});if(V.length>0)return V[0]}return null},d=Object.keys(v),p=0;p<d.length;p++){var g=d[p],y=v[g],m=h(e,r,y);if(m!=null){var b=y[5],w=y[3],E=y[1],T=gt(b,w,E,m);if(y.isTop&&T<=r||y.isBottom&&r<=T)return!0}}return!1}}};_r.generateBottomRoundrectangle=function(){return this.nodeShapes["bottom-round-rectangle"]=this.nodeShapes.bottomroundrectangle={renderer:this,name:"bottom-round-rectangle",points:Mt(4,0),draw:function(e,r,n,a,i,s){this.renderer.nodeShapeImpl(this.name,e,r,n,a,i,this.points,s)},intersectLine:function(e,r,n,a,i,s,o,u){var l=e-(n/2+o),f=r-(a/2+o),c=f,v=e+(n/2+o),h=Xr(i,s,e,r,l,f,v,c,!1);return h.length>0?h:tg(i,s,e,r,n,a,o,u)},checkPoint:function(e,r,n,a,i,s,o,u){u=u==="auto"?nn(a,i):u;var l=2*u;if(Nr(e,r,this.points,s,o,a,i-l,[0,-1],n)||Nr(e,r,this.points,s,o,a-l,i,[0,-1],n))return!0;var f=a/2+2*n,c=i/2+2*n,v=[s-f,o-c,s-f,o,s+f,o,s+f,o-c];return!!(Ht(e,r,v)||Tn(e,r,l,l,s+a/2-u,o+i/2-u,n)||Tn(e,r,l,l,s-a/2+u,o+i/2-u,n))}}};_r.registerNodeShapes=function(){var t=this.nodeShapes={},e=this;this.generateEllipse(),this.generatePolygon("triangle",Mt(3,0)),this.generateRoundPolygon("round-triangle",Mt(3,0)),this.generatePolygon("rectangle",Mt(4,0)),t.square=t.rectangle,this.generateRoundRectangle(),this.generateCutRectangle(),this.generateBarrel(),this.generateBottomRoundrectangle();{var r=[0,1,1,0,0,-1,-1,0];this.generatePolygon("diamond",r),this.generateRoundPolygon("round-diamond",r)}this.generatePolygon("pentagon",Mt(5,0)),this.generateRoundPolygon("round-pentagon",Mt(5,0)),this.generatePolygon("hexagon",Mt(6,0)),this.generateRoundPolygon("round-hexagon",Mt(6,0)),this.generatePolygon("heptagon",Mt(7,0)),this.generateRoundPolygon("round-heptagon",Mt(7,0)),this.generatePolygon("octagon",Mt(8,0)),this.generateRoundPolygon("round-octagon",Mt(8,0));var n=new Array(20);{var a=nl(5,0),i=nl(5,Math.PI/5),s=.5*(3-Math.sqrt(5));s*=1.57;for(var o=0;o<i.length/2;o++)i[o*2]*=s,i[o*2+1]*=s;for(var o=0;o<20/4;o++)n[o*4]=a[o*2],n[o*4+1]=a[o*2+1],n[o*4+2]=i[o*2],n[o*4+3]=i[o*2+1]}n=rg(n),this.generatePolygon("star",n),this.generatePolygon("vee",[-1,-1,0,-.333,1,-1,0,1]),this.generatePolygon("rhomboid",[-1,-1,.333,-1,1,1,-.333,1]),this.generatePolygon("right-rhomboid",[-.333,-1,1,-1,.333,1,-1,1]),this.nodeShapes.concavehexagon=this.generatePolygon("concave-hexagon",[-1,-.95,-.75,0,-1,.95,1,.95,.75,0,1,-.95]);{var u=[-1,-1,.25,-1,1,0,.25,1,-1,1];this.generatePolygon("tag",u),this.generateRoundPolygon("round-tag",u)}t.makePolygon=function(l){var f=l.join("$"),c="polygon-"+f,v;return(v=this[c])?v:e.generatePolygon(c,l)}};var xi={};xi.timeToRender=function(){return this.redrawTotalTime/this.redrawCount};xi.redraw=function(t){t=t||Qh();var e=this;e.averageRedrawTime===void 0&&(e.averageRedrawTime=0),e.lastRedrawTime===void 0&&(e.lastRedrawTime=0),e.lastDrawTime===void 0&&(e.lastDrawTime=0),e.requestedFrame=!0,e.renderOptions=t};xi.beforeRender=function(t,e){if(!this.destroyed){e==null&&je("Priority is not optional for beforeRender");var r=this.beforeRenderCallbacks;r.push({fn:t,priority:e}),r.sort(function(n,a){return a.priority-n.priority})}};var ud=function(e,r,n){for(var a=e.beforeRenderCallbacks,i=0;i<a.length;i++)a[i].fn(r,n)};xi.startRenderLoop=function(){var t=this,e=t.cy;if(!t.renderLoopStarted){t.renderLoopStarted=!0;var r=function(a){if(!t.destroyed){if(!e.batching())if(t.requestedFrame&&!t.skipFrame){ud(t,!0,a);var i=Or();t.render(t.renderOptions);var s=t.lastDrawTime=Or();t.averageRedrawTime===void 0&&(t.averageRedrawTime=s-i),t.redrawCount===void 0&&(t.redrawCount=0),t.redrawCount++,t.redrawTotalTime===void 0&&(t.redrawTotalTime=0);var o=s-i;t.redrawTotalTime+=o,t.lastRedrawTime=o,t.averageRedrawTime=t.averageRedrawTime/2+o/2,t.requestedFrame=!1}else ud(t,!1,a);t.skipFrame=!1,vs(r)}};vs(r)}};var uE=function(e){this.init(e)},np=uE,pa=np.prototype;pa.clientFunctions=["redrawHint","render","renderTo","matchCanvasSize","nodeShapeImpl","arrowShapeImpl"];pa.init=function(t){var e=this;e.options=t,e.cy=t.cy;var r=e.container=t.cy.container(),n=e.cy.window();if(n){var a=n.document,i=a.head,s="__________cytoscape_stylesheet",o="__________cytoscape_container",u=a.getElementById(s)!=null;if(r.className.indexOf(o)<0&&(r.className=(r.className||"")+" "+o),!u){var l=a.createElement("style");l.id=s,l.textContent="."+o+" { position: relative; }",i.insertBefore(l,i.children[0])}var f=n.getComputedStyle(r),c=f.getPropertyValue("position");c==="static"&&Ue("A Cytoscape container has style position:static and so can not use UI extensions properly")}e.selection=[void 0,void 0,void 0,void 0,0],e.bezierProjPcts=[.05,.225,.4,.5,.6,.775,.95],e.hoverData={down:null,last:null,downTime:null,triggerMode:null,dragging:!1,initialPan:[null,null],capture:!1},e.dragData={possibleDragElements:[]},e.touchData={start:null,capture:!1,startPosition:[null,null,null,null,null,null],singleTouchStartTime:null,singleTouchMoved:!0,now:[null,null,null,null,null,null],earlier:[null,null,null,null,null,null]},e.redraws=0,e.showFps=t.showFps,e.debug=t.debug,e.webgl=t.webgl,e.hideEdgesOnViewport=t.hideEdgesOnViewport,e.textureOnViewport=t.textureOnViewport,e.wheelSensitivity=t.wheelSensitivity,e.motionBlurEnabled=t.motionBlur,e.forcedPixelRatio=he(t.pixelRatio)?t.pixelRatio:null,e.motionBlur=t.motionBlur,e.motionBlurOpacity=t.motionBlurOpacity,e.motionBlurTransparency=1-e.motionBlurOpacity,e.motionBlurPxRatio=1,e.mbPxRBlurry=1,e.minMbLowQualFrames=4,e.fullQualityMb=!1,e.clearedForMotionBlur=[],e.desktopTapThreshold=t.desktopTapThreshold,e.desktopTapThreshold2=t.desktopTapThreshold*t.desktopTapThreshold,e.touchTapThreshold=t.touchTapThreshold,e.touchTapThreshold2=t.touchTapThreshold*t.touchTapThreshold,e.tapholdDuration=500,e.bindings=[],e.beforeRenderCallbacks=[],e.beforeRenderPriorities={animations:400,eleCalcs:300,eleTxrDeq:200,lyrTxrDeq:150,lyrTxrSkip:100},e.registerNodeShapes(),e.registerArrowShapes(),e.registerCalculationListeners()};pa.notify=function(t,e){var r=this,n=r.cy;if(!this.destroyed){if(t==="init"){r.load();return}if(t==="destroy"){r.destroy();return}(t==="add"||t==="remove"||t==="move"&&n.hasCompoundNodes()||t==="load"||t==="zorder"||t==="mount")&&r.invalidateCachedZSortedEles(),t==="viewport"&&r.redrawHint("select",!0),t==="gc"&&r.redrawHint("gc",!0),(t==="load"||t==="resize"||t==="mount")&&(r.invalidateContainerClientCoordsCache(),r.matchCanvasSize(r.container)),r.redrawHint("eles",!0),r.redrawHint("drag",!0),this.startRenderLoop(),this.redraw()}};pa.destroy=function(){var t=this;t.destroyed=!0,t.cy.stopAnimationLoop();for(var e=0;e<t.bindings.length;e++){var r=t.bindings[e],n=r,a=n.target;(a.off||a.removeEventListener).apply(a,n.args)}if(t.bindings=[],t.beforeRenderCallbacks=[],t.onUpdateEleCalcsFns=[],t.removeObserver&&t.removeObserver.disconnect(),t.styleObserver&&t.styleObserver.disconnect(),t.resizeObserver&&t.resizeObserver.disconnect(),t.labelCalcDiv)try{document.body.removeChild(t.labelCalcDiv)}catch{}};pa.isHeadless=function(){return!1};[of,tp,rp,ga,_r,xi].forEach(function(t){ke(pa,t)});var Fu=1e3/60,ap={setupDequeueing:function(e){return function(){var n=this,a=this.renderer;if(!n.dequeueingSetup){n.dequeueingSetup=!0;var i=pi(function(){a.redrawHint("eles",!0),a.redrawHint("drag",!0),a.redraw()},e.deqRedrawThreshold),s=function(l,f){var c=Or(),v=a.averageRedrawTime,h=a.lastRedrawTime,d=[],p=a.cy.extent(),g=a.getPixelRatio();for(l||a.flushRenderedStyleQueue();;){var y=Or(),m=y-c,b=y-f;if(h<Fu){var w=Fu-(l?v:0);if(b>=e.deqFastCost*w)break}else if(l){if(m>=e.deqCost*h||m>=e.deqAvgCost*v)break}else if(b>=e.deqNoDrawCost*Fu)break;var E=e.deq(n,g,p);if(E.length>0)for(var T=0;T<E.length;T++)d.push(E[T]);else break}d.length>0&&(e.onDeqd(n,d),!l&&e.shouldRedraw(n,d,g,p)&&i())},o=e.priority||Gl;a.beforeRender(s,o(n))}}}},lE=(function(){function t(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ds;un(this,t),this.idsByKey=new Rr,this.keyForId=new Rr,this.cachesByLvl=new Rr,this.lvls=[],this.getKey=e,this.doesEleInvalidateKey=r}return ln(t,[{key:"getIdsFor",value:function(r){r==null&&je("Can not get id list for null key");var n=this.idsByKey,a=this.idsByKey.get(r);return a||(a=new ca,n.set(r,a)),a}},{key:"addIdForKey",value:function(r,n){r!=null&&this.getIdsFor(r).add(n)}},{key:"deleteIdForKey",value:function(r,n){r!=null&&this.getIdsFor(r).delete(n)}},{key:"getNumberOfIdsForKey",value:function(r){return r==null?0:this.getIdsFor(r).size}},{key:"updateKeyMappingFor",value:function(r){var n=r.id(),a=this.keyForId.get(n),i=this.getKey(r);this.deleteIdForKey(a,n),this.addIdForKey(i,n),this.keyForId.set(n,i)}},{key:"deleteKeyMappingFor",value:function(r){var n=r.id(),a=this.keyForId.get(n);this.deleteIdForKey(a,n),this.keyForId.delete(n)}},{key:"keyHasChangedFor",value:function(r){var n=r.id(),a=this.keyForId.get(n),i=this.getKey(r);return a!==i}},{key:"isInvalid",value:function(r){return this.keyHasChangedFor(r)||this.doesEleInvalidateKey(r)}},{key:"getCachesAt",value:function(r){var n=this.cachesByLvl,a=this.lvls,i=n.get(r);return i||(i=new Rr,n.set(r,i),a.push(r)),i}},{key:"getCache",value:function(r,n){return this.getCachesAt(n).get(r)}},{key:"get",value:function(r,n){var a=this.getKey(r),i=this.getCache(a,n);return i!=null&&this.updateKeyMappingFor(r),i}},{key:"getForCachedKey",value:function(r,n){var a=this.keyForId.get(r.id()),i=this.getCache(a,n);return i}},{key:"hasCache",value:function(r,n){return this.getCachesAt(n).has(r)}},{key:"has",value:function(r,n){var a=this.getKey(r);return this.hasCache(a,n)}},{key:"setCache",value:function(r,n,a){a.key=r,this.getCachesAt(n).set(r,a)}},{key:"set",value:function(r,n,a){var i=this.getKey(r);this.setCache(i,n,a),this.updateKeyMappingFor(r)}},{key:"deleteCache",value:function(r,n){this.getCachesAt(n).delete(r)}},{key:"delete",value:function(r,n){var a=this.getKey(r);this.deleteCache(a,n)}},{key:"invalidateKey",value:function(r){var n=this;this.lvls.forEach(function(a){return n.deleteCache(r,a)})}},{key:"invalidate",value:function(r){var n=r.id(),a=this.keyForId.get(n);this.deleteKeyMappingFor(r);var i=this.doesEleInvalidateKey(r);return i&&this.invalidateKey(a),i||this.getNumberOfIdsForKey(a)===0}}])})(),ld=25,zi=50,es=-4,yl=3,ip=7.99,fE=8,cE=1024,vE=1024,dE=1024,hE=.2,gE=.8,pE=10,yE=.15,mE=.1,bE=.9,wE=.9,xE=100,EE=1,Zn={dequeue:"dequeue",downscale:"downscale",highQuality:"highQuality"},CE=Et({getKey:null,doesEleInvalidateKey:ds,drawElement:null,getBoundingBox:null,getRotationPoint:null,getRotationOffset:null,isVisible:Yh,allowEdgeTxrCaching:!0,allowParentTxrCaching:!0}),La=function(e,r){var n=this;n.renderer=e,n.onDequeues=[];var a=CE(r);ke(n,a),n.lookup=new lE(a.getKey,a.doesEleInvalidateKey),n.setupDequeueing()},dt=La.prototype;dt.reasons=Zn;dt.getTextureQueue=function(t){var e=this;return e.eleImgCaches=e.eleImgCaches||{},e.eleImgCaches[t]=e.eleImgCaches[t]||[]};dt.getRetiredTextureQueue=function(t){var e=this,r=e.eleImgCaches.retired=e.eleImgCaches.retired||{},n=r[t]=r[t]||[];return n};dt.getElementQueue=function(){var t=this,e=t.eleCacheQueue=t.eleCacheQueue||new yi(function(r,n){return n.reqs-r.reqs});return e};dt.getElementKeyToQueue=function(){var t=this,e=t.eleKeyToCacheQueue=t.eleKeyToCacheQueue||{};return e};dt.getElement=function(t,e,r,n,a){var i=this,s=this.renderer,o=s.cy.zoom(),u=this.lookup;if(!e||e.w===0||e.h===0||isNaN(e.w)||isNaN(e.h)||!t.visible()||t.removed()||!i.allowEdgeTxrCaching&&t.isEdge()||!i.allowParentTxrCaching&&t.isParent())return null;if(n==null&&(n=Math.ceil(Kl(o*r))),n<es)n=es;else if(o>=ip||n>yl)return null;var l=Math.pow(2,n),f=e.h*l,c=e.w*l,v=s.eleTextBiggerThanMin(t,l);if(!this.isVisible(t,v))return null;var h=u.get(t,n);if(h&&h.invalidated&&(h.invalidated=!1,h.texture.invalidatedWidth-=h.width),h)return h;var d;if(f<=ld?d=ld:f<=zi?d=zi:d=Math.ceil(f/zi)*zi,f>dE||c>vE)return null;var p=i.getTextureQueue(d),g=p[p.length-2],y=function(){return i.recycleTexture(d,c)||i.addTexture(d,c)};g||(g=p[p.length-1]),g||(g=y()),g.width-g.usedWidth<c&&(g=y());for(var m=function(O){return O&&O.scaledLabelShown===v},b=a&&a===Zn.dequeue,w=a&&a===Zn.highQuality,E=a&&a===Zn.downscale,T,x=n+1;x<=yl;x++){var S=u.get(t,x);if(S){T=S;break}}var D=T&&T.level===n+1?T:null,A=function(){g.context.drawImage(D.texture.canvas,D.x,0,D.width,D.height,g.usedWidth,0,c,f)};if(g.context.setTransform(1,0,0,1,0,0),g.context.clearRect(g.usedWidth,0,c,d),m(D))A();else if(m(T))if(w){for(var k=T.level;k>n;k--)D=i.getElement(t,e,r,k,Zn.downscale);A()}else return i.queueElement(t,T.level-1),T;else{var R;if(!b&&!w&&!E)for(var M=n-1;M>=es;M--){var L=u.get(t,M);if(L){R=L;break}}if(m(R))return i.queueElement(t,n),R;g.context.translate(g.usedWidth,0),g.context.scale(l,l),this.drawElement(g.context,t,e,v,!1),g.context.scale(1/l,1/l),g.context.translate(-g.usedWidth,0)}return h={x:g.usedWidth,texture:g,level:n,scale:l,width:c,height:f,scaledLabelShown:v},g.usedWidth+=Math.ceil(c+fE),g.eleCaches.push(h),u.set(t,n,h),i.checkTextureFullness(g),h};dt.invalidateElements=function(t){for(var e=0;e<t.length;e++)this.invalidateElement(t[e])};dt.invalidateElement=function(t){var e=this,r=e.lookup,n=[],a=r.isInvalid(t);if(a){for(var i=es;i<=yl;i++){var s=r.getForCachedKey(t,i);s&&n.push(s)}var o=r.invalidate(t);if(o)for(var u=0;u<n.length;u++){var l=n[u],f=l.texture;f.invalidatedWidth+=l.width,l.invalidated=!0,e.checkTextureUtility(f)}e.removeFromQueue(t)}};dt.checkTextureUtility=function(t){t.invalidatedWidth>=hE*t.width&&this.retireTexture(t)};dt.checkTextureFullness=function(t){var e=this,r=e.getTextureQueue(t.height);t.usedWidth/t.width>gE&&t.fullnessChecks>=pE?rn(r,t):t.fullnessChecks++};dt.retireTexture=function(t){var e=this,r=t.height,n=e.getTextureQueue(r),a=this.lookup;rn(n,t),t.retired=!0;for(var i=t.eleCaches,s=0;s<i.length;s++){var o=i[s];a.deleteCache(o.key,o.level)}Wl(i);var u=e.getRetiredTextureQueue(r);u.push(t)};dt.addTexture=function(t,e){var r=this,n=r.getTextureQueue(t),a={};return n.push(a),a.eleCaches=[],a.height=t,a.width=Math.max(cE,e),a.usedWidth=0,a.invalidatedWidth=0,a.fullnessChecks=0,a.canvas=r.renderer.makeOffscreenCanvas(a.width,a.height),a.context=a.canvas.getContext("2d"),a};dt.recycleTexture=function(t,e){for(var r=this,n=r.getTextureQueue(t),a=r.getRetiredTextureQueue(t),i=0;i<a.length;i++){var s=a[i];if(s.width>=e)return s.retired=!1,s.usedWidth=0,s.invalidatedWidth=0,s.fullnessChecks=0,Wl(s.eleCaches),s.context.setTransform(1,0,0,1,0,0),s.context.clearRect(0,0,s.width,s.height),rn(a,s),n.push(s),s}};dt.queueElement=function(t,e){var r=this,n=r.getElementQueue(),a=r.getElementKeyToQueue(),i=this.getKey(t),s=a[i];if(s)s.level=Math.max(s.level,e),s.eles.merge(t),s.reqs++,n.updateItem(s);else{var o={eles:t.spawn().merge(t),level:e,reqs:1,key:i};n.push(o),a[i]=o}};dt.dequeue=function(t){for(var e=this,r=e.getElementQueue(),n=e.getElementKeyToQueue(),a=[],i=e.lookup,s=0;s<EE&&r.size()>0;s++){var o=r.pop(),u=o.key,l=o.eles[0],f=i.hasCache(l,o.level);if(n[u]=null,f)continue;a.push(o);var c=e.getBoundingBox(l);e.getElement(l,c,t,o.level,Zn.dequeue)}return a};dt.removeFromQueue=function(t){var e=this,r=e.getElementQueue(),n=e.getElementKeyToQueue(),a=this.getKey(t),i=n[a];i!=null&&(i.eles.length===1?(i.reqs=Ul,r.updateItem(i),r.pop(),n[a]=null):i.eles.unmerge(t))};dt.onDequeue=function(t){this.onDequeues.push(t)};dt.offDequeue=function(t){rn(this.onDequeues,t)};dt.setupDequeueing=ap.setupDequeueing({deqRedrawThreshold:xE,deqCost:yE,deqAvgCost:mE,deqNoDrawCost:bE,deqFastCost:wE,deq:function(e,r,n){return e.dequeue(r,n)},onDeqd:function(e,r){for(var n=0;n<e.onDequeues.length;n++){var a=e.onDequeues[n];a(r)}},shouldRedraw:function(e,r,n,a){for(var i=0;i<r.length;i++)for(var s=r[i].eles,o=0;o<s.length;o++){var u=s[o].boundingBox();if(Xl(u,a))return!0}return!1},priority:function(e){return e.renderer.beforeRenderPriorities.eleTxrDeq}});var TE=1,Ua=-4,xs=2,SE=3.99,PE=50,DE=50,AE=.15,kE=.1,BE=.9,RE=.9,ME=1,fd=250,IE=4e3*4e3,cd=32767,LE=!0,sp=function(e){var r=this,n=r.renderer=e,a=n.cy;r.layersByLevel={},r.firstGet=!0,r.lastInvalidationTime=Or()-2*fd,r.skipping=!1,r.eleTxrDeqs=a.collection(),r.scheduleElementRefinement=pi(function(){r.refineElementTextures(r.eleTxrDeqs),r.eleTxrDeqs.unmerge(r.eleTxrDeqs)},DE),n.beforeRender(function(s,o){o-r.lastInvalidationTime<=fd?r.skipping=!0:r.skipping=!1},n.beforeRenderPriorities.lyrTxrSkip);var i=function(o,u){return u.reqs-o.reqs};r.layersQueue=new yi(i),r.setupDequeueing()},Ct=sp.prototype,vd=0,OE=Math.pow(2,53)-1;Ct.makeLayer=function(t,e){var r=Math.pow(2,e),n=Math.ceil(t.w*r),a=Math.ceil(t.h*r),i=this.renderer.makeOffscreenCanvas(n,a),s={id:vd=++vd%OE,bb:t,level:e,width:n,height:a,canvas:i,context:i.getContext("2d"),eles:[],elesQueue:[],reqs:0},o=s.context,u=-s.bb.x1,l=-s.bb.y1;return o.scale(r,r),o.translate(u,l),s};Ct.getLayers=function(t,e,r){var n=this,a=n.renderer,i=a.cy,s=i.zoom(),o=n.firstGet;if(n.firstGet=!1,r==null){if(r=Math.ceil(Kl(s*e)),r<Ua)r=Ua;else if(s>=SE||r>xs)return null}n.validateLayersElesOrdering(r,t);var u=n.layersByLevel,l=Math.pow(2,r),f=u[r]=u[r]||[],c,v=n.levelIsComplete(r,t),h,d=function(){var A=function(N){if(n.validateLayersElesOrdering(N,t),n.levelIsComplete(N,t))return h=u[N],!0},k=function(N){if(!h)for(var O=r+N;Ua<=O&&O<=xs&&!A(O);O+=N);};k(1),k(-1);for(var R=f.length-1;R>=0;R--){var M=f[R];M.invalid&&rn(f,M)}};if(!v)d();else return f;var p=function(){if(!c){c=Ot();for(var A=0;A<t.length;A++)Mb(c,t[A].boundingBox())}return c},g=function(A){A=A||{};var k=A.after;p();var R=Math.ceil(c.w*l),M=Math.ceil(c.h*l);if(R>cd||M>cd)return null;var L=R*M;if(L>IE)return null;var N=n.makeLayer(c,r);if(k!=null){var O=f.indexOf(k)+1;f.splice(O,0,N)}else(A.insert===void 0||A.insert)&&f.unshift(N);return N};if(n.skipping&&!o)return null;for(var y=null,m=t.length/TE,b=!o,w=0;w<t.length;w++){var E=t[w],T=E._private.rscratch,x=T.imgLayerCaches=T.imgLayerCaches||{},S=x[r];if(S){y=S;continue}if((!y||y.eles.length>=m||!eg(y.bb,E.boundingBox()))&&(y=g({insert:!0,after:y}),!y))return null;h||b?n.queueLayer(y,E):n.drawEleInLayer(y,E,r,e),y.eles.push(E),x[r]=y}return h||(b?null:f)};Ct.getEleLevelForLayerLevel=function(t,e){return t};Ct.drawEleInLayer=function(t,e,r,n){var a=this,i=this.renderer,s=t.context,o=e.boundingBox();o.w===0||o.h===0||!e.visible()||(r=a.getEleLevelForLayerLevel(r,n),i.setImgSmoothing(s,!1),i.drawCachedElement(s,e,null,null,r,LE),i.setImgSmoothing(s,!0))};Ct.levelIsComplete=function(t,e){var r=this,n=r.layersByLevel[t];if(!n||n.length===0)return!1;for(var a=0,i=0;i<n.length;i++){var s=n[i];if(s.reqs>0||s.invalid)return!1;a+=s.eles.length}return a===e.length};Ct.validateLayersElesOrdering=function(t,e){var r=this.layersByLevel[t];if(r)for(var n=0;n<r.length;n++){for(var a=r[n],i=-1,s=0;s<e.length;s++)if(a.eles[0]===e[s]){i=s;break}if(i<0){this.invalidateLayer(a);continue}for(var o=i,s=0;s<a.eles.length;s++)if(a.eles[s]!==e[o+s]){this.invalidateLayer(a);break}}};Ct.updateElementsInLayers=function(t,e){for(var r=this,n=vi(t[0]),a=0;a<t.length;a++)for(var i=n?null:t[a],s=n?t[a]:t[a].ele,o=s._private.rscratch,u=o.imgLayerCaches=o.imgLayerCaches||{},l=Ua;l<=xs;l++){var f=u[l];f&&(i&&r.getEleLevelForLayerLevel(f.level)!==i.level||e(f,s,i))}};Ct.haveLayers=function(){for(var t=this,e=!1,r=Ua;r<=xs;r++){var n=t.layersByLevel[r];if(n&&n.length>0){e=!0;break}}return e};Ct.invalidateElements=function(t){var e=this;t.length!==0&&(e.lastInvalidationTime=Or(),!(t.length===0||!e.haveLayers())&&e.updateElementsInLayers(t,function(n,a,i){e.invalidateLayer(n)}))};Ct.invalidateLayer=function(t){if(this.lastInvalidationTime=Or(),!t.invalid){var e=t.level,r=t.eles,n=this.layersByLevel[e];rn(n,t),t.elesQueue=[],t.invalid=!0,t.replacement&&(t.replacement.invalid=!0);for(var a=0;a<r.length;a++){var i=r[a]._private.rscratch.imgLayerCaches;i&&(i[e]=null)}}};Ct.refineElementTextures=function(t){var e=this;e.updateElementsInLayers(t,function(n,a,i){var s=n.replacement;if(s||(s=n.replacement=e.makeLayer(n.bb,n.level),s.replaces=n,s.eles=n.eles),!s.reqs)for(var o=0;o<s.eles.length;o++)e.queueLayer(s,s.eles[o])})};Ct.enqueueElementRefinement=function(t){this.eleTxrDeqs.merge(t),this.scheduleElementRefinement()};Ct.queueLayer=function(t,e){var r=this,n=r.layersQueue,a=t.elesQueue,i=a.hasId=a.hasId||{};if(!t.replacement){if(e){if(i[e.id()])return;a.push(e),i[e.id()]=!0}t.reqs?(t.reqs++,n.updateItem(t)):(t.reqs=1,n.push(t))}};Ct.dequeue=function(t){for(var e=this,r=e.layersQueue,n=[],a=0;a<ME&&r.size()!==0;){var i=r.peek();if(i.replacement){r.pop();continue}if(i.replaces&&i!==i.replaces.replacement){r.pop();continue}if(i.invalid){r.pop();continue}var s=i.elesQueue.shift();s&&(e.drawEleInLayer(i,s,i.level,t),a++),n.length===0&&n.push(!0),i.elesQueue.length===0&&(r.pop(),i.reqs=0,i.replaces&&e.applyLayerReplacement(i),e.requestRedraw())}return n};Ct.applyLayerReplacement=function(t){var e=this,r=e.layersByLevel[t.level],n=t.replaces,a=r.indexOf(n);if(!(a<0||n.invalid)){r[a]=t;for(var i=0;i<t.eles.length;i++){var s=t.eles[i]._private,o=s.imgLayerCaches=s.imgLayerCaches||{};o&&(o[t.level]=t)}e.requestRedraw()}};Ct.requestRedraw=pi(function(){var t=this.renderer;t.redrawHint("eles",!0),t.redrawHint("drag",!0),t.redraw()},100);Ct.setupDequeueing=ap.setupDequeueing({deqRedrawThreshold:PE,deqCost:AE,deqAvgCost:kE,deqNoDrawCost:BE,deqFastCost:RE,deq:function(e,r){return e.dequeue(r)},onDeqd:Gl,shouldRedraw:Yh,priority:function(e){return e.renderer.beforeRenderPriorities.lyrTxrDeq}});var op={},dd;function NE(t,e){for(var r=0;r<e.length;r++){var n=e[r];t.lineTo(n.x,n.y)}}function FE(t,e,r){for(var n,a=0;a<e.length;a++){var i=e[a];a===0&&(n=i),t.lineTo(i.x,i.y)}t.quadraticCurveTo(r.x,r.y,n.x,n.y)}function hd(t,e,r){t.beginPath&&t.beginPath();for(var n=e,a=0;a<n.length;a++){var i=n[a];t.lineTo(i.x,i.y)}var s=r,o=r[0];t.moveTo(o.x,o.y);for(var a=1;a<s.length;a++){var i=s[a];t.lineTo(i.x,i.y)}t.closePath&&t.closePath()}function _E(t,e,r,n,a){t.beginPath&&t.beginPath(),t.arc(r,n,a,0,Math.PI*2,!1);var i=e,s=i[0];t.moveTo(s.x,s.y);for(var o=0;o<i.length;o++){var u=i[o];t.lineTo(u.x,u.y)}t.closePath&&t.closePath()}function zE(t,e,r,n){t.arc(e,r,n,0,Math.PI*2,!1)}op.arrowShapeImpl=function(t){return(dd||(dd={polygon:NE,"triangle-backcurve":FE,"triangle-tee":hd,"circle-triangle":_E,"triangle-cross":hd,circle:zE}))[t]};var wr={};wr.drawElement=function(t,e,r,n,a,i){var s=this;e.isNode()?s.drawNode(t,e,r,n,a,i):s.drawEdge(t,e,r,n,a,i)};wr.drawElementOverlay=function(t,e){var r=this;e.isNode()?r.drawNodeOverlay(t,e):r.drawEdgeOverlay(t,e)};wr.drawElementUnderlay=function(t,e){var r=this;e.isNode()?r.drawNodeUnderlay(t,e):r.drawEdgeUnderlay(t,e)};wr.drawCachedElementPortion=function(t,e,r,n,a,i,s,o){var u=this,l=r.getBoundingBox(e);if(!(l.w===0||l.h===0)){var f=r.getElement(e,l,n,a,i);if(f!=null){var c=o(u,e);if(c===0)return;var v=s(u,e),h=l.x1,d=l.y1,p=l.w,g=l.h,y,m,b,w,E;if(v!==0){var T=r.getRotationPoint(e);b=T.x,w=T.y,t.translate(b,w),t.rotate(v),E=u.getImgSmoothing(t),E||u.setImgSmoothing(t,!0);var x=r.getRotationOffset(e);y=x.x,m=x.y}else y=h,m=d;var S;c!==1&&(S=t.globalAlpha,t.globalAlpha=S*c),t.drawImage(f.texture.canvas,f.x,0,f.width,f.height,y,m,p,g),c!==1&&(t.globalAlpha=S),v!==0&&(t.rotate(-v),t.translate(-b,-w),E||u.setImgSmoothing(t,!1))}else r.drawElement(t,e)}};var VE=function(){return 0},qE=function(e,r){return e.getTextAngle(r,null)},HE=function(e,r){return e.getTextAngle(r,"source")},$E=function(e,r){return e.getTextAngle(r,"target")},UE=function(e,r){return r.effectiveOpacity()},_u=function(e,r){return r.pstyle("text-opacity").pfValue*r.effectiveOpacity()};wr.drawCachedElement=function(t,e,r,n,a,i){var s=this,o=s.data,u=o.eleTxrCache,l=o.lblTxrCache,f=o.slbTxrCache,c=o.tlbTxrCache,v=e.boundingBox(),h=i===!0?u.reasons.highQuality:null;if(!(v.w===0||v.h===0||!e.visible())&&(!n||Xl(v,n))){var d=e.isEdge(),p=e.element()._private.rscratch.badLine;s.drawElementUnderlay(t,e),s.drawCachedElementPortion(t,e,u,r,a,h,VE,UE),(!d||!p)&&s.drawCachedElementPortion(t,e,l,r,a,h,qE,_u),d&&!p&&(s.drawCachedElementPortion(t,e,f,r,a,h,HE,_u),s.drawCachedElementPortion(t,e,c,r,a,h,$E,_u)),s.drawElementOverlay(t,e)}};wr.drawElements=function(t,e){for(var r=this,n=0;n<e.length;n++){var a=e[n];r.drawElement(t,a)}};wr.drawCachedElements=function(t,e,r,n){for(var a=this,i=0;i<e.length;i++){var s=e[i];a.drawCachedElement(t,s,r,n)}};wr.drawCachedNodes=function(t,e,r,n){for(var a=this,i=0;i<e.length;i++){var s=e[i];s.isNode()&&a.drawCachedElement(t,s,r,n)}};wr.drawLayeredElements=function(t,e,r,n){var a=this,i=a.data.lyrTxrCache.getLayers(e,r);if(i)for(var s=0;s<i.length;s++){var o=i[s],u=o.bb;u.w===0||u.h===0||t.drawImage(o.canvas,u.x1,u.y1,u.w,u.h)}else a.drawCachedElements(t,e,r,n)};var zr={};zr.drawEdge=function(t,e,r){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,i=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,s=this,o=e._private.rscratch;if(!(i&&!e.visible())&&!(o.badLine||o.allpts==null||isNaN(o.allpts[0]))){var u;r&&(u=r,t.translate(-u.x1,-u.y1));var l=i?e.pstyle("opacity").value:1,f=i?e.pstyle("line-opacity").value:1,c=e.pstyle("curve-style").value,v=e.pstyle("line-style").value,h=e.pstyle("width").pfValue,d=e.pstyle("line-cap").value,p=e.pstyle("line-outline-width").value,g=e.pstyle("line-outline-color").value,y=l*f,m=l*f,b=function(){var N=arguments.length>0&&arguments[0]!==void 0?arguments[0]:y;c==="straight-triangle"?(s.eleStrokeStyle(t,e,N),s.drawEdgeTrianglePath(e,t,o.allpts)):(t.lineWidth=h,t.lineCap=d,s.eleStrokeStyle(t,e,N),s.drawEdgePath(e,t,o.allpts,v),t.lineCap="butt")},w=function(){var N=arguments.length>0&&arguments[0]!==void 0?arguments[0]:y;if(t.lineWidth=h+p,t.lineCap=d,p>0)s.colorStrokeStyle(t,g[0],g[1],g[2],N);else{t.lineCap="butt";return}c==="straight-triangle"?s.drawEdgeTrianglePath(e,t,o.allpts):(s.drawEdgePath(e,t,o.allpts,v),t.lineCap="butt")},E=function(){a&&s.drawEdgeOverlay(t,e)},T=function(){a&&s.drawEdgeUnderlay(t,e)},x=function(){var N=arguments.length>0&&arguments[0]!==void 0?arguments[0]:m;s.drawArrowheads(t,e,N)},S=function(){s.drawElementText(t,e,null,n)};t.lineJoin="round";var D=e.pstyle("ghost").value==="yes";if(D){var A=e.pstyle("ghost-offset-x").pfValue,k=e.pstyle("ghost-offset-y").pfValue,R=e.pstyle("ghost-opacity").value,M=y*R;t.translate(A,k),b(M),x(M),t.translate(-A,-k)}else w();T(),b(),x(),E(),S(),r&&t.translate(u.x1,u.y1)}};var up=function(e){if(!["overlay","underlay"].includes(e))throw new Error("Invalid state");return function(r,n){if(n.visible()){var a=n.pstyle("".concat(e,"-opacity")).value;if(a!==0){var i=this,s=i.usePaths(),o=n._private.rscratch,u=n.pstyle("".concat(e,"-padding")).pfValue,l=2*u,f=n.pstyle("".concat(e,"-color")).value;r.lineWidth=l,o.edgeType==="self"&&!s?r.lineCap="butt":r.lineCap="round",i.colorStrokeStyle(r,f[0],f[1],f[2],a),i.drawEdgePath(n,r,o.allpts,"solid")}}}};zr.drawEdgeOverlay=up("overlay");zr.drawEdgeUnderlay=up("underlay");zr.drawEdgePath=function(t,e,r,n){var a=t._private.rscratch,i=e,s,o=!1,u=this.usePaths(),l=t.pstyle("line-dash-pattern").pfValue,f=t.pstyle("line-dash-offset").pfValue;if(u){var c=r.join("$"),v=a.pathCacheKey&&a.pathCacheKey===c;v?(s=e=a.pathCache,o=!0):(s=e=new Path2D,a.pathCacheKey=c,a.pathCache=s)}if(i.setLineDash)switch(n){case"dotted":i.setLineDash([1,1]);break;case"dashed":i.setLineDash(l),i.lineDashOffset=f;break;case"solid":i.setLineDash([]);break}if(!o&&!a.badLine)switch(e.beginPath&&e.beginPath(),e.moveTo(r[0],r[1]),a.edgeType){case"bezier":case"self":case"compound":case"multibezier":for(var h=2;h+3<r.length;h+=4)e.quadraticCurveTo(r[h],r[h+1],r[h+2],r[h+3]);break;case"straight":case"haystack":for(var d=2;d+1<r.length;d+=2)e.lineTo(r[d],r[d+1]);break;case"segments":if(a.isRound){var p=$t(a.roundCorners),g;try{for(p.s();!(g=p.n()).done;){var y=g.value;Zg(e,y)}}catch(b){p.e(b)}finally{p.f()}e.lineTo(r[r.length-2],r[r.length-1])}else for(var m=2;m+1<r.length;m+=2)e.lineTo(r[m],r[m+1]);break}e=i,u?e.stroke(s):e.stroke(),e.setLineDash&&e.setLineDash([])};zr.drawEdgeTrianglePath=function(t,e,r){e.fillStyle=e.strokeStyle;for(var n=t.pstyle("width").pfValue,a=0;a+1<r.length;a+=2){var i=[r[a+2]-r[a],r[a+3]-r[a+1]],s=Math.sqrt(i[0]*i[0]+i[1]*i[1]),o=[i[1]/s,-i[0]/s],u=[o[0]*n/2,o[1]*n/2];e.beginPath(),e.moveTo(r[a]-u[0],r[a+1]-u[1]),e.lineTo(r[a]+u[0],r[a+1]+u[1]),e.lineTo(r[a+2],r[a+3]),e.closePath(),e.fill()}};zr.drawArrowheads=function(t,e,r){var n=e._private.rscratch,a=n.edgeType==="haystack";a||this.drawArrowhead(t,e,"source",n.arrowStartX,n.arrowStartY,n.srcArrowAngle,r),this.drawArrowhead(t,e,"mid-target",n.midX,n.midY,n.midtgtArrowAngle,r),this.drawArrowhead(t,e,"mid-source",n.midX,n.midY,n.midsrcArrowAngle,r),a||this.drawArrowhead(t,e,"target",n.arrowEndX,n.arrowEndY,n.tgtArrowAngle,r)};zr.drawArrowhead=function(t,e,r,n,a,i,s){if(!(isNaN(n)||n==null||isNaN(a)||a==null||isNaN(i)||i==null)){var o=this,u=e.pstyle(r+"-arrow-shape").value;if(u!=="none"){var l=e.pstyle(r+"-arrow-fill").value==="hollow"?"both":"filled",f=e.pstyle(r+"-arrow-fill").value,c=e.pstyle("width").pfValue,v=e.pstyle(r+"-arrow-width"),h=v.value==="match-line"?c:v.pfValue;v.units==="%"&&(h*=c);var d=e.pstyle("opacity").value;s===void 0&&(s=d);var p=t.globalCompositeOperation;(s!==1||f==="hollow")&&(t.globalCompositeOperation="destination-out",o.colorFillStyle(t,255,255,255,1),o.colorStrokeStyle(t,255,255,255,1),o.drawArrowShape(e,t,l,c,u,h,n,a,i),t.globalCompositeOperation=p);var g=e.pstyle(r+"-arrow-color").value;o.colorFillStyle(t,g[0],g[1],g[2],s),o.colorStrokeStyle(t,g[0],g[1],g[2],s),o.drawArrowShape(e,t,f,c,u,h,n,a,i)}}};zr.drawArrowShape=function(t,e,r,n,a,i,s,o,u){var l=this,f=this.usePaths()&&a!=="triangle-cross",c=!1,v,h=e,d={x:s,y:o},p=t.pstyle("arrow-scale").value,g=this.getArrowWidth(n,p),y=l.arrowShapes[a];if(f){var m=l.arrowPathCache=l.arrowPathCache||[],b=Dn(a),w=m[b];w!=null?(v=e=w,c=!0):(v=e=new Path2D,m[b]=v)}c||(e.beginPath&&e.beginPath(),f?y.draw(e,1,0,{x:0,y:0},1):y.draw(e,g,u,d,n),e.closePath&&e.closePath()),e=h,f&&(e.translate(s,o),e.rotate(u),e.scale(g,g)),(r==="filled"||r==="both")&&(f?e.fill(v):e.fill()),(r==="hollow"||r==="both")&&(e.lineWidth=i/(f?g:1),e.lineJoin="miter",f?e.stroke(v):e.stroke()),f&&(e.scale(1/g,1/g),e.rotate(-u),e.translate(-s,-o))};var ff={};ff.safeDrawImage=function(t,e,r,n,a,i,s,o,u,l){if(!(a<=0||i<=0||u<=0||l<=0))try{t.drawImage(e,r,n,a,i,s,o,u,l)}catch(f){Ue(f)}};ff.drawInscribedImage=function(t,e,r,n,a){var i=this,s=r.position(),o=s.x,u=s.y,l=r.cy().style(),f=l.getIndexedStyle.bind(l),c=f(r,"background-fit","value",n),v=f(r,"background-repeat","value",n),h=r.width(),d=r.height(),p=r.padding()*2,g=h+(f(r,"background-width-relative-to","value",n)==="inner"?0:p),y=d+(f(r,"background-height-relative-to","value",n)==="inner"?0:p),m=r._private.rscratch,b=f(r,"background-clip","value",n),w=b==="node",E=f(r,"background-image-opacity","value",n)*a,T=f(r,"background-image-smoothing","value",n),x=r.pstyle("corner-radius").value;x!=="auto"&&(x=r.pstyle("corner-radius").pfValue);var S=e.width||e.cachedW,D=e.height||e.cachedH;(S==null||D==null)&&(document.body.appendChild(e),S=e.cachedW=e.width||e.offsetWidth,D=e.cachedH=e.height||e.offsetHeight,document.body.removeChild(e));var A=S,k=D;if(f(r,"background-width","value",n)!=="auto"&&(f(r,"background-width","units",n)==="%"?A=f(r,"background-width","pfValue",n)*g:A=f(r,"background-width","pfValue",n)),f(r,"background-height","value",n)!=="auto"&&(f(r,"background-height","units",n)==="%"?k=f(r,"background-height","pfValue",n)*y:k=f(r,"background-height","pfValue",n)),!(A===0||k===0)){if(c==="contain"){var R=Math.min(g/A,y/k);A*=R,k*=R}else if(c==="cover"){var R=Math.max(g/A,y/k);A*=R,k*=R}var M=o-g/2,L=f(r,"background-position-x","units",n),N=f(r,"background-position-x","pfValue",n);L==="%"?M+=(g-A)*N:M+=N;var O=f(r,"background-offset-x","units",n),I=f(r,"background-offset-x","pfValue",n);O==="%"?M+=(g-A)*I:M+=I;var F=u-y/2,H=f(r,"background-position-y","units",n),G=f(r,"background-position-y","pfValue",n);H==="%"?F+=(y-k)*G:F+=G;var z=f(r,"background-offset-y","units",n),V=f(r,"background-offset-y","pfValue",n);z==="%"?F+=(y-k)*V:F+=V,m.pathCache&&(M-=o,F-=u,o=0,u=0);var re=t.globalAlpha;t.globalAlpha=E;var ie=i.getImgSmoothing(t),ne=!1;if(T==="no"&&ie?(i.setImgSmoothing(t,!1),ne=!0):T==="yes"&&!ie&&(i.setImgSmoothing(t,!0),ne=!0),v==="no-repeat")w&&(t.save(),m.pathCache?t.clip(m.pathCache):(i.nodeShapes[i.getNodeShape(r)].draw(t,o,u,g,y,x,m),t.clip())),i.safeDrawImage(t,e,0,0,S,D,M,F,A,k),w&&t.restore();else{var oe=t.createPattern(e,v);t.fillStyle=oe,i.nodeShapes[i.getNodeShape(r)].draw(t,o,u,g,y,x,m),t.translate(M,F),t.fill(),t.translate(-M,-F)}t.globalAlpha=re,ne&&i.setImgSmoothing(t,ie)}};var On={};On.eleTextBiggerThanMin=function(t,e){if(!e){var r=t.cy().zoom(),n=this.getPixelRatio(),a=Math.ceil(Kl(r*n));e=Math.pow(2,a)}var i=t.pstyle("font-size").pfValue*e,s=t.pstyle("min-zoomed-font-size").pfValue;return!(i<s)};On.drawElementText=function(t,e,r,n,a){var i=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,s=this;if(n==null){if(i&&!s.eleTextBiggerThanMin(e))return}else if(n===!1)return;if(e.isNode()){var o=e.pstyle("label");if(!o||!o.value)return;var u=s.getLabelJustification(e);t.textAlign=u,t.textBaseline="bottom"}else{var l=e.element()._private.rscratch.badLine,f=e.pstyle("label"),c=e.pstyle("source-label"),v=e.pstyle("target-label");if(l||(!f||!f.value)&&(!c||!c.value)&&(!v||!v.value))return;t.textAlign="center",t.textBaseline="bottom"}var h=!r,d;r&&(d=r,t.translate(-d.x1,-d.y1)),a==null?(s.drawText(t,e,null,h,i),e.isEdge()&&(s.drawText(t,e,"source",h,i),s.drawText(t,e,"target",h,i))):s.drawText(t,e,a,h,i),r&&t.translate(d.x1,d.y1)};On.getFontCache=function(t){var e;this.fontCaches=this.fontCaches||[];for(var r=0;r<this.fontCaches.length;r++)if(e=this.fontCaches[r],e.context===t)return e;return e={context:t},this.fontCaches.push(e),e};On.setupTextStyle=function(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,n=e.pstyle("font-style").strValue,a=e.pstyle("font-size").pfValue+"px",i=e.pstyle("font-family").strValue,s=e.pstyle("font-weight").strValue,o=r?e.effectiveOpacity()*e.pstyle("text-opacity").value:1,u=e.pstyle("text-outline-opacity").value*o,l=e.pstyle("color").value,f=e.pstyle("text-outline-color").value;t.font=n+" "+s+" "+a+" "+i,t.lineJoin="round",this.colorFillStyle(t,l[0],l[1],l[2],o),this.colorStrokeStyle(t,f[0],f[1],f[2],u)};function GE(t,e,r,n,a){var i=Math.min(n,a),s=i/2,o=e+n/2,u=r+a/2;t.beginPath(),t.arc(o,u,s,0,Math.PI*2),t.closePath()}function gd(t,e,r,n,a){var i=arguments.length>5&&arguments[5]!==void 0?arguments[5]:5,s=Math.min(i,n/2,a/2);t.beginPath(),t.moveTo(e+s,r),t.lineTo(e+n-s,r),t.quadraticCurveTo(e+n,r,e+n,r+s),t.lineTo(e+n,r+a-s),t.quadraticCurveTo(e+n,r+a,e+n-s,r+a),t.lineTo(e+s,r+a),t.quadraticCurveTo(e,r+a,e,r+a-s),t.lineTo(e,r+s),t.quadraticCurveTo(e,r,e+s,r),t.closePath()}On.getTextAngle=function(t,e){var r,n=t._private,a=n.rscratch,i=e?e+"-":"",s=t.pstyle(i+"text-rotation");if(s.strValue==="autorotate"){var o=qt(a,"labelAngle",e);r=t.isEdge()?o:0}else s.strValue==="none"?r=0:r=s.pfValue;return r};On.drawText=function(t,e,r){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,i=e._private,s=i.rscratch,o=a?e.effectiveOpacity():1;if(!(a&&(o===0||e.pstyle("text-opacity").value===0))){r==="main"&&(r=null);var u=qt(s,"labelX",r),l=qt(s,"labelY",r),f,c,v=this.getLabelText(e,r);if(v!=null&&v!==""&&!isNaN(u)&&!isNaN(l)){this.setupTextStyle(t,e,a);var h=r?r+"-":"",d=qt(s,"labelWidth",r),p=qt(s,"labelHeight",r),g=e.pstyle(h+"text-margin-x").pfValue,y=e.pstyle(h+"text-margin-y").pfValue,m=e.isEdge(),b=e.pstyle("text-halign").value,w=e.pstyle("text-valign").value;m&&(b="center",w="center"),u+=g,l+=y;var E;switch(n?E=this.getTextAngle(e,r):E=0,E!==0&&(f=u,c=l,t.translate(f,c),t.rotate(E),u=0,l=0),w){case"top":break;case"center":l+=p/2;break;case"bottom":l+=p;break}var T=e.pstyle("text-background-opacity").value,x=e.pstyle("text-border-opacity").value,S=e.pstyle("text-border-width").pfValue,D=e.pstyle("text-background-padding").pfValue,A=e.pstyle("text-background-shape").strValue,k=A==="round-rectangle"||A==="roundrectangle",R=A==="circle",M=2;if(T>0||S>0&&x>0){var L=t.fillStyle,N=t.strokeStyle,O=t.lineWidth,I=e.pstyle("text-background-color").value,F=e.pstyle("text-border-color").value,H=e.pstyle("text-border-style").value,G=T>0,z=S>0&&x>0,V=u-D;switch(b){case"left":V-=d;break;case"center":V-=d/2;break}var re=l-p-D,ie=d+2*D,ne=p+2*D;if(G&&(t.fillStyle="rgba(".concat(I[0],",").concat(I[1],",").concat(I[2],",").concat(T*o,")")),z&&(t.strokeStyle="rgba(".concat(F[0],",").concat(F[1],",").concat(F[2],",").concat(x*o,")"),t.lineWidth=S,t.setLineDash))switch(H){case"dotted":t.setLineDash([1,1]);break;case"dashed":t.setLineDash([4,2]);break;case"double":t.lineWidth=S/4,t.setLineDash([]);break;default:t.setLineDash([]);break}if(k?(t.beginPath(),gd(t,V,re,ie,ne,M)):R?(t.beginPath(),GE(t,V,re,ie,ne)):(t.beginPath(),t.rect(V,re,ie,ne)),G&&t.fill(),z&&t.stroke(),z&&H==="double"){var oe=S/2;t.beginPath(),k?gd(t,V+oe,re+oe,ie-2*oe,ne-2*oe,M):t.rect(V+oe,re+oe,ie-2*oe,ne-2*oe),t.stroke()}t.fillStyle=L,t.strokeStyle=N,t.lineWidth=O,t.setLineDash&&t.setLineDash([])}var ve=2*e.pstyle("text-outline-width").pfValue;if(ve>0&&(t.lineWidth=ve),e.pstyle("text-wrap").value==="wrap"){var ge=qt(s,"labelWrapCachedLines",r),ue=qt(s,"labelLineHeight",r),q=d/2,$=this.getLabelJustification(e);switch($==="auto"||(b==="left"?$==="left"?u+=-d:$==="center"&&(u+=-q):b==="center"?$==="left"?u+=-q:$==="right"&&(u+=q):b==="right"&&($==="center"?u+=q:$==="right"&&(u+=d))),w){case"top":l-=(ge.length-1)*ue;break;case"center":case"bottom":l-=(ge.length-1)*ue;break}for(var C=0;C<ge.length;C++)ve>0&&t.strokeText(ge[C],u,l),t.fillText(ge[C],u,l),l+=ue}else ve>0&&t.strokeText(v,u,l),t.fillText(v,u,l);E!==0&&(t.rotate(-E),t.translate(-f,-c))}}};var cn={};cn.drawNode=function(t,e,r){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,i=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,s=this,o,u,l=e._private,f=l.rscratch,c=e.position();if(!(!he(c.x)||!he(c.y))&&!(i&&!e.visible())){var v=i?e.effectiveOpacity():1,h=s.usePaths(),d,p=!1,g=e.padding();o=e.width()+2*g,u=e.height()+2*g;var y;r&&(y=r,t.translate(-y.x1,-y.y1));for(var m=e.pstyle("background-image"),b=m.value,w=new Array(b.length),E=new Array(b.length),T=0,x=0;x<b.length;x++){var S=b[x],D=w[x]=S!=null&&S!=="none";if(D){var A=e.cy().style().getIndexedStyle(e,"background-image-crossorigin","value",x);T++,E[x]=s.getCachedImage(S,A,function(){l.backgroundTimestamp=Date.now(),e.emitAndNotify("background")})}}var k=e.pstyle("background-blacken").value,R=e.pstyle("border-width").pfValue,M=e.pstyle("background-opacity").value*v,L=e.pstyle("border-color").value,N=e.pstyle("border-style").value,O=e.pstyle("border-join").value,I=e.pstyle("border-cap").value,F=e.pstyle("border-position").value,H=e.pstyle("border-dash-pattern").pfValue,G=e.pstyle("border-dash-offset").pfValue,z=e.pstyle("border-opacity").value*v,V=e.pstyle("outline-width").pfValue,re=e.pstyle("outline-color").value,ie=e.pstyle("outline-style").value,ne=e.pstyle("outline-opacity").value*v,oe=e.pstyle("outline-offset").value,ve=e.pstyle("corner-radius").value;ve!=="auto"&&(ve=e.pstyle("corner-radius").pfValue);var ge=function(){var pe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:M;s.eleFillStyle(t,e,pe)},ue=function(){var pe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:z;s.colorStrokeStyle(t,L[0],L[1],L[2],pe)},q=function(){var pe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:ne;s.colorStrokeStyle(t,re[0],re[1],re[2],pe)},$=function(pe,ee,P,U){var X=s.nodePathCache=s.nodePathCache||[],Q=Kh(P==="polygon"?P+","+U.join(","):P,""+ee,""+pe,""+ve),ae=X[Q],be,ce=!1;return ae!=null?(be=ae,ce=!0,f.pathCache=be):(be=new Path2D,X[Q]=f.pathCache=be),{path:be,cacheHit:ce}},C=e.pstyle("shape").strValue,B=e.pstyle("shape-polygon-points").pfValue;if(h){t.translate(c.x,c.y);var _=$(o,u,C,B);d=_.path,p=_.cacheHit}var K=function(){if(!p){var pe=c;h&&(pe={x:0,y:0}),s.nodeShapes[s.getNodeShape(e)].draw(d||t,pe.x,pe.y,o,u,ve,f)}h?t.fill(d):t.fill()},J=function(){for(var pe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:v,ee=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,P=l.backgrounding,U=0,X=0;X<E.length;X++){var Q=e.cy().style().getIndexedStyle(e,"background-image-containment","value",X);if(ee&&Q==="over"||!ee&&Q==="inside"){U++;continue}w[X]&&E[X].complete&&!E[X].error&&(U++,s.drawInscribedImage(t,E[X],e,X,pe))}l.backgrounding=U!==T,P!==l.backgrounding&&e.updateStyle(!1)},Z=function(){var pe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,ee=arguments.length>1&&arguments[1]!==void 0?arguments[1]:v;s.hasPie(e)&&(s.drawPie(t,e,ee),pe&&(h||s.nodeShapes[s.getNodeShape(e)].draw(t,c.x,c.y,o,u,ve,f)))},te=function(){var pe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,ee=arguments.length>1&&arguments[1]!==void 0?arguments[1]:v;s.hasStripe(e)&&(t.save(),h?t.clip(f.pathCache):(s.nodeShapes[s.getNodeShape(e)].draw(t,c.x,c.y,o,u,ve,f),t.clip()),s.drawStripe(t,e,ee),t.restore(),pe&&(h||s.nodeShapes[s.getNodeShape(e)].draw(t,c.x,c.y,o,u,ve,f)))},j=function(){var pe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:v,ee=(k>0?k:-k)*pe,P=k>0?0:255;k!==0&&(s.colorFillStyle(t,P,P,P,ee),h?t.fill(d):t.fill())},Y=function(){if(R>0){if(t.lineWidth=R,t.lineCap=I,t.lineJoin=O,t.setLineDash)switch(N){case"dotted":t.setLineDash([1,1]);break;case"dashed":t.setLineDash(H),t.lineDashOffset=G;break;case"solid":case"double":t.setLineDash([]);break}if(F!=="center"){if(t.save(),t.lineWidth*=2,F==="inside")h?t.clip(d):t.clip();else{var pe=new Path2D;pe.rect(-o/2-R,-u/2-R,o+2*R,u+2*R),pe.addPath(d),t.clip(pe,"evenodd")}h?t.stroke(d):t.stroke(),t.restore()}else h?t.stroke(d):t.stroke();if(N==="double"){t.lineWidth=R/3;var ee=t.globalCompositeOperation;t.globalCompositeOperation="destination-out",h?t.stroke(d):t.stroke(),t.globalCompositeOperation=ee}t.setLineDash&&t.setLineDash([])}},W=function(){if(V>0){if(t.lineWidth=V,t.lineCap="butt",t.setLineDash)switch(ie){case"dotted":t.setLineDash([1,1]);break;case"dashed":t.setLineDash([4,2]);break;case"solid":case"double":t.setLineDash([]);break}var pe=c;h&&(pe={x:0,y:0});var ee=s.getNodeShape(e),P=R;F==="inside"&&(P=0),F==="outside"&&(P*=2);var U=(o+P+(V+oe))/o,X=(u+P+(V+oe))/u,Q=o*U,ae=u*X,be=s.nodeShapes[ee].points,ce;if(h){var Te=$(Q,ae,ee,be);ce=Te.path}if(ee==="ellipse")s.drawEllipsePath(ce||t,pe.x,pe.y,Q,ae);else if(["round-diamond","round-heptagon","round-hexagon","round-octagon","round-pentagon","round-polygon","round-triangle","round-tag"].includes(ee)){var xe=0,Ae=0,Oe=0;ee==="round-diamond"?xe=(P+oe+V)*1.4:ee==="round-heptagon"?(xe=(P+oe+V)*1.075,Oe=-(P/2+oe+V)/35):ee==="round-hexagon"?xe=(P+oe+V)*1.12:ee==="round-pentagon"?(xe=(P+oe+V)*1.13,Oe=-(P/2+oe+V)/15):ee==="round-tag"?(xe=(P+oe+V)*1.12,Ae=(P/2+V+oe)*.07):ee==="round-triangle"&&(xe=(P+oe+V)*(Math.PI/2),Oe=-(P+oe/2+V)/Math.PI),xe!==0&&(U=(o+xe)/o,Q=o*U,["round-hexagon","round-tag"].includes(ee)||(X=(u+xe)/u,ae=u*X)),ve=ve==="auto"?ng(Q,ae):ve;for(var Ie=Q/2,Se=ae/2,Fe=ve+(P+V+oe)/2,Ne=new Array(be.length/2),ut=new Array(be.length/2),tt=0;tt<be.length/2;tt++)Ne[tt]={x:pe.x+Ae+Ie*be[tt*2],y:pe.y+Oe+Se*be[tt*2+1]};var Bt,nt,ht,lt,mt=Ne.length;for(nt=Ne[mt-1],Bt=0;Bt<mt;Bt++)ht=Ne[Bt%mt],lt=Ne[(Bt+1)%mt],ut[Bt]=uf(nt,ht,lt,Fe),nt=ht,ht=lt;s.drawRoundPolygonPath(ce||t,pe.x+Ae,pe.y+Oe,o*U,u*X,be,ut)}else if(["roundrectangle","round-rectangle"].includes(ee))ve=ve==="auto"?nn(Q,ae):ve,s.drawRoundRectanglePath(ce||t,pe.x,pe.y,Q,ae,ve+(P+V+oe)/2);else if(["cutrectangle","cut-rectangle"].includes(ee))ve=ve==="auto"?Zl():ve,s.drawCutRectanglePath(ce||t,pe.x,pe.y,Q,ae,null,ve+(P+V+oe)/4);else if(["bottomroundrectangle","bottom-round-rectangle"].includes(ee))ve=ve==="auto"?nn(Q,ae):ve,s.drawBottomRoundRectanglePath(ce||t,pe.x,pe.y,Q,ae,ve+(P+V+oe)/2);else if(ee==="barrel")s.drawBarrelPath(ce||t,pe.x,pe.y,Q,ae);else if(ee.startsWith("polygon")||["rhomboid","right-rhomboid","round-tag","tag","vee"].includes(ee)){var Vr=(P+V+oe)/o;be=hs(gs(be,Vr)),s.drawPolygonPath(ce||t,pe.x,pe.y,o,u,be)}else{var at=(P+V+oe)/o;be=hs(gs(be,-at)),s.drawPolygonPath(ce||t,pe.x,pe.y,o,u,be)}if(h?t.stroke(ce):t.stroke(),ie==="double"){t.lineWidth=P/3;var xr=t.globalCompositeOperation;t.globalCompositeOperation="destination-out",h?t.stroke(ce):t.stroke(),t.globalCompositeOperation=xr}t.setLineDash&&t.setLineDash([])}},fe=function(){a&&s.drawNodeOverlay(t,e,c,o,u)},se=function(){a&&s.drawNodeUnderlay(t,e,c,o,u)},le=function(){s.drawElementText(t,e,null,n)},de=e.pstyle("ghost").value==="yes";if(de){var ye=e.pstyle("ghost-offset-x").pfValue,Pe=e.pstyle("ghost-offset-y").pfValue,Ce=e.pstyle("ghost-opacity").value,Re=Ce*v;t.translate(ye,Pe),q(),W(),ge(Ce*M),K(),J(Re,!0),ue(Ce*z),Y(),Z(k!==0||R!==0),te(k!==0||R!==0),J(Re,!1),j(Re),t.translate(-ye,-Pe)}h&&t.translate(-c.x,-c.y),se(),h&&t.translate(c.x,c.y),q(),W(),ge(),K(),J(v,!0),ue(),Y(),Z(k!==0||R!==0),te(k!==0||R!==0),J(v,!1),j(),h&&t.translate(-c.x,-c.y),le(),fe(),r&&t.translate(y.x1,y.y1)}};var lp=function(e){if(!["overlay","underlay"].includes(e))throw new Error("Invalid state");return function(r,n,a,i,s){var o=this;if(n.visible()){var u=n.pstyle("".concat(e,"-padding")).pfValue,l=n.pstyle("".concat(e,"-opacity")).value,f=n.pstyle("".concat(e,"-color")).value,c=n.pstyle("".concat(e,"-shape")).value,v=n.pstyle("".concat(e,"-corner-radius")).value;if(l>0){if(a=a||n.position(),i==null||s==null){var h=n.padding();i=n.width()+2*h,s=n.height()+2*h}o.colorFillStyle(r,f[0],f[1],f[2],l),o.nodeShapes[c].draw(r,a.x,a.y,i+u*2,s+u*2,v),r.fill()}}}};cn.drawNodeOverlay=lp("overlay");cn.drawNodeUnderlay=lp("underlay");cn.hasPie=function(t){return t=t[0],t._private.hasPie};cn.hasStripe=function(t){return t=t[0],t._private.hasStripe};cn.drawPie=function(t,e,r,n){e=e[0],n=n||e.position();var a=e.cy().style(),i=e.pstyle("pie-size"),s=e.pstyle("pie-hole"),o=e.pstyle("pie-start-angle").pfValue,u=n.x,l=n.y,f=e.width(),c=e.height(),v=Math.min(f,c)/2,h,d=0,p=this.usePaths();if(p&&(u=0,l=0),i.units==="%"?v=v*i.pfValue:i.pfValue!==void 0&&(v=i.pfValue/2),s.units==="%"?h=v*s.pfValue:s.pfValue!==void 0&&(h=s.pfValue/2),!(h>=v))for(var g=1;g<=a.pieBackgroundN;g++){var y=e.pstyle("pie-"+g+"-background-size").value,m=e.pstyle("pie-"+g+"-background-color").value,b=e.pstyle("pie-"+g+"-background-opacity").value*r,w=y/100;w+d>1&&(w=1-d);var E=1.5*Math.PI+2*Math.PI*d;E+=o;var T=2*Math.PI*w,x=E+T;y===0||d>=1||d+w>1||(h===0?(t.beginPath(),t.moveTo(u,l),t.arc(u,l,v,E,x),t.closePath()):(t.beginPath(),t.arc(u,l,v,E,x),t.arc(u,l,h,x,E,!0),t.closePath()),this.colorFillStyle(t,m[0],m[1],m[2],b),t.fill(),d+=w)}};cn.drawStripe=function(t,e,r,n){e=e[0],n=n||e.position();var a=e.cy().style(),i=n.x,s=n.y,o=e.width(),u=e.height(),l=0,f=this.usePaths();t.save();var c=e.pstyle("stripe-direction").value,v=e.pstyle("stripe-size");switch(c){case"vertical":break;case"righward":t.rotate(-Math.PI/2);break}var h=o,d=u;v.units==="%"?(h=h*v.pfValue,d=d*v.pfValue):v.pfValue!==void 0&&(h=v.pfValue,d=v.pfValue),f&&(i=0,s=0),s-=h/2,i-=d/2;for(var p=1;p<=a.stripeBackgroundN;p++){var g=e.pstyle("stripe-"+p+"-background-size").value,y=e.pstyle("stripe-"+p+"-background-color").value,m=e.pstyle("stripe-"+p+"-background-opacity").value*r,b=g/100;b+l>1&&(b=1-l),!(g===0||l>=1||l+b>1)&&(t.beginPath(),t.rect(i,s+d*l,h,d*b),t.closePath(),this.colorFillStyle(t,y[0],y[1],y[2],m),t.fill(),l+=b)}t.restore()};var Nt={},WE=100;Nt.getPixelRatio=function(){var t=this.data.contexts[0];if(this.forcedPixelRatio!=null)return this.forcedPixelRatio;var e=this.cy.window(),r=t.backingStorePixelRatio||t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1;return(e.devicePixelRatio||1)/r};Nt.paintCache=function(t){for(var e=this.paintCaches=this.paintCaches||[],r=!0,n,a=0;a<e.length;a++)if(n=e[a],n.context===t){r=!1;break}return r&&(n={context:t},e.push(n)),n};Nt.createGradientStyleFor=function(t,e,r,n,a){var i,s=this.usePaths(),o=r.pstyle(e+"-gradient-stop-colors").value,u=r.pstyle(e+"-gradient-stop-positions").pfValue;if(n==="radial-gradient")if(r.isEdge()){var l=r.sourceEndpoint(),f=r.targetEndpoint(),c=r.midpoint(),v=An(l,c),h=An(f,c);i=t.createRadialGradient(c.x,c.y,0,c.x,c.y,Math.max(v,h))}else{var d=s?{x:0,y:0}:r.position(),p=r.paddedWidth(),g=r.paddedHeight();i=t.createRadialGradient(d.x,d.y,0,d.x,d.y,Math.max(p,g))}else if(r.isEdge()){var y=r.sourceEndpoint(),m=r.targetEndpoint();i=t.createLinearGradient(y.x,y.y,m.x,m.y)}else{var b=s?{x:0,y:0}:r.position(),w=r.paddedWidth(),E=r.paddedHeight(),T=w/2,x=E/2,S=r.pstyle("background-gradient-direction").value;switch(S){case"to-bottom":i=t.createLinearGradient(b.x,b.y-x,b.x,b.y+x);break;case"to-top":i=t.createLinearGradient(b.x,b.y+x,b.x,b.y-x);break;case"to-left":i=t.createLinearGradient(b.x+T,b.y,b.x-T,b.y);break;case"to-right":i=t.createLinearGradient(b.x-T,b.y,b.x+T,b.y);break;case"to-bottom-right":case"to-right-bottom":i=t.createLinearGradient(b.x-T,b.y-x,b.x+T,b.y+x);break;case"to-top-right":case"to-right-top":i=t.createLinearGradient(b.x-T,b.y+x,b.x+T,b.y-x);break;case"to-bottom-left":case"to-left-bottom":i=t.createLinearGradient(b.x+T,b.y-x,b.x-T,b.y+x);break;case"to-top-left":case"to-left-top":i=t.createLinearGradient(b.x+T,b.y+x,b.x-T,b.y-x);break}}if(!i)return null;for(var D=u.length===o.length,A=o.length,k=0;k<A;k++)i.addColorStop(D?u[k]:k/(A-1),"rgba("+o[k][0]+","+o[k][1]+","+o[k][2]+","+a+")");return i};Nt.gradientFillStyle=function(t,e,r,n){var a=this.createGradientStyleFor(t,"background",e,r,n);if(!a)return null;t.fillStyle=a};Nt.colorFillStyle=function(t,e,r,n,a){t.fillStyle="rgba("+e+","+r+","+n+","+a+")"};Nt.eleFillStyle=function(t,e,r){var n=e.pstyle("background-fill").value;if(n==="linear-gradient"||n==="radial-gradient")this.gradientFillStyle(t,e,n,r);else{var a=e.pstyle("background-color").value;this.colorFillStyle(t,a[0],a[1],a[2],r)}};Nt.gradientStrokeStyle=function(t,e,r,n){var a=this.createGradientStyleFor(t,"line",e,r,n);if(!a)return null;t.strokeStyle=a};Nt.colorStrokeStyle=function(t,e,r,n,a){t.strokeStyle="rgba("+e+","+r+","+n+","+a+")"};Nt.eleStrokeStyle=function(t,e,r){var n=e.pstyle("line-fill").value;if(n==="linear-gradient"||n==="radial-gradient")this.gradientStrokeStyle(t,e,n,r);else{var a=e.pstyle("line-color").value;this.colorStrokeStyle(t,a[0],a[1],a[2],r)}};Nt.matchCanvasSize=function(t){var e=this,r=e.data,n=e.findContainerClientCoords(),a=n[2],i=n[3],s=e.getPixelRatio(),o=e.motionBlurPxRatio;(t===e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_NODE]||t===e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_DRAG])&&(s=o);var u=a*s,l=i*s,f;if(!(u===e.canvasWidth&&l===e.canvasHeight)){e.fontCaches=null;var c=r.canvasContainer;c.style.width=a+"px",c.style.height=i+"px";for(var v=0;v<e.CANVAS_LAYERS;v++)f=r.canvases[v],f.width=u,f.height=l,f.style.width=a+"px",f.style.height=i+"px";for(var v=0;v<e.BUFFER_COUNT;v++)f=r.bufferCanvases[v],f.width=u,f.height=l,f.style.width=a+"px",f.style.height=i+"px";e.textureMult=1,s<=1&&(f=r.bufferCanvases[e.TEXTURE_BUFFER],e.textureMult=2,f.width=u*e.textureMult,f.height=l*e.textureMult),e.canvasWidth=u,e.canvasHeight=l,e.pixelRatio=s}};Nt.renderTo=function(t,e,r,n){this.render({forcedContext:t,forcedZoom:e,forcedPan:r,drawAllLayers:!0,forcedPxRatio:n})};Nt.clearCanvas=function(){var t=this,e=t.data;function r(n){n.clearRect(0,0,t.canvasWidth,t.canvasHeight)}r(e.contexts[t.NODE]),r(e.contexts[t.DRAG])};Nt.render=function(t){var e=this;t=t||Qh();var r=e.cy,n=t.forcedContext,a=t.drawAllLayers,i=t.drawOnlyNodeLayer,s=t.forcedZoom,o=t.forcedPan,u=t.forcedPxRatio===void 0?this.getPixelRatio():t.forcedPxRatio,l=e.data,f=l.canvasNeedsRedraw,c=e.textureOnViewport&&!n&&(e.pinching||e.hoverData.dragging||e.swipePanning||e.data.wheelZooming),v=t.motionBlur!==void 0?t.motionBlur:e.motionBlur,h=e.motionBlurPxRatio,d=r.hasCompoundNodes(),p=e.hoverData.draggingEles,g=!!(e.hoverData.selecting||e.touchData.selecting);v=v&&!n&&e.motionBlurEnabled&&!g;var y=v;n||(e.prevPxRatio!==u&&(e.invalidateContainerClientCoordsCache(),e.matchCanvasSize(e.container),e.redrawHint("eles",!0),e.redrawHint("drag",!0)),e.prevPxRatio=u),!n&&e.motionBlurTimeout&&clearTimeout(e.motionBlurTimeout),v&&(e.mbFrames==null&&(e.mbFrames=0),e.mbFrames++,e.mbFrames<3&&(y=!1),e.mbFrames>e.minMbLowQualFrames&&(e.motionBlurPxRatio=e.mbPxRBlurry)),e.clearingMotionBlur&&(e.motionBlurPxRatio=1),e.textureDrawLastFrame&&!c&&(f[e.NODE]=!0,f[e.SELECT_BOX]=!0);var m=r.style(),b=r.zoom(),w=s!==void 0?s:b,E=r.pan(),T={x:E.x,y:E.y},x={zoom:b,pan:{x:E.x,y:E.y}},S=e.prevViewport,D=S===void 0||x.zoom!==S.zoom||x.pan.x!==S.pan.x||x.pan.y!==S.pan.y;!D&&!(p&&!d)&&(e.motionBlurPxRatio=1),o&&(T=o),w*=u,T.x*=u,T.y*=u;var A=e.getCachedZSortedEles();function k(ue,q,$,C,B){var _=ue.globalCompositeOperation;ue.globalCompositeOperation="destination-out",e.colorFillStyle(ue,255,255,255,e.motionBlurTransparency),ue.fillRect(q,$,C,B),ue.globalCompositeOperation=_}function R(ue,q){var $,C,B,_;!e.clearingMotionBlur&&(ue===l.bufferContexts[e.MOTIONBLUR_BUFFER_NODE]||ue===l.bufferContexts[e.MOTIONBLUR_BUFFER_DRAG])?($={x:E.x*h,y:E.y*h},C=b*h,B=e.canvasWidth*h,_=e.canvasHeight*h):($=T,C=w,B=e.canvasWidth,_=e.canvasHeight),ue.setTransform(1,0,0,1,0,0),q==="motionBlur"?k(ue,0,0,B,_):!n&&(q===void 0||q)&&ue.clearRect(0,0,B,_),a||(ue.translate($.x,$.y),ue.scale(C,C)),o&&ue.translate(o.x,o.y),s&&ue.scale(s,s)}if(c||(e.textureDrawLastFrame=!1),c){if(e.textureDrawLastFrame=!0,!e.textureCache){e.textureCache={},e.textureCache.bb=r.mutableElements().boundingBox(),e.textureCache.texture=e.data.bufferCanvases[e.TEXTURE_BUFFER];var M=e.data.bufferContexts[e.TEXTURE_BUFFER];M.setTransform(1,0,0,1,0,0),M.clearRect(0,0,e.canvasWidth*e.textureMult,e.canvasHeight*e.textureMult),e.render({forcedContext:M,drawOnlyNodeLayer:!0,forcedPxRatio:u*e.textureMult});var x=e.textureCache.viewport={zoom:r.zoom(),pan:r.pan(),width:e.canvasWidth,height:e.canvasHeight};x.mpan={x:(0-x.pan.x)/x.zoom,y:(0-x.pan.y)/x.zoom}}f[e.DRAG]=!1,f[e.NODE]=!1;var L=l.contexts[e.NODE],N=e.textureCache.texture,x=e.textureCache.viewport;L.setTransform(1,0,0,1,0,0),v?k(L,0,0,x.width,x.height):L.clearRect(0,0,x.width,x.height);var O=m.core("outside-texture-bg-color").value,I=m.core("outside-texture-bg-opacity").value;e.colorFillStyle(L,O[0],O[1],O[2],I),L.fillRect(0,0,x.width,x.height);var b=r.zoom();R(L,!1),L.clearRect(x.mpan.x,x.mpan.y,x.width/x.zoom/u,x.height/x.zoom/u),L.drawImage(N,x.mpan.x,x.mpan.y,x.width/x.zoom/u,x.height/x.zoom/u)}else e.textureOnViewport&&!n&&(e.textureCache=null);var F=r.extent(),H=e.pinching||e.hoverData.dragging||e.swipePanning||e.data.wheelZooming||e.hoverData.draggingEles||e.cy.animated(),G=e.hideEdgesOnViewport&&H,z=[];if(z[e.NODE]=!f[e.NODE]&&v&&!e.clearedForMotionBlur[e.NODE]||e.clearingMotionBlur,z[e.NODE]&&(e.clearedForMotionBlur[e.NODE]=!0),z[e.DRAG]=!f[e.DRAG]&&v&&!e.clearedForMotionBlur[e.DRAG]||e.clearingMotionBlur,z[e.DRAG]&&(e.clearedForMotionBlur[e.DRAG]=!0),f[e.NODE]||a||i||z[e.NODE]){var V=v&&!z[e.NODE]&&h!==1,L=n||(V?e.data.bufferContexts[e.MOTIONBLUR_BUFFER_NODE]:l.contexts[e.NODE]),re=v&&!V?"motionBlur":void 0;R(L,re),G?e.drawCachedNodes(L,A.nondrag,u,F):e.drawLayeredElements(L,A.nondrag,u,F),e.debug&&e.drawDebugPoints(L,A.nondrag),!a&&!v&&(f[e.NODE]=!1)}if(!i&&(f[e.DRAG]||a||z[e.DRAG])){var V=v&&!z[e.DRAG]&&h!==1,L=n||(V?e.data.bufferContexts[e.MOTIONBLUR_BUFFER_DRAG]:l.contexts[e.DRAG]);R(L,v&&!V?"motionBlur":void 0),G?e.drawCachedNodes(L,A.drag,u,F):e.drawCachedElements(L,A.drag,u,F),e.debug&&e.drawDebugPoints(L,A.drag),!a&&!v&&(f[e.DRAG]=!1)}if(this.drawSelectionRectangle(t,R),v&&h!==1){var ie=l.contexts[e.NODE],ne=e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_NODE],oe=l.contexts[e.DRAG],ve=e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_DRAG],ge=function(q,$,C){q.setTransform(1,0,0,1,0,0),C||!y?q.clearRect(0,0,e.canvasWidth,e.canvasHeight):k(q,0,0,e.canvasWidth,e.canvasHeight);var B=h;q.drawImage($,0,0,e.canvasWidth*B,e.canvasHeight*B,0,0,e.canvasWidth,e.canvasHeight)};(f[e.NODE]||z[e.NODE])&&(ge(ie,ne,z[e.NODE]),f[e.NODE]=!1),(f[e.DRAG]||z[e.DRAG])&&(ge(oe,ve,z[e.DRAG]),f[e.DRAG]=!1)}e.prevViewport=x,e.clearingMotionBlur&&(e.clearingMotionBlur=!1,e.motionBlurCleared=!0,e.motionBlur=!0),v&&(e.motionBlurTimeout=setTimeout(function(){e.motionBlurTimeout=null,e.clearedForMotionBlur[e.NODE]=!1,e.clearedForMotionBlur[e.DRAG]=!1,e.motionBlur=!1,e.clearingMotionBlur=!c,e.mbFrames=0,f[e.NODE]=!0,f[e.DRAG]=!0,e.redraw()},WE)),n||r.emit("render")};var Da;Nt.drawSelectionRectangle=function(t,e){var r=this,n=r.cy,a=r.data,i=n.style(),s=t.drawOnlyNodeLayer,o=t.drawAllLayers,u=a.canvasNeedsRedraw,l=t.forcedContext;if(r.showFps||!s&&u[r.SELECT_BOX]&&!o){var f=l||a.contexts[r.SELECT_BOX];if(e(f),r.selection[4]==1&&(r.hoverData.selecting||r.touchData.selecting)){var c=r.cy.zoom(),v=i.core("selection-box-border-width").value/c;f.lineWidth=v,f.fillStyle="rgba("+i.core("selection-box-color").value[0]+","+i.core("selection-box-color").value[1]+","+i.core("selection-box-color").value[2]+","+i.core("selection-box-opacity").value+")",f.fillRect(r.selection[0],r.selection[1],r.selection[2]-r.selection[0],r.selection[3]-r.selection[1]),v>0&&(f.strokeStyle="rgba("+i.core("selection-box-border-color").value[0]+","+i.core("selection-box-border-color").value[1]+","+i.core("selection-box-border-color").value[2]+","+i.core("selection-box-opacity").value+")",f.strokeRect(r.selection[0],r.selection[1],r.selection[2]-r.selection[0],r.selection[3]-r.selection[1]))}if(a.bgActivePosistion&&!r.hoverData.selecting){var c=r.cy.zoom(),h=a.bgActivePosistion;f.fillStyle="rgba("+i.core("active-bg-color").value[0]+","+i.core("active-bg-color").value[1]+","+i.core("active-bg-color").value[2]+","+i.core("active-bg-opacity").value+")",f.beginPath(),f.arc(h.x,h.y,i.core("active-bg-size").pfValue/c,0,2*Math.PI),f.fill()}var d=r.lastRedrawTime;if(r.showFps&&d){d=Math.round(d);var p=Math.round(1e3/d),g="1 frame = "+d+" ms = "+p+" fps";if(f.setTransform(1,0,0,1,0,0),f.fillStyle="rgba(255, 0, 0, 0.75)",f.strokeStyle="rgba(255, 0, 0, 0.75)",f.font="30px Arial",!Da){var y=f.measureText(g);Da=y.actualBoundingBoxAscent}f.fillText(g,0,Da);var m=60;f.strokeRect(0,Da+10,250,20),f.fillRect(0,Da+10,250*Math.min(p/m,1),20)}o||(u[r.SELECT_BOX]=!1)}};function pd(t,e,r){var n=t.createShader(e);if(t.shaderSource(n,r),t.compileShader(n),!t.getShaderParameter(n,t.COMPILE_STATUS))throw new Error(t.getShaderInfoLog(n));return n}function KE(t,e,r){var n=pd(t,t.VERTEX_SHADER,e),a=pd(t,t.FRAGMENT_SHADER,r),i=t.createProgram();if(t.attachShader(i,n),t.attachShader(i,a),t.linkProgram(i),!t.getProgramParameter(i,t.LINK_STATUS))throw new Error("Could not initialize shaders");return i}function YE(t,e,r){r===void 0&&(r=e);var n=t.makeOffscreenCanvas(e,r),a=n.context=n.getContext("2d");return n.clear=function(){return a.clearRect(0,0,n.width,n.height)},n.clear(),n}function cf(t){var e=t.pixelRatio,r=t.cy.zoom(),n=t.cy.pan();return{zoom:r*e,pan:{x:n.x*e,y:n.y*e}}}function XE(t){var e=t.pixelRatio,r=t.cy.zoom();return r*e}function ZE(t,e,r,n,a){var i=n*r+e.x,s=a*r+e.y;return s=Math.round(t.canvasHeight-s),[i,s]}function QE(t){return t.pstyle("background-fill").value!=="solid"||t.pstyle("background-image").strValue!=="none"?!1:t.pstyle("border-width").value===0||t.pstyle("border-opacity").value===0?!0:t.pstyle("border-style").value==="solid"}function JE(t,e){if(t.length!==e.length)return!1;for(var r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}function yn(t,e,r){var n=t[0]/255,a=t[1]/255,i=t[2]/255,s=e,o=r||new Array(4);return o[0]=n*s,o[1]=a*s,o[2]=i*s,o[3]=s,o}function $n(t,e){var r=e||new Array(4);return r[0]=(t>>0&255)/255,r[1]=(t>>8&255)/255,r[2]=(t>>16&255)/255,r[3]=(t>>24&255)/255,r}function jE(t){return t[0]+(t[1]<<8)+(t[2]<<16)+(t[3]<<24)}function eC(t,e){var r=t.createTexture();return r.buffer=function(n){t.bindTexture(t.TEXTURE_2D,r),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR_MIPMAP_NEAREST),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,n),t.generateMipmap(t.TEXTURE_2D),t.bindTexture(t.TEXTURE_2D,null)},r.deleteTexture=function(){t.deleteTexture(r)},r}function fp(t,e){switch(e){case"float":return[1,t.FLOAT,4];case"vec2":return[2,t.FLOAT,4];case"vec3":return[3,t.FLOAT,4];case"vec4":return[4,t.FLOAT,4];case"int":return[1,t.INT,4];case"ivec2":return[2,t.INT,4]}}function cp(t,e,r){switch(e){case t.FLOAT:return new Float32Array(r);case t.INT:return new Int32Array(r)}}function tC(t,e,r,n,a,i){switch(e){case t.FLOAT:return new Float32Array(r.buffer,i*n,a);case t.INT:return new Int32Array(r.buffer,i*n,a)}}function rC(t,e,r,n){var a=fp(t,e),i=st(a,2),s=i[0],o=i[1],u=cp(t,o,n),l=t.createBuffer();return t.bindBuffer(t.ARRAY_BUFFER,l),t.bufferData(t.ARRAY_BUFFER,u,t.STATIC_DRAW),o===t.FLOAT?t.vertexAttribPointer(r,s,o,!1,0,0):o===t.INT&&t.vertexAttribIPointer(r,s,o,0,0),t.enableVertexAttribArray(r),t.bindBuffer(t.ARRAY_BUFFER,null),l}function or(t,e,r,n){var a=fp(t,r),i=st(a,3),s=i[0],o=i[1],u=i[2],l=cp(t,o,e*s),f=s*u,c=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,c),t.bufferData(t.ARRAY_BUFFER,e*f,t.DYNAMIC_DRAW),t.enableVertexAttribArray(n),o===t.FLOAT?t.vertexAttribPointer(n,s,o,!1,f,0):o===t.INT&&t.vertexAttribIPointer(n,s,o,f,0),t.vertexAttribDivisor(n,1),t.bindBuffer(t.ARRAY_BUFFER,null);for(var v=new Array(e),h=0;h<e;h++)v[h]=tC(t,o,l,f,s,h);return c.dataArray=l,c.stride=f,c.size=s,c.getView=function(d){return v[d]},c.setPoint=function(d,p,g){var y=v[d];y[0]=p,y[1]=g},c.bufferSubData=function(d){t.bindBuffer(t.ARRAY_BUFFER,c),d?t.bufferSubData(t.ARRAY_BUFFER,0,l,0,d*s):t.bufferSubData(t.ARRAY_BUFFER,0,l)},c}function nC(t,e,r){for(var n=9,a=new Float32Array(e*n),i=new Array(e),s=0;s<e;s++){var o=s*n*4;i[s]=new Float32Array(a.buffer,o,n)}var u=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,u),t.bufferData(t.ARRAY_BUFFER,a.byteLength,t.DYNAMIC_DRAW);for(var l=0;l<3;l++){var f=r+l;t.enableVertexAttribArray(f),t.vertexAttribPointer(f,3,t.FLOAT,!1,36,l*12),t.vertexAttribDivisor(f,1)}return t.bindBuffer(t.ARRAY_BUFFER,null),u.getMatrixView=function(c){return i[c]},u.setData=function(c,v){i[v].set(c,0)},u.bufferSubData=function(){t.bindBuffer(t.ARRAY_BUFFER,u),t.bufferSubData(t.ARRAY_BUFFER,0,a)},u}function aC(t){var e=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,e);var r=t.createTexture();return t.bindTexture(t.TEXTURE_2D,r),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,r,0),t.bindFramebuffer(t.FRAMEBUFFER,null),e.setFramebufferAttachmentSizes=function(n,a){t.bindTexture(t.TEXTURE_2D,r),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,n,a,0,t.RGBA,t.UNSIGNED_BYTE,null)},e}var yd=typeof Float32Array<"u"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});function zu(){var t=new yd(9);return yd!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}function md(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function iC(t,e,r){var n=e[0],a=e[1],i=e[2],s=e[3],o=e[4],u=e[5],l=e[6],f=e[7],c=e[8],v=r[0],h=r[1],d=r[2],p=r[3],g=r[4],y=r[5],m=r[6],b=r[7],w=r[8];return t[0]=v*n+h*s+d*l,t[1]=v*a+h*o+d*f,t[2]=v*i+h*u+d*c,t[3]=p*n+g*s+y*l,t[4]=p*a+g*o+y*f,t[5]=p*i+g*u+y*c,t[6]=m*n+b*s+w*l,t[7]=m*a+b*o+w*f,t[8]=m*i+b*u+w*c,t}function ts(t,e,r){var n=e[0],a=e[1],i=e[2],s=e[3],o=e[4],u=e[5],l=e[6],f=e[7],c=e[8],v=r[0],h=r[1];return t[0]=n,t[1]=a,t[2]=i,t[3]=s,t[4]=o,t[5]=u,t[6]=v*n+h*s+l,t[7]=v*a+h*o+f,t[8]=v*i+h*u+c,t}function bd(t,e,r){var n=e[0],a=e[1],i=e[2],s=e[3],o=e[4],u=e[5],l=e[6],f=e[7],c=e[8],v=Math.sin(r),h=Math.cos(r);return t[0]=h*n+v*s,t[1]=h*a+v*o,t[2]=h*i+v*u,t[3]=h*s-v*n,t[4]=h*o-v*a,t[5]=h*u-v*i,t[6]=l,t[7]=f,t[8]=c,t}function ml(t,e,r){var n=r[0],a=r[1];return t[0]=n*e[0],t[1]=n*e[1],t[2]=n*e[2],t[3]=a*e[3],t[4]=a*e[4],t[5]=a*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function sC(t,e,r){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/r,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t}var oC=(function(){function t(e,r,n,a){un(this,t),this.debugID=Math.floor(Math.random()*1e4),this.r=e,this.texSize=r,this.texRows=n,this.texHeight=Math.floor(r/n),this.enableWrapping=!0,this.locked=!1,this.texture=null,this.needsBuffer=!0,this.freePointer={x:0,row:0},this.keyToLocation=new Map,this.canvas=a(e,r,r),this.scratch=a(e,r,this.texHeight,"scratch")}return ln(t,[{key:"lock",value:function(){this.locked=!0}},{key:"getKeys",value:function(){return new Set(this.keyToLocation.keys())}},{key:"getScale",value:function(r){var n=r.w,a=r.h,i=this.texHeight,s=this.texSize,o=i/a,u=n*o,l=a*o;return u>s&&(o=s/n,u=n*o,l=a*o),{scale:o,texW:u,texH:l}}},{key:"draw",value:function(r,n,a){var i=this;if(this.locked)throw new Error("can't draw, atlas is locked");var s=this.texSize,o=this.texRows,u=this.texHeight,l=this.getScale(n),f=l.scale,c=l.texW,v=l.texH,h=function(b,w){if(a&&w){var E=w.context,T=b.x,x=b.row,S=T,D=u*x;E.save(),E.translate(S,D),E.scale(f,f),a(E,n),E.restore()}},d=[null,null],p=function(){h(i.freePointer,i.canvas),d[0]={x:i.freePointer.x,y:i.freePointer.row*u,w:c,h:v},d[1]={x:i.freePointer.x+c,y:i.freePointer.row*u,w:0,h:v},i.freePointer.x+=c,i.freePointer.x==s&&(i.freePointer.x=0,i.freePointer.row++)},g=function(){var b=i.scratch,w=i.canvas;b.clear(),h({x:0,row:0},b);var E=s-i.freePointer.x,T=c-E,x=u;{var S=i.freePointer.x,D=i.freePointer.row*u,A=E;w.context.drawImage(b,0,0,A,x,S,D,A,x),d[0]={x:S,y:D,w:A,h:v}}{var k=E,R=(i.freePointer.row+1)*u,M=T;w&&w.context.drawImage(b,k,0,M,x,0,R,M,x),d[1]={x:0,y:R,w:M,h:v}}i.freePointer.x=T,i.freePointer.row++},y=function(){i.freePointer.x=0,i.freePointer.row++};if(this.freePointer.x+c<=s)p();else{if(this.freePointer.row>=o-1)return!1;this.freePointer.x===s?(y(),p()):this.enableWrapping?g():(y(),p())}return this.keyToLocation.set(r,d),this.needsBuffer=!0,d}},{key:"getOffsets",value:function(r){return this.keyToLocation.get(r)}},{key:"isEmpty",value:function(){return this.freePointer.x===0&&this.freePointer.row===0}},{key:"canFit",value:function(r){if(this.locked)return!1;var n=this.texSize,a=this.texRows,i=this.getScale(r),s=i.texW;return this.freePointer.x+s>n?this.freePointer.row<a-1:!0}},{key:"bufferIfNeeded",value:function(r){this.texture||(this.texture=eC(r,this.debugID)),this.needsBuffer&&(this.texture.buffer(this.canvas),this.needsBuffer=!1,this.locked&&(this.canvas=null,this.scratch=null))}},{key:"dispose",value:function(){this.texture&&(this.texture.deleteTexture(),this.texture=null),this.canvas=null,this.scratch=null,this.locked=!0}}])})(),uC=(function(){function t(e,r,n,a){un(this,t),this.r=e,this.texSize=r,this.texRows=n,this.createTextureCanvas=a,this.atlases=[],this.styleKeyToAtlas=new Map,this.markedKeys=new Set}return ln(t,[{key:"getKeys",value:function(){return new Set(this.styleKeyToAtlas.keys())}},{key:"_createAtlas",value:function(){var r=this.r,n=this.texSize,a=this.texRows,i=this.createTextureCanvas;return new oC(r,n,a,i)}},{key:"_getScratchCanvas",value:function(){if(!this.scratch){var r=this.r,n=this.texSize,a=this.texRows,i=this.createTextureCanvas,s=Math.floor(n/a);this.scratch=i(r,n,s,"scratch")}return this.scratch}},{key:"draw",value:function(r,n,a){var i=this.styleKeyToAtlas.get(r);return i||(i=this.atlases[this.atlases.length-1],(!i||!i.canFit(n))&&(i&&i.lock(),i=this._createAtlas(),this.atlases.push(i)),i.draw(r,n,a),this.styleKeyToAtlas.set(r,i)),i}},{key:"getAtlas",value:function(r){return this.styleKeyToAtlas.get(r)}},{key:"hasAtlas",value:function(r){return this.styleKeyToAtlas.has(r)}},{key:"markKeyForGC",value:function(r){this.markedKeys.add(r)}},{key:"gc",value:function(){var r=this,n=this.markedKeys;if(n.size===0){console.log("nothing to garbage collect");return}var a=[],i=new Map,s=null,o=$t(this.atlases),u;try{var l=function(){var c=u.value,v=c.getKeys(),h=lC(n,v);if(h.size===0)return a.push(c),v.forEach(function(E){return i.set(E,c)}),1;s||(s=r._createAtlas(),a.push(s));var d=$t(v),p;try{for(d.s();!(p=d.n()).done;){var g=p.value;if(!h.has(g)){var y=c.getOffsets(g),m=st(y,2),b=m[0],w=m[1];s.canFit({w:b.w+w.w,h:b.h})||(s.lock(),s=r._createAtlas(),a.push(s)),c.canvas&&(r._copyTextureToNewAtlas(g,c,s),i.set(g,s))}}}catch(E){d.e(E)}finally{d.f()}c.dispose()};for(o.s();!(u=o.n()).done;)l()}catch(f){o.e(f)}finally{o.f()}this.atlases=a,this.styleKeyToAtlas=i,this.markedKeys=new Set}},{key:"_copyTextureToNewAtlas",value:function(r,n,a){var i=n.getOffsets(r),s=st(i,2),o=s[0],u=s[1];if(u.w===0)a.draw(r,o,function(v){v.drawImage(n.canvas,o.x,o.y,o.w,o.h,0,0,o.w,o.h)});else{var l=this._getScratchCanvas();l.clear(),l.context.drawImage(n.canvas,o.x,o.y,o.w,o.h,0,0,o.w,o.h),l.context.drawImage(n.canvas,u.x,u.y,u.w,u.h,o.w,0,u.w,u.h);var f=o.w+u.w,c=o.h;a.draw(r,{w:f,h:c},function(v){v.drawImage(l,0,0,f,c,0,0,f,c)})}}},{key:"getCounts",value:function(){return{keyCount:this.styleKeyToAtlas.size,atlasCount:new Set(this.styleKeyToAtlas.values()).size}}}])})();function lC(t,e){return t.intersection?t.intersection(e):new Set(fs(t).filter(function(r){return e.has(r)}))}var fC=(function(){function t(e,r){un(this,t),this.r=e,this.globalOptions=r,this.atlasSize=r.webglTexSize,this.maxAtlasesPerBatch=r.webglTexPerBatch,this.renderTypes=new Map,this.collections=new Map,this.typeAndIdToKey=new Map}return ln(t,[{key:"getAtlasSize",value:function(){return this.atlasSize}},{key:"addAtlasCollection",value:function(r,n){var a=this.globalOptions,i=a.webglTexSize,s=a.createTextureCanvas,o=n.texRows,u=this._cacheScratchCanvas(s),l=new uC(this.r,i,o,u);this.collections.set(r,l)}},{key:"addRenderType",value:function(r,n){var a=n.collection;if(!this.collections.has(a))throw new Error("invalid atlas collection name '".concat(a,"'"));var i=this.collections.get(a),s=ke({type:r,atlasCollection:i},n);this.renderTypes.set(r,s)}},{key:"getRenderTypeOpts",value:function(r){return this.renderTypes.get(r)}},{key:"getAtlasCollection",value:function(r){return this.collections.get(r)}},{key:"_cacheScratchCanvas",value:function(r){var n=-1,a=-1,i=null;return function(s,o,u,l){return l?((!i||o!=n||u!=a)&&(n=o,a=u,i=r(s,o,u)),i):r(s,o,u)}}},{key:"_key",value:function(r,n){return"".concat(r,"-").concat(n)}},{key:"invalidate",value:function(r){var n=this,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=a.forceRedraw,s=i===void 0?!1:i,o=a.filterEle,u=o===void 0?function(){return!0}:o,l=a.filterType,f=l===void 0?function(){return!0}:l,c=!1,v=!1,h=$t(r),d;try{for(h.s();!(d=h.n()).done;){var p=d.value;if(u(p)){var g=$t(this.renderTypes.values()),y;try{var m=function(){var w=y.value,E=w.type;if(f(E)){var T=n.collections.get(w.collection),x=w.getKey(p),S=Array.isArray(x)?x:[x];if(s)S.forEach(function(R){return T.markKeyForGC(R)}),v=!0;else{var D=w.getID?w.getID(p):p.id(),A=n._key(E,D),k=n.typeAndIdToKey.get(A);k!==void 0&&!JE(S,k)&&(c=!0,n.typeAndIdToKey.delete(A),k.forEach(function(R){return T.markKeyForGC(R)}))}}};for(g.s();!(y=g.n()).done;)m()}catch(b){g.e(b)}finally{g.f()}}}}catch(b){h.e(b)}finally{h.f()}return v&&(this.gc(),c=!1),c}},{key:"gc",value:function(){var r=$t(this.collections.values()),n;try{for(r.s();!(n=r.n()).done;){var a=n.value;a.gc()}}catch(i){r.e(i)}finally{r.f()}}},{key:"getOrCreateAtlas",value:function(r,n,a,i){var s=this.renderTypes.get(n),o=this.collections.get(s.collection),u=!1,l=o.draw(i,a,function(v){s.drawClipped?(v.save(),v.beginPath(),v.rect(0,0,a.w,a.h),v.clip(),s.drawElement(v,r,a,!0,!0),v.restore()):s.drawElement(v,r,a,!0,!0),u=!0});if(u){var f=s.getID?s.getID(r):r.id(),c=this._key(n,f);this.typeAndIdToKey.has(c)?this.typeAndIdToKey.get(c).push(i):this.typeAndIdToKey.set(c,[i])}return l}},{key:"getAtlasInfo",value:function(r,n){var a=this,i=this.renderTypes.get(n),s=i.getKey(r),o=Array.isArray(s)?s:[s];return o.map(function(u){var l=i.getBoundingBox(r,u),f=a.getOrCreateAtlas(r,n,l,u),c=f.getOffsets(u),v=st(c,2),h=v[0],d=v[1];return{atlas:f,tex:h,tex1:h,tex2:d,bb:l}})}},{key:"getDebugInfo",value:function(){var r=[],n=$t(this.collections),a;try{for(n.s();!(a=n.n()).done;){var i=st(a.value,2),s=i[0],o=i[1],u=o.getCounts(),l=u.keyCount,f=u.atlasCount;r.push({type:s,keyCount:l,atlasCount:f})}}catch(c){n.e(c)}finally{n.f()}return r}}])})(),cC=(function(){function t(e){un(this,t),this.globalOptions=e,this.atlasSize=e.webglTexSize,this.maxAtlasesPerBatch=e.webglTexPerBatch,this.batchAtlases=[]}return ln(t,[{key:"getMaxAtlasesPerBatch",value:function(){return this.maxAtlasesPerBatch}},{key:"getAtlasSize",value:function(){return this.atlasSize}},{key:"getIndexArray",value:function(){return Array.from({length:this.maxAtlasesPerBatch},function(r,n){return n})}},{key:"startBatch",value:function(){this.batchAtlases=[]}},{key:"getAtlasCount",value:function(){return this.batchAtlases.length}},{key:"getAtlases",value:function(){return this.batchAtlases}},{key:"canAddToCurrentBatch",value:function(r){return this.batchAtlases.length===this.maxAtlasesPerBatch?this.batchAtlases.includes(r):!0}},{key:"getAtlasIndexForBatch",value:function(r){var n=this.batchAtlases.indexOf(r);if(n<0){if(this.batchAtlases.length===this.maxAtlasesPerBatch)throw new Error("cannot add more atlases to batch");this.batchAtlases.push(r),n=this.batchAtlases.length-1}return n}}])})(),vC=`
  float circleSD(vec2 p, float r) {
    return distance(vec2(0), p) - r; // signed distance
  }
`,dC=`
  float rectangleSD(vec2 p, vec2 b) {
    vec2 d = abs(p)-b;
    return distance(vec2(0),max(d,0.0)) + min(max(d.x,d.y),0.0);
  }
`,hC=`
  float roundRectangleSD(vec2 p, vec2 b, vec4 cr) {
    cr.xy = (p.x > 0.0) ? cr.xy : cr.zw;
    cr.x  = (p.y > 0.0) ? cr.x  : cr.y;
    vec2 q = abs(p) - b + cr.x;
    return min(max(q.x, q.y), 0.0) + distance(vec2(0), max(q, 0.0)) - cr.x;
  }
`,gC=`
  float ellipseSD(vec2 p, vec2 ab) {
    p = abs( p ); // symmetry

    // find root with Newton solver
    vec2 q = ab*(p-ab);
    float w = (q.x<q.y)? 1.570796327 : 0.0;
    for( int i=0; i<5; i++ ) {
      vec2 cs = vec2(cos(w),sin(w));
      vec2 u = ab*vec2( cs.x,cs.y);
      vec2 v = ab*vec2(-cs.y,cs.x);
      w = w + dot(p-u,v)/(dot(p-u,u)+dot(v,v));
    }
    
    // compute final point and distance
    float d = length(p-ab*vec2(cos(w),sin(w)));
    
    // return signed distance
    return (dot(p/ab,p/ab)>1.0) ? d : -d;
  }
`,Ga={SCREEN:{name:"screen",screen:!0},PICKING:{name:"picking",picking:!0}},Es={IGNORE:1,USE_BB:2},Vu=0,wd=1,xd=2,qu=3,Un=4,Vi=5,Aa=6,ka=7,pC=(function(){function t(e,r,n){un(this,t),this.r=e,this.gl=r,this.maxInstances=n.webglBatchSize,this.atlasSize=n.webglTexSize,this.bgColor=n.bgColor,this.debug=n.webglDebug,this.batchDebugInfo=[],n.enableWrapping=!0,n.createTextureCanvas=YE,this.atlasManager=new fC(e,n),this.batchManager=new cC(n),this.simpleShapeOptions=new Map,this.program=this._createShaderProgram(Ga.SCREEN),this.pickingProgram=this._createShaderProgram(Ga.PICKING),this.vao=this._createVAO()}return ln(t,[{key:"addAtlasCollection",value:function(r,n){this.atlasManager.addAtlasCollection(r,n)}},{key:"addTextureAtlasRenderType",value:function(r,n){this.atlasManager.addRenderType(r,n)}},{key:"addSimpleShapeRenderType",value:function(r,n){this.simpleShapeOptions.set(r,n)}},{key:"invalidate",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=n.type,i=this.atlasManager;return a?i.invalidate(r,{filterType:function(o){return o===a},forceRedraw:!0}):i.invalidate(r)}},{key:"gc",value:function(){this.atlasManager.gc()}},{key:"_createShaderProgram",value:function(r){var n=this.gl,a=`#version 300 es
      precision highp float;

      uniform mat3 uPanZoomMatrix;
      uniform int  uAtlasSize;
      
      // instanced
      in vec2 aPosition; // a vertex from the unit square
      
      in mat3 aTransform; // used to transform verticies, eg into a bounding box
      in int aVertType; // the type of thing we are rendering

      // the z-index that is output when using picking mode
      in vec4 aIndex;
      
      // For textures
      in int aAtlasId; // which shader unit/atlas to use
      in vec4 aTex; // x/y/w/h of texture in atlas

      // for edges
      in vec4 aPointAPointB;
      in vec4 aPointCPointD;
      in vec2 aLineWidth; // also used for node border width

      // simple shapes
      in vec4 aCornerRadius; // for round-rectangle [top-right, bottom-right, top-left, bottom-left]
      in vec4 aColor; // also used for edges
      in vec4 aBorderColor; // aLineWidth is used for border width

      // output values passed to the fragment shader
      out vec2 vTexCoord;
      out vec4 vColor;
      out vec2 vPosition;
      // flat values are not interpolated
      flat out int vAtlasId; 
      flat out int vVertType;
      flat out vec2 vTopRight;
      flat out vec2 vBotLeft;
      flat out vec4 vCornerRadius;
      flat out vec4 vBorderColor;
      flat out vec2 vBorderWidth;
      flat out vec4 vIndex;
      
      void main(void) {
        int vid = gl_VertexID;
        vec2 position = aPosition; // TODO make this a vec3, simplifies some code below

        if(aVertType == `.concat(Vu,`) {
          float texX = aTex.x; // texture coordinates
          float texY = aTex.y;
          float texW = aTex.z;
          float texH = aTex.w;

          if(vid == 1 || vid == 2 || vid == 4) {
            texX += texW;
          }
          if(vid == 2 || vid == 4 || vid == 5) {
            texY += texH;
          }

          float d = float(uAtlasSize);
          vTexCoord = vec2(texX / d, texY / d); // tex coords must be between 0 and 1

          gl_Position = vec4(uPanZoomMatrix * aTransform * vec3(position, 1.0), 1.0);
        }
        else if(aVertType == `).concat(Un," || aVertType == ").concat(ka,` 
             || aVertType == `).concat(Vi," || aVertType == ").concat(Aa,`) { // simple shapes

          // the bounding box is needed by the fragment shader
          vBotLeft  = (aTransform * vec3(0, 0, 1)).xy; // flat
          vTopRight = (aTransform * vec3(1, 1, 1)).xy; // flat
          vPosition = (aTransform * vec3(position, 1)).xy; // will be interpolated

          // calculations are done in the fragment shader, just pass these along
          vColor = aColor;
          vCornerRadius = aCornerRadius;
          vBorderColor = aBorderColor;
          vBorderWidth = aLineWidth;

          gl_Position = vec4(uPanZoomMatrix * aTransform * vec3(position, 1.0), 1.0);
        }
        else if(aVertType == `).concat(wd,`) {
          vec2 source = aPointAPointB.xy;
          vec2 target = aPointAPointB.zw;

          // adjust the geometry so that the line is centered on the edge
          position.y = position.y - 0.5;

          // stretch the unit square into a long skinny rectangle
          vec2 xBasis = target - source;
          vec2 yBasis = normalize(vec2(-xBasis.y, xBasis.x));
          vec2 point = source + xBasis * position.x + yBasis * aLineWidth[0] * position.y;

          gl_Position = vec4(uPanZoomMatrix * vec3(point, 1.0), 1.0);
          vColor = aColor;
        } 
        else if(aVertType == `).concat(xd,`) {
          vec2 pointA = aPointAPointB.xy;
          vec2 pointB = aPointAPointB.zw;
          vec2 pointC = aPointCPointD.xy;
          vec2 pointD = aPointCPointD.zw;

          // adjust the geometry so that the line is centered on the edge
          position.y = position.y - 0.5;

          vec2 p0, p1, p2, pos;
          if(position.x == 0.0) { // The left side of the unit square
            p0 = pointA;
            p1 = pointB;
            p2 = pointC;
            pos = position;
          } else { // The right side of the unit square, use same approach but flip the geometry upside down
            p0 = pointD;
            p1 = pointC;
            p2 = pointB;
            pos = vec2(0.0, -position.y);
          }

          vec2 p01 = p1 - p0;
          vec2 p12 = p2 - p1;
          vec2 p21 = p1 - p2;

          // Find the normal vector.
          vec2 tangent = normalize(normalize(p12) + normalize(p01));
          vec2 normal = vec2(-tangent.y, tangent.x);

          // Find the vector perpendicular to p0 -> p1.
          vec2 p01Norm = normalize(vec2(-p01.y, p01.x));

          // Determine the bend direction.
          float sigma = sign(dot(p01 + p21, normal));
          float width = aLineWidth[0];

          if(sign(pos.y) == -sigma) {
            // This is an intersecting vertex. Adjust the position so that there's no overlap.
            vec2 point = 0.5 * width * normal * -sigma / dot(normal, p01Norm);
            gl_Position = vec4(uPanZoomMatrix * vec3(p1 + point, 1.0), 1.0);
          } else {
            // This is a non-intersecting vertex. Treat it like a mitre join.
            vec2 point = 0.5 * width * normal * sigma * dot(normal, p01Norm);
            gl_Position = vec4(uPanZoomMatrix * vec3(p1 + point, 1.0), 1.0);
          }

          vColor = aColor;
        } 
        else if(aVertType == `).concat(qu,` && vid < 3) {
          // massage the first triangle into an edge arrow
          if(vid == 0)
            position = vec2(-0.15, -0.3);
          if(vid == 1)
            position = vec2(  0.0,  0.0);
          if(vid == 2)
            position = vec2( 0.15, -0.3);

          gl_Position = vec4(uPanZoomMatrix * aTransform * vec3(position, 1.0), 1.0);
          vColor = aColor;
        }
        else {
          gl_Position = vec4(2.0, 0.0, 0.0, 1.0); // discard vertex by putting it outside webgl clip space
        }

        vAtlasId = aAtlasId;
        vVertType = aVertType;
        vIndex = aIndex;
      }
    `),i=this.batchManager.getIndexArray(),s=`#version 300 es
      precision highp float;

      // declare texture unit for each texture atlas in the batch
      `.concat(i.map(function(l){return"uniform sampler2D uTexture".concat(l,";")}).join(`
	`),`

      uniform vec4 uBGColor;
      uniform float uZoom;

      in vec2 vTexCoord;
      in vec4 vColor;
      in vec2 vPosition; // model coordinates

      flat in int vAtlasId;
      flat in vec4 vIndex;
      flat in int vVertType;
      flat in vec2 vTopRight;
      flat in vec2 vBotLeft;
      flat in vec4 vCornerRadius;
      flat in vec4 vBorderColor;
      flat in vec2 vBorderWidth;

      out vec4 outColor;

      `).concat(vC,`
      `).concat(dC,`
      `).concat(hC,`
      `).concat(gC,`

      vec4 blend(vec4 top, vec4 bot) { // blend colors with premultiplied alpha
        return vec4( 
          top.rgb + (bot.rgb * (1.0 - top.a)),
          top.a   + (bot.a   * (1.0 - top.a)) 
        );
      }

      vec4 distInterp(vec4 cA, vec4 cB, float d) { // interpolate color using Signed Distance
        // scale to the zoom level so that borders don't look blurry when zoomed in
        // note 1.5 is an aribitrary value chosen because it looks good
        return mix(cA, cB, 1.0 - smoothstep(0.0, 1.5 / uZoom, abs(d))); 
      }

      void main(void) {
        if(vVertType == `).concat(Vu,`) {
          // look up the texel from the texture unit
          `).concat(i.map(function(l){return"if(vAtlasId == ".concat(l,") outColor = texture(uTexture").concat(l,", vTexCoord);")}).join(`
	else `),`
        } 
        else if(vVertType == `).concat(qu,`) {
          // mimics how canvas renderer uses context.globalCompositeOperation = 'destination-out';
          outColor = blend(vColor, uBGColor);
          outColor.a = 1.0; // make opaque, masks out line under arrow
        }
        else if(vVertType == `).concat(Un,` && vBorderWidth == vec2(0.0)) { // simple rectangle with no border
          outColor = vColor; // unit square is already transformed to the rectangle, nothing else needs to be done
        }
        else if(vVertType == `).concat(Un," || vVertType == ").concat(ka,` 
          || vVertType == `).concat(Vi," || vVertType == ").concat(Aa,`) { // use SDF

          float outerBorder = vBorderWidth[0];
          float innerBorder = vBorderWidth[1];
          float borderPadding = outerBorder * 2.0;
          float w = vTopRight.x - vBotLeft.x - borderPadding;
          float h = vTopRight.y - vBotLeft.y - borderPadding;
          vec2 b = vec2(w/2.0, h/2.0); // half width, half height
          vec2 p = vPosition - vec2(vTopRight.x - b[0] - outerBorder, vTopRight.y - b[1] - outerBorder); // translate to center

          float d; // signed distance
          if(vVertType == `).concat(Un,`) {
            d = rectangleSD(p, b);
          } else if(vVertType == `).concat(ka,` && w == h) {
            d = circleSD(p, b.x); // faster than ellipse
          } else if(vVertType == `).concat(ka,`) {
            d = ellipseSD(p, b);
          } else {
            d = roundRectangleSD(p, b, vCornerRadius.wzyx);
          }

          // use the distance to interpolate a color to smooth the edges of the shape, doesn't need multisampling
          // we must smooth colors inwards, because we can't change pixels outside the shape's bounding box
          if(d > 0.0) {
            if(d > outerBorder) {
              discard;
            } else {
              outColor = distInterp(vBorderColor, vec4(0), d - outerBorder);
            }
          } else {
            if(d > innerBorder) {
              vec4 outerColor = outerBorder == 0.0 ? vec4(0) : vBorderColor;
              vec4 innerBorderColor = blend(vBorderColor, vColor);
              outColor = distInterp(innerBorderColor, outerColor, d);
            } 
            else {
              vec4 outerColor;
              if(innerBorder == 0.0 && outerBorder == 0.0) {
                outerColor = vec4(0);
              } else if(innerBorder == 0.0) {
                outerColor = vBorderColor;
              } else {
                outerColor = blend(vBorderColor, vColor);
              }
              outColor = distInterp(vColor, outerColor, d - innerBorder);
            }
          }
        }
        else {
          outColor = vColor;
        }

        `).concat(r.picking?`if(outColor.a == 0.0) discard;
             else outColor = vIndex;`:"",`
      }
    `),o=KE(n,a,s);o.aPosition=n.getAttribLocation(o,"aPosition"),o.aIndex=n.getAttribLocation(o,"aIndex"),o.aVertType=n.getAttribLocation(o,"aVertType"),o.aTransform=n.getAttribLocation(o,"aTransform"),o.aAtlasId=n.getAttribLocation(o,"aAtlasId"),o.aTex=n.getAttribLocation(o,"aTex"),o.aPointAPointB=n.getAttribLocation(o,"aPointAPointB"),o.aPointCPointD=n.getAttribLocation(o,"aPointCPointD"),o.aLineWidth=n.getAttribLocation(o,"aLineWidth"),o.aColor=n.getAttribLocation(o,"aColor"),o.aCornerRadius=n.getAttribLocation(o,"aCornerRadius"),o.aBorderColor=n.getAttribLocation(o,"aBorderColor"),o.uPanZoomMatrix=n.getUniformLocation(o,"uPanZoomMatrix"),o.uAtlasSize=n.getUniformLocation(o,"uAtlasSize"),o.uBGColor=n.getUniformLocation(o,"uBGColor"),o.uZoom=n.getUniformLocation(o,"uZoom"),o.uTextures=[];for(var u=0;u<this.batchManager.getMaxAtlasesPerBatch();u++)o.uTextures.push(n.getUniformLocation(o,"uTexture".concat(u)));return o}},{key:"_createVAO",value:function(){var r=[0,0,1,0,1,1,0,0,1,1,0,1];this.vertexCount=r.length/2;var n=this.maxInstances,a=this.gl,i=this.program,s=a.createVertexArray();return a.bindVertexArray(s),rC(a,"vec2",i.aPosition,r),this.transformBuffer=nC(a,n,i.aTransform),this.indexBuffer=or(a,n,"vec4",i.aIndex),this.vertTypeBuffer=or(a,n,"int",i.aVertType),this.atlasIdBuffer=or(a,n,"int",i.aAtlasId),this.texBuffer=or(a,n,"vec4",i.aTex),this.pointAPointBBuffer=or(a,n,"vec4",i.aPointAPointB),this.pointCPointDBuffer=or(a,n,"vec4",i.aPointCPointD),this.lineWidthBuffer=or(a,n,"vec2",i.aLineWidth),this.colorBuffer=or(a,n,"vec4",i.aColor),this.cornerRadiusBuffer=or(a,n,"vec4",i.aCornerRadius),this.borderColorBuffer=or(a,n,"vec4",i.aBorderColor),a.bindVertexArray(null),s}},{key:"buffers",get:function(){var r=this;return this._buffers||(this._buffers=Object.keys(this).filter(function(n){return Kr(n,"Buffer")}).map(function(n){return r[n]})),this._buffers}},{key:"startFrame",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ga.SCREEN;this.panZoomMatrix=r,this.renderTarget=n,this.batchDebugInfo=[],this.wrappedCount=0,this.simpleCount=0,this.startBatch()}},{key:"startBatch",value:function(){this.instanceCount=0,this.batchManager.startBatch()}},{key:"endFrame",value:function(){this.endBatch()}},{key:"_isVisible",value:function(r,n){return r.visible()?n&&n.isVisible?n.isVisible(r):!0:!1}},{key:"drawTexture",value:function(r,n,a){var i=this.atlasManager,s=this.batchManager,o=i.getRenderTypeOpts(a);if(this._isVisible(r,o)&&!(r.isEdge()&&!this._isValidEdge(r))){if(this.renderTarget.picking&&o.getTexPickingMode){var u=o.getTexPickingMode(r);if(u===Es.IGNORE)return;if(u==Es.USE_BB){this.drawPickingRectangle(r,n,a);return}}var l=i.getAtlasInfo(r,a),f=$t(l),c;try{for(f.s();!(c=f.n()).done;){var v=c.value,h=v.atlas,d=v.tex1,p=v.tex2;s.canAddToCurrentBatch(h)||this.endBatch();for(var g=s.getAtlasIndexForBatch(h),y=0,m=[[d,!0],[p,!1]];y<m.length;y++){var b=st(m[y],2),w=b[0],E=b[1];if(w.w!=0){var T=this.instanceCount;this.vertTypeBuffer.getView(T)[0]=Vu;var x=this.indexBuffer.getView(T);$n(n,x);var S=this.atlasIdBuffer.getView(T);S[0]=g;var D=this.texBuffer.getView(T);D[0]=w.x,D[1]=w.y,D[2]=w.w,D[3]=w.h;var A=this.transformBuffer.getMatrixView(T);this.setTransformMatrix(r,A,o,v,E),this.instanceCount++,E||this.wrappedCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}}}catch(k){f.e(k)}finally{f.f()}}}},{key:"setTransformMatrix",value:function(r,n,a,i){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,o=0;if(a.shapeProps&&a.shapeProps.padding&&(o=r.pstyle(a.shapeProps.padding).pfValue),i){var u=i.bb,l=i.tex1,f=i.tex2,c=l.w/(l.w+f.w);s||(c=1-c);var v=this._getAdjustedBB(u,o,s,c);this._applyTransformMatrix(n,v,a,r)}else{var h=a.getBoundingBox(r),d=this._getAdjustedBB(h,o,!0,1);this._applyTransformMatrix(n,d,a,r)}}},{key:"_applyTransformMatrix",value:function(r,n,a,i){var s,o;md(r);var u=a.getRotation?a.getRotation(i):0;if(u!==0){var l=a.getRotationPoint(i),f=l.x,c=l.y;ts(r,r,[f,c]),bd(r,r,u);var v=a.getRotationOffset(i);s=v.x+(n.xOffset||0),o=v.y+(n.yOffset||0)}else s=n.x1,o=n.y1;ts(r,r,[s,o]),ml(r,r,[n.w,n.h])}},{key:"_getAdjustedBB",value:function(r,n,a,i){var s=r.x1,o=r.y1,u=r.w,l=r.h,f=r.yOffset;n&&(s-=n,o-=n,u+=2*n,l+=2*n);var c=0,v=u*i;return a&&i<1?u=v:!a&&i<1&&(c=u-v,s+=c,u=v),{x1:s,y1:o,w:u,h:l,xOffset:c,yOffset:f}}},{key:"drawPickingRectangle",value:function(r,n,a){var i=this.atlasManager.getRenderTypeOpts(a),s=this.instanceCount;this.vertTypeBuffer.getView(s)[0]=Un;var o=this.indexBuffer.getView(s);$n(n,o);var u=this.colorBuffer.getView(s);yn([0,0,0],1,u);var l=this.transformBuffer.getMatrixView(s);this.setTransformMatrix(r,l,i),this.simpleCount++,this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}},{key:"drawNode",value:function(r,n,a){var i=this.simpleShapeOptions.get(a);if(this._isVisible(r,i)){var s=i.shapeProps,o=this._getVertTypeForShape(r,s.shape);if(o===void 0||i.isSimple&&!i.isSimple(r)){this.drawTexture(r,n,a);return}var u=this.instanceCount;if(this.vertTypeBuffer.getView(u)[0]=o,o===Vi||o===Aa){var l=i.getBoundingBox(r),f=this._getCornerRadius(r,s.radius,l),c=this.cornerRadiusBuffer.getView(u);c[0]=f,c[1]=f,c[2]=f,c[3]=f,o===Aa&&(c[0]=0,c[2]=0)}var v=this.indexBuffer.getView(u);$n(n,v);var h=r.pstyle(s.color).value,d=r.pstyle(s.opacity).value,p=this.colorBuffer.getView(u);yn(h,d,p);var g=this.lineWidthBuffer.getView(u);if(g[0]=0,g[1]=0,s.border){var y=r.pstyle("border-width").value;if(y>0){var m=r.pstyle("border-color").value,b=r.pstyle("border-opacity").value,w=this.borderColorBuffer.getView(u);yn(m,b,w);var E=r.pstyle("border-position").value;if(E==="inside")g[0]=0,g[1]=-y;else if(E==="outside")g[0]=y,g[1]=0;else{var T=y/2;g[0]=T,g[1]=-T}}}var x=this.transformBuffer.getMatrixView(u);this.setTransformMatrix(r,x,i),this.simpleCount++,this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}},{key:"_getVertTypeForShape",value:function(r,n){var a=r.pstyle(n).value;switch(a){case"rectangle":return Un;case"ellipse":return ka;case"roundrectangle":case"round-rectangle":return Vi;case"bottom-round-rectangle":return Aa;default:return}}},{key:"_getCornerRadius",value:function(r,n,a){var i=a.w,s=a.h;if(r.pstyle(n).value==="auto")return nn(i,s);var o=r.pstyle(n).pfValue,u=i/2,l=s/2;return Math.min(o,l,u)}},{key:"drawEdgeArrow",value:function(r,n,a){if(r.visible()){var i=r._private.rscratch,s,o,u;if(a==="source"?(s=i.arrowStartX,o=i.arrowStartY,u=i.srcArrowAngle):(s=i.arrowEndX,o=i.arrowEndY,u=i.tgtArrowAngle),!(isNaN(s)||s==null||isNaN(o)||o==null||isNaN(u)||u==null)){var l=r.pstyle(a+"-arrow-shape").value;if(l!=="none"){var f=r.pstyle(a+"-arrow-color").value,c=r.pstyle("opacity").value,v=r.pstyle("line-opacity").value,h=c*v,d=r.pstyle("width").pfValue,p=r.pstyle("arrow-scale").value,g=this.r.getArrowWidth(d,p),y=this.instanceCount,m=this.transformBuffer.getMatrixView(y);md(m),ts(m,m,[s,o]),ml(m,m,[g,g]),bd(m,m,u),this.vertTypeBuffer.getView(y)[0]=qu;var b=this.indexBuffer.getView(y);$n(n,b);var w=this.colorBuffer.getView(y);yn(f,h,w),this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}}}},{key:"drawEdgeLine",value:function(r,n){if(r.visible()){var a=this._getEdgePoints(r);if(a){var i=r.pstyle("opacity").value,s=r.pstyle("line-opacity").value,o=r.pstyle("width").pfValue,u=r.pstyle("line-color").value,l=i*s;if(a.length/2+this.instanceCount>this.maxInstances&&this.endBatch(),a.length==4){var f=this.instanceCount;this.vertTypeBuffer.getView(f)[0]=wd;var c=this.indexBuffer.getView(f);$n(n,c);var v=this.colorBuffer.getView(f);yn(u,l,v);var h=this.lineWidthBuffer.getView(f);h[0]=o;var d=this.pointAPointBBuffer.getView(f);d[0]=a[0],d[1]=a[1],d[2]=a[2],d[3]=a[3],this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}else for(var p=0;p<a.length-2;p+=2){var g=this.instanceCount;this.vertTypeBuffer.getView(g)[0]=xd;var y=this.indexBuffer.getView(g);$n(n,y);var m=this.colorBuffer.getView(g);yn(u,l,m);var b=this.lineWidthBuffer.getView(g);b[0]=o;var w=a[p-2],E=a[p-1],T=a[p],x=a[p+1],S=a[p+2],D=a[p+3],A=a[p+4],k=a[p+5];p==0&&(w=2*T-S+.001,E=2*x-D+.001),p==a.length-4&&(A=2*S-T+.001,k=2*D-x+.001);var R=this.pointAPointBBuffer.getView(g);R[0]=w,R[1]=E,R[2]=T,R[3]=x;var M=this.pointCPointDBuffer.getView(g);M[0]=S,M[1]=D,M[2]=A,M[3]=k,this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}}}},{key:"_isValidEdge",value:function(r){var n=r._private.rscratch;return!(n.badLine||n.allpts==null||isNaN(n.allpts[0]))}},{key:"_getEdgePoints",value:function(r){var n=r._private.rscratch;if(this._isValidEdge(r)){var a=n.allpts;if(a.length==4)return a;var i=this._getNumSegments(r);return this._getCurveSegmentPoints(a,i)}}},{key:"_getNumSegments",value:function(r){var n=15;return Math.min(Math.max(n,5),this.maxInstances)}},{key:"_getCurveSegmentPoints",value:function(r,n){if(r.length==4)return r;for(var a=Array((n+1)*2),i=0;i<=n;i++)if(i==0)a[0]=r[0],a[1]=r[1];else if(i==n)a[i*2]=r[r.length-2],a[i*2+1]=r[r.length-1];else{var s=i/n;this._setCurvePoint(r,s,a,i*2)}return a}},{key:"_setCurvePoint",value:function(r,n,a,i){if(r.length<=2)a[i]=r[0],a[i+1]=r[1];else{for(var s=Array(r.length-2),o=0;o<s.length;o+=2){var u=(1-n)*r[o]+n*r[o+2],l=(1-n)*r[o+1]+n*r[o+3];s[o]=u,s[o+1]=l}return this._setCurvePoint(s,n,a,i)}}},{key:"endBatch",value:function(){var r=this.gl,n=this.vao,a=this.vertexCount,i=this.instanceCount;if(i!==0){var s=this.renderTarget.picking?this.pickingProgram:this.program;r.useProgram(s),r.bindVertexArray(n);var o=$t(this.buffers),u;try{for(o.s();!(u=o.n()).done;){var l=u.value;l.bufferSubData(i)}}catch(d){o.e(d)}finally{o.f()}for(var f=this.batchManager.getAtlases(),c=0;c<f.length;c++)f[c].bufferIfNeeded(r);for(var v=0;v<f.length;v++)r.activeTexture(r.TEXTURE0+v),r.bindTexture(r.TEXTURE_2D,f[v].texture),r.uniform1i(s.uTextures[v],v);r.uniform1f(s.uZoom,XE(this.r)),r.uniformMatrix3fv(s.uPanZoomMatrix,!1,this.panZoomMatrix),r.uniform1i(s.uAtlasSize,this.batchManager.getAtlasSize());var h=yn(this.bgColor,1);r.uniform4fv(s.uBGColor,h),r.drawArraysInstanced(r.TRIANGLES,0,a,i),r.bindVertexArray(null),r.bindTexture(r.TEXTURE_2D,null),this.debug&&this.batchDebugInfo.push({count:i,atlasCount:f.length}),this.startBatch()}}},{key:"getDebugInfo",value:function(){var r=this.atlasManager.getDebugInfo(),n=r.reduce(function(s,o){return s+o.atlasCount},0),a=this.batchDebugInfo,i=a.reduce(function(s,o){return s+o.count},0);return{atlasInfo:r,totalAtlases:n,wrappedCount:this.wrappedCount,simpleCount:this.simpleCount,batchCount:a.length,batchInfo:a,totalInstances:i}}}])})(),vp={};vp.initWebgl=function(t,e){var r=this,n=r.data.contexts[r.WEBGL];t.bgColor=yC(r),t.webglTexSize=Math.min(t.webglTexSize,n.getParameter(n.MAX_TEXTURE_SIZE)),t.webglTexRows=Math.min(t.webglTexRows,54),t.webglTexRowsNodes=Math.min(t.webglTexRowsNodes,54),t.webglBatchSize=Math.min(t.webglBatchSize,16384),t.webglTexPerBatch=Math.min(t.webglTexPerBatch,n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS)),r.webglDebug=t.webglDebug,r.webglDebugShowAtlases=t.webglDebugShowAtlases,r.pickingFrameBuffer=aC(n),r.pickingFrameBuffer.needsDraw=!0,r.drawing=new pC(r,n,t);var a=function(c){return function(v){return r.getTextAngle(v,c)}},i=function(c){return function(v){var h=v.pstyle(c);return h&&h.value}},s=function(c){return function(v){return v.pstyle("".concat(c,"-opacity")).value>0}},o=function(c){var v=c.pstyle("text-events").strValue==="yes";return v?Es.USE_BB:Es.IGNORE},u=function(c){var v=c.position(),h=v.x,d=v.y,p=c.outerWidth(),g=c.outerHeight();return{w:p,h:g,x1:h-p/2,y1:d-g/2}};r.drawing.addAtlasCollection("node",{texRows:t.webglTexRowsNodes}),r.drawing.addAtlasCollection("label",{texRows:t.webglTexRows}),r.drawing.addTextureAtlasRenderType("node-body",{collection:"node",getKey:e.getStyleKey,getBoundingBox:e.getElementBox,drawElement:e.drawElement}),r.drawing.addSimpleShapeRenderType("node-body",{getBoundingBox:u,isSimple:QE,shapeProps:{shape:"shape",color:"background-color",opacity:"background-opacity",radius:"corner-radius",border:!0}}),r.drawing.addSimpleShapeRenderType("node-overlay",{getBoundingBox:u,isVisible:s("overlay"),shapeProps:{shape:"overlay-shape",color:"overlay-color",opacity:"overlay-opacity",padding:"overlay-padding",radius:"overlay-corner-radius"}}),r.drawing.addSimpleShapeRenderType("node-underlay",{getBoundingBox:u,isVisible:s("underlay"),shapeProps:{shape:"underlay-shape",color:"underlay-color",opacity:"underlay-opacity",padding:"underlay-padding",radius:"underlay-corner-radius"}}),r.drawing.addTextureAtlasRenderType("label",{collection:"label",getTexPickingMode:o,getKey:Hu(e.getLabelKey,null),getBoundingBox:$u(e.getLabelBox,null),drawClipped:!0,drawElement:e.drawLabel,getRotation:a(null),getRotationPoint:e.getLabelRotationPoint,getRotationOffset:e.getLabelRotationOffset,isVisible:i("label")}),r.drawing.addTextureAtlasRenderType("edge-source-label",{collection:"label",getTexPickingMode:o,getKey:Hu(e.getSourceLabelKey,"source"),getBoundingBox:$u(e.getSourceLabelBox,"source"),drawClipped:!0,drawElement:e.drawSourceLabel,getRotation:a("source"),getRotationPoint:e.getSourceLabelRotationPoint,getRotationOffset:e.getSourceLabelRotationOffset,isVisible:i("source-label")}),r.drawing.addTextureAtlasRenderType("edge-target-label",{collection:"label",getTexPickingMode:o,getKey:Hu(e.getTargetLabelKey,"target"),getBoundingBox:$u(e.getTargetLabelBox,"target"),drawClipped:!0,drawElement:e.drawTargetLabel,getRotation:a("target"),getRotationPoint:e.getTargetLabelRotationPoint,getRotationOffset:e.getTargetLabelRotationOffset,isVisible:i("target-label")});var l=pi(function(){console.log("garbage collect flag set"),r.data.gc=!0},1e4);r.onUpdateEleCalcs(function(f,c){var v=!1;c&&c.length>0&&(v|=r.drawing.invalidate(c)),v&&l()}),mC(r)};function yC(t){var e=t.cy.container(),r=e&&e.style&&e.style.backgroundColor||"white";return Vh(r)}function dp(t,e){var r=t._private.rscratch;return qt(r,"labelWrapCachedLines",e)||[]}var Hu=function(e,r){return function(n){var a=e(n),i=dp(n,r);return i.length>1?i.map(function(s,o){return"".concat(a,"_").concat(o)}):a}},$u=function(e,r){return function(n,a){var i=e(n);if(typeof a=="string"){var s=a.indexOf("_");if(s>0){var o=Number(a.substring(s+1)),u=dp(n,r),l=i.h/u.length,f=l*o,c=i.y1+f;return{x1:i.x1,w:i.w,y1:c,h:l,yOffset:f}}}return i}};function mC(t){{var e=t.render;t.render=function(i){i=i||{};var s=t.cy;t.webgl&&(s.zoom()>ip?(bC(t),e.call(t,i)):(wC(t),gp(t,i,Ga.SCREEN)))}}{var r=t.matchCanvasSize;t.matchCanvasSize=function(i){r.call(t,i),t.pickingFrameBuffer.setFramebufferAttachmentSizes(t.canvasWidth,t.canvasHeight),t.pickingFrameBuffer.needsDraw=!0}}t.findNearestElements=function(i,s,o,u){return PC(t,i,s)};{var n=t.invalidateCachedZSortedEles;t.invalidateCachedZSortedEles=function(){n.call(t),t.pickingFrameBuffer.needsDraw=!0}}{var a=t.notify;t.notify=function(i,s){a.call(t,i,s),i==="viewport"||i==="bounds"?t.pickingFrameBuffer.needsDraw=!0:i==="background"&&t.drawing.invalidate(s,{type:"node-body"})}}}function bC(t){var e=t.data.contexts[t.WEBGL];e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT)}function wC(t){var e=function(n){n.save(),n.setTransform(1,0,0,1,0,0),n.clearRect(0,0,t.canvasWidth,t.canvasHeight),n.restore()};e(t.data.contexts[t.NODE]),e(t.data.contexts[t.DRAG])}function xC(t){var e=t.canvasWidth,r=t.canvasHeight,n=cf(t),a=n.pan,i=n.zoom,s=zu();ts(s,s,[a.x,a.y]),ml(s,s,[i,i]);var o=zu();sC(o,e,r);var u=zu();return iC(u,o,s),u}function hp(t,e){var r=t.canvasWidth,n=t.canvasHeight,a=cf(t),i=a.pan,s=a.zoom;e.setTransform(1,0,0,1,0,0),e.clearRect(0,0,r,n),e.translate(i.x,i.y),e.scale(s,s)}function EC(t,e){t.drawSelectionRectangle(e,function(r){return hp(t,r)})}function CC(t){var e=t.data.contexts[t.NODE];e.save(),hp(t,e),e.strokeStyle="rgba(0, 0, 0, 0.3)",e.beginPath(),e.moveTo(-1e3,0),e.lineTo(1e3,0),e.stroke(),e.beginPath(),e.moveTo(0,-1e3),e.lineTo(0,1e3),e.stroke(),e.restore()}function TC(t){var e=function(a,i,s){for(var o=a.atlasManager.getAtlasCollection(i),u=t.data.contexts[t.NODE],l=o.atlases,f=0;f<l.length;f++){var c=l[f],v=c.canvas;if(v){var h=v.width,d=v.height,p=h*f,g=v.height*s,y=.4;u.save(),u.scale(y,y),u.drawImage(v,p,g),u.strokeStyle="black",u.rect(p,g,h,d),u.stroke(),u.restore()}}},r=0;e(t.drawing,"node",r++),e(t.drawing,"label",r++)}function SC(t,e,r,n,a){var i,s,o,u,l=cf(t),f=l.pan,c=l.zoom;{var v=ZE(t,f,c,e,r),h=st(v,2),d=h[0],p=h[1],g=6;i=d-g/2,s=p-g/2,o=g,u=g}if(o===0||u===0)return[];var y=t.data.contexts[t.WEBGL];y.bindFramebuffer(y.FRAMEBUFFER,t.pickingFrameBuffer),t.pickingFrameBuffer.needsDraw&&(y.viewport(0,0,y.canvas.width,y.canvas.height),gp(t,null,Ga.PICKING),t.pickingFrameBuffer.needsDraw=!1);var m=o*u,b=new Uint8Array(m*4);y.readPixels(i,s,o,u,y.RGBA,y.UNSIGNED_BYTE,b),y.bindFramebuffer(y.FRAMEBUFFER,null);for(var w=new Set,E=0;E<m;E++){var T=b.slice(E*4,E*4+4),x=jE(T)-1;x>=0&&w.add(x)}return w}function PC(t,e,r){var n=SC(t,e,r),a=t.getCachedZSortedEles(),i,s,o=$t(n),u;try{for(o.s();!(u=o.n()).done;){var l=u.value,f=a[l];if(!i&&f.isNode()&&(i=f),!s&&f.isEdge()&&(s=f),i&&s)break}}catch(c){o.e(c)}finally{o.f()}return[i,s].filter(Boolean)}function Uu(t,e,r){var n=t.drawing;e+=1,r.isNode()?(n.drawNode(r,e,"node-underlay"),n.drawNode(r,e,"node-body"),n.drawTexture(r,e,"label"),n.drawNode(r,e,"node-overlay")):(n.drawEdgeLine(r,e),n.drawEdgeArrow(r,e,"source"),n.drawEdgeArrow(r,e,"target"),n.drawTexture(r,e,"label"),n.drawTexture(r,e,"edge-source-label"),n.drawTexture(r,e,"edge-target-label"))}function gp(t,e,r){var n;t.webglDebug&&(n=performance.now());var a=t.drawing,i=0;if(r.screen&&t.data.canvasNeedsRedraw[t.SELECT_BOX]&&EC(t,e),t.data.canvasNeedsRedraw[t.NODE]||r.picking){var s=t.data.contexts[t.WEBGL];r.screen?(s.clearColor(0,0,0,0),s.enable(s.BLEND),s.blendFunc(s.ONE,s.ONE_MINUS_SRC_ALPHA)):s.disable(s.BLEND),s.clear(s.COLOR_BUFFER_BIT|s.DEPTH_BUFFER_BIT),s.viewport(0,0,s.canvas.width,s.canvas.height);var o=xC(t),u=t.getCachedZSortedEles();if(i=u.length,a.startFrame(o,r),r.screen){for(var l=0;l<u.nondrag.length;l++)Uu(t,l,u.nondrag[l]);for(var f=0;f<u.drag.length;f++)Uu(t,f,u.drag[f])}else if(r.picking)for(var c=0;c<u.length;c++)Uu(t,c,u[c]);a.endFrame(),r.screen&&t.webglDebugShowAtlases&&(CC(t),TC(t)),t.data.canvasNeedsRedraw[t.NODE]=!1,t.data.canvasNeedsRedraw[t.DRAG]=!1}if(t.webglDebug){var v=performance.now(),h=!1,d=Math.ceil(v-n),p=a.getDebugInfo(),g=["".concat(i," elements"),"".concat(p.totalInstances," instances"),"".concat(p.batchCount," batches"),"".concat(p.totalAtlases," atlases"),"".concat(p.wrappedCount," wrapped textures"),"".concat(p.simpleCount," simple shapes")].join(", ");if(h)console.log("WebGL (".concat(r.name,") - time ").concat(d,"ms, ").concat(g));else{console.log("WebGL (".concat(r.name,") - frame time ").concat(d,"ms")),console.log("Totals:"),console.log("  ".concat(g)),console.log("Texture Atlases Used:");var y=p.atlasInfo,m=$t(y),b;try{for(m.s();!(b=m.n()).done;){var w=b.value;console.log("  ".concat(w.type,": ").concat(w.keyCount," keys, ").concat(w.atlasCount," atlases"))}}catch(E){m.e(E)}finally{m.f()}console.log("")}}t.data.gc&&(console.log("Garbage Collect!"),t.data.gc=!1,a.gc())}var vn={};vn.drawPolygonPath=function(t,e,r,n,a,i){var s=n/2,o=a/2;t.beginPath&&t.beginPath(),t.moveTo(e+s*i[0],r+o*i[1]);for(var u=1;u<i.length/2;u++)t.lineTo(e+s*i[u*2],r+o*i[u*2+1]);t.closePath()};vn.drawRoundPolygonPath=function(t,e,r,n,a,i,s){s.forEach(function(o){return Zg(t,o)}),t.closePath()};vn.drawRoundRectanglePath=function(t,e,r,n,a,i){var s=n/2,o=a/2,u=i==="auto"?nn(n,a):Math.min(i,o,s);t.beginPath&&t.beginPath(),t.moveTo(e,r-o),t.arcTo(e+s,r-o,e+s,r,u),t.arcTo(e+s,r+o,e,r+o,u),t.arcTo(e-s,r+o,e-s,r,u),t.arcTo(e-s,r-o,e,r-o,u),t.lineTo(e,r-o),t.closePath()};vn.drawBottomRoundRectanglePath=function(t,e,r,n,a,i){var s=n/2,o=a/2,u=i==="auto"?nn(n,a):i;t.beginPath&&t.beginPath(),t.moveTo(e,r-o),t.lineTo(e+s,r-o),t.lineTo(e+s,r),t.arcTo(e+s,r+o,e,r+o,u),t.arcTo(e-s,r+o,e-s,r,u),t.lineTo(e-s,r-o),t.lineTo(e,r-o),t.closePath()};vn.drawCutRectanglePath=function(t,e,r,n,a,i,s){var o=n/2,u=a/2,l=s==="auto"?Zl():s;t.beginPath&&t.beginPath(),t.moveTo(e-o+l,r-u),t.lineTo(e+o-l,r-u),t.lineTo(e+o,r-u+l),t.lineTo(e+o,r+u-l),t.lineTo(e+o-l,r+u),t.lineTo(e-o+l,r+u),t.lineTo(e-o,r+u-l),t.lineTo(e-o,r-u+l),t.closePath()};vn.drawBarrelPath=function(t,e,r,n,a){var i=n/2,s=a/2,o=e-i,u=e+i,l=r-s,f=r+s,c=al(n,a),v=c.widthOffset,h=c.heightOffset,d=c.ctrlPtOffsetPct*v;t.beginPath&&t.beginPath(),t.moveTo(o,l+h),t.lineTo(o,f-h),t.quadraticCurveTo(o+d,f,o+v,f),t.lineTo(u-v,f),t.quadraticCurveTo(u-d,f,u,f-h),t.lineTo(u,l+h),t.quadraticCurveTo(u-d,l,u-v,l),t.lineTo(o+v,l),t.quadraticCurveTo(o+d,l,o,l+h),t.closePath()};var Ed=Math.sin(0),Cd=Math.cos(0),bl={},wl={},pp=Math.PI/40;for(var Gn=0*Math.PI;Gn<2*Math.PI;Gn+=pp)bl[Gn]=Math.sin(Gn),wl[Gn]=Math.cos(Gn);vn.drawEllipsePath=function(t,e,r,n,a){if(t.beginPath&&t.beginPath(),t.ellipse)t.ellipse(e,r,n/2,a/2,0,0,2*Math.PI);else for(var i,s,o=n/2,u=a/2,l=0*Math.PI;l<2*Math.PI;l+=pp)i=e-o*bl[l]*Ed+o*wl[l]*Cd,s=r+u*wl[l]*Ed+u*bl[l]*Cd,l===0?t.moveTo(i,s):t.lineTo(i,s);t.closePath()};var Ei={};Ei.createBuffer=function(t,e){var r=document.createElement("canvas");return r.width=t,r.height=e,[r,r.getContext("2d")]};Ei.bufferCanvasImage=function(t){var e=this.cy,r=e.mutableElements(),n=r.boundingBox(),a=this.findContainerClientCoords(),i=t.full?Math.ceil(n.w):a[2],s=t.full?Math.ceil(n.h):a[3],o=he(t.maxWidth)||he(t.maxHeight),u=this.getPixelRatio(),l=1;if(t.scale!==void 0)i*=t.scale,s*=t.scale,l=t.scale;else if(o){var f=1/0,c=1/0;he(t.maxWidth)&&(f=l*t.maxWidth/i),he(t.maxHeight)&&(c=l*t.maxHeight/s),l=Math.min(f,c),i*=l,s*=l}o||(i*=u,s*=u,l*=u);var v=document.createElement("canvas");v.width=i,v.height=s,v.style.width=i+"px",v.style.height=s+"px";var h=v.getContext("2d");if(i>0&&s>0){h.clearRect(0,0,i,s),h.globalCompositeOperation="source-over";var d=this.getCachedZSortedEles();if(t.full)h.translate(-n.x1*l,-n.y1*l),h.scale(l,l),this.drawElements(h,d),h.scale(1/l,1/l),h.translate(n.x1*l,n.y1*l);else{var p=e.pan(),g={x:p.x*l,y:p.y*l};l*=e.zoom(),h.translate(g.x,g.y),h.scale(l,l),this.drawElements(h,d),h.scale(1/l,1/l),h.translate(-g.x,-g.y)}t.bg&&(h.globalCompositeOperation="destination-over",h.fillStyle=t.bg,h.rect(0,0,i,s),h.fill())}return v};function DC(t,e){for(var r=atob(t),n=new ArrayBuffer(r.length),a=new Uint8Array(n),i=0;i<r.length;i++)a[i]=r.charCodeAt(i);return new Blob([n],{type:e})}function Td(t){var e=t.indexOf(",");return t.substr(e+1)}function yp(t,e,r){var n=function(){return e.toDataURL(r,t.quality)};switch(t.output){case"blob-promise":return new va(function(a,i){try{e.toBlob(function(s){s!=null?a(s):i(new Error("`canvas.toBlob()` sent a null value in its callback"))},r,t.quality)}catch(s){i(s)}});case"blob":return DC(Td(n()),r);case"base64":return Td(n());default:return n()}}Ei.png=function(t){return yp(t,this.bufferCanvasImage(t),"image/png")};Ei.jpg=function(t){return yp(t,this.bufferCanvasImage(t),"image/jpeg")};var mp={};mp.nodeShapeImpl=function(t,e,r,n,a,i,s,o){switch(t){case"ellipse":return this.drawEllipsePath(e,r,n,a,i);case"polygon":return this.drawPolygonPath(e,r,n,a,i,s);case"round-polygon":return this.drawRoundPolygonPath(e,r,n,a,i,s,o);case"roundrectangle":case"round-rectangle":return this.drawRoundRectanglePath(e,r,n,a,i,o);case"cutrectangle":case"cut-rectangle":return this.drawCutRectanglePath(e,r,n,a,i,s,o);case"bottomroundrectangle":case"bottom-round-rectangle":return this.drawBottomRoundRectanglePath(e,r,n,a,i,o);case"barrel":return this.drawBarrelPath(e,r,n,a,i)}};var AC=bp,Le=bp.prototype;Le.CANVAS_LAYERS=3;Le.SELECT_BOX=0;Le.DRAG=1;Le.NODE=2;Le.WEBGL=3;Le.CANVAS_TYPES=["2d","2d","2d","webgl2"];Le.BUFFER_COUNT=3;Le.TEXTURE_BUFFER=0;Le.MOTIONBLUR_BUFFER_NODE=1;Le.MOTIONBLUR_BUFFER_DRAG=2;function bp(t){var e=this,r=e.cy.window(),n=r.document;t.webgl&&(Le.CANVAS_LAYERS=e.CANVAS_LAYERS=4,console.log("webgl rendering enabled")),e.data={canvases:new Array(Le.CANVAS_LAYERS),contexts:new Array(Le.CANVAS_LAYERS),canvasNeedsRedraw:new Array(Le.CANVAS_LAYERS),bufferCanvases:new Array(Le.BUFFER_COUNT),bufferContexts:new Array(Le.CANVAS_LAYERS)};var a="-webkit-tap-highlight-color",i="rgba(0,0,0,0)";e.data.canvasContainer=n.createElement("div");var s=e.data.canvasContainer.style;e.data.canvasContainer.style[a]=i,s.position="relative",s.zIndex="0",s.overflow="hidden";var o=t.cy.container();o.appendChild(e.data.canvasContainer),o.style[a]=i;var u={"-webkit-user-select":"none","-moz-user-select":"-moz-none","user-select":"none","-webkit-tap-highlight-color":"rgba(0,0,0,0)","outline-style":"none"};E0()&&(u["-ms-touch-action"]="none",u["touch-action"]="none");for(var l=0;l<Le.CANVAS_LAYERS;l++){var f=e.data.canvases[l]=n.createElement("canvas"),c=Le.CANVAS_TYPES[l];e.data.contexts[l]=f.getContext(c),e.data.contexts[l]||je("Could not create canvas of type "+c),Object.keys(u).forEach(function(ue){f.style[ue]=u[ue]}),f.style.position="absolute",f.setAttribute("data-id","layer"+l),f.style.zIndex=String(Le.CANVAS_LAYERS-l),e.data.canvasContainer.appendChild(f),e.data.canvasNeedsRedraw[l]=!1}e.data.topCanvas=e.data.canvases[0],e.data.canvases[Le.NODE].setAttribute("data-id","layer"+Le.NODE+"-node"),e.data.canvases[Le.SELECT_BOX].setAttribute("data-id","layer"+Le.SELECT_BOX+"-selectbox"),e.data.canvases[Le.DRAG].setAttribute("data-id","layer"+Le.DRAG+"-drag"),e.data.canvases[Le.WEBGL]&&e.data.canvases[Le.WEBGL].setAttribute("data-id","layer"+Le.WEBGL+"-webgl");for(var l=0;l<Le.BUFFER_COUNT;l++)e.data.bufferCanvases[l]=n.createElement("canvas"),e.data.bufferContexts[l]=e.data.bufferCanvases[l].getContext("2d"),e.data.bufferCanvases[l].style.position="absolute",e.data.bufferCanvases[l].setAttribute("data-id","buffer"+l),e.data.bufferCanvases[l].style.zIndex=String(-l-1),e.data.bufferCanvases[l].style.visibility="hidden";e.pathsEnabled=!0;var v=Ot(),h=function(q){return{x:(q.x1+q.x2)/2,y:(q.y1+q.y2)/2}},d=function(q){return{x:-q.w/2,y:-q.h/2}},p=function(q){var $=q[0]._private,C=$.oldBackgroundTimestamp===$.backgroundTimestamp;return!C},g=function(q){return q[0]._private.nodeKey},y=function(q){return q[0]._private.labelStyleKey},m=function(q){return q[0]._private.sourceLabelStyleKey},b=function(q){return q[0]._private.targetLabelStyleKey},w=function(q,$,C,B,_){return e.drawElement(q,$,C,!1,!1,_)},E=function(q,$,C,B,_){return e.drawElementText(q,$,C,B,"main",_)},T=function(q,$,C,B,_){return e.drawElementText(q,$,C,B,"source",_)},x=function(q,$,C,B,_){return e.drawElementText(q,$,C,B,"target",_)},S=function(q){return q.boundingBox(),q[0]._private.bodyBounds},D=function(q){return q.boundingBox(),q[0]._private.labelBounds.main||v},A=function(q){return q.boundingBox(),q[0]._private.labelBounds.source||v},k=function(q){return q.boundingBox(),q[0]._private.labelBounds.target||v},R=function(q,$){return $},M=function(q){return h(S(q))},L=function(q,$,C){var B=q?q+"-":"";return{x:$.x+C.pstyle(B+"text-margin-x").pfValue,y:$.y+C.pstyle(B+"text-margin-y").pfValue}},N=function(q,$,C){var B=q[0]._private.rscratch;return{x:B[$],y:B[C]}},O=function(q){return L("",N(q,"labelX","labelY"),q)},I=function(q){return L("source",N(q,"sourceLabelX","sourceLabelY"),q)},F=function(q){return L("target",N(q,"targetLabelX","targetLabelY"),q)},H=function(q){return d(S(q))},G=function(q){return d(A(q))},z=function(q){return d(k(q))},V=function(q){var $=D(q),C=d(D(q));if(q.isNode()){switch(q.pstyle("text-halign").value){case"left":C.x=-$.w-($.leftPad||0);break;case"right":C.x=-($.rightPad||0);break}switch(q.pstyle("text-valign").value){case"top":C.y=-$.h-($.topPad||0);break;case"bottom":C.y=-($.botPad||0);break}}return C},re=e.data.eleTxrCache=new La(e,{getKey:g,doesEleInvalidateKey:p,drawElement:w,getBoundingBox:S,getRotationPoint:M,getRotationOffset:H,allowEdgeTxrCaching:!1,allowParentTxrCaching:!1}),ie=e.data.lblTxrCache=new La(e,{getKey:y,drawElement:E,getBoundingBox:D,getRotationPoint:O,getRotationOffset:V,isVisible:R}),ne=e.data.slbTxrCache=new La(e,{getKey:m,drawElement:T,getBoundingBox:A,getRotationPoint:I,getRotationOffset:G,isVisible:R}),oe=e.data.tlbTxrCache=new La(e,{getKey:b,drawElement:x,getBoundingBox:k,getRotationPoint:F,getRotationOffset:z,isVisible:R}),ve=e.data.lyrTxrCache=new sp(e);e.onUpdateEleCalcs(function(q,$){re.invalidateElements($),ie.invalidateElements($),ne.invalidateElements($),oe.invalidateElements($),ve.invalidateElements($);for(var C=0;C<$.length;C++){var B=$[C]._private;B.oldBackgroundTimestamp=B.backgroundTimestamp}});var ge=function(q){for(var $=0;$<q.length;$++)ve.enqueueElementRefinement(q[$].ele)};re.onDequeue(ge),ie.onDequeue(ge),ne.onDequeue(ge),oe.onDequeue(ge),t.webgl&&e.initWebgl(t,{getStyleKey:g,getLabelKey:y,getSourceLabelKey:m,getTargetLabelKey:b,drawElement:w,drawLabel:E,drawSourceLabel:T,drawTargetLabel:x,getElementBox:S,getLabelBox:D,getSourceLabelBox:A,getTargetLabelBox:k,getElementRotationPoint:M,getElementRotationOffset:H,getLabelRotationPoint:O,getSourceLabelRotationPoint:I,getTargetLabelRotationPoint:F,getLabelRotationOffset:V,getSourceLabelRotationOffset:G,getTargetLabelRotationOffset:z})}Le.redrawHint=function(t,e){var r=this;switch(t){case"eles":r.data.canvasNeedsRedraw[Le.NODE]=e;break;case"drag":r.data.canvasNeedsRedraw[Le.DRAG]=e;break;case"select":r.data.canvasNeedsRedraw[Le.SELECT_BOX]=e;break;case"gc":r.data.gc=!0;break}};var kC=typeof Path2D<"u";Le.path2dEnabled=function(t){if(t===void 0)return this.pathsEnabled;this.pathsEnabled=!!t};Le.usePaths=function(){return kC&&this.pathsEnabled};Le.setImgSmoothing=function(t,e){t.imageSmoothingEnabled!=null?t.imageSmoothingEnabled=e:(t.webkitImageSmoothingEnabled=e,t.mozImageSmoothingEnabled=e,t.msImageSmoothingEnabled=e)};Le.getImgSmoothing=function(t){return t.imageSmoothingEnabled!=null?t.imageSmoothingEnabled:t.webkitImageSmoothingEnabled||t.mozImageSmoothingEnabled||t.msImageSmoothingEnabled};Le.makeOffscreenCanvas=function(t,e){var r;if((typeof OffscreenCanvas>"u"?"undefined":vt(OffscreenCanvas))!=="undefined")r=new OffscreenCanvas(t,e);else{var n=this.cy.window(),a=n.document;r=a.createElement("canvas"),r.width=t,r.height=e}return r};[op,wr,zr,ff,On,cn,Nt,vp,vn,Ei,mp].forEach(function(t){ke(Le,t)});var BC=[{name:"null",impl:Kg},{name:"base",impl:np},{name:"canvas",impl:AC}],RC=[{type:"layout",extensions:rE},{type:"renderer",extensions:BC}],wp={},xp={};function Ep(t,e,r){var n=r,a=function(S){Ue("Can not register `"+e+"` for `"+t+"` since `"+S+"` already exists in the prototype and can not be overridden")};if(t==="core"){if(ii.prototype[e])return a(e);ii.prototype[e]=r}else if(t==="collection"){if(wt.prototype[e])return a(e);wt.prototype[e]=r}else if(t==="layout"){for(var i=function(S){this.options=S,r.call(this,S),ze(this._private)||(this._private={}),this._private.cy=S.cy,this._private.listeners=[],this.createEmitter()},s=i.prototype=Object.create(r.prototype),o=[],u=0;u<o.length;u++){var l=o[u];s[l]=s[l]||function(){return this}}s.start&&!s.run?s.run=function(){return this.start(),this}:!s.start&&s.run&&(s.start=function(){return this.run(),this});var f=r.prototype.stop;s.stop=function(){var x=this.options;if(x&&x.animate){var S=this.animations;if(S)for(var D=0;D<S.length;D++)S[D].stop()}return f?f.call(this):this.emit("layoutstop"),this},s.destroy||(s.destroy=function(){return this}),s.cy=function(){return this._private.cy};var c=function(S){return S._private.cy},v={addEventFields:function(S,D){D.layout=S,D.cy=c(S),D.target=S},bubble:function(){return!0},parent:function(S){return c(S)}};ke(s,{createEmitter:function(){return this._private.emitter=new Ws(v,this),this},emitter:function(){return this._private.emitter},on:function(S,D){return this.emitter().on(S,D),this},one:function(S,D){return this.emitter().one(S,D),this},once:function(S,D){return this.emitter().one(S,D),this},removeListener:function(S,D){return this.emitter().removeListener(S,D),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},emit:function(S,D){return this.emitter().emit(S,D),this}}),$e.eventAliasesOn(s),n=i}else if(t==="renderer"&&e!=="null"&&e!=="base"){var h=Cp("renderer","base"),d=h.prototype,p=r,g=r.prototype,y=function(){h.apply(this,arguments),p.apply(this,arguments)},m=y.prototype;for(var b in d){var w=d[b],E=g[b]!=null;if(E)return a(b);m[b]=w}for(var T in g)m[T]=g[T];d.clientFunctions.forEach(function(x){m[x]=m[x]||function(){je("Renderer does not implement `renderer."+x+"()` on its prototype")}}),n=y}else if(t==="__proto__"||t==="constructor"||t==="prototype")return je(t+" is an illegal type to be registered, possibly lead to prototype pollutions");return qh({map:wp,keys:[t,e],value:n})}function Cp(t,e){return Hh({map:wp,keys:[t,e]})}function MC(t,e,r,n,a){return qh({map:xp,keys:[t,e,r,n],value:a})}function IC(t,e,r,n){return Hh({map:xp,keys:[t,e,r,n]})}var xl=function(){if(arguments.length===2)return Cp.apply(null,arguments);if(arguments.length===3)return Ep.apply(null,arguments);if(arguments.length===4)return IC.apply(null,arguments);if(arguments.length===5)return MC.apply(null,arguments);je("Invalid extension access syntax")};ii.prototype.extension=xl;RC.forEach(function(t){t.extensions.forEach(function(e){Ep(t.type,e.name,e.impl)})});var Cs=function(){if(!(this instanceof Cs))return new Cs;this.length=0},Rn=Cs.prototype;Rn.instanceString=function(){return"stylesheet"};Rn.selector=function(t){var e=this.length++;return this[e]={selector:t,properties:[]},this};Rn.css=function(t,e){var r=this.length-1;if(De(t))this[r].properties.push({name:t,value:e});else if(ze(t))for(var n=t,a=Object.keys(n),i=0;i<a.length;i++){var s=a[i],o=n[s];if(o!=null){var u=pt.properties[s]||pt.properties[Ns(s)];if(u!=null){var l=u.name,f=o;this[r].properties.push({name:l,value:f})}}}return this};Rn.style=Rn.css;Rn.generateStyle=function(t){var e=new pt(t);return this.appendToStyle(e)};Rn.appendToStyle=function(t){for(var e=0;e<this.length;e++){var r=this[e],n=r.selector,a=r.properties;t.selector(n);for(var i=0;i<a.length;i++){var s=a[i];t.css(s.name,s.value)}}return t};var LC="3.33.1",Mn=function(e){if(e===void 0&&(e={}),ze(e))return new ii(e);if(De(e))return xl.apply(xl,arguments)};Mn.use=function(t){var e=Array.prototype.slice.call(arguments,1);return e.unshift(Mn),t.apply(null,e),this};Mn.warnings=function(t){return Xh(t)};Mn.version=LC;Mn.stylesheet=Mn.Stylesheet=Cs;const OC={class:"workflow-editor"},NC={class:"toolbar"},FC={class:"tool-buttons"},_C={class:"editor-container"},zC={class:"graph-container"},VC={key:0,class:"property-panel"},qC={class:"property-group"},HC={class:"property-group"},$C={class:"property-group"},UC={key:0,class:"property-group"},GC={class:"property-group"},WC=nh({__name:"WorkflowEditor",setup(t){const e=_a(),r=_a(null);let n=null,a=1;const i=()=>{e.value&&(n=Mn({container:e.value,elements:[],style:[{selector:"node",style:{width:80,height:80,"background-color":"#667eea",label:"data(name)",color:"#fff","text-valign":"center","text-halign":"center","font-size":12,"font-weight":"bold","text-wrap":"wrap","text-max-width":"70px"}},{selector:'node[type = "start"]',style:{shape:"ellipse","background-color":"#4CAF50"}},{selector:'node[type = "task"]',style:{shape:"rectangle","background-color":"#2196F3"}},{selector:'node[type = "decision"]',style:{shape:"diamond","background-color":"#FF9800",width:70,height:70}},{selector:'node[type = "end"]',style:{shape:"ellipse","background-color":"#f44336"}},{selector:"node:selected",style:{"border-width":3,"border-color":"#FFD700","border-style":"solid"}},{selector:"edge",style:{width:3,"line-color":"#667eea","target-arrow-color":"#667eea","target-arrow-shape":"triangle","curve-style":"bezier"}},{selector:"edge:selected",style:{width:4,"line-color":"#FFD700","target-arrow-color":"#FFD700"}}],layout:{name:"preset"}}),s())},s=()=>{n&&(n.on("tap","node",h=>{const d=h.target;r.value={data:d.data()}}),n.on("tap",h=>{h.target===n&&(r.value=null)}),n.on("drag","node",h=>{const d=h.target;r.value&&(r.value.data.id,d.id())}))},o=h=>{if(!n)return;const g={id:`node_${a++}`,name:`${h==="start"?"":h==="task"?"":h==="decision"?"":""} ${a-1}`,type:h,status:"pending"};h==="task"&&(g.description=""),n.add({group:"nodes",data:g,position:{x:100+Math.random()*300,y:100+Math.random()*300}}),r.value={data:g}},u=()=>{if(!n||!r.value)return;const h=n.getElementById(r.value.data.id);h&&h.data(r.value.data)},l=()=>{if(!n||!r.value)return;const h=n.getElementById(r.value.data.id);h&&(h.remove(),r.value=null)},f=()=>{if(!n)return;const d={elements:n.elements().jsons(),timestamp:new Date().toISOString()};localStorage.setItem("workflowGraph",JSON.stringify(d)),alert("!")},c=()=>{if(!n)return;const h=localStorage.getItem("workflowGraph");if(h)try{const d=JSON.parse(h);n.elements().remove(),n.add(d.elements),alert("!")}catch{alert(": ")}else alert("")},v=()=>{!n||!confirm("")||(n.elements().remove(),r.value=null,a=1)};return oh(()=>{i()}),uh(()=>{n&&(n.destroy(),n=null)}),(h,d)=>(Br(),Wr("div",OC,[me("div",NC,[d[17]||(d[17]=me("h3",null,"",-1)),me("div",FC,[me("button",{onClick:d[0]||(d[0]=p=>o("start")),class:"btn btn-primary"},[...d[9]||(d[9]=[me("span",{class:"icon"},"",-1),fr("  ",-1)])]),me("button",{onClick:d[1]||(d[1]=p=>o("task")),class:"btn btn-secondary"},[...d[10]||(d[10]=[me("span",{class:"icon"},"",-1),fr("  ",-1)])]),me("button",{onClick:d[2]||(d[2]=p=>o("decision")),class:"btn btn-warning"},[...d[11]||(d[11]=[me("span",{class:"icon"},"",-1),fr(" ",-1)])]),me("button",{onClick:d[3]||(d[3]=p=>o("end")),class:"btn btn-success"},[...d[12]||(d[12]=[me("span",{class:"icon"},"",-1),fr("  ",-1)])]),d[16]||(d[16]=me("div",{class:"divider"},null,-1)),me("button",{onClick:f,class:"btn btn-info"},[...d[13]||(d[13]=[me("span",{class:"icon"},"",-1),fr("  ",-1)])]),me("button",{onClick:c,class:"btn btn-info"},[...d[14]||(d[14]=[me("span",{class:"icon"},"",-1),fr("  ",-1)])]),me("button",{onClick:v,class:"btn btn-danger"},[...d[15]||(d[15]=[me("span",{class:"icon"},"",-1),fr(" ",-1)])])])]),me("div",_C,[me("div",zC,[me("div",{ref_key:"cyContainer",ref:e,class:"cytoscape-container"},null,512)]),r.value?(Br(),Wr("div",VC,[d[26]||(d[26]=me("h4",null,"",-1)),me("div",qC,[d[18]||(d[18]=me("label",null,"ID:",-1)),xa(me("input",{"onUpdate:modelValue":d[4]||(d[4]=p=>r.value.data.id=p),readonly:""},null,512),[[ho,r.value.data.id]])]),me("div",HC,[d[19]||(d[19]=me("label",null,":",-1)),xa(me("input",{"onUpdate:modelValue":d[5]||(d[5]=p=>r.value.data.name=p),onInput:u},null,544),[[ho,r.value.data.name]])]),me("div",$C,[d[21]||(d[21]=me("label",null,":",-1)),xa(me("select",{"onUpdate:modelValue":d[6]||(d[6]=p=>r.value.data.type=p),onChange:u},[...d[20]||(d[20]=[me("option",{value:"start"},"",-1),me("option",{value:"task"},"",-1),me("option",{value:"decision"},"",-1),me("option",{value:"end"},"",-1)])],544),[[Yf,r.value.data.type]])]),r.value.data.type==="task"?(Br(),Wr("div",UC,[d[22]||(d[22]=me("label",null,":",-1)),xa(me("textarea",{"onUpdate:modelValue":d[7]||(d[7]=p=>r.value.data.description=p),onInput:u},null,544),[[ho,r.value.data.description]])])):Mf("",!0),me("div",GC,[d[24]||(d[24]=me("label",null,":",-1)),xa(me("select",{"onUpdate:modelValue":d[8]||(d[8]=p=>r.value.data.status=p),onChange:u},[...d[23]||(d[23]=[me("option",{value:"pending"},"",-1),me("option",{value:"running"},"",-1),me("option",{value:"completed"},"",-1),me("option",{value:"failed"},"",-1)])],544),[[Yf,r.value.data.status]])]),me("button",{onClick:l,class:"btn btn-danger btn-block"},[...d[25]||(d[25]=[me("span",{class:"icon"},"",-1),fr("  ",-1)])])])):Mf("",!0)])]))}}),Tp=(t,e)=>{const r=t.__vccOpts||t;for(const[n,a]of e)r[n]=a;return r},KC=Tp(WC,[["__scopeId","data-v-4cd7174f"]]),YC={class:"app"},XC={class:"main"},ZC={key:0},QC={class:"welcome-card"},JC={class:"api-status"},jC={class:"features-grid"},eT={class:"feature-icon"},tT={key:1,class:"workflow-container"},rT=nh({__name:"App",setup(t){const e=_a([{name:"",description:"",icon:""},{name:"",description:"",icon:""},{name:"",description:"",icon:""},{name:"AI",description:"AI",icon:""}]),r=_a("..."),n=_a(!1);fetch("/api-reference").then(i=>{i.ok?r.value="API":r.value="API"}).catch(()=>{r.value="API"});const a=()=>{n.value=!n.value};return(i,s)=>(Br(),Wr("div",YC,[s[4]||(s[4]=me("header",{class:"header"},[me("h1",null," FlowInOne"),me("p",{class:"subtitle"},"")],-1)),me("main",XC,[n.value?(Br(),Wr("div",tT,[me("div",{class:"workflow-header"},[s[3]||(s[3]=me("h2",null,"",-1)),me("button",{onClick:a,class:"back-button"}," ")]),gr(KC)])):(Br(),Wr("div",ZC,[me("div",QC,[s[1]||(s[1]=me("h2",null," FlowInOne",-1)),s[2]||(s[2]=me("p",null,"FlowInOne ",-1)),me("div",JC,[me("span",{class:ks(["status-indicator",{"status-ok":r.value.includes(""),"status-error":r.value.includes("")||r.value.includes("")}])},null,2),fr(" API: "+Ba(r.value),1)]),me("div",{class:"navigation-links"},[s[0]||(s[0]=me("a",{href:"/api-reference",class:"api-link"}," API ",-1)),me("button",{onClick:a,class:"workflow-button"},"")])]),me("div",jC,[(Br(!0),Wr(cr,null,Gy(e.value,o=>(Br(),Wr("div",{key:o.name,class:"feature-card"},[me("div",eT,Ba(o.icon),1),me("h3",null,Ba(o.name),1),me("p",null,Ba(o.description),1)]))),128))])]))]),s[5]||(s[5]=me("footer",{class:"footer"},[me("p",null,"FlowInOne  2026 - ")],-1))]))}}),nT=Tp(rT,[["__scopeId","data-v-b2191f94"]]);r0(nT).mount("#app");
